# examples/rust/async_example/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.16/tests/expand/naming/enum-mut.expanded.rs
@source-hash: 72712b60b635d79f
@generated: 2026-02-09T18:03:16Z

**Purpose:** Expanded code generated by the `pin-project-lite` macro for an enum with mutable projection capabilities. This is test output demonstrating how the macro transforms a simple enum into a complete pin projection implementation.

**Core Components:**

- **Original Enum** `Enum<T, U>` (L2-5): Generic enum with `Struct` variant containing `pinned: T` and `unpinned: U` fields, plus a `Unit` variant
- **Projection Enum** `EnumProj<'__pin, T, U>` (L19-28): Generated projection type where pinned field becomes `Pin<&'__pin mut T>` and unpinned becomes `&'__pin mut U`
- **Project Method** `project()` (L41-57): Core projection function that safely converts `Pin<&mut Self>` to `EnumProj`, using `get_unchecked_mut()` and `Pin::new_unchecked()` for the pinned field

**Pin Safety Infrastructure:**

- **Origin Struct** `__Origin<'__pin, T, U>` (L60-64): Phantom type encoding pin requirements - `T` is pinned, `U` is wrapped in `AlwaysUnpin`
- **Unpin Implementation** (L65-70): Conditional `Unpin` impl that depends on `PinnedFieldsOf<__Origin>` being `Unpin`
- **Drop Safety** `MustNotImplDrop` trait (L71-74): Prevents manual `Drop` implementation on the original enum to maintain pin safety

**Key Dependencies:**
- `pin_project_lite::__private::Pin` for pin projection mechanics
- `PhantomData`, `AlwaysUnpin`, `PinnedFieldsOf` for type-level pin tracking

**Safety Invariants:**
- Only pinned fields (`T`) require pin stability
- Unpinned fields (`U`) can be safely moved
- No manual `Drop` implementation allowed to prevent pin contract violations
- All projections maintain memory safety through careful unsafe code generation

**Architecture:** This demonstrates pin-project-lite's code generation strategy - creating parallel projection types with appropriate pin/unpin semantics while maintaining zero-cost abstractions.