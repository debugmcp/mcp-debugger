# examples/rust/async_example/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libc-0.2.177/src/unix/haiku/x86_64.rs
@source-hash: 09f2384474b2fcb7
@generated: 2026-02-09T18:02:23Z

## Purpose
Platform-specific FFI bindings for x86_64 Haiku OS system structures. Defines low-level CPU context and floating-point unit state structures for signal handling and system calls.

## Key Structures

**fpu_state (L4-16)**: x86_64 floating-point unit state structure containing:
- Control/status registers (control, status, tag, opcode)
- Instruction/data pointers (rip, rdp) 
- MXCSR control register and mask
- FPU register arrays (_fpreg, _xmm) and reserved space

**xstate_hdr (L18-22)**: Extended state header for XSAVE instruction format:
- Feature bit vectors (bv, xcomp_bv)
- Reserved padding for alignment

**savefpu (L24-28)**: Complete FPU save area combining:
- FXSAVE state (fp_fxsave: fpu_state)
- Extended state header (fp_xstate: xstate_hdr)  
- YMM register high bits (_fp_ymm)

**mcontext_t (L30-50)**: Machine context for signal handlers containing:
- All x86_64 general-purpose registers (rax through r15, rsp, rip)
- CPU flags (rflags)
- Complete FPU state (fpu: savefpu)

**ucontext_t (L52-57)**: POSIX signal context structure:
- Linked context chain (uc_link)
- Signal mask, stack info, machine context

## Conditional Trait Implementations
Lines 60-208: Feature-gated implementations of PartialEq, Eq, and Hash traits for all structures when "extra_traits" feature is enabled. Uses manual field-by-field comparison for arrays to handle C-style fixed arrays properly.

## Dependencies
- Uses crate::prelude::* for common libc types (c_ushort, c_ulong, etc.)
- References crate::sigset_t and crate::stack_t from parent libc crate
- Uses s_no_extra_traits! macro to conditionally exclude default trait derivations

## Architecture Notes
- x86_64-specific register layout matching hardware ABI
- Memory layout compatible with Haiku OS kernel structures
- Designed for zero-copy FFI with C system calls