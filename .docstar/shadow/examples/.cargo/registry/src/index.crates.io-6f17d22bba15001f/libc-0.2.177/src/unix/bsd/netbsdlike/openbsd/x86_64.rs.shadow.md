# examples/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libc-0.2.177/src/unix/bsd/netbsdlike/openbsd/x86_64.rs
@source-hash: 89be4988c6acca7c
@generated: 2026-02-09T18:02:18Z

## OpenBSD x86_64 Architecture-Specific Types and Constants

This file provides platform-specific definitions for OpenBSD on x86_64 architecture within the libc crate's Unix bindings hierarchy. It defines low-level system structures and constants used for signal handling, process debugging, and memory management.

### Key Types

**`ucontext_t` (L4)**: Type alias for `sigcontext`, providing compatibility with standard Unix context switching interfaces.

**`sigcontext` struct (L7-38)**: Complete CPU context structure containing all x86_64 registers:
- General-purpose registers: `sc_rdi`, `sc_rsi`, `sc_rdx`, `sc_rcx`, `sc_r8`-`sc_r15`, `sc_rbp`, `sc_rbx`, `sc_rax` (L8-22)
- Segment registers: `sc_gs`, `sc_fs`, `sc_es`, `sc_ds`, `sc_cs`, `sc_ss` (L23-26, L30, L33)
- Control registers: `sc_rip` (instruction pointer), `sc_rsp` (stack pointer), `sc_rflags` (L29, L31-32)
- Exception info: `sc_trapno`, `sc_err` (L27-28)
- Floating-point state: `sc_fpstate` pointer to `fxsave64` (L34)
- Signal handling: `sc_mask`, `sc_cookie` (L36-37)

**`fxsave64` struct (L43-56)**: Packed representation of x86_64 floating-point and SSE state:
- FPU control/status: `fx_fcw`, `fx_fsw`, `fx_ftw`, `fx_fop` (L44-48)
- Instruction pointers: `fx_rip`, `fx_rdp` (L49-50)
- SSE control: `fx_mxcsr`, `fx_mxcsr_mask` (L51-52)
- Register arrays: `fx_st` (8 FPU registers), `fx_xmm` (16 SSE registers) (L53-54)

### Trait Implementations

**Conditional trait implementations (L59-99)**: When `extra_traits` feature is enabled, provides custom `PartialEq`, `Eq`, and `Hash` implementations for `fxsave64`. Uses block expressions `{field}` pattern to handle unaligned field access in packed struct safely.

### Constants

**Memory alignment (L101)**: `_ALIGNBYTES` defines platform-specific alignment requirements.

**Page management (L103)**: `_MAX_PAGE_SHIFT` specifies maximum page size shift (4KB pages).

**Process tracing (L105-109)**: PT_* constants for ptrace operations:
- `PT_STEP`: Single-step execution
- `PT_GETREGS`/`PT_SETREGS`: General register access
- `PT_GETFPREGS`/`PT_SETFPREGS`: Floating-point register access

### Dependencies

- Imports common libc types via `crate::prelude::*` (L1)
- Uses `PT_FIRSTMACH` base constant from parent module (L2)
- Leverages `s!` and `s_no_extra_traits!` macros for struct definitions

### Architecture Notes

This implementation is specific to x86_64 register layout and OpenBSD's signal context structure. The packed `fxsave64` struct matches hardware FXSAVE instruction format, requiring special handling for unaligned access in trait implementations.