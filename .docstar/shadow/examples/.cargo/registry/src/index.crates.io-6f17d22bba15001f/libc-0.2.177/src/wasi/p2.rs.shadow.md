# examples/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libc-0.2.177/src/wasi/p2.rs
@source-hash: feecc0485eabd2c3
@generated: 2026-02-09T18:06:27Z

## WASI P2 Socket Interface Definitions

Provides WASI Preview 2 socket types, constants, and function bindings for network programming.

**Purpose**: WASI-specific implementation of POSIX socket interface, defining all necessary types and constants for network communication in WebAssembly System Interface environments.

### Type Definitions (L3-8)
- `sa_family_t`, `in_port_t` (L3-4): Standard socket address family and port types
- `in_addr_t` (L5): IPv4 address type  
- `socklen_t` (L7): Socket address length type

### Core Socket Structures (L9-72)
Defined within `s!` macro block for C-compatible layout:

- **sockaddr** (L11-14): Base socket address with 16-byte alignment, zero-length data array
- **in_addr** (L16-18): IPv4 address container
- **sockaddr_in** (L21-25): IPv4 socket address with 16-byte alignment
- **in6_addr** (L28-30): IPv6 address (128-bit) with 4-byte alignment  
- **sockaddr_in6** (L33-39): IPv6 socket address with flow info and scope ID, 16-byte aligned
- **sockaddr_storage** (L42-45): Generic socket storage (32 bytes) with 16-byte alignment
- **addrinfo** (L47-56): Address info linked list for name resolution
- **ip_mreq** (L58-61): IPv4 multicast group membership
- **ipv6_mreq** (L63-66): IPv6 multicast group membership  
- **linger** (L68-71): Socket linger options

### Socket Constants (L74-131)
- **Shutdown flags** (L74-76): `SHUT_RD`, `SHUT_WR`, `SHUT_RDWR`
- **Message flags** (L78-79): `MSG_NOSIGNAL`, `MSG_PEEK`
- **Socket options** (L81-93): Standard SO_* constants for socket configuration
- **Socket types** (L95-97): `SOCK_DGRAM`, `SOCK_STREAM`, `SOCK_NONBLOCK`
- **Address families** (L101-103): `AF_UNSPEC`, `AF_INET`, `AF_INET6`
- **Protocols** (L105-108): IP, TCP, UDP, IPv6 protocol constants
- **IP options** (L110-124): TTL, multicast, and IPv6-specific options
- **TCP options** (L125-128): Keepalive and Nagle algorithm control
- **Error codes** (L130): `EAI_SYSTEM` for address info errors

### External Function Bindings (L132-188)
Standard POSIX socket API:

- **Core socket ops** (L133-143): `socket`, `connect`, `bind`, `listen`, `accept`, `accept4`
- **Address queries** (L145-146): `getsockname`, `getpeername`  
- **Data transfer** (L148-163): `sendto`, `recvfrom`
- **Socket options** (L165-178): `getsockopt`, `setsockopt`
- **Name resolution** (L180-187): `getaddrinfo`, `freeaddrinfo`, `gai_strerror`

### Architecture Notes
- All socket address structures use explicit alignment attributes for WASI compatibility
- Maintains POSIX socket API compatibility while adapting to WASI constraints  
- Uses C-compatible data layout via `s!` macro for FFI safety
- Zero-length arrays in base `sockaddr` for type-safe casting