# examples/.cargo/registry/src/index.crates.io-6f17d22bba15001f/syn-2.0.110/src/token.rs
@source-hash: 55f1ad3ba0edc43a
@generated: 2026-02-09T18:12:05Z

## syn::token - Rust Token Type Definitions

Core module providing type-safe representations of Rust punctuation, keywords, and delimiters for the syn parsing library.

### Primary Architecture

The module uses **declarative macros** to mass-generate token types with consistent APIs:
- `define_keywords!` (L201) - generates keyword token types (e.g., `struct`, `fn`, `if`)
- `define_punctuation!` (L400) - generates punctuation token types (e.g., `+`, `->`, `::`) 
- `define_delimiters!` (L442) - generates delimiter token types (`Paren`, `Brace`, `Bracket`)

### Key Token Types

**Keywords** (L692-746): All Rust keywords as individual structs (Abstract, As, Async, etc.)
- Single `Span` field for source location tracking
- Generated by `define_keywords!` macro

**Punctuation** (L748-795): All Rust operators/punctuation as structs
- `spans: [Span; N]` field where N matches character count
- Multi-character tokens (e.g., `->`, `::`) track span per character
- Generated by `define_punctuation!` macro

**Delimiters** (L797-801): Parentheses, braces, brackets
- `span: DelimSpan` field for matched delimiter pairs
- Generated by `define_delimiters!` macro

**Special Cases**:
- `Underscore` (L522-571) - custom implementation for `_` wildcard
- `Group` (L574-646) - none-delimited groups

### Core Trait System

**Token trait** (L125-133): Sealed trait for parsing/peeking tokens
- `peek(cursor: Cursor) -> bool` - lookahead without consuming
- `display() -> &'static str` - error message display

**Sealed trait** (L141) prevents external implementations

### Parsing Infrastructure

**parsing module** (L977-1054): Internal parsing utilities
- `keyword()` (L983) - parse keyword from token stream
- `punct()` (L1003) - parse multi-character punctuation with span tracking
- `peek_*` functions for lookahead

### Printing Infrastructure  

**printing module** (L1059-1093): Token-to-stream conversion
- `punct()` (L1065) - emit punctuation with proper spacing
- `keyword()` (L1079) - emit keywords as identifiers
- `delim()` (L1083) - emit delimited groups

### Token! Macro

**Token! macro** (L871-972): Type-level macro for ergonomic token access
- Maps token syntax to concrete types: `Token![struct]` â†’ `syn::token::Struct`
- Used in both type position and expression position
- Covers all keywords, punctuation, and special tokens

### Span Management

**WithSpan helper** (L147-149): Transparent wrapper for single-span tokens
- Enables `.span` field access on single-span tokens via `Deref`
- Used by `impl_deref_if_len_is_1!` macro (L303-321)

### Feature Gates

Conditional compilation based on syn features:
- `parsing` - enables Parse implementations and Token trait
- `printing` - enables ToTokens implementations  
- `clone-impls` - enables Copy/Clone
- `extra-traits` - enables Debug/Eq/PartialEq/Hash

### Implementation Pattern

All token types follow consistent pattern:
1. Struct with span field(s)
2. Constructor function with same name
3. Default implementation (call_site span)
4. Feature-gated trait implementations (Parse, ToTokens, Clone, Debug, etc.)
5. Token trait implementation for parsing/peeking