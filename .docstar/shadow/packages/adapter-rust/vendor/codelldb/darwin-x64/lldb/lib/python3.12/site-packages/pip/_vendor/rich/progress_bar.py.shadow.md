# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/progress_bar.py
@source-hash: 2f88f0f04e906ffc
@generated: 2026-02-09T18:00:07Z

## Purpose
Implements a customizable progress bar component for the Rich terminal library. Renders visual progress indicators with support for completion tracking, pulse animations, and various styling options.

## Key Classes

### ProgressBar (L18-207)
Main progress bar renderer inheriting from JupyterMixin for notebook compatibility.

**Constructor (L33-53):**
- `total`: Maximum progress value (None enables pulse mode)
- `completed`: Current progress value
- `width`: Bar width in characters
- `pulse`: Force pulse animation
- Style parameters: `style`, `complete_style`, `finished_style`, `pulse_style`
- `animation_time`: Override system time for animations

**Key Properties & Methods:**
- `percentage_completed` (L60-67): Calculates completion percentage, clamped to 0-100%
- `update()` (L116-124): Updates progress values
- `_get_pulse_segments()` (L69-114): LRU-cached pulse animation segment generator
- `_render_pulse()` (L126-154): Renders animated pulse effect using time-based offset
- `__rich_console__()` (L156-199): Main rendering method producing segment iterables
- `__rich_measure__()` (L200-207): Returns measurement constraints for layout

## Core Logic

**Rendering Modes:**
1. **Pulse Mode** (L161-164): When `total=None` or `pulse=True`, renders moving wave animation
2. **Progress Mode** (L166-199): Shows completion ratio with filled/unfilled segments

**Progress Rendering Details (L170-199):**
- Uses Unicode box-drawing characters (━, ╸, ╺) with ASCII fallback (-)
- Calculates half-character precision using `complete_halves = width * 2 * completed / total`
- Renders: completed bars + half-bar + remaining empty bars
- Applies different styles based on completion state

**Pulse Animation (L126-154):**
- Creates smooth color gradient across PULSE_SIZE (20) characters
- Uses cosine wave for fade calculation: `fade = 0.5 + cos(position * pi * 2) / 2.0`
- Animates by shifting segment array based on current time
- Handles color system capabilities and no-color mode

## Dependencies
- Rich console system (`Console`, `ConsoleOptions`, `RenderResult`)
- Color blending utilities (`Color`, `ColorTriplet`, `blend_rgb`)
- Style system (`Style`, `StyleType`)
- Segment-based rendering (`Segment`)

## Architecture Notes
- Uses LRU caching for pulse segments to optimize repeated renders
- Supports both determinate (with total) and indeterminate (pulse) progress
- Handles various terminal capabilities (color systems, ASCII mode, legacy Windows)
- Integrates with Rich's measurement and rendering protocols

## Constants
- `PULSE_SIZE = 20` (L15): Character count for pulse animation cycle