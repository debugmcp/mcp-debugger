# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/rule.py
@source-hash: d1f35a4bf68445ad
@generated: 2026-02-09T18:00:06Z

## Rule - Console Horizontal Line Renderer

**Purpose**: Renders horizontal rules (lines) with optional titles for Rich console output. Part of the Rich text rendering library's visual formatting system.

**Core Class**: `Rule(JupyterMixin)` (L12-114)
- Console renderable that draws horizontal lines across terminal width
- Supports title text with left/center/right alignment
- Handles ASCII fallback for non-ASCII characters
- Implements Rich protocol methods for rendering and measurement

**Key Constructor Parameters** (L23-31):
- `title`: Optional text to display in the rule (str or Text)
- `characters`: Line drawing character(s), defaults to "─"
- `style`: Style for the rule line, defaults to "rule.line" 
- `end`: Line terminator, defaults to "\n"
- `align`: Title alignment - "left", "center", or "right"

**Core Rendering Logic** (`__rich_console__`, L49-103):
- Calculates available width from console options
- Applies ASCII fallback for incompatible characters (L54-58)
- Handles three rendering modes:
  - No title: Simple line across full width (L61-63)
  - With title: Complex layout with title positioning and padding
  - Width-aware truncation and spacing calculations

**Title Rendering Strategies**:
- **Center align** (L80-90): Splits remaining space evenly on both sides
- **Left align** (L91-95): Title at start, line fills remainder
- **Right align** (L96-100): Line first, then title

**Helper Methods**:
- `_rule_line()` (L105-109): Creates simple horizontal line without title
- `__rich_measure__()` (L111-114): Returns fixed measurement (1,1) for layout
- `__repr__()` (L46-47): String representation for debugging

**Key Dependencies**:
- `cells.cell_len()`, `set_cell_size()`: Unicode-aware width calculations
- `Text`: Rich text object for styled content
- `Console`, `ConsoleOptions`: Rich rendering infrastructure
- `AlignMethod`: Type hint for alignment values

**Notable Patterns**:
- Validates character width and alignment values in constructor
- Uses cell-aware calculations for proper Unicode/emoji handling  
- Implements Rich's renderable protocol for console integration
- Handles edge cases like zero width and ASCII-only terminals

**Constraints**:
- Characters parameter must have cell width ≥ 1
- Alignment must be one of three valid values
- Title text newlines are converted to spaces