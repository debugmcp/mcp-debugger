# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/packages/six.py
@source-hash: 6fd2ccd30057bfb1
@generated: 2026-02-09T17:57:58Z

## Primary Purpose
Python 2/3 compatibility library (six) providing unified APIs for code that runs on both Python versions. Located in a vendored pip package within LLDB's Python environment.

## Core Architecture

### Version Detection & Type Definitions (L36-73)
- `PY2`, `PY3`, `PY34` flags for runtime version detection
- Version-specific type mappings: `string_types`, `integer_types`, `class_types`, `text_type`, `binary_type`
- `MAXSIZE` calculation with platform-specific handling (Jython, 32/64-bit detection)

### Lazy Loading Infrastructure
- **`_LazyDescr` (L91-105)**: Base descriptor for lazy attribute resolution with self-deletion after first access
- **`MovedModule` (L107-125)**: Lazy module importer that maps Python 2/3 module names
- **`MovedAttribute` (L141-163)**: Lazy attribute importer for cross-version attribute access
- **`_LazyModule` (L127-139)**: Base module type with `_moved_attributes` support

### Import System Integration
- **`_SixMetaPathImporter` (L165-238)**: PEP 302/451 compliant meta path finder/loader
  - Manages `six.moves` namespace and submodules
  - Handles module loading, spec creation, and package detection
- Global importer instance `_importer` (L240) with meta path registration (L1076)

### Moves Namespace (L243-542)
Comprehensive mapping of Python 2/3 differences:
- **`_MovedItems` (L243-350)**: Main moves container with 60+ mapped modules/attributes
- **URL parsing modules** (L352-396): `urllib_parse` with 27 moved attributes
- **URL error/request/response modules** (L399-498): HTTP client functionality
- **Consolidated urllib namespace** (L524-541): Python 3-style urllib structure

### Compatibility Functions

#### Iterator/Dictionary Operations (L578-681)
- `advance_iterator`/`next` unified iteration
- `iterkeys`, `itervalues`, `iteritems` for dict iteration
- `viewkeys`, `viewvalues`, `viewitems` for dict views

#### String/Bytes Handling (L684-743)
- `b()`, `u()` functions for literal creation
- `unichr`, byte conversion utilities
- `StringIO`/`BytesIO` unified interfaces

#### Method/Function Introspection (L560-634)
Version-specific attribute name mappings for function/method internals using `operator.attrgetter`

#### Exception Handling (L764-812)
- `reraise()`: Cross-version exception re-raising
- `raise_from()`: Exception chaining (Python 3.3+)
- `exec_()`: Safe code execution

#### Testing Compatibility (L745-759)
Unified assertion method names across unittest versions

#### Advanced Features (L888-1050)
- **`_update_wrapper`/`wraps` (L894-927)**: functools compatibility for Python < 3.4
- **`with_metaclass` (L929-951)**: Metaclass creation helper
- **`add_metaclass` (L953-971)**: Class decorator for metaclass application
- **String coercion functions** (L973-1031): `ensure_binary`, `ensure_str`, `ensure_text`
- **`python_2_unicode_compatible` (L1033-1050)**: Unicode string decorator

### Module Initialization (L1052-1076)
- Package setup with `__path__` and `__package__`
- Meta path importer cleanup and registration
- PEP 451 submodule search location setup

## Key Dependencies
- `functools`, `itertools`, `operator`, `sys`, `types`
- Conditional imports: `importlib.util` (Python 3.4+), `StringIO` (Python 2)

## Critical Patterns
1. **Lazy loading**: All moves use descriptor pattern for on-demand imports
2. **Version branching**: Extensive `if PY3/PY2` conditionals throughout
3. **Attribute injection**: Dynamic `setattr` calls to build moves namespace
4. **Meta path manipulation**: Custom importer for `six.moves` namespace