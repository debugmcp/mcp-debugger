# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/stop.py
@source-hash: 60c26ced98197cd0
@generated: 2026-02-09T18:00:09Z

## Primary Purpose
Defines stop condition strategies for the tenacity retry library. Provides abstract base class and concrete implementations to determine when retry attempts should cease based on various criteria (attempts, time, events, or combinations thereof).

## Key Classes and Functions

### `stop_base` (L27-38)
Abstract base class defining the stop strategy interface. Implements operator overloading for combining strategies:
- `__call__()`: Abstract method returning bool to indicate if retrying should stop
- `__and__()`: Combines strategies with AND logic (returns `stop_all`)
- `__or__()`: Combines strategies with OR logic (returns `stop_any`)

### `stop_any` (L44-51)
Composite strategy that stops when ANY contained strategy returns True. Accepts multiple `stop_base` instances and evaluates them with short-circuit OR logic.

### `stop_all` (L54-61) 
Composite strategy that stops when ALL contained strategies return True. Accepts multiple `stop_base` instances and evaluates them with short-circuit AND logic.

### `_stop_never` (L64-68) & `stop_never` (L71)
Singleton strategy that never stops retrying. Returns False unconditionally. Provided as module-level constant.

### `stop_when_event_set` (L74-81)
Threading-aware strategy that stops when a `threading.Event` is set. Useful for coordinated shutdown across threads.

### `stop_after_attempt` (L84-91)
Stops after a specified number of attempts. Compares `retry_state.attempt_number` against configured maximum.

### `stop_after_delay` (L94-103)
Time-based stopping strategy. Stops when elapsed time since first attempt exceeds configured delay. Uses `_utils.to_seconds()` for time unit conversion and validates that timing information is available.

## Key Dependencies
- `abc`: For abstract base class functionality
- `typing`: Type hints and TYPE_CHECKING
- `pip._vendor.tenacity._utils`: Time unit conversion utilities
- `pip._vendor.tenacity.RetryCallState`: State object (forward reference)

## Type Definitions
- `StopBaseT` (L41): Union type allowing either `stop_base` instances or callable functions matching the signature

## Architecture Patterns
- Strategy pattern: Different stopping behaviors encapsulated in separate classes
- Composite pattern: `stop_any`/`stop_all` combine multiple strategies
- Operator overloading: Enables intuitive composition with `&` and `|` operators
- Singleton pattern: `stop_never` as module-level constant