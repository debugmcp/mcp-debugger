# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/version.py
@source-hash: f695e476e721bdef
@generated: 2026-02-09T18:00:01Z

## Purpose
Multi-format Python version parsing and comparison library supporting PEP-440, legacy, and semantic versioning schemes. Provides version normalization, constraint matching, and version suggestion functionality for package management.

## Core Architecture

**Abstract Base Classes:**
- `Version` (L30-77): Base class for all version implementations with comparison operators and abstract `parse()` method
- `Matcher` (L79-177): Base class for version constraint matching with configurable operators and `match()` method

## Version Implementations

**NormalizedVersion** (L256-289): PEP-440 compliant version parsing
- `parse()` (L274): Uses `_pep_440_key()` for parsing, stores `_release_clause` for prefix matching
- `is_prerelease` (L287): Checks for pre-release tags (a, b, c, rc, dev)
- Supports epoch, release, pre-release, post-release, dev, and local components

**LegacyVersion** (L614-627): Distribute/setuptools-compatible legacy version format
- `parse()` (L615): Uses `_legacy_key()` for backward compatibility
- Handles non-standard version formats with string-based sorting

**SemanticVersion** (L685-692): Semantic versioning (semver) support
- `parse()` (L686): Uses `_semantic_key()` following major.minor.patch format
- `is_prerelease` (L689): Detects pre-release versions via parsed components

## Version Matchers

**NormalizedMatcher** (L303-387): Advanced PEP-440 constraint matching
- Operator methods: `_match_lt`, `_match_gt`, `_match_eq`, `_match_compatible` etc. (L332-387)
- `_adjust_local()` (L318): Handles local version identifier stripping logic
- `_match_prefix()` helper (L292): Prefix-based version matching

**LegacyMatcher** (L629-648): Legacy version constraint matching
- `_match_compatible()` (L637): Compatible release matching with numeric prefix logic

**SemanticMatcher** (L694-696): Basic semantic version constraint matching

## Key Parsing Functions

**_pep_440_key()** (L184-250): Core PEP-440 parser
- Regex: `PEP440_VERSION_RE` (L179-181) matches full PEP-440 format
- Returns tuple: `(epoch, nums, pre, post, dev, local)` for proper sorting
- Handles version normalization and component extraction

**_legacy_key()** (L588-611): Legacy version parsing with setuptools compatibility
- Uses `_VERSION_PART` regex (L576) and replacement mapping
- Converts to sortable tuple format with padding and special markers

**_semantic_key()** (L664-682): Semantic version parsing
- Regex: `_SEMVER_RE` (L655-657) for major.minor.patch format
- Returns `((major, minor, patch), pre, build)` tuple structure

## Version Suggestion System

**_suggest_normalized_version()** (L461-569): Attempts to normalize irregular version strings
- Extensive regex-based cleanup rules (L487-563)
- Converts common patterns like "alpha"→"a", "beta"→"b", removes "final", etc.
- Fallback mechanism for non-conformant versions

**_suggest_semantic_version()** (L415-458): Semantic version suggestion
- Uses `_REPLACEMENTS` and `_SUFFIX_REPLACEMENTS` patterns (L390-410)
- Ensures 3-component version format with optional pre-release/build metadata

## Scheme Management

**VersionScheme** (L698-734): Encapsulates version/matcher/suggester combinations
- `is_valid_version()`, `is_valid_matcher()`, `is_valid_constraint_list()` validation methods
- `suggest()` method for version normalization

**get_scheme()** (L748-751): Factory function returning scheme instances
- Available schemes: 'normalized' (default), 'legacy', 'semantic'
- Global `_SCHEMES` registry (L737-745)

## Key Constants & Patterns

- `PEP440_VERSION_RE`: Complex regex for full PEP-440 version matching
- `_SEMVER_RE`: Semantic version validation pattern  
- `_REPLACEMENTS`/_SUFFIX_REPLACEMENTS`: Version normalization rules
- Operator mappings in `_operators` dictionaries for constraint evaluation

## Dependencies
- `.compat.string_types`: Python 2/3 string type compatibility
- `.util.parse_requirement`: Requirement string parsing utility