# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/glibc.py
@source-hash: 0b28d4cf4c7f034d
@generated: 2026-02-09T17:59:38Z

**Purpose**: Utility module for detecting glibc version information on Unix-like systems, providing more reliable version detection than Python's standard `platform.libc_ver()`.

**Key Functions**:

- `glibc_version_string()` (L6-8): Main entry point that attempts version detection using two fallback strategies
- `glibc_version_string_confstr()` (L11-28): Primary implementation using `os.confstr("CS_GNU_LIBC_VERSION")` - faster and more reliable method that parses version from system configuration
- `glibc_version_string_ctypes()` (L31-61): Fallback implementation using ctypes to call `gnu_get_libc_version()` directly via dynamic linking
- `libc_ver()` (L81-91): Public API that returns standardized tuple format `(lib_name, version)` compatible with `platform.libc_ver()`

**Architecture**: Implements a cascading fallback strategy where `glibc_version_string()` tries the faster `confstr` approach first, then falls back to the more complex `ctypes` approach if needed.

**Platform Handling**: 
- Windows explicitly returns `None` (L17-18) since glibc is not used
- Unix-like systems use either `os.confstr` or direct symbol resolution via `ctypes.CDLL(None)`

**Error Handling**: Comprehensive exception handling for missing APIs (`AttributeError`), system errors (`OSError`), and parsing failures (`ValueError`). All methods gracefully return `None` on failure.

**Key Dependencies**: 
- `os.confstr` for primary version detection
- `ctypes` for fallback dynamic library access
- Uses `dlopen(NULL)` pattern to access main program's linked libraries

**Critical Constraints**:
- Requires glibc-based systems for meaningful results
- Version string parsing expects "glibc X.Y.Z" format from confstr
- ctypes fallback depends on `gnu_get_libc_version` symbol availability