# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/theme.py
@source-hash: 6de9452688330345
@generated: 2026-02-09T18:00:07Z

## Primary Purpose
Theme management system for Rich library's styling capabilities. Provides a hierarchical theme system with inheritance, configuration file support, and stack-based theme layering for the Console rendering system.

## Key Classes and Functions

**Theme (L8-73)**: Main theme container class
- `__init__(L18-28)`: Initializes with optional custom styles and inheritance control. Merges DEFAULT_STYLES with user styles, parsing string styles into Style objects.
- `config` property (L30-36): Generates INI-format configuration string representation of all styles
- `from_file()` classmethod (L38-56): Creates Theme from ConfigParser-compatible file, parsing styles from `[styles]` section
- `read()` classmethod (L58-73): Convenience method to load theme from file path with encoding support

**ThemeStack (L80-110)**: Stack-based theme management for layered styling
- `__init__(L87-89)`: Initializes stack with base theme, sets up dynamic `get` method binding
- `push_theme(L91-103)`: Adds new theme layer with optional inheritance from current top
- `pop_theme(L105-110)`: Removes top theme layer with protection against popping base theme

**ThemeStackError (L76-77)**: Exception for theme stack operations

## Dependencies
- `configparser`: For INI file parsing in theme loading
- `.default_styles.DEFAULT_STYLES`: Base style definitions
- `.style.Style, StyleType`: Style objects and type definitions

## Architectural Patterns
- **Inheritance-based composition**: Themes can inherit from DEFAULT_STYLES or other themes
- **Dynamic method binding**: ThemeStack rebinds `self.get` to current top-level theme's get method for O(1) lookup
- **Factory pattern**: Multiple construction methods (`from_file`, `read`) for different input sources
- **Stack pattern**: LIFO theme management with base protection

## Critical Invariants
- ThemeStack always maintains at least one theme (base theme cannot be popped)
- Style values are normalized to Style objects during theme construction
- Theme config output is deterministically sorted by style name