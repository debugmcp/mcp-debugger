# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/timeout.py
@source-hash: 730ab874c93cee62
@generated: 2026-02-09T17:57:44Z

Implements timeout handling for urllib3 HTTP connections with separate connect and read timeout management.

## Primary Purpose
Provides the `Timeout` class for configuring connection and read timeouts in urllib3 HTTP requests, with support for total timeout limits and dynamic timeout calculation based on elapsed connection time.

## Key Components

### Constants and Utilities (L1-17)
- `_Default` (L12): Sentinel object to distinguish between user-specified None and no timeout specified
- `current_time` (L16): Time function using `time.monotonic` when available, falls back to `time.time`

### Main Class: Timeout (L19-271)
Central timeout configuration class with three timeout types:
- `connect`: Maximum time for connection establishment
- `read`: Maximum time between read operations  
- `total`: Combined timeout limit affecting both connect and read phases

#### Core Methods
- `__init__(total, connect, read)` (L101-105): Initializes timeout values using validation
- `_validate_timeout(cls, value, name)` (L123-166): Class method validating timeout values, rejects booleans and values â‰¤ 0
- `from_float(cls, timeout)` (L169-182): Creates Timeout instance from legacy single timeout value
- `clone()` (L184-196): Creates copy preserving socket.py sentinel objects

#### Timer Management
- `start_connect()` (L198-207): Records connection start time, prevents double-starting
- `get_connect_duration()` (L209-221): Returns elapsed connection time, requires started timer

#### Computed Properties  
- `connect_timeout` (L224-239): Returns effective connect timeout considering total limit
- `read_timeout` (L242-271): Calculates remaining read timeout after connection time elapsed

## Key Dependencies
- `socket._GLOBAL_DEFAULT_TIMEOUT`: System default timeout sentinel
- `..exceptions.TimeoutStateError`: Raised for invalid timer state operations
- `time.monotonic`/`time.time`: Monotonic timing for duration calculations

## Architecture Patterns
- **Sentinel Pattern**: Uses `_Default` and `DEFAULT_TIMEOUT` to distinguish unspecified vs explicit None values
- **Dynamic Timeout Calculation**: Read timeout adjusts based on time consumed during connection phase
- **State Management**: Tracks connection start time to enable duration-based timeout calculations

## Critical Invariants
- Timer must be started before getting connect duration or calculating remaining read timeout
- Total timeout acts as upper bound for both connect and read timeouts
- Validation ensures positive numeric timeout values only
- Clone operations preserve socket.py default timeout sentinels