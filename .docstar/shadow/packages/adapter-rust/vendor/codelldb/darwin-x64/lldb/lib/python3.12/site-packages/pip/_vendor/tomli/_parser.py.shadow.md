# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tomli/_parser.py
@source-hash: 83df8435a00b4be0
@generated: 2026-02-09T18:00:20Z

## Primary Purpose
Core TOML parser implementation providing complete parsing functionality for TOML documents from strings or binary file objects. Handles all TOML data types including strings, numbers, booleans, arrays, tables, inline tables, and datetime values.

## Key Classes and Functions

### Main Entry Points
- `load(fp, parse_float=float)` (L57-66): Parses TOML from binary file object, handles encoding detection
- `loads(s, parse_float=float)` (L69-132): Main string parser with complete TOML grammar implementation
- `TOMLDecodeError(ValueError)` (L53-54): Exception class for parsing errors

### Core Data Structures
- `NestedDict` (L193-225): Manages hierarchical dictionary structure during parsing
  - `get_or_create_nest(key, access_lists=True)` (L198-213): Creates nested dictionary paths
  - `append_nest_to_list(key)` (L215-224): Handles array of tables syntax
- `Flags` (L135-191): Tracks parsing state and namespace restrictions
  - `FROZEN=0`: Marks immutable namespaces (inline structures)
  - `EXPLICIT_NEST=1`: Marks explicitly created tables
  - `set(key, flag, recursive=bool)` (L164-173): Sets flags on keys
  - `is_(key, flag)` (L175-190): Checks if key has specific flag
- `Output(NamedTuple)` (L227-229): Combines data and flags for parser state

### Grammar Rules
- `create_dict_rule(src, pos, out)` (L284-299): Handles `[table]` syntax
- `create_list_rule(src, pos, out)` (L302-320): Handles `[[array.of.tables]]` syntax  
- `key_value_rule(src, pos, out, header, parse_float)` (L323-354): Processes key=value assignments

### Parsing Functions
- `parse_key(src, pos)` (L373-388): Parses dotted keys with quoted/unquoted parts
- `parse_value(src, pos, parse_float)` (L584-649): Dispatches to appropriate value parser based on first character
- `parse_array(src, pos, parse_float)` (L412-433): Handles array literals with comma separation
- `parse_inline_table(src, pos, parse_float)` (L436-465): Parses inline table syntax
- `parse_basic_str(src, pos, multiline=bool)` (L552-581): Handles basic strings with escape sequences
- `parse_literal_str(src, pos)` (L512-518): Handles literal strings (no escapes)
- `parse_multiline_str(src, pos, literal=bool)` (L521-549): Handles multiline string variants

### Utility Functions  
- `skip_chars(src, pos, chars)` (L232-238): Advances position past specified characters
- `skip_until(src, pos, expect, error_on, error_on_eof)` (L241-260): Finds next occurrence with error checking
- `suffixed_err(src, pos, msg)` (L652-666): Creates error with line/column coordinates
- `make_safe_parse_float(parse_float)` (L673-691): Wraps custom float parsers to prevent dict/list returns

## Character Sets and Constants
- `ASCII_CTRL` (L22): Control characters for validation
- `ILLEGAL_*_STR_CHARS` (L26-32): Character restrictions for different string types
- `BARE_KEY_CHARS` (L36): Valid characters for unquoted keys
- `BASIC_STR_ESCAPE_REPLACEMENTS` (L40-50): Mapping of escape sequences to characters

## Dependencies
- Internal modules: `._re` (regex patterns), `._types` (type definitions)
- Standard library: `collections.abc`, `string`, `types`, `typing`

## Architecture Notes
- Uses single-pass parsing with position tracking
- Implements TOML's complex namespace rules through flags system
- Handles dotted key creation with conflict detection
- Supports custom float parsing while preventing type confusion
- Regex-based matching for numbers, dates, and times imported from `._re`