# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/pstats.py
@source-hash: 476a7f4298d02d74
@generated: 2026-02-09T18:08:01Z

**Primary Purpose:** Python profiling statistics analysis and reporting module. Provides classes and utilities for processing, sorting, filtering, and presenting performance profiling data generated by Python's `profile` and `cProfile` modules.

**Core Classes:**

**SortKey (L37-56):** StrEnum defining sorting options for profile statistics with multiple aliases per key (e.g., 'cumulative'/'cumtime'). Custom `__new__` method maps alternative values to primary enum members.

**FunctionProfile (L58-67):** Dataclass representing individual function performance metrics including call counts, timing data (tottime, cumtime), per-call averages, and source location (file_name, line_number).

**StatsProfile (L68-73):** Container dataclass holding total execution time and dictionary mapping function names to FunctionProfile instances. Note: docstring misleadingly mentions "inventory" instead of profiling.

**Stats (L74-519):** Primary interface class for loading, manipulating and reporting profiling data. Key responsibilities:
- **Data Loading (L137-157):** Supports multiple input sources: marshal files, Profile objects, or empty initialization
- **Statistics Aggregation (L169-193):** `add()` method combines multiple profile runs
- **Sorting/Filtering (L235-272):** Configurable multi-key sorting with backward compatibility
- **Report Generation (L412-518):** Multiple output formats (stats, callers, callees) with flexible selection criteria
- **Data Transformation (L279-306):** Path stripping, order reversal, callees calculation

**TupleComp (L520-540):** Generic tuple comparison utility for multi-criteria sorting. Used internally by Stats for custom sort orders.

**Key Methods:**
- `load_stats()` (L137): Handles file/object input with error handling
- `sort_stats()` (L235): Multi-key sorting with SortKey enum or string support  
- `get_stats_profile()` (L353): Converts internal format to structured dataclasses
- `print_stats/callers/callees()` (L412+): Formatted console output with filtering
- `eval_print_amount()` (L327): Flexible selection by count, percentage, or regex

**Utility Functions:**
- `func_*` functions (L545-561): Function name manipulation and formatting
- `add_func_stats/add_callers()` (L569-591): Statistics combination logic
- `f8()` (L604): Consistent floating-point formatting

**Interactive Browser (L618-776):** Command-line interface `ProfileBrowser` extending `cmd.Cmd` for interactive profile analysis with commands for loading, sorting, filtering, and viewing statistics.

**Dependencies:** Standard library modules (sys, os, time, marshal, re, enum, functools, dataclasses, typing) plus optional readline for enhanced CLI experience.

**Data Format:** Internal stats stored as `{func_tuple: (cc, nc, tt, ct, callers_dict)}` where func_tuple is `(filename, lineno, function_name)` and timing values represent call counts and execution times.