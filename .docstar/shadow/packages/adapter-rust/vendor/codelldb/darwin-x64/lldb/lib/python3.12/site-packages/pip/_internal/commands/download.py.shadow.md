# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/commands/download.py
@source-hash: d2a0749f2b3a6443
@generated: 2026-02-09T17:59:23Z

**Primary Purpose**: Implementation of pip's `download` command for downloading Python packages and dependencies without installing them.

**Core Architecture**:
- **DownloadCommand (L18-146)**: Main command class inheriting from RequirementCommand
- Supports downloading from PyPI, VCS URLs, local directories, and archives
- Downloads packages to specified directory without installation

**Key Components**:

**Configuration & Options (L38-76)**:
- `add_options()`: Configures command-line options including constraints, requirements files, binary preferences, build isolation, and destination directory
- Adds target Python options and package index configuration
- Default download directory is current directory (`os.curdir`)

**Main Execution Flow (L78-146)**:
- `run()` method decorated with `@with_cleanup` for resource management
- Forces `ignore_installed=True` since download doesn't check installed packages
- Sets empty `editables` list (required by RequirementSet but not used for download)

**Core Processing Steps**:
1. **Setup (L86-106)**: Normalizes download directory, creates session, builds package finder with target Python configuration
2. **Dependency Resolution (L107-132)**: Gets requirements, creates preparer with temp directory and resolver, resolves dependency tree
3. **Download Execution (L134-142)**: Iterates through resolved requirements, downloads unsatisfied packages using `preparer.save_linked_requirement()`
4. **Finalization (L143-146)**: Outputs success message with downloaded package names

**Key Dependencies**:
- Inherits from `RequirementCommand` for common pip functionality
- Uses `get_build_tracker()` for build process tracking
- Leverages `TempDirectory` for temporary file management during download
- Relies on preparer/resolver pattern for package handling

**Critical Behaviors**:
- Only downloads packages not already satisfied (`req.satisfied_by is None`)
- Uses globally managed temp directory that respects `--no-clean` option
- Downloads dependencies unless `--no-deps` specified
- Supports all standard pip requirement specification formats

**Return Value**: Always returns `SUCCESS` status code on completion.