# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/pangomarkup.py
@source-hash: e8b2a741cf32878f
@generated: 2026-02-09T17:57:36Z

## Primary Purpose
Pygments formatter that converts syntax-highlighted tokens to Pango markup format, suitable for rendering text with markup in GTK applications or SVG output.

## Key Components

**PangoMarkupFormatter (L28-83)** - Main formatter class extending Pygments' base Formatter
- `name`: "Pango Markup" 
- `aliases`: ['pango', 'pangomarkup']
- `filenames`: [] (empty, format not tied to specific file extensions)

**__init__ method (L39-59)** - Constructor that builds style mapping
- Iterates through `self.style` token-style pairs from base class
- Converts Pygments styles to Pango markup tags:
  - `color` → `<span fgcolor="#color">`
  - `bold` → `<b>`
  - `italic` → `<i>` 
  - `underline` → `<u>`
- Stores as `(start_tag, end_tag)` tuples in `self.styles` dict

**format_unencoded method (L61-83)** - Core formatting logic
- Wraps entire output in `<tt>` (monospace) tags
- Batches consecutive tokens of same type for efficiency
- Uses token type hierarchy traversal (L68-69) to find applicable styles
- Escapes special characters in token values before output

## Utility Functions

**escape_special_chars (L23-25)** - Escapes XML entities using translation table
- Uses `_escape_table` (L17-20) to convert `&` → `&amp;`, `<` → `&lt;`

## Dependencies
- `pip._vendor.pygments.formatter.Formatter` - Base formatter class providing style system

## Architecture Notes
- Token type inheritance: Uses `ttype.parent` traversal to find styles for token subtypes
- Batching optimization: Accumulates consecutive same-type tokens before applying markup
- Nested tag structure: Properly nests multiple style attributes (bold+italic+color, etc.)

## Output Format
Produces Pango markup XML suitable for GTK text rendering or SVG generation, with monospaced base formatting and inline styling spans.