# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/deprecation.py
@source-hash: 93b420fd404069a4
@generated: 2026-02-09T17:59:32Z

**Primary Purpose**: Implements pip's deprecation warning system, providing tooling for structured deprecation messages with lifecycle management and integration with Python's logging system.

**Key Classes & Functions**:
- `PipDeprecationWarning(Warning)` (L16-17): Custom warning category for pip-specific deprecations
- `_showwarning()` (L24-41): Custom warning handler that routes `PipDeprecationWarning` instances to pip's internal logger (`pip._internal.deprecations`) while preserving standard warning behavior for other warning types
- `install_warning_logger()` (L44-52): Sets up the deprecation warning system by replacing Python's default `warnings.showwarning` with the custom handler and enabling default filtering for `PipDeprecationWarning`
- `deprecated()` (L55-124): Main deprecation interface that constructs formatted deprecation messages and either raises exceptions (for expired features) or emits warnings

**Key Dependencies**:
- `pip._vendor.packaging.version.parse`: For version comparison logic
- `pip.__version__`: Current pip version for lifecycle enforcement
- Standard `logging` and `warnings` modules

**Architectural Patterns**:
- **Monkey-patching**: Replaces global `warnings.showwarning` to intercept deprecation warnings
- **Lifecycle Management**: Uses version parsing to determine if deprecated features should raise errors vs warnings
- **Structured Messaging**: Template-based message construction with optional components (reason, replacement, gone_in version, feature flags, issue links)

**Critical Behavior**:
- The `deprecated()` function raises `PipDeprecationWarning` as an **exception** (not just a warning) when `current_version >= gone_in` version (L121-122)
- Global state management via `_original_showwarning` (L20) ensures the warning system can be installed only once
- Uses `stacklevel=2` (L124) to ensure warnings point to the caller's location, not the deprecation utility itself

**Message Format**: All deprecation messages are prefixed with `"DEPRECATION: "` and can include version timelines, replacement suggestions, feature flags, and GitHub issue references.