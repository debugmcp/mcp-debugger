# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/style.py
@source-hash: de18a8707ff837cb
@generated: 2026-02-09T18:00:12Z

## Style Module for Rich Terminal Styling

Core module implementing terminal text styling with ANSI codes, colors, and text attributes. Provides comprehensive styling capabilities for the Rich terminal formatting library.

### Primary Classes

**`_Bit` (L16-28)** - Descriptor class for managing style attribute bits using bitwise operations. Provides get/set access to individual style attributes through bit manipulation.

**`Style` (L31-760)** - Main styling class representing terminal text appearance with colors, background colors, and text attributes (bold, italic, etc.). Uses bitwise operations for efficient attribute storage and provides ANSI code generation.

Key constructor parameters:
- `color`/`bgcolor`: Foreground/background colors (Color objects or strings)
- Text attributes: `bold`, `dim`, `italic`, `underline`, `blink`, `reverse`, `strike`, etc.
- `link`: URL for hyperlinked text
- `meta`: Arbitrary metadata dictionary

**Core Methods:**
- `parse()` (L498-561): Class method parsing style definition strings into Style objects
- `render()` (L694-718): Generates ANSI-formatted text with style codes
- `_make_ansi_codes()` (L335-376): Creates ANSI escape sequences for the style
- `get_html_style()` (L564-598): Converts style to CSS rules
- `__add__()` (L757-759): Combines styles using `_add()` method (L733-755)

**Factory Methods:**
- `null()` (L198-201): Returns shared NULL_STYLE instance for performance
- `from_color()` (L204-225): Creates style with only colors, no attributes
- `from_meta()` (L228-246): Creates style with metadata only
- `on()` (L249-264): Creates style with event handlers in metadata

**`StyleStack` (L765-795)** - Stack-based style management for nested styling contexts. Maintains current combined style and supports push/pop operations.

### Key Data Structures

- `_style_map` (L81-95): Maps bit positions to SGR (Select Graphic Rendition) parameter codes
- `STYLE_ATTRIBUTES` (L97-120): Maps attribute names/abbreviations to canonical names
- Attribute bits stored as integers with `_set_attributes` tracking which are explicitly set

### Dependencies

- `.color`: Color parsing and manipulation
- `.errors`: StyleSyntaxError for invalid style definitions  
- `.terminal_theme`: Theme-based color rendering
- `marshal`: Serialization for metadata storage
- `functools.lru_cache`: Performance optimization for parsing and normalization

### Performance Optimizations

- Lazy ANSI code generation with caching
- LRU caches on `parse()`, `normalize()`, and other methods
- Shared NULL_STYLE instance to avoid object creation
- Bitwise operations for efficient attribute storage
- `__slots__` usage for memory efficiency

### Style Definition Format

Supports text-based style definitions like "bold red on blue", "italic underline", etc. The parser (L498-561) handles:
- Color names and values
- Attribute keywords (bold, italic, etc.)
- Negation with "not" prefix
- Background colors with "on" keyword
- Links with "link" keyword

### Architecture Notes

Uses efficient bitwise operations for attribute management where each style attribute corresponds to a specific bit position. The `_Bit` descriptor class provides clean property access while maintaining underlying bit manipulation efficiency.