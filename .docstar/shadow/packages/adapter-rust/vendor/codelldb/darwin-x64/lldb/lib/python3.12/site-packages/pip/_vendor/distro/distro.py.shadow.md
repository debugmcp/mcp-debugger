# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/distro/distro.py
@source-hash: 5ea6de7da7008434
@generated: 2026-02-09T17:59:53Z

## Primary Purpose
Python library for detecting and providing information about Linux distributions. Serves as a replacement for deprecated `platform.linux_distribution()` function, supporting detection of distribution ID, version, name, codename, and related attributes across multiple data sources.

## Key Classes & Functions

### LinuxDistribution Class (L649-1357)
Core class that aggregates distribution information from multiple sources:
- **__init__ (L667-798)**: Configures data sources (os-release file, LSB release command, distro release files, uname, oslevel for AIX)
- **id() (L833-859)**: Returns normalized distribution ID using hierarchical lookup and normalization tables
- **name() (L861-882)**: Returns human-readable distribution name with optional pretty formatting
- **version() (L884-924)**: Returns version string with "best" algorithm for precision or priority-based selection
- **version_parts() (L926-940)**: Parses version into major/minor/build_number tuple
- **info() (L991-1008)**: Returns comprehensive InfoDict with all distribution data

### Module-Level Functions (L160-626)
Public API functions that delegate to global `_distro` instance:
- **linux_distribution() (L160-200)**: Deprecated compatibility function
- **id(), name(), version(), version_parts() (L203-427)**: Distribution identification functions
- **like(), codename() (L430-468)**: Additional distribution attributes
- **info() (L471-512)**: Complete distribution information
- **Data source accessors (L515-626)**: Functions for accessing raw data from os-release, lsb_release, distro files, uname

### Data Parsing Methods
- **_parse_os_release_content() (L1104-1151)**: Parses systemd os-release files using shlex
- **_parse_lsb_release_content() (L1173-1194)**: Parses lsb_release command output
- **_parse_distro_release_content() (L1334-1356)**: Parses legacy distribution release files using regex
- **_parse_uname_content() (L1229-1245)**: Parses uname command output

## Key Dependencies
- Standard library: `os`, `re`, `subprocess`, `shlex` for file parsing and command execution
- `typing` for type annotations (with Python 3.7 compatibility fallback)
- `functools.cached_property` (with custom implementation for Python < 3.8)

## Data Sources & Lookup Hierarchy
1. **os-release file** (systemd standard): `/etc/os-release` or `/usr/lib/os-release`
2. **LSB release command**: `lsb_release -a` output
3. **Distribution release files**: Legacy files like `/etc/redhat-release`
4. **uname command**: `uname -rs` for fallback identification
5. **oslevel command**: AIX-specific version detection

## Normalization & Configuration
- **NORMALIZED_OS_ID (L86-89)**: Maps os-release IDs to standard values
- **NORMALIZED_LSB_ID (L98-104)**: Maps LSB distributor IDs to standard values  
- **NORMALIZED_DISTRO_ID (L113-115)**: Maps release file-derived IDs to standard values
- **_DISTRO_RELEASE_BASENAMES (L126-144)**: Known distribution release file patterns
- **_DISTRO_RELEASE_IGNORE_BASENAMES (L147-157)**: Files to skip during detection

## Type Definitions
- **VersionDict (L61-64)**: TypedDict for version components
- **InfoDict (L67-72)**: TypedDict for complete distribution information

## Module Initialization
- **Global _distro instance (L1359)**: Default LinuxDistribution instance used by module functions
- **CLI interface (L1362-1403)**: Command-line tool with JSON output support

## Architectural Patterns
- **Cached properties**: Expensive operations (file reading, subprocess calls) cached using @cached_property
- **Hierarchical data source lookup**: Each method tries multiple sources in priority order
- **Normalization layer**: Standardizes varying distribution identifiers to reliable machine-readable values
- **Graceful degradation**: Handles missing files/commands without raising exceptions