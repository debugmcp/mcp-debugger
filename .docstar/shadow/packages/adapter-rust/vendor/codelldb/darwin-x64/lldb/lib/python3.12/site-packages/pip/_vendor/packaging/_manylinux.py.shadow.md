# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/_manylinux.py
@source-hash: 5e8e15d0f673f2c6
@generated: 2026-02-09T17:59:47Z

## Purpose
Manylinux platform tag generator for Python packaging. Determines Linux binary compatibility by analyzing ELF executables and glibc versions to generate appropriate manylinux tags per PEP 513/571/599/600.

## Key Components

### ELF Analysis Functions
- `_parse_elf()` (L21-28): Context manager that safely parses ELF files, yielding ELFFile or None on errors
- `_is_linux_armhf()` (L30-42): Detects ARM hard-float ABI by checking ELF header flags (EF_ARM_ABI_VER5, EF_ARM_ABI_FLOAT_HARD)
- `_is_linux_i686()` (L45-52): Detects i386 architecture from ELF metadata
- `_have_compatible_abi()` (L55-69): Main ABI compatibility checker supporting armv7l, i686, and standard 64-bit architectures

### Glibc Version Detection
- `_glibc_version_string_confstr()` (L85-101): Primary glibc version detection using os.confstr("CS_GNU_LIBC_VERSION")
- `_glibc_version_string_ctypes()` (L104-145): Fallback using ctypes.CDLL to call gnu_get_libc_version
- `_glibc_version_string()` (L148-150): Orchestrates version detection with fallback chain
- `_parse_glibc_version()` (L153-169): Regex-based parsing of version strings (handles patched versions like "2.20-2014.11")
- `_get_glibc_version()` (L172-177): Cached glibc version getter returning (-1,-1) for non-glibc systems

### Compatibility Logic
- `_is_compatible()` (L181-204): Core compatibility checker integrating glibc version comparison with optional _manylinux module hooks
- `platform_tags()` (L217-262): Main entry point generating iterator of compatible manylinux tags in descending compatibility order

## Data Structures
- `_GLibCVersion` (L80-82): NamedTuple for structured glibc version handling
- `_LAST_GLIBC_MINOR` (L77): Default dictionary assuming max minor version 50 for future glibc majors
- `_LEGACY_MANYLINUX_MAP` (L207-214): Maps specific glibc versions to legacy tag names (manylinux1, manylinux2010, manylinux2014)

## Dependencies
- `._elffile`: ELF parsing utilities (EIClass, EIData, ELFFile, EMachine)
- Standard library: collections, contextlib, functools, os, re, sys, warnings, typing

## Architecture Notes
- Uses ARM ABI constants (L14-16) for hardware floating-point detection
- Supports backward compatibility through legacy manylinux tag mapping
- Implements graceful fallbacks for version detection and ELF parsing failures
- Caches glibc version detection for performance
- Generates tags in compatibility order (newest to oldest) per architecture