# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/prompt.py
@source-hash: c1d3a7d97f174c92
@generated: 2026-02-09T18:00:07Z

## Purpose
Interactive user input prompting system for Rich terminal library. Provides type-safe prompts with validation, choices, defaults, and password masking capabilities.

## Core Components

### Exception Hierarchy
- `PromptError` (L11-13): Base exception for all prompt-related errors
- `InvalidResponse` (L15-28): Raised when user input fails validation, with Rich text rendering support via `__rich__()` method

### Base Architecture
- `PromptBase[PromptType]` (L30-284): Generic abstract base class implementing complete prompt loop lifecycle
  - Generic type parameter `PromptType` defines return type
  - Configurable validation, choices, defaults, and display options
  - Template method pattern with hooks for customization

### Key Methods in PromptBase
- `ask()` classmethod (L75-141): Factory method with overloads for optional/required defaults
- `make_prompt()` (L154-183): Constructs formatted prompt text with choices/defaults
- `process_response()` (L217-238): Converts/validates user input to target type
- `__call__()` (L262-283): Main prompt loop with retry on validation errors
- `get_input()` (L186-203): Console input abstraction with password support

### Concrete Prompt Types
- `Prompt` (L286-296): Returns `str`, basic text input
- `IntPrompt` (L298-308): Returns `int` with integer validation
- `FloatPrompt` (L310-320): Returns `float` with numeric validation  
- `Confirm` (L322-346): Returns `bool` from y/n choices, custom rendering for boolean defaults

## Key Patterns

### Type Safety
Uses TypeVar generics (`PromptType`, `DefaultType`) and method overloads to provide precise return type hints based on whether default is provided.

### Validation Flow
1. User input → `process_response()` → type conversion
2. Choice validation if `choices` specified
3. `InvalidResponse` exception triggers retry with error display
4. `on_validate_error()` hook for custom error handling

### Extensibility Points
- `pre_prompt()` hook (L249-250) for pre-input display
- `render_default()` (L143-152) for custom default formatting
- Override `process_response()` for custom validation logic

## Dependencies
- Rich Console system for styled output and input
- Text/TextType for markup support
- Generic typing with overloads for type safety

## Critical Behavior
- Empty input returns default when provided (L275-276)
- Ellipsis (`...`) sentinel distinguishes "no default" from falsy defaults
- Choice validation is case-sensitive and strip-whitespace
- Password mode delegates to Console.input() with masking