# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/__init__.py
@source-hash: d7fcccffbf61c71b
@generated: 2026-02-09T17:57:32Z

## Purpose and Responsibility
This module serves as the main entry point for Pygments formatters, providing dynamic loading, caching, and lookup functionality. It implements a lazy-loading system where formatters are only loaded when needed, and uses module replacement to enable direct attribute access to formatter classes.

## Key Functions

### Core Lookup Functions
- `find_formatter_class(alias)` (L55-68): Searches for a formatter class by alias in both built-in FORMATTERS mapping and plugins. Returns None if not found.
- `get_formatter_by_name(_alias, **options)` (L70-81): Returns instantiated formatter by alias name, raising ClassNotFound if not found.
- `get_formatter_for_filename(fn, **options)` (L119-138): Matches formatter to filename using glob patterns, checking both built-in and plugin formatters.

### Loading and Discovery
- `_load_formatters(module_name)` (L36-42): Dynamically imports formatter module and caches all formatter classes it contains.
- `get_all_formatters()` (L44-53): Generator yielding all available formatter classes, loading them lazily from built-in mappings and plugins.
- `load_formatter_from_file(filename, formattername="CustomFormatter", **options)` (L84-117): Loads custom formatter class from external file using exec(), with security warning in docstring.

### Utility Functions
- `_fn_matches(fn, glob)` (L28-34): Filename pattern matching with regex caching for performance.

## Key Classes
- `_automodule(types.ModuleType)` (L141-151): Custom module type that intercepts attribute access to provide automatic formatter loading via `__getattr__`.

## Caching System
- `_formatter_cache` (L24): Global cache storing loaded formatter classes by name
- `_pattern_cache` (L25): Cache for compiled regex patterns used in filename matching

## Dependencies
- `FORMATTERS` from `_mapping`: Static mapping of formatter metadata
- `find_plugin_formatters` from `plugin`: Dynamic plugin discovery
- `ClassNotFound` from `util`: Exception for missing formatters

## Architectural Patterns
- **Lazy Loading**: Formatters are only imported when first accessed
- **Module Replacement**: The module replaces itself with `_automodule` instance (L154-158) to enable direct attribute access like `pygments.formatters.HtmlFormatter`
- **Plugin Architecture**: Supports both built-in and dynamically discovered plugin formatters
- **Caching Strategy**: Two-level caching for both formatter classes and filename patterns

## Critical Invariants
- All formatter classes must have `name`, `aliases`, and `filenames` attributes
- The FORMATTERS mapping structure: `(module_name, class_name, aliases, filenames, description)`
- Module replacement cleanup removes temporary references (L158) to avoid circular imports