# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/spinners.py
@source-hash: 84827cdc67ab7458
@generated: 2026-02-09T17:59:21Z

## Primary Purpose
Provides spinner implementations for pip's CLI to show progress during long-running operations. Handles both interactive terminal environments with animated spinners and non-interactive environments with periodic logging updates.

## Key Components

### SpinnerInterface (L14-20)
Abstract base class defining the spinner contract with two methods:
- `spin()` - Update spinner display 
- `finish(final_status)` - Complete spinner with final status

### InteractiveSpinner (L22-69)
Animated spinner for interactive terminals with real-time visual feedback:
- Uses backspace sequences to overwrite previous output (L47-48)
- Cycles through spin characters (`-\|/` by default) at 8 updates/second (L27-29, L38)
- Respects indentation levels via `get_indentation()` (L40)
- Rate-limited updates via RateLimiter to prevent flickering (L35, L58-59)

### NonInteractiveSpinner (L75-99) 
Logging-based spinner for non-interactive environments:
- Updates every 60 seconds by default to prevent timeout on CI systems (L76)
- Uses logger.info() instead of direct output (L85)
- Designed for dumb terminals and automated environments

### RateLimiter (L101-113)
Time-based throttling utility:
- `ready()` checks if minimum interval has elapsed (L106-109)
- `reset()` updates last update timestamp (L111-112)

### Context Managers

#### open_spinner (L115-137)
Main factory function that selects appropriate spinner type:
- Uses InteractiveSpinner for TTY with INFO+ logging level (L122-123)
- Falls back to NonInteractiveSpinner otherwise (L125)
- Handles cleanup on exceptions (KeyboardInterrupt → "canceled", Exception → "error", normal → "done")

#### hidden_cursor (L143-159)
Manages cursor visibility during spinner operation:
- Skips on Windows (unsupported ANSI codes) (L147-148)
- Skips for non-TTY or quiet mode (L152-153)
- Uses ANSI escape codes `\x1b[?25l` (hide) and `\x1b[?25h` (show) (L139-140)

## Dependencies
- `pip._internal.utils.compat.WINDOWS` - Platform detection
- `pip._internal.utils.logging.get_indentation` - Respects logging indentation

## Architecture Notes
- Strategy pattern implementation with SpinnerInterface
- Environment-aware spinner selection (interactive vs non-interactive)
- Rate limiting prevents excessive updates and terminal flickering
- Graceful degradation for different terminal capabilities