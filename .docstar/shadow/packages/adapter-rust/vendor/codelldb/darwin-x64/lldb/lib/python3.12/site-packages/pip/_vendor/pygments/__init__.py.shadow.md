# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/__init__.py
@source-hash: 4d5193c67cb8d13a
@generated: 2026-02-09T17:59:46Z

## Purpose
Main entry point and public API for the Pygments syntax highlighting library. Provides high-level functions for lexical analysis and code formatting, abstracting away the complexity of lexer/formatter instantiation.

## Core Functions

### `lex(code, lexer)` (L35-49)
- Tokenizes source code using a provided Lexer instance
- Returns iterable of tokens via `lexer.get_tokens(code)`
- Error handling: Detects common mistake of passing lexer class instead of instance
- Raises TypeError with helpful message if lexer is a class rather than instance

### `format(tokens, formatter, outfile=None)` (L52-74) 
- Formats token stream using a Formatter instance
- Handles both string return and file output modes
- Uses BytesIO for encodings with byte output, StringIO otherwise (L63)
- Error handling: Similar class vs instance validation as `lex()`
- Returns formatted string if no outfile, otherwise writes directly to file

### `highlight(code, lexer, formatter, outfile=None)` (L77-82)
- Convenience function combining `lex()` and `format()` operations
- Primary high-level API for complete syntax highlighting workflow

## Key Dependencies
- `io.StringIO`, `io.BytesIO` (L27) - for in-memory output handling
- `pip._vendor.pygments.lexer.RegexLexer` (L45) - for lexer validation
- `pip._vendor.pygments.formatter.Formatter` (L70) - for formatter validation

## Module Metadata
- Version: '2.17.2' (L29)
- Exports: `['lex', 'format', 'highlight']` (L32)

## Error Handling Pattern
Both `lex()` and `format()` implement defensive programming by catching TypeError and providing specific error messages when users incorrectly pass classes instead of instances. This suggests a common usage mistake in the API.

## Output Strategy
The `format()` function uses conditional logic to determine output stream type based on formatter encoding, handling both text and binary output scenarios transparently.