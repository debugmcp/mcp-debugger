# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/utils.py
@source-hash: 2fbf6f9c56f32774
@generated: 2026-02-09T18:00:09Z

**Purpose:** Comprehensive utility module for the requests library providing HTTP-related helper functions, encoding handling, proxy resolution, and data transformation utilities.

## Key Components

### Constants & Configuration
- `NETRC_FILES` (L61): Standard netrc file names for authentication
- `DEFAULT_CA_BUNDLE_PATH` (L63): SSL certificate bundle location via certs module
- `DEFAULT_PORTS` (L65): Standard HTTP/HTTPS port mappings
- `DEFAULT_ACCEPT_ENCODING` (L68-70): Dynamically generated accept-encoding header
- `UNRESERVED_SET` (L631-633): RFC 3986 unreserved URI characters

### Platform-Specific Proxy Handling
- `proxy_bypass_registry()` (L76-112): Windows registry-based proxy bypass detection
- `proxy_bypass()` (L114-123): Cross-platform proxy bypass dispatcher

### Data Transformation Utilities
- `dict_to_sequence()` (L126-132): Converts dicts/mappings to sequence format
- `super_len()` (L135-201): Intelligent length calculation for various object types (strings, files, streams)
- `from_key_val_list()` (L318-342): Converts sequences to OrderedDict
- `to_key_val_list()` (L345-371): Converts mappings to list of tuples

### Authentication & Security
- `get_netrc_auth()` (L204-258): Extracts credentials from .netrc files
- `get_auth_from_url()` (L1018-1031): Parses username/password from URLs
- `check_header_validity()` (L1034-1042): HTTP header validation
- `_validate_header_part()` (L1045-1061): Internal header part validation

### File & Archive Handling
- `guess_filename()` (L261-265): Attempts filename extraction from objects
- `extract_zipped_paths()` (L268-302): Extracts files from zip archives to temp locations
- `atomic_open()` (L305-315): Context manager for atomic file writes

### HTTP Header Processing
- `parse_list_header()` (L375-403): RFC 2068 compliant list parsing
- `parse_dict_header()` (L407-438): Converts header strings to dictionaries
- `unquote_header_value()` (L442-464): Header value unquoting with browser compatibility
- `parse_header_links()` (L914-948): Parses HTTP Link headers

### Cookie Management
- `dict_from_cookiejar()` (L467-475): CookieJar to dict conversion
- `add_dict_to_cookiejar()` (L478-486): Dict to CookieJar conversion

### Content Encoding & Character Detection
- `get_encodings_from_content()` (L489-511): Extracts character encodings from HTML/XML (deprecated)
- `_parse_content_type_header()` (L514-536): Parses Content-Type header parameters
- `get_encoding_from_headers()` (L539-562): Determines encoding from HTTP headers
- `get_unicode_from_response()` (L591-627): Unicode content extraction (deprecated)
- `guess_json_utf()` (L957-986): JSON encoding detection via BOM/null byte analysis

### Stream Processing
- `stream_decode_response_unicode()` (L564-578): Iterator-based unicode decoding
- `iter_slices()` (L581-588): String slicing iterator

### URI Processing
- `unquote_unreserved()` (L636-657): URI unescaping for unreserved characters only
- `requote_uri()` (L660-679): Consistent URI re-quoting
- `prepend_scheme_if_needed()` (L989-1015): Adds scheme to URLs when missing
- `urldefragauth()` (L1064-1078): Removes fragment and auth from URLs

### Network & Proxy Resolution
- `address_in_network()` (L682-694): CIDR subnet membership testing
- `dotted_netmask()` (L697-705): CIDR to dotted decimal conversion
- `is_ipv4_address()` (L708-716): IPv4 address validation
- `is_valid_cidr()` (L719-740): CIDR notation validation
- `should_bypass_proxies()` (L765-823): Proxy bypass decision logic
- `get_environ_proxies()` (L826-835): Environment-based proxy configuration
- `select_proxy()` (L838-861): Proxy selection for specific URLs
- `resolve_proxies()` (L864-888): Complete proxy resolution with environment consideration

### Request Utilities
- `default_user_agent()` (L891-897): Generates default User-Agent string
- `default_headers()` (L900-911): Creates default request headers
- `rewind_body()` (L1081-1096): Resets request body position for redirects

### Environment Management
- `set_environ()` (L743-762): Context manager for temporary environment variable changes

## Architecture Notes

**Backward Compatibility:** Multiple functions marked as deprecated (L494-500, L603-609) with warnings for removal in requests 3.0.

**Cross-Platform Support:** Windows-specific proxy handling alongside Unix-style implementations.

**Error Handling:** Graceful degradation patterns throughout, especially in file operations and network detection.

**Performance Considerations:** Lazy imports (L78, L214) and efficient string processing for large payloads.