# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatter.py
@source-hash: 27d38bf615cb24a6
@generated: 2026-02-09T17:59:49Z

## Primary Purpose
Base abstract formatter class for the Pygments syntax highlighting library. Defines the interface for converting token streams (lexed code) into formatted output text with styling.

## Key Components

### _lookup_style function (L19-22)
Helper function that resolves style specifications - accepts either a string name or Style object, returning a Style instance via `get_style_by_name()`.

### Formatter class (L25-124)
Abstract base class for all Pygments formatters with the following responsibilities:

**Class Attributes:**
- `name` (L68): Human-readable formatter name (None by default)
- `aliases` (L72): List of unique string identifiers for formatter lookup
- `filenames` (L77): List of fnmatch patterns for file extension matching
- `unicodeoutput` (L81): Boolean flag indicating Unicode string output support

**Constructor (__init__, L83-97):**
Processes standard formatter options:
- `style`: Resolves to Style object via `_lookup_style()`
- `full`: Boolean for complete document output
- `title`: Document title when full=True
- `encoding`/`outencoding`: Character encoding handling with UTF-8 fallback for 'guess'/'chardet'
- Stores all options in `self.options`

**Abstract Methods:**
- `get_style_defs()` (L99-112): Must return style definitions (CSS, etc.) for highlighted output. Takes optional `arg` parameter for customization.
- `format()` (L114-124): Core formatting method that converts token stream to formatted output. Handles encoding via `codecs.StreamWriter` wrapper and delegates to `format_unencoded()` (not defined in this base class).

## Dependencies
- `codecs`: Standard library for encoding handling
- `pip._vendor.pygments.util.get_bool_opt`: Boolean option parsing utility  
- `pip._vendor.pygments.styles.get_style_by_name`: Style resolution function

## Architectural Patterns
- Template Method pattern: `format()` handles encoding setup then delegates to subclass implementation
- Options dictionary pattern: Flexible keyword argument handling stored in `self.options`
- Style abstraction: Consistent style handling across all formatter implementations

## Critical Invariants
- Subclasses must implement `format_unencoded()` method (called by base `format()`)
- Encoding fallback ensures UTF-8 for ambiguous encoding specifications
- Style resolution handles both string names and Style objects transparently