# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_emoji_replace.py
@source-hash: 9fe91c7adb04531d
@generated: 2026-02-09T17:59:52Z

## Purpose
Text processing utility for replacing emoji codes with Unicode emoji characters in the Rich library's display system.

## Core Components

**Type Aliases (L7-9)**
- `_ReStringMatch`: Type alias for regex match objects
- `_ReSubCallable`: Function signature for regex substitution callbacks  
- `_EmojiSubMethod`: Type signature for compiled regex sub methods

**Primary Function: `_emoji_replace` (L12-32)**
Converts emoji shortcodes (`:name:`) to Unicode emoji characters with optional variant selectors.

**Parameters:**
- `text`: Input string containing emoji codes
- `default_variant`: Optional variant ("text" or "emoji") for rendering style
- `_emoji_sub`: Pre-compiled regex substitution method (default uses pattern `r"(:(\S*?)(?:(?:\-)(emoji|text))?:)"`)

**Implementation Details:**
- Uses closure `get_emoji` (L18) to access EMOJI dictionary efficiently
- Defines variant selectors (L19): text variant `\uFE0E`, emoji variant `\uFE0F`
- Inner function `do_replace` (L23-30) handles match substitution:
  - Extracts emoji name and variant from regex groups
  - Looks up emoji in EMOJI dictionary (case-insensitive)
  - Appends appropriate variant selector
  - Falls back to original code on KeyError

## Dependencies
- `_emoji_codes.EMOJI`: Dictionary mapping emoji names to Unicode characters
- `re` module: For regex pattern matching and substitution
- `typing`: For type annotations

## Architecture Notes
- Uses functional programming approach with closures for performance
- Pre-compiled regex pattern passed as parameter for efficiency
- Graceful degradation: invalid emoji codes are left unchanged
- Supports Unicode variant selectors for controlling emoji rendering style