# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/filesize.py
@source-hash: f5f4cb00f080c079
@generated: 2026-02-09T18:00:00Z

**Purpose:** File size formatting utilities using decimal (SI) prefixes. Part of Rich library's filesize module, borrowed from PyFilesystem2 project.

**Key Functions:**

- `_to_str` (L19-41): Core formatting function that converts byte size to human-readable string
  - Handles special cases: 1 byte singular, < base as "X bytes"
  - Uses iterative approach to find appropriate unit scale
  - Supports configurable precision and separator
  - Formula: `(base * size / unit)` for value calculation

- `pick_unit_and_suffix` (L44-50): Unit selection utility
  - Returns tuple of (unit_value, suffix_string) for given size
  - Finds first unit where `size < unit * base`
  - Used for determining appropriate scale without formatting

- `decimal` (L53-89): Public API for decimal/SI prefix formatting (1000-based)
  - Uses suffixes: kB, MB, GB, TB, PB, EB, ZB, YB
  - Base 1000 following SI standard
  - Delegates to `_to_str` with decimal parameters

**Dependencies:** 
- `typing` module for type hints (Iterable, List, Optional, Tuple)

**Architectural Decisions:**
- Separation of concerns: core logic (`_to_str`) vs. public interface (`decimal`)
- Configurable formatting parameters (precision, separator)
- Type-safe implementation with comprehensive type hints
- Only decimal function exposed in `__all__` despite module supporting multiple standards

**Key Patterns:**
- Template method pattern: `_to_str` as generic formatter, `decimal` as specific implementation
- Enumeration with base powers for unit calculation
- Special case handling for edge values (1 byte, < base)

**Constraints:**
- Input must be integer byte count
- Precision limited to decimal places
- Only supports positive file sizes (no validation shown)