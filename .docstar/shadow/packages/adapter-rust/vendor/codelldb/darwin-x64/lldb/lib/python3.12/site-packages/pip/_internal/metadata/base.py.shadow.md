# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/base.py
@source-hash: 7edd0ae573602381
@generated: 2026-02-09T17:59:37Z

## Purpose
Base classes and protocols for pip's package metadata introspection system. Defines abstract interfaces for distributions, environments, and wheels, providing common functionality for handling installed Python packages across different installation formats (.dist-info, .egg-info, legacy distutils).

## Key Components

### Core Protocols
- **BaseEntryPoint** (L49-61): Protocol defining entry point interface with name, value, and group properties
- **BaseDistribution** (L99-580): Abstract distribution interface with creation methods, location properties, metadata access, and dependency iteration
- **BaseEnvironment** (L582-665): Abstract environment for discovering and filtering installed distributions
- **Wheel** (L667-672): Protocol for wheel file access with zipfile interface

### Concrete Implementations
- **FilesystemWheel** (L674-680): Wheel implementation for files on disk
- **MemoryWheel** (L682-688): Wheel implementation for in-memory streams
- **RequiresEntry** (L93-96): NamedTuple for parsed requires.txt entries

### Key BaseDistribution Properties
- **Location properties**: `location` (L147), `installed_location` (L183), `info_location` (L196), `editable_project_location` (L161)
- **Installation format detection**: `installed_by_distutils` (L212), `installed_as_egg` (L225), `installed_with_setuptools_egg_info` (L237), `installed_with_dist_info` (L255)
- **Package identification**: `canonical_name` (L271), `version` (L275), `raw_name` (L415), `setuptools_filename` (L283)
- **Environment checks**: `local` (L337), `in_usersite` (L347), `in_site_packages` (L353), `editable` (L333)

### Metadata Handling
- **Core metadata**: `metadata` (L386) with cached property, `metadata_dict` (L399), `requires_python` (L422)
- **Dependencies**: `iter_dependencies()` (L440), `iter_raw_dependencies()` (L448), `iter_provided_extras()` (L452)
- **File listings**: `iter_declared_entries()` (L493) supporting both RECORD and installed-files.txt formats

### Legacy Support Functions
- **Path conversion**: `_convert_installed_files_path()` (L63-90) converts legacy installed-files.txt paths to modern RECORD format
- **Egg-info parsing**: `_iter_requires_txt_entries()` (L509-532), `_iter_egg_info_dependencies()` (L544-570), `_add_egg_info_requires()` (L572-579)

### Environment Filtering
**iter_installed_distributions()** (L631-664): Main distribution discovery with filters for local_only, skip packages, editables handling, and user_only installations

## Dependencies
- Standard library: csv, email.message, functools, json, logging, pathlib, re, zipfile
- pip._vendor.packaging: requirements, specifiers, utils, version
- pip._internal: exceptions, locations, models.direct_url, utils modules

## Architecture Notes
- Uses Protocol-based design for extensibility
- Supports multiple package installation formats (modern .dist-info, legacy .egg-info, distutils)
- Handles both filesystem and in-memory wheel access
- Implements PEP 566 metadata serialization
- Provides backward compatibility for legacy setuptools installations