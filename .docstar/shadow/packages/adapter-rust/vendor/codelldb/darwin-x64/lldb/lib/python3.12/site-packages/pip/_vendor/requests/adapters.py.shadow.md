# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/adapters.py
@source-hash: 27b55e571281bdac
@generated: 2026-02-09T18:00:00Z

## Overview
Core transport adapter module for the Requests library, providing HTTP/HTTPS connection management and SSL/TLS handling through urllib3 pooling. Implements the adapter pattern to abstract different transport mechanisms.

## Key Components

### Constants and Configuration (L71-88)
- `DEFAULT_POOLBLOCK`, `DEFAULT_POOLSIZE`, `DEFAULT_RETRIES`, `DEFAULT_POOL_TIMEOUT`: Connection pool defaults
- `_preloaded_ssl_context`: Pre-configured SSL context with default CA bundle for performance optimization

### Core Function
- `_urllib3_request_context()` (L90-134): Builds urllib3 connection parameters from request context, handling SSL verification settings, client certificates, and connection pooling kwargs

### Base Classes

#### BaseAdapter (L137-165)
Abstract base class defining transport adapter interface:
- `send()` (L143-160): Abstract method for sending PreparedRequest, returns Response
- `close()` (L162-164): Abstract cleanup method

#### HTTPAdapter (L167-719)
Main HTTP transport implementation extending BaseAdapter:

**Initialization & State Management:**
- `__init__()` (L202-222): Configures connection pools, retry policies, and SSL settings
- `__getstate__()`, `__setstate__()` (L224-238): Pickle support with proxy manager reconstruction
- `init_poolmanager()` (L240-264): Creates urllib3 PoolManager with specified connection limits

**Connection Management:**
- `proxy_manager_for()` (L266-302): Creates and caches proxy managers (HTTP/SOCKS), handles authentication
- `get_connection_with_tls_context()` (L446-493): Primary connection method with SSL context handling
- `get_connection()` (L495-534): Deprecated connection method, issues deprecation warning
- `build_connection_pool_key_attributes()` (L396-444): Builds SSL/TLS parameters for connection pooling

**SSL/TLS Handling:**
- `cert_verify()` (L304-358): Configures SSL certificate verification, handles CA bundles and client certificates

**Request Processing:**
- `send()` (L613-719): Main request execution method with comprehensive error handling and timeout processing
- `request_url()` (L546-576): Determines appropriate URL format based on proxy configuration
- `build_response()` (L359-394): Converts urllib3 response to Requests Response object
- `add_headers()` (L578-590): Hook for adding custom headers (no-op by default)
- `proxy_headers()` (L592-611): Generates proxy authentication headers

**Resource Management:**
- `close()` (L536-544): Cleanup method clearing all connection pools and proxy managers

## Key Dependencies
- urllib3: Connection pooling, SSL handling, proxy support
- Internal modules: auth, models, exceptions, utils for request/response processing

## Architecture Notes
- Uses connection pooling for performance optimization
- Supports both HTTP and SOCKS proxies with authentication
- Implements comprehensive SSL/TLS verification with custom CA bundles
- Error translation from urllib3 exceptions to Requests exceptions
- Graceful fallback for missing SOCKS dependencies (L59-64)