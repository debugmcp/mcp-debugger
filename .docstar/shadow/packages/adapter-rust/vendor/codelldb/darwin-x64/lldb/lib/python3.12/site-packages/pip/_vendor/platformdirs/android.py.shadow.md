# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/platformdirs/android.py
@source-hash: 06a22c027230fba6
@generated: 2026-02-09T17:59:56Z

## Android Platform Directory Implementation

Android-specific implementation of the PlatformDirsABC interface for directory path resolution on Android systems. Follows Android filesystem conventions and provides fallbacks for various directory types.

### Primary Components

**Android Class (L14-117)**: Main implementation class inheriting from PlatformDirsABC. Provides platform-specific directory paths for Android applications following standard Android directory structure patterns.

Key directory properties:
- `user_data_dir` (L24-26): Application data directory using `/data/user/<userid>/<packagename>/files/<AppName>`
- `user_config_dir` (L34-39): Configuration directory using `shared_prefs` subfolder
- `user_cache_dir` (L47-49): Cache directory using `cache` subfolder
- `user_log_dir` (L62-70): Log directory, conditionally creates `log` subdirectory if opinionated
- `user_runtime_dir` (L103-111): Runtime directory, conditionally creates `tmp` subdirectory if opinionated
- Media directories (L73-100): Documents, downloads, pictures, videos, music using `/storage/emulated/0/` paths
- `user_desktop_dir` (L98-100): Hardcoded to `/storage/emulated/0/Desktop`

Site directories (L29-31, L42-44, L52-54, L114-116) all delegate to their user equivalents as Android has no system-wide shared directories.

### Android Folder Detection Functions

**`_android_folder()` (L119-137)**: LRU-cached function that determines the base Android application folder. Uses two-tier strategy:
1. Primary: Uses pyjnius to access Android Context API for getting files directory
2. Fallback: Parses sys.path with regex pattern `/data/(data|user/\d+)/(.+)/files` to extract app folder

**Media Folder Functions (L140-217)**: Set of LRU-cached functions for standard Android media directories:
- `_android_documents_folder()` (L141-153)
- `_android_downloads_folder()` (L157-169) 
- `_android_pictures_folder()` (L173-185)
- `_android_videos_folder()` (L189-201)
- `_android_music_folder()` (L205-217)

Each follows identical pattern: attempt pyjnius Android API access, fallback to hardcoded `/storage/emulated/0/` paths.

### Dependencies and Architecture

- **Core Dependencies**: `os`, `re`, `sys`, `functools.lru_cache`, `typing.cast`
- **Parent Interface**: `.api.PlatformDirsABC` - provides base directory API contract
- **Optional Dependency**: `jnius` (PyJNIus) for Android API access - gracefully degrades if unavailable
- **Android APIs Used**: `android.content.Context`, `android.os.Environment` via autoclass

### Key Patterns

- **Dual Strategy**: All folder detection uses pyjnius first, filesystem fallbacks second
- **LRU Caching**: All folder detection functions cached with maxsize=1 for performance
- **Exception Handling**: Broad exception catching (BLE001) for Android API failures
- **Opinion-Based Paths**: Runtime and log directories conditionally add subdirectories based on `self.opinion` flag
- **Path Construction**: Uses `_append_app_name_and_version()` method from parent class for consistent app-specific paths