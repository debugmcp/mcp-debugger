# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/compat.py
@source-hash: 527fae201bf2d36c
@generated: 2026-02-09T17:59:52Z

## Purpose
This is a Python 2/3 compatibility module within the `distlib` package that provides unified interfaces across Python versions. It handles imports, type definitions, SSL verification, and data structure implementations that differ between Python versions.

## Key Components

### Version-Specific Imports (L19-87)
- **Python 2 branch (L19-49)**: Imports legacy modules like `StringIO`, `urllib2`, `ConfigParser`, `htmlentitydefs`
- **Python 3 branch (L63-87)**: Imports modern equivalents from `io`, `urllib.parse`, `urllib.request`, `html.parser`
- **Unified aliases**: Creates consistent interface regardless of Python version (e.g., `string_types`, `text_type`, `file_type`)

### SSL Hostname Verification (L89-186)
- **CertificateError class (L93-94)**: Custom exception for SSL certificate validation failures
- **_dnsname_match function (L96-143)**: RFC 6125 compliant DNS name matching with wildcard support
- **match_hostname function (L145-185)**: Complete hostname verification against SSL certificates

### Utility Classes and Functions

#### Container class (L188-199)
Generic namespace container similar to `types.SimpleNamespace`, provides attribute-based storage.

#### which function (L201-267)
Cross-platform executable finder that searches PATH, handles Windows PATHEXT extensions.

#### ZipFile context manager (L269-302)
Backports context manager support for `ZipFile` in Python 2.6, includes `ZipExtFile` wrapper (L278-288).

#### python_implementation function (L304-317)
Detects Python implementation (CPython, PyPy, Jython, IronPython) when `platform.python_implementation` unavailable.

### Advanced Data Structures

#### ChainMap class (L525-627)
Full implementation of Python 3.3's `ChainMap` for older versions:
- Maps multiple dictionaries into single view
- Supports all dictionary operations with proper precedence
- Includes `new_child()` and `parents` properties

#### OrderedDict class (L660-909)
Complete backport of `collections.OrderedDict` for Python < 2.7:
- Maintains insertion order using doubly-linked list
- Full dict interface with order-aware operations
- Supports pickling, copying, and view methods

### Logging Configuration (L911-1138)
- **BaseConfigurator class (L1005-1138)**: Handles conversion of configuration values with protocol support (`ext://`, `cfg://`)
- **Converting container classes (L931-1003)**: `ConvertingDict`, `ConvertingList`, `ConvertingTuple` that automatically convert values on access

### File System Functions (L329-363)
- **fsencode/fsdecode (L331-363)**: Filename encoding/decoding with fallback to UTF-8
- **callable function (L322-327)**: Restores `callable()` builtin for Python 3.0-3.1

### Text Processing (L365-484)
- **detect_encoding function (L383-473)**: PEP 263 compliant source file encoding detection
- **HTML escape/unescape functions (L476-484)**: Cross-version HTML entity handling

## Dependencies
- Standard library modules with version-specific imports
- `sysconfig` for platform information
- Optional `ssl` module for certificate verification
- Fallback implementations for missing stdlib components

## Architectural Patterns
- **Try/except import pattern**: Graceful fallback to backport implementations
- **Version detection**: Uses `sys.version_info` to branch behavior
- **Wrapper classes**: Provide consistent interfaces across versions
- **Protocol-based conversion**: Extensible value conversion system in logging configurator