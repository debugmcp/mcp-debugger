# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/packages.py
@source-hash: fd94030894c9f123
@generated: 2026-02-09T17:59:50Z

**Purpose**: Backwards compatibility shim that creates package aliases for vendored dependencies in the requests library. Dynamically manipulates `sys.modules` to expose vendored packages (`urllib3`, `idna`, `chardet`) under the `requests.packages` namespace.

**Key Operations**:
- **Vendored Package Aliasing (L8-16)**: Iterates through `urllib3` and `idna` packages, imports them from `pip._vendor` namespace, and creates module aliases in `sys.modules` to make them accessible as `requests.packages.urllib3` and `requests.packages.idna`
- **Module Traversal (L13-16)**: Recursively maps all submodules of vendored packages to preserve object identities across namespace boundaries
- **Chardet Integration (L18-25)**: Conditionally handles `chardet` package if available, creating dual aliases for both original module name and standardized `chardet` name

**Dependencies**:
- `sys.modules`: Core module registry manipulation
- `.compat.chardet`: Conditional chardet import from compatibility layer
- `pip._vendor.{urllib3,idna}`: Vendored package locations

**Architectural Pattern**: 
Runtime namespace aliasing using dynamic module injection. This allows legacy code expecting `requests.packages.urllib3` to work transparently with pip's vendored dependencies.

**Critical Behavior**:
- Modifies global `sys.modules` dictionary at import time
- Preserves object identity between original and aliased modules
- Handles missing chardet gracefully with conditional logic
- Uses `locals()` dictionary manipulation for dynamic attribute assignment (L10)