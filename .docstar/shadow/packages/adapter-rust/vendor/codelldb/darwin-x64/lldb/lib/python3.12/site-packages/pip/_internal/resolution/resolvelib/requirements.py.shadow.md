# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/requirements.py
@source-hash: ec91b867bd9ee589
@generated: 2026-02-09T17:57:38Z

## Primary Purpose
Implements concrete requirement classes for pip's resolvelib-based dependency resolver. Each class represents different types of package requirements with specialized behavior for dependency resolution.

## Key Classes and Functions

### ExplicitRequirement (L12-48)
- Represents a requirement for a specific candidate package
- Wraps a single `Candidate` object and delegates most operations to it
- Key methods:
  - `__init__(candidate)` (L13): Stores the candidate
  - `get_candidate_lookup()` (L43): Returns the candidate with no InstallRequirement
  - `is_satisfied_by(candidate)` (L46): Only satisfied by exact candidate match

### SpecifierRequirement (L50-120) 
- Represents requirements based on version specifiers (e.g., "package>=1.0")
- Backed by an `InstallRequirement` object without a direct link
- Performance optimizations via caching:
  - `_equal_cache` (L54): Cached string representation for equality checks
  - `_hash` (L55): Cached hash value
  - `_extras` (L56): Canonicalized extras as frozenset
- Key methods:
  - `format_for_error()` (L93): Converts comma-separated specs to human-readable format
  - `is_satisfied_by(candidate)` (L109): Checks if candidate version satisfies specifiers
  - `get_candidate_lookup()` (L106): Returns None candidate with the InstallRequirement

### SpecifierWithoutExtrasRequirement (L122-154)
- Extends `SpecifierRequirement` but strips extras from the install requirement
- Uses `install_req_drop_extras()` (L130) to remove extras during initialization
- Overrides equality and hashing to work with the modified requirement

### RequiresPythonRequirement (L156-208)
- Handles Python version requirements from package metadata
- Takes a `SpecifierSet` and matching `Candidate` 
- Key features:
  - `_specifier_string` (L161): Cached string for faster equality comparisons
  - `get_candidate_lookup()` (L197): Returns candidate only if it satisfies the specifier
  - Special handling for Python version checking in `is_satisfied_by()` (L202)

### UnsatisfiableRequirement (L210-245)
- Represents requirements that cannot be satisfied
- Always returns `False` from `is_satisfied_by()` (L244)
- Returns `(None, None)` from `get_candidate_lookup()` (L241)
- Used as a sentinel for impossible requirements

## Key Dependencies
- `pip._vendor.packaging.specifiers.SpecifierSet`: Version specifier handling
- `pip._vendor.packaging.utils`: Name canonicalization utilities  
- `pip._internal.req.req_install.InstallRequirement`: Core requirement representation
- `.base`: Abstract `Requirement`, `Candidate`, and `CandidateLookup` types

## Architectural Patterns
- **Strategy Pattern**: Different requirement types implement the same `Requirement` interface with specialized behavior
- **Caching Pattern**: Hash and equality values cached for performance in resolution algorithms
- **Delegation Pattern**: `ExplicitRequirement` delegates to its wrapped candidate
- **Assertion-based Validation**: Extensive use of assertions to enforce invariants (L52, L86, L110, L117, L129, L203)

## Critical Invariants
- `SpecifierRequirement` and `SpecifierWithoutExtrasRequirement` must not have links (L52, L129)
- Candidate names must match requirement names in `is_satisfied_by()` checks
- All specifier-backed requirements assume PEP 508 format (L86, L117)
- Prerelease handling is delegated to PackageFinder logic (L114-116, L204-206)