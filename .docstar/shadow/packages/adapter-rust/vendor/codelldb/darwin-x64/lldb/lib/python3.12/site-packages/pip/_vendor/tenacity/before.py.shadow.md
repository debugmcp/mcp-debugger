# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/before.py
@source-hash: 748644f609814df7
@generated: 2026-02-09T18:00:07Z

## Primary Purpose
This module defines "before" strategies for the Tenacity retry library - functions that execute before each retry attempt. Part of pip's vendored Tenacity package for handling retry logic with customizable pre-attempt behaviors.

## Key Functions

### before_nothing (L27-28)
- **Purpose**: No-op before strategy that performs no action
- **Signature**: `(RetryCallState) -> None`
- **Usage**: Default/placeholder strategy when no pre-attempt action is needed

### before_log (L31-45)
- **Purpose**: Factory function creating logging-enabled before strategies
- **Signature**: `(logging.Logger, int) -> Callable[[RetryCallState], None]`
- **Returns**: Closure `log_it` (L34-44) that logs retry attempts
- **Behavior**: 
  - Extracts function name from retry state using `_utils.get_callback_name()` (L39)
  - Handles edge case where `retry_state.fn` is None (L35-37)
  - Logs formatted message with function name and ordinal attempt number (L40-44)

## Dependencies
- `pip._vendor.tenacity._utils`: Utility functions for callback name extraction and ordinal formatting
- `logging` (TYPE_CHECKING only): Standard logging interface
- `RetryCallState` (TYPE_CHECKING only): Core retry state container

## Architectural Patterns
- **Strategy Pattern**: Implements pluggable before-attempt behaviors
- **Factory Pattern**: `before_log` creates parameterized strategy functions
- **Closure Pattern**: Uses nested function with captured logger/log_level context
- **Type Safety**: Leverages TYPE_CHECKING imports to avoid runtime dependencies while maintaining type hints

## Critical Invariants
- All before strategies must accept `RetryCallState` and return `None`
- Functions are designed to be side-effect only (logging, monitoring, etc.)
- Defensive programming against None function references in retry state