# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/syntax.py
@source-hash: 4e7643b8e0f80de1
@generated: 2026-02-09T18:00:09Z

## Purpose
Syntax highlighting module for the Rich terminal library, providing code syntax highlighting with customizable themes, line numbers, and styling options using Pygments as the underlying tokenizer.

## Core Architecture

### Theme System
- **SyntaxTheme** (L123-135): Abstract base class defining theme interface with methods for token styling and background colors
- **PygmentsSyntaxTheme** (L137-177): Bridges Pygments color schemes to Rich styling system, with caching for performance
- **ANSISyntaxTheme** (L179-210): Uses predefined ANSI color mappings with hierarchical token lookup
- **ANSI_LIGHT/ANSI_DARK** (L61-117): Predefined color schemes mapping Pygments token types to Rich styles

### Main Syntax Class
- **Syntax** (L227-812): Primary class for rendering syntax-highlighted code
  - Extends JupyterMixin for notebook compatibility
  - Configurable options: line numbers, themes, word wrapping, indentation guides, padding
  - Supports highlighting specific line ranges and individual lines
  - Can load from files via `from_path()` classmethod (L301-362)

### Key Methods
- **highlight()** (L452-535): Core highlighting logic that tokenizes code and applies styling
- **_get_syntax()** (L629-762): Renders syntax with line numbers and wrapping logic
- **guess_lexer()** (L364-404): Auto-detects appropriate Pygments lexer from file path/content
- **stylize_range()** (L537-549): Applies custom styling to specific code regions

### Token Processing
- Uses Pygments lexers for tokenization with fallback to plain text
- Implements line-range optimization to process only needed portions
- Handles tab expansion, dedenting, and newline normalization
- Supports custom style ranges via `_SyntaxHighlightRange` (L215-225)

## Dependencies
- **Pygments**: Core tokenization and lexer functionality
- **Rich components**: Text, Style, Segment, Console for rendering
- **Standard library**: Path handling, regex, platform detection

## Key Constants
- `DEFAULT_THEME = "monokai"` (L56)
- `NUMBERS_COLUMN_DEFAULT_PADDING = 2` (L120)
- Platform-specific rendering adjustments for Windows (L55)

## Notable Patterns
- Extensive use of caching for performance (style caches in theme classes)
- Lazy lexer resolution with fallback handling
- Generator-based rendering for memory efficiency
- Command-line interface for standalone usage (L841-958)