# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/request.py
@source-hash: 0b4394b76b5c53a2
@generated: 2026-02-09T17:57:42Z

## Purpose
Utility module for HTTP request construction and body management in urllib3. Provides header generation shortcuts and file-like object positioning for request bodies during redirects and retries.

## Key Components

### Constants (L8-17)
- `SKIP_HEADER` (L12): Special marker value "@@@SKIP_HEADER@@@" to suppress automatic header emission
- `SKIPPABLE_HEADERS` (L13): Frozen set of headers that can be skipped ("accept-encoding", "host", "user-agent")
- `ACCEPT_ENCODING` (L15): Default compression formats "gzip,deflate"
- `_FAILEDTELL` (L17): Sentinel object marking failed file position detection

### make_headers Function (L20-89)
Primary header construction utility accepting optional parameters:
- `keep_alive`: Adds "connection: keep-alive" header
- `accept_encoding`: Boolean/list/string handling for compression preferences
- `user_agent`: Custom user agent string
- `basic_auth`: Username:password for Authorization header with base64 encoding
- `proxy_basic_auth`: Username:password for Proxy-Authorization header with base64 encoding  
- `disable_cache`: Adds "cache-control: no-cache" header

Returns dictionary of normalized lowercase header names with values.

### File Position Management (L92-137)

#### set_file_position Function (L92-107)
Manages file-like object positioning for request bodies:
- If `pos` provided, rewinds body to that position
- Otherwise attempts to record current position via `tell()`
- Returns position or `_FAILEDTELL` sentinel on failure

#### rewind_body Function (L110-137)  
Attempts to rewind file-like objects to specified positions:
- Uses `seek()` method if available and position is integer
- Raises `UnrewindableBodyError` on IO failures or if position was `_FAILEDTELL`
- Raises `ValueError` for invalid position types

## Dependencies
- `base64.b64encode`: For Basic auth header encoding
- `..exceptions.UnrewindableBodyError`: Custom exception for rewind failures
- `..packages.six`: Python 2/3 compatibility utilities (`b()`, `integer_types`)

## Key Patterns
- Defensive programming with `getattr()` for optional methods
- Sentinel object pattern for distinguishing failed operations from None
- Lowercase header name normalization for consistency
- Base64 encoding for HTTP Basic authentication schemes