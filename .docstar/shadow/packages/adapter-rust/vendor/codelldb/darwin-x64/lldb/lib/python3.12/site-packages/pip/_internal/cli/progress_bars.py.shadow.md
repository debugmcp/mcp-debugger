# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/progress_bars.py
@source-hash: 35e75223c839fbaf
@generated: 2026-02-09T17:59:19Z

## Purpose
Provides progress bar rendering functionality for pip download operations, supporting both rich terminal displays and raw text output modes.

## Core Components

### Type Definitions
- **DownloadProgressRenderer** (L21): Type alias for callable that wraps iterables with progress tracking functionality

### Progress Bar Implementations

**_rich_progress_bar** (L24-58): Rich terminal progress bar using pip's vendored Rich library
- Creates adaptive column layouts based on download size availability
- Unknown size (L32-40): Shows spinner, file size, transfer speed, elapsed time
- Known size (L42-50): Shows progress bar, download column, transfer speed, ETA
- Uses 30 FPS refresh rate and respects terminal indentation (L52-53)
- Yields chunks while updating progress in real-time (L55-57)

**_raw_progress_bar** (L60-80): Fallback text-based progress display
- Outputs "Progress X of Y" format to stdout (L65-67)  
- Uses RateLimiter (0.25s) to throttle output frequency (L71, L76-78)
- Handles unknown total size by defaulting to 0 (L70)
- Updates on rate limit expiry or completion (L76-77)

### Factory Function

**get_download_progress_renderer** (L82-94): Returns appropriate progress renderer based on bar_type
- "on" → Rich progress bar with partial application (L89-90)
- "raw" → Raw text progress bar (L91-92)  
- Other → No-op iterator passthrough (L94)

## Dependencies
- **Rich library**: Advanced terminal formatting and progress bars (L5-16)
- **RateLimiter**: Controls update frequency for raw mode (L18)
- **Logging utilities**: Terminal indentation detection (L19)

## Architecture Notes
- Uses generator pattern for memory-efficient chunk processing
- Leverages functools.partial for clean factory pattern implementation  
- Defensive assertion ensures rich mode only used when expected (L30)
- Gracefully handles unknown download sizes in both modes