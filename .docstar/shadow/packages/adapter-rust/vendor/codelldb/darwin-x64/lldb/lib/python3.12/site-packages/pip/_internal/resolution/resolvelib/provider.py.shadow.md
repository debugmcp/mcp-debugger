# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/provider.py
@source-hash: 6dcb059d8be59ad0
@generated: 2026-02-09T17:57:38Z

## Primary Purpose
Implements PipProvider (L79-258), the concrete provider interface for resolvelib that handles pip's dependency resolution. This bridges pip's internal Requirement/Candidate concepts with the abstract resolver interface.

## Key Components

**PipProvider Class (L79-258)**
- Main provider implementation inheriting from AbstractProvider via _ProviderBase (L27-29)
- Constructor (L90-103) accepts Factory, constraints, dependencies settings, upgrade strategy, and user requests
- Maintains `_known_depths` (L103) for tracking dependency depth inference

**Core Provider Methods**
- `identify()` (L105-106): Returns requirement/candidate name identifier
- `get_preference()` (L108-197): Complex preference scoring for resolution order using tuple of priorities
- `find_matches()` (L199-239): Finds candidate packages matching requirements, respects upgrade strategy
- `is_satisfied_by()` (L241-243): Cached satisfaction check delegating to requirement
- `get_dependencies()` (L245-247): Extracts candidate dependencies, respects --no-deps flag

**Preference Logic (L116-197)**
Implements sophisticated prioritization considering:
1. Requires-Python packages (highest priority)
2. Direct/explicit URLs 
3. Pinned versions (== operators)
4. Backtracking causes
5. Dependency depth inference
6. User-specified package order
7. Constrained packages (with operators)
8. Alphabetical ordering

**Helper Functions**
- `_get_with_identifier()` (L54-76): Handles package name lookup with extras parsing fallback
- `_eligible_for_upgrade()` (L205-225): Internal upgrade strategy logic
- `is_backtrack_cause()` (L249-258): Static method checking if identifier caused backtracking

## Key Dependencies
- resolvelib's AbstractProvider for base interface (L15)
- Internal .base, .candidates, .factory modules for concrete types (L17-19)
- Factory class for creating Requirements/Candidates and accessing pip internals

## Architecture Notes
- Stateless factory pattern: Factory handles pip's internal mechanisms while Provider handles resolvelib API
- Depth tracking for dependency ordering using defaultdict with math.inf (L103)
- LRU caching on satisfaction checks for performance (L241)
- Type checking compatibility layer for resolvelib types (L21-29)

## Critical Behavior
- Upgrade strategy controls candidate filtering: "eager", "only-if-needed", or "to-satisfy-only" (L216-225)
- Identifier parsing handles extras notation with partition hack (L68-75)
- Preference tuple ordering is critical - lower values have higher priority (L188-197)