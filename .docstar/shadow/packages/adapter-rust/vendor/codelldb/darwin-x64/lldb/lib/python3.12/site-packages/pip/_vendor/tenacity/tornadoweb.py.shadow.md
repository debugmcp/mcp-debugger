# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/tornadoweb.py
@source-hash: a68dbdfc5d4cb7ca
@generated: 2026-02-09T18:00:08Z

## Purpose
Tornado-specific retry adapter that integrates the tenacity retry library with Tornado's asynchronous framework, providing coroutine-based retry functionality with configurable sleep behavior.

## Key Components

### TornadoRetrying Class (L31-59)
- **Purpose**: Extends BaseRetrying to provide Tornado coroutine-compatible retry logic
- **Constructor (L32-34)**: Accepts custom sleep function (defaults to `gen.sleep`) and forwards kwargs to parent
- **__call__ method (L36-59)**: Core retry loop implemented as Tornado coroutine using `@gen.coroutine` decorator

### Retry Loop Logic (L46-59)
- **State Management (L45)**: Creates RetryCallState to track retry attempts
- **Decision Handling (L47)**: Uses `self.iter()` to determine next action (DoAttempt or DoSleep)
- **Attempt Execution (L48-54)**: Executes target function via `yield`, captures exceptions and results
- **Sleep Handling (L55-57)**: Performs async sleep using configured sleep function
- **Return Logic (L58-59)**: Uses `gen.Return` for final result (pre-Python 3.7 coroutine pattern)

## Dependencies
- **tenacity**: BaseRetrying, DoAttempt, DoSleep, RetryCallState from pip vendored version (L18-21)
- **tornado**: gen module for coroutine decorators and utilities (L23)
- **tornado.concurrent.Future**: Type hint only, imported conditionally (L25-26)

## Type Safety
- Generic return type `_RetValT` (L28) for type-safe retry operations
- Extensive typing annotations for callable signatures and Future types
- TYPE_CHECKING guard for conditional imports (L25-26)

## Architectural Notes
- Uses legacy Tornado coroutine syntax (`@gen.coroutine`, `gen.Return`) compatible with older Tornado versions
- Exception handling captures all BaseExceptions (L51) with broad catch pattern
- Integrates with tenacity's state machine pattern for retry decision making