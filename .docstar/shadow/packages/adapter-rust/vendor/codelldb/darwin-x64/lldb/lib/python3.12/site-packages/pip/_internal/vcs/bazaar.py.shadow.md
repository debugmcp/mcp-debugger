# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/vcs/bazaar.py
@source-hash: 10a4ad71068aa4db
@generated: 2026-02-09T17:59:40Z

## Purpose
Bazaar (bzr) version control adapter for pip's internal VCS handling system. Provides Bazaar-specific implementations for common VCS operations like fetching, updating, and repository introspection.

## Key Components

### Bazaar Class (L18-110)
Extends `VersionControl` base class to implement Bazaar-specific VCS operations:
- **Class attributes**: Defines VCS identity (`name="bzr"`, `dirname=".bzr"`, `repo_name="branch"`) and supported URL schemes (L22-30)
- **URL schemes**: Supports bzr+http, bzr+https, bzr+ssh, bzr+sftp, bzr+ftp, bzr+lp, bzr+file protocols

### Core VCS Operations

**get_base_rev_args()** (L32-34): Static method returning revision arguments `["-r", rev]` for bzr commands

**fetch_new()** (L36-55): Performs initial checkout with verbosity-aware logging and flag handling:
- Maps verbosity levels to bzr flags (quiet, normal, or multiple -v flags)
- Uses lightweight checkout with `make_command()`

**switch()** (L57-58): Switches working directory to different URL using `bzr switch`

**update()** (L60-71): Updates existing repository with special handling for standalone branches:
- Detects standalone branches via "bzr info" output parsing (L64)
- Converts standalone to checkout using "bzr bind" for legacy compatibility (L65-68)

### URL and Repository Introspection

**get_url_rev_and_auth()** (L73-79): Parses URLs and applies bzr-specific fixes:
- Re-adds "bzr+" prefix to SSH URLs after parent class processing (L77-78)

**get_remote_url()** (L81-94): Extracts remote URL from local repository:
- Parses "bzr info" output for "checkout of branch:" or "parent branch:" patterns (L86-93)
- Handles local repository path-to-URL conversion

**get_revision()** (L96-104): Retrieves current revision number using "bzr revno"

**is_commit_id_equal()** (L106-109): Always returns `False` - assumes versions don't match (conservative approach)

## Dependencies
- Imports from `pip._internal.utils.*` for command building, path handling, and URL utilities
- Extends `pip._internal.vcs.versioncontrol.VersionControl` base class
- Uses logger for operation tracking

## Registration
Registers with VCS system via `vcs.register(Bazaar)` (L112) for automatic discovery and usage by pip.

## Architecture Notes
- Follows pip's VCS adapter pattern with standardized method signatures
- Handles Bazaar's distinction between standalone branches and bound checkouts
- Conservative revision comparison strategy (always assumes mismatch)