# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/scanner.py
@source-hash: 6ff9eee7f7f71c28
@generated: 2026-02-09T17:59:50Z

## Scanner Module for Context-Sensitive Lexing

**Primary Purpose**: Provides regex-based scanning capabilities for languages requiring context-dependent parsing (e.g., Pascal, Delphi) where simple regex lexers are insufficient.

**Key Components**:

### EndOfText Exception (L20-24)
- **Purpose**: Custom exception raised when attempting to match beyond text boundaries
- **Inheritance**: Extends `RuntimeError`
- **Usage**: Thrown by scanner methods when `eos` is reached

### Scanner Class (L27-104)
- **Core Responsibility**: Text scanning with regex pattern matching and position tracking
- **State Management**: Maintains current position, match history, and compiled regex cache
- **Key Attributes**:
  - `data`: Source text to scan
  - `pos`: Current scanning position  
  - `start_pos`: Position before last successful match
  - `match`: Last matched text content
  - `last`: Previous match value
  - `_re_cache`: Dictionary caching compiled regex patterns

**Key Methods**:

### `__init__(self, text, flags=0)` (L35-47)
- Initializes scanner with text and optional regex flags
- Sets up position tracking and regex cache

### `eos` Property (L49-52) 
- Returns boolean indicating if scanner reached end of text
- Critical for boundary checking before pattern operations

### Pattern Matching Methods:
- **`check(pattern)` (L54-64)**: Non-consuming lookahead - tests pattern at current position without advancing
- **`test(pattern)` (L66-70)**: Boolean pattern test wrapper around `check()`
- **`scan(pattern)` (L72-93)**: Core scanning method - matches pattern, updates position and state on success
- **`get_char()` (L95-97)**: Convenience method to scan exactly one character using `.` pattern

**Architecture Patterns**:
- **Regex Caching**: Compiled patterns stored in `_re_cache` to avoid recompilation overhead
- **State Preservation**: Maintains `last` and `match` for backtracking capabilities  
- **Boundary Safety**: All pattern methods check `eos` and raise `EndOfText` exception
- **Position Tracking**: Explicit `start_pos` and `pos` management for precise text navigation

**Dependencies**: 
- `re` module for regex compilation and matching

**Usage Context**: Designed for lexers handling context-sensitive languages where token meaning depends on surrounding context, referenced in docstring as supporting `DelphiLexer` implementation.