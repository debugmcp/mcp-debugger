# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/plugin.py
@source-hash: 8f5161df5d116d5d
@generated: 2026-02-09T17:59:49Z

## Primary Purpose
This file implements Pygments' plugin discovery system, providing a robust fallback mechanism to load external lexers, formatters, styles, and filters through Python entry points. It handles compatibility across different Python versions and package management systems.

## Key Components

### Entry Point Constants (L41-44)
- `LEXER_ENTRY_POINT`: 'pygments.lexers' - namespace for lexer plugins
- `FORMATTER_ENTRY_POINT`: 'pygments.formatters' - namespace for formatter plugins  
- `STYLE_ENTRY_POINT`: 'pygments.styles' - namespace for style plugins
- `FILTER_ENTRY_POINT`: 'pygments.filters' - namespace for filter plugins

### Core Discovery Function
**`iter_entry_points(group_name)` (L47-68)**
- Central plugin discovery mechanism with graceful degradation
- Falls back through: `importlib.metadata` → `importlib_metadata` → `pkg_resources` → empty list
- Handles both new (Python 3.10+) and legacy entry point APIs
- Returns iterator of entry points for specified group

### Plugin Finder Functions
**`find_plugin_lexers()` (L71-73)**
- Yields loaded lexer classes directly
- Returns only the class object, not the name

**`find_plugin_formatters()` (L76-78)**
- Yields (name, class) tuples for formatters
- Name can include file extensions with leading slash (e.g., "/.ext")

**`find_plugin_styles()` (L81-83)**
- Yields (name, class) tuples for style plugins
- Standard name-based discovery pattern

**`find_plugin_filters()` (L86-88)**
- Yields (name, class) tuples for filter plugins
- Consistent with formatters and styles pattern

## Architecture Patterns
- **Defensive Programming**: Multiple fallback layers prevent complete failure
- **Generator Pattern**: All finder functions use generators for memory efficiency
- **Version Compatibility**: Explicit handling of Python 3.8-3.12+ differences
- **Separation of Concerns**: Each plugin type has dedicated discovery function

## Critical Dependencies
- `importlib.metadata` (Python 3.8+) or `importlib_metadata` backport
- `pkg_resources` as final fallback
- Entry point specifications in package metadata

## Important Notes
- Lexers return only classes, while other plugins return (name, class) tuples
- Formatter names can include file extensions for direct file association
- System gracefully handles missing dependencies by returning empty iterables
- Plugin loading is lazy - classes are loaded only when iterator is consumed