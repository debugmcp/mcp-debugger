# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/req/constructors.py
@source-hash: 682f4d73e484484c
@generated: 2026-02-09T17:59:40Z

## Purpose
Factory module for creating InstallRequirement instances from various input formats (requirements strings, editable installs, parsed requirements, etc.). Separated from InstallRequirement class to improve code organization and maintainability.

## Key Functions

### Core Constructors (L222-560)
- `install_req_from_editable(editable_req, ...)` (L222-251): Creates InstallRequirement for editable installations (VCS URLs, local paths with -e flag)
- `install_req_from_line(name, ...)` (L386-420): Main constructor from requirement strings, handles URLs, paths, and requirement specs
- `install_req_from_req_string(req_string, ...)` (L423-458): Simple constructor from valid requirement strings with PyPI domain validation
- `install_req_from_parsed_requirement(parsed_req, ...)` (L461-498): Creates from ParsedRequirement objects, delegates to editable or line constructors
- `install_req_from_link_and_ireq(link, ireq)` (L501-516): Clones InstallRequirement with new link
- `install_req_drop_extras(ireq)` (L519-542): Creates copy without extras, sets original as parent
- `install_req_extend_extras(ireq, extras)` (L545-560): Shallow copy with additional extras

### Parsing Utilities (L44-216)
- `_strip_extras(path)` (L44-53): Extracts extras from path strings using regex
- `convert_extras(extras)` (L56-59): Converts extras string to set
- `_set_requirement_extras(req, new_extras)` (L62-84): Creates new Requirement with modified extras using PEP 508 regex
- `parse_editable(editable_req)` (L87-139): Parses editable requirements into name, URL, extras tuple
- `parse_req_from_editable(editable_req)` (L203-216): Wrapper returning RequirementParts dataclass
- `parse_req_from_line(name, line_source)` (L307-383): Complex parser handling URLs, paths, wheels, and requirement specs

### Validation & Helpers (L142-304)
- `check_first_requirement_in_file(filename)` (L142-168): Validates requirements file format
- `deduce_helpful_msg(req)` (L170-192): Generates error messages for invalid requirements
- `_looks_like_path(name)` (L254-270): Heuristic path detection
- `_get_url_from_path(path, name)` (L273-304): Converts filesystem paths to file:// URLs with validation

## Key Data Structures
- `RequirementParts` dataclass (L195-201): Structured container for requirement, link, markers, extras
- Module exports: `install_req_from_editable`, `install_req_from_line`, `parse_editable` (L34-38)

## Dependencies
- Core: packaging library (requirements, markers, specifiers), pip._internal models
- VCS integration via pip._internal.vcs
- File system utilities for path/archive detection

## Architecture Patterns
- Factory pattern with multiple constructor entry points
- Separation of parsing logic from InstallRequirement construction
- Consistent error handling with InstallationError exceptions
- Regex-based parsing for complex requirement formats (PEP 508, extras)