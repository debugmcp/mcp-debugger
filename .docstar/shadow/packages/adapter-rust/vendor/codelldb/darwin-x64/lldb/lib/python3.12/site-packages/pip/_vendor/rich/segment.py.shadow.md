# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/segment.py
@source-hash: 854d6e79e5ea23a6
@generated: 2026-02-09T18:00:12Z

## Purpose
Core text rendering primitive for the Rich library that represents styled text segments as the final step before ANSI code generation. Provides comprehensive text manipulation, styling, and layout operations for terminal output.

## Key Components

### ControlType (L35-53)
IntEnum defining terminal control codes (BELL, CURSOR movements, CLEAR, etc.) that map to ANSI escape sequences for terminal manipulation.

### Segment (L64-655)
Main NamedTuple class representing a piece of styled text with three fields:
- `text: str` - The actual text content
- `style: Optional[Style]` - Rich style information
- `control: Optional[Sequence[ControlCode]]` - Terminal control sequences

#### Core Properties & Methods:
- `cell_length` (L82-89): Returns display width accounting for wide Unicode characters
- `is_control` (L105-107): Checks if segment contains control codes
- `split_cells()` (L148-168): Splits segment at specified column position, handling wide characters correctly
- `_split_cells()` (L111-146): Cached implementation of cell splitting with LRU cache

#### Class Methods for Segment Processing:
- `apply_style()` (L176-214): Applies base and post styles to segment iterables
- `filter_control()` (L217-233): Filters segments by control code presence
- `split_lines()` (L236-262): Splits segments on newlines into line lists
- `split_and_crop_lines()` (L265-309): Splits and crops lines to specified length with padding
- `adjust_line_length()` (L312-354): Crops or pads single line to target width
- `get_line_length()` (L357-367): Calculates total display width of segment list
- `get_shape()` (L370-381): Returns (width, height) of segment matrix
- `set_shape()` (L384-417): Resizes segment matrix to specified dimensions

#### Alignment Methods:
- `align_top()` (L420-446): Adds padding lines at bottom
- `align_bottom()` (L449-475): Adds padding lines at top  
- `align_middle()` (L478-506): Centers content with padding above/below

#### Utility Methods:
- `simplify()` (L509-533): Combines adjacent segments with same style
- `strip_links()` (L536-550): Removes hyperlinks from segments
- `strip_styles()` (L553-563): Removes all styling
- `remove_color()` (L566-585): Removes color while preserving other styles
- `divide()` (L588-654): Splits segment stream at specified column positions

### Segments (L657-679)
Simple renderable wrapper for segment iterables with optional newline insertion.

### SegmentLines (L682-704)
Renderable wrapper for lists of segment lines with newline control.

## Dependencies
- `.cells`: Unicode cell width calculations and character sizing
- `.style`: Rich styling system
- `.repr`: Rich representation utilities

## Architecture Notes
- Extensively uses caching (`@lru_cache`) for performance on text splitting operations
- Handles complex Unicode scenarios including double-width characters
- Designed as immutable data structure (NamedTuple) for safe sharing
- Control codes bypass normal text processing paths
- Cell-based positioning accounts for terminal display characteristics

## Usage Context
Terminal rendering pipeline: Rich objects → Segments → ANSI strings → Terminal output