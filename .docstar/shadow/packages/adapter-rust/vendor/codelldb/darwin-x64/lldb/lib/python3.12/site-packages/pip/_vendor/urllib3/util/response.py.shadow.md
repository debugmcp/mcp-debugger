# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/response.py
@source-hash: 189a60dc4822f6a6
@generated: 2026-02-09T17:57:40Z

**Purpose**: HTTP response utility functions for urllib3, providing file-like object state checking, header parsing validation, and HTTP method detection.

**Key Functions**:

- **is_fp_closed(obj)** (L9-37): Determines if a file-like object is closed using multiple fallback strategies
  - Tries `isclosed()` method first (Python 3 compatibility)
  - Falls back to `closed` attribute (standard file-like interface)
  - Checks `fp` attribute for None (HTTPResponse containers)
  - Raises ValueError if closure state cannot be determined

- **assert_header_parsing(headers)** (L40-91): Validates HTTP header parsing completeness on Python 3
  - Accepts `http.client.HTTPMessage` objects only
  - Extracts parsing defects and unparsed payload data
  - Filters out benign multipart-related defects (StartBoundaryNotFoundDefect, MultipartInvariantViolationDefect)
  - Raises `HeaderParsingError` if significant parsing issues found

- **is_response_to_head(response)** (L94-107): Detects if HTTP response originated from HEAD request
  - Accesses private `_method` attribute of HTTPResponse
  - Handles AppEngine platform quirk where method is integer (3 = HEAD)
  - Returns boolean indicating HEAD request origin

**Dependencies**:
- `email.errors` for multipart parsing defect types
- `..exceptions.HeaderParsingError` for header validation errors
- `..packages.six.moves.http_client` for HTTP client compatibility

**Notable Patterns**:
- Progressive fallback strategy in `is_fp_closed()` for maximum compatibility
- Platform-specific handling in `is_response_to_head()` for AppEngine
- Defensive programming with explicit type checking in header parsing
- Multipart defect filtering to handle httplib parsing quirks