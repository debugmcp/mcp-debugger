# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/cachecontrol/_cmd.py
@source-hash: 8a2b2dd84a7326f0
@generated: 2026-02-09T17:59:35Z

**Purpose**: Command-line testing utility for pip's CacheControl HTTP caching functionality. Provides a simple CLI interface to test cache operations on a given URL.

**Core Functions**:
- `setup_logging()` (L22-25): Configures debug-level logging for cache controller operations
- `get_session()` (L28-37): Creates a requests.Session with CacheControlAdapter mounted for both HTTP/HTTPS, using DictCache for in-memory storage
- `get_args()` (L40-43): Parses command line arguments to extract target URL
- `main()` (L46-67): Main execution flow - fetches URL, enables logging, tests cache storage and retrieval

**Dependencies**:
- `requests`: HTTP client library
- `pip._vendor.cachecontrol.adapter.CacheControlAdapter`: HTTP adapter providing cache functionality
- `pip._vendor.cachecontrol.cache.DictCache`: In-memory cache implementation
- `pip._vendor.cachecontrol.controller.logger`: Logging instance for cache operations

**Key Architecture Decisions**:
- Uses DictCache for ephemeral testing (cache doesn't persist between runs)
- Mounts adapter on both HTTP and HTTPS protocols
- Manually attaches cache_controller reference to session object for direct access (L36, L58)
- Logging is enabled after initial request to avoid noise during setup

**Execution Flow**:
1. Parse URL argument
2. Create session with cache adapter
3. Make initial request to populate cache
4. Enable debug logging
5. Test cache storage and retrieval operations
6. Report cache status to stdout

**Critical Notes**:
- Cache controller is accessed via dynamic attribute assignment (`sess.cache_controller`)
- Uses raw response object for cache operations
- Designed for testing/debugging cache behavior rather than production use