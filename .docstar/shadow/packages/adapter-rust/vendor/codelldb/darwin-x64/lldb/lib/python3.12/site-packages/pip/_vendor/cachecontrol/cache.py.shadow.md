# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/cachecontrol/cache.py
@source-hash: 393423ef6b547fc0
@generated: 2026-02-09T17:59:36Z

**Primary Purpose**: Defines the cache abstraction layer for CacheControl HTTP caching library with three cache implementations: base interface, in-memory dictionary cache, and separate body storage cache.

**Core Classes**:

- `BaseCache` (L18-32): Abstract base class defining the standard cache interface
  - `get(key)` (L19-20): Retrieves cached bytes by key, returns None if not found
  - `set(key, value, expires)` (L22-25): Stores bytes with optional expiration
  - `delete(key)` (L27-28): Removes cache entry by key
  - `close()` (L30-31): Cleanup method (no-op in base implementation)

- `DictCache` (L34-51): Thread-safe in-memory cache implementation using dictionary
  - Uses `threading.Lock` for concurrent access safety (L36)
  - Stores data in `self.data` dictionary (L37)
  - Ignores expiration parameter in `set()` method (L42-46)
  - Thread-safe operations for `set()` and `delete()` but not `get()`

- `SeparateBodyBaseCache` (L54-74): Abstract cache for scenarios requiring separate metadata/body storage
  - Extends `BaseCache` with additional body-specific methods
  - `set_body(key, body)` (L67-68): Stores response body separately from metadata
  - `get_body(key)` (L70-74): Returns body as file-like IO object
  - Design pattern expects `set()` for metadata followed by `set_body()` for content

**Key Dependencies**:
- `threading.Lock`: Thread synchronization for `DictCache`
- `typing`: Type annotations for IO, MutableMapping
- Optional datetime import for expiration handling

**Architectural Patterns**:
- Strategy pattern: Different cache implementations behind common interface
- Template method pattern: Base classes define interface, subclasses implement behavior
- Separation of concerns: `SeparateBodyBaseCache` separates metadata from response bodies

**Critical Design Notes**:
- `DictCache.get()` is not thread-safe (no lock acquisition)
- Expiration handling is interface-only - `DictCache` ignores expiration parameter
- `SeparateBodyBaseCache` requires two-step storage process for complete caching