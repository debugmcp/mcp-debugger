# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/sphinxext.py
@source-hash: 5c81f107030c3366
@generated: 2026-02-09T17:59:53Z

## Primary Purpose
Sphinx extension for Pygments that auto-generates reStructuredText documentation for lexers, formatters, and filters. Provides the `pygmentsdoc` directive to create comprehensive documentation with tabular overviews and detailed class descriptions.

## Core Components

### Documentation Templates (L20-56)
- `MODULEDOC`: reStructuredText template for module documentation
- `LEXERDOC`: Template for lexer class documentation with short names, filenames, MIME types
- `FMTERDOC`: Template for formatter class documentation 
- `FILTERDOC`: Template for filter class documentation

### PygmentsDoc Directive (L58-236)
Main Sphinx directive class extending `Directive`. Configured as:
- Single required argument specifying doc type
- No content or optional arguments allowed
- Empty option spec

#### Key Methods
- `run()` (L69-86): Entry point that routes to specific documentation methods based on argument
- `document_lexers_overview()` (L88-146): Generates tabular overview of all lexers with extensions, aliases, and class links
- `document_lexers()` (L148-205): Creates detailed lexer documentation with docstrings and example code
- `document_formatters()` (L207-223): Documents formatter classes with names and file extensions
- `document_filters()` (L225-235): Documents filter classes with names and descriptions

## Architecture Patterns

### Template-Based Documentation Generation
Uses string formatting with predefined reStructuredText templates to ensure consistent output formatting across all documentation types.

### Dynamic Module Loading
Employs `__import__()` to dynamically load Pygments modules and introspect classes for documentation generation.

### Dependency Tracking
Automatically tracks loaded module files via `self.filenames` and registers them with Sphinx's dependency system for proper rebuilds.

### Example Code Integration
Lexer documentation includes example code from test files when `_example` attribute is present, formatted as code blocks with appropriate syntax highlighting.

## Critical Implementation Details

### Error Handling
- Validates directive arguments strictly (L79-80)
- Checks for missing docstrings and raises warnings (L162-163, L198-199)
- Validates example file content exists (L173-176)

### Text Processing
- Handles byte string docstrings by decoding to UTF-8 (L165-166, L193-194, L217-218, L232-233)
- Escapes reStructuredText special characters in filenames (`*` and `_`)
- Formats table cells with proper alignment and separators

### Integration Points
- Registers with Sphinx via `setup()` function (L238-239)
- Uses Sphinx's `nested_parse_with_titles()` for proper document tree integration
- Returns parsed nodes rather than raw text for proper Sphinx processing