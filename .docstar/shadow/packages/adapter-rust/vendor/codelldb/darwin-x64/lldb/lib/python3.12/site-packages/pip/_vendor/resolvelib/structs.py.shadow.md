# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/resolvelib/structs.py
@source-hash: d3fd7f5cef33fc22
@generated: 2026-02-09T18:00:00Z

**Purpose**: Core data structures for the resolvelib dependency resolution library, providing graph manipulation and iterator utilities.

## Key Classes

### DirectedGraph (L6-70)
Graph data structure maintaining bidirectional edge mappings for dependency resolution.

**Core attributes**:
- `_vertices` (L10): Set of all graph nodes
- `_forwards` (L11): Maps vertex → set of children (outgoing edges)  
- `_backwards` (L12): Maps vertex → set of parents (incoming edges)

**Key methods**:
- `add(key)` (L31-37): Adds new vertex, initializes empty edge sets
- `remove(key)` (L39-45): Removes vertex and all connected edges
- `connect(f, t)` (L50-58): Creates directed edge from f to t
- `connected(f, t)` (L47-48): Checks if edge exists between vertices
- `iter_edges()` (L60-63): Yields all (from, to) edge pairs
- `iter_children/parents()` (L65-69): Iterates vertex relationships

### IteratorMapping (L72-107)
Mapping implementation that combines base mapping with accessor function and append data.

**Constructor params** (L73-76):
- `mapping`: Base mapping object
- `accessor`: Function to transform mapping values into iterables
- `appends`: Additional key-value pairs to overlay

**Behavior**: `__getitem__` (L93-98) chains results from `accessor(mapping[k])` with `appends[k]`

### _FactoryIterableView (L109-140)
Wrapper for iterator factories that enables multiple iterations while preserving lazy evaluation.

**Key mechanism**: `__iter__` (L134-139) uses `itertools.tee()` to split iterator, caching one copy for future iterations

### _SequenceIterableView (L142-162)
Simple proxy wrapper for sequence objects, providing consistent interface with `_FactoryIterableView`.

## Utility Functions

### build_iter_view(matches) (L164-170)
Factory function that creates appropriate iterable view:
- Callable inputs → `_FactoryIterableView`
- Non-sequence iterables → converted to list → `_SequenceIterableView`
- Sequences → direct `_SequenceIterableView`

## Dependencies
- `itertools` (L1): For iterator manipulation and chaining
- `.compat.collections_abc` (L3): Cross-version compatibility for abstract base classes

## Design Patterns
- **Bidirectional graph representation**: Maintains both forward and backward edge mappings for efficient traversal
- **Iterator composition**: `IteratorMapping` chains multiple iterables using `itertools.chain`
- **Lazy evaluation preservation**: `_FactoryIterableView` maintains factory semantics while enabling re-iteration
- **Python 2/3 compatibility**: Provides `__nonzero__` aliases for `__bool__` methods