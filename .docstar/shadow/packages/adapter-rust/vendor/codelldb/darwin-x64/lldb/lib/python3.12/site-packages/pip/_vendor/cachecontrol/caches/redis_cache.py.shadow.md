# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/cachecontrol/caches/redis_cache.py
@source-hash: f6b9aac2d62efe58
@generated: 2026-02-09T17:57:27Z

## Primary Purpose
Redis-backed cache implementation for pip's cachecontrol system, providing persistent HTTP response caching using Redis as the storage backend.

## Core Components

**RedisCache Class (L16-48)**
- Inherits from `BaseCache` (L10) to implement the standard cache interface
- Constructor (L17-18): Accepts a Redis connection object typed as `Redis[bytes]`
- Storage operations use Redis connection pooling automatically

## Key Methods

**get(key: str) â†’ bytes | None (L20-21)**
- Direct Redis GET operation for cache retrieval
- Returns None if key doesn't exist

**set(key: str, value: bytes, expires: int | datetime | None = None) (L23-35)**
- Flexible expiration handling with three modes:
  - No expiration: uses Redis SET (L26-27)
  - Datetime expiration: converts to seconds delta, handles timezone-aware/naive datetimes (L28-33)
  - Integer expiration: direct Redis SETEX with seconds (L34-35)
- Timezone normalization for datetime comparisons (L29-31)

**delete(key: str) (L37-38)**
- Standard Redis DELETE operation

**clear() (L40-44)**
- WARNING: Destructive operation that deletes ALL keys in the Redis database
- Iterates through all keys and deletes each individually

**close() (L46-48)**
- No-op implementation since Redis handles connection pooling internally

## Dependencies
- `pip._vendor.cachecontrol.cache.BaseCache` - Base cache interface
- `redis.Redis` - Redis client (TYPE_CHECKING import)
- `datetime` module for expiration time handling

## Architecture Notes
- Uses Redis connection pooling pattern (no explicit connection management needed)
- Supports both timezone-aware and naive datetime objects for expiration
- Clear operation is database-wide, not namespace-specific