# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/live.py
@source-hash: bd4727255d8b3122
@generated: 2026-02-09T18:00:12Z

## Purpose and Responsibility
This module implements Rich's `Live` class - a real-time display system for automatically updating terminal output. It enables continuous rendering of changing content (progress bars, tables, etc.) without terminal flicker by managing cursor positioning, screen clearing, and refresh timing.

## Key Classes and Functions

### `_RefreshThread` (L16-33)
- Daemon thread that calls `Live.refresh()` at regular intervals
- Constructor takes `Live` instance and `refresh_per_second` rate
- Uses `Event` for clean shutdown via `stop()` method
- Runs refresh loop with calculated sleep intervals and thread-safe locking

### `Live` (L35-268)
Primary class inheriting from `JupyterMixin` and `RenderHook` for auto-updating live displays.

**Core Constructor Parameters** (L51-64):
- `renderable`: Content to display (optional)  
- `console`: Console instance for output (defaults to global console)
- `screen`: Enable alternate screen mode
- `auto_refresh`: Enable automatic refresh threading
- `refresh_per_second`: Refresh rate (default 4 Hz)
- `transient`: Clear content on exit
- `redirect_stdout/stderr`: Capture print statements
- `vertical_overflow`: Handle content overflow behavior
- `get_renderable`: Dynamic content callback

**Key Methods**:
- `start()` (L104-132): Initialize live display, setup screen mode, start refresh thread
- `stop()` (L134-164): Clean shutdown, restore terminal state, stop refresh thread  
- `refresh()` (L220-247): Core update method - renders current content to console
- `update()` (L206-218): Change displayed content with optional immediate refresh
- `get_renderable()` (L96-102): Resolve current renderable from static or callback source

**State Management**:
- `_started` flag tracks active state
- `_lock` (RLock) ensures thread-safe operations
- `_restore_stdout/_restore_stderr` for I/O redirection cleanup
- `_live_render` (LiveRender instance) handles actual rendering logic

**Context Manager Support** (L165-175):
- `__enter__`: Starts live display
- `__exit__`: Ensures proper cleanup on scope exit

### I/O Redirection Methods
- `_enable_redirect_io()` (L177-185): Wraps stdout/stderr with `FileProxy` 
- `_disable_redirect_io()` (L187-194): Restores original stdout/stderr streams

### Rendering Integration  
- `process_renderables()` (L249-268): `RenderHook` implementation for cursor management and live content injection

## Dependencies and Relationships
- **Console Integration**: Tightly coupled with Rich's `Console` class for output management
- **LiveRender**: Delegates actual rendering logic to `LiveRender` class
- **FileProxy**: Uses proxy pattern for stdout/stderr capture
- **Threading**: Manages background refresh with `_RefreshThread`
- **Jupyter Support**: Conditional IPython widget integration for notebook environments

## Architectural Patterns
- **Context Manager**: Safe resource management with automatic cleanup
- **Thread Safety**: RLock protects shared state during concurrent refresh operations  
- **Strategy Pattern**: `VerticalOverflowMethod` enum controls overflow behavior
- **Proxy Pattern**: `FileProxy` intercepts print statements for live display integration
- **Observer Pattern**: Implements `RenderHook` interface for console rendering pipeline

## Critical Invariants
- Must call `start()` before `refresh()` operations
- Thread-safe locking required for all renderable modifications
- Proper cleanup of terminal state (cursor, alternate screen) on exit
- I/O redirection must be restored to prevent broken stdout/stderr
- Refresh thread lifecycle tied to `Live` instance lifecycle

## Demo Code (L271-375)
Contains executable example demonstrating live currency exchange rate table with dynamic updates, showcasing typical usage patterns and capabilities.