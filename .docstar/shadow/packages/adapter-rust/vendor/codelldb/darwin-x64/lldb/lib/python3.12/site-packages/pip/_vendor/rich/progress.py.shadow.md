# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/progress.py
@source-hash: 3f4db18bb4f651ad
@generated: 2026-02-09T18:00:13Z

## Progress Bars and Tracking Library

**Primary Purpose:** Rich terminal progress bar system with thread-safe task management, file I/O tracking, and customizable column layouts. Part of the Rich console rendering framework.

### Core Architecture

**Progress (L1049-1635):** Main progress display manager using Live rendering. Thread-safe with RLock synchronization. Manages multiple concurrent tasks, auto-refresh capabilities, and console output redirection.

**Task (L924-1047):** Dataclass representing individual progress items. Contains completion tracking, speed calculation using sliding window of ProgressSample instances, and time estimation. Thread-safe with internal RLock.

**ProgressColumn (L495-535):** Abstract base for display columns with caching mechanism via _renderable_cache. Subclasses implement render() method for custom visualizations.

### Key Components

**Task Management:**
- `add_task()` (L1583-1624): Creates new tasks with optional auto-start
- `update()` (L1400-1459): Thread-safe task updates with progress sampling
- `advance()` (L1500-1528): Increment completion with speed tracking
- `track()` (L1179-1218): Iterator wrapper with optional threading for auto-refresh

**File I/O Integration:**
- `wrap_file()` (L1220-1260): Binary file wrapper with progress tracking
- `open()` (L1294-1369): File opener with mode validation and TextIOWrapper support
- `_Reader` (L173-271): BinaryIO wrapper that advances progress on read operations

**Column Types:**
- `BarColumn` (L634-673): Visual progress bar with styling
- `TextColumn` (L604-632): Formatted text with markup support
- `TaskProgressColumn` (L688-757): Percentage/speed display
- `TimeRemainingColumn` (L760-805): ETA calculation with compact mode
- `SpinnerColumn` (L554-601): Animated spinner for indeterminate progress

### Threading Model

**_TrackThread (L63-101):** Background thread for periodic progress updates during sequence iteration. Uses Event for clean shutdown.

**_ReadContext (L273-292):** Context manager coordinating Progress and reader lifecycles.

### Utility Functions

**track() (L103-170):** Standalone function creating temporary Progress instance for simple iteration tracking.

**wrap_file() (L294-356)** and **open() (L359-492):** Standalone file progress functions with pre-configured column layouts.

### Speed Calculation

Uses sliding window approach with ProgressSample deque (maxlen=1000). Samples older than speed_estimate_period are automatically purged. Speed calculated as total_completed / total_time across samples.

### Type Safety

Extensive use of overloads for file modes, generic type variables (ProgressType, _I), and NewType for TaskID. Compatible with both Python 3.7+ typing and typing_extensions.

### Dependencies

- Rich console system (Live, Console, Table, Text)
- Standard library threading, io, dataclasses
- File operations via os.stat for size detection