# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/database.py
@source-hash: d15f50becd15af16
@generated: 2026-02-09T17:59:55Z

## Purpose
Implements PEP 376 distribution database functionality for managing Python package installations. Provides classes and utilities for discovering, inspecting, and manipulating installed distributions including both modern .dist-info and legacy .egg-info formats.

## Key Classes

### _Cache (L44-73)
Simple caching mechanism mapping distribution names and paths to distribution objects. Manages two dictionaries (`name`, `path`) and a `generated` flag to track cache state.

### DistributionPath (L75-325)
Main interface for discovering distributions on a path (typically sys.path). Key methods:
- `__init__` (L80-98): Configures path scanning with optional egg support
- `_yield_distributions` (L115-167): Core discovery logic for .dist-info and .egg-info
- `get_distributions` (L210-230): Returns iterator of all found distributions
- `get_distribution` (L232-256): Finds specific distribution by name
- `provides_distribution` (L258-297): Finds distributions providing a capability

### Distribution (L327-481)
Base class for all distributions with core metadata handling:
- `__init__` (L345-360): Initializes from Metadata object
- Properties for requirements: `run_requires`, `meta_requires`, etc. (L398-416)
- `matches_requirement` (L418-449): Checks if distribution satisfies requirement
- `provides` property (L378-388): Lists what this distribution provides

### BaseInstalledDistribution (L483-536)
Abstract base for installed distributions with file hashing support via `get_hash` method (L506-535).

### InstalledDistribution (L538-865)
PEP 376 compliant installed distribution (.dist-info):
- `__init__` (L548-580): Loads metadata and REQUESTED file status
- `_get_records` (L589-610): Reads RECORD file for installed files
- `exports` property (L612-624): Cached exports data
- `write_installed_files` (L682-715): Creates RECORD file
- `check_installed_files` (L717-751): Validates file integrity
- `shared_locations` property (L753-778): Installation path mappings

### EggInfoDistribution (L867-1091)  
Legacy setuptools/distutils distribution (.egg-info/.egg):
- `__init__` (L876-896): Handles both directory and zip egg formats
- `_get_metadata` (L898-990): Complex metadata extraction with requires.txt parsing
- `list_installed_files` (L1018-1054): Returns files from installed-files.txt

### DependencyGraph (L1097-1238)
Represents dependency relationships between distributions:
- `adjacency_list`: Forward dependency mapping
- `reverse_list`: Reverse dependency mapping  
- `topological_sort` (L1202-1231): Resolves installation order

## Key Functions

- `make_graph` (L1241-1292): Constructs dependency graph from distribution list
- `get_dependent_dists` (L1295-1318): Finds distributions dependent on target
- `get_required_dists` (L1321-1347): Finds distributions required by target
- `make_dist` (L1350-1359): Convenience constructor for Distribution objects

## Dependencies
- `resources` module for file system abstraction
- `metadata` module for distribution metadata
- `version` module for version matching schemes
- `util` module for parsing and I/O utilities

## Architecture Notes
- Uses finder pattern for cross-platform path handling
- Implements caching for performance with large dependency trees
- Supports both PEP 376 modern format and legacy setuptools formats
- Hash validation uses configurable algorithms (default SHA-256)
- Export entries support console scripts and other entry points

## Constants
- `DISTINFO_EXT = '.dist-info'` (L41)
- `DIST_FILES`: Valid files in .dist-info directories (L38-39)
- Default hasher algorithms and metadata filenames defined as module constants