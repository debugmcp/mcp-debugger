# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/__init__.py
@source-hash: 643e19bd969b7d95
@generated: 2026-02-09T18:00:21Z

## Primary Purpose
Core retry/resilience library providing configurable retry mechanisms for functions. This is pip's vendored copy of tenacity with tornado support explicitly disabled (L87) to avoid version conflicts in pip's environment.

## Key Classes and Components

### Core Exceptions and Markers
- `TryAgain` (L101-102): Exception that forces a retry when raised explicitly
- `RetryError` (L151-165): Encapsulates final attempt before giving up, with `reraise()` method
- `NO_RESULT` (L105): Sentinel object for absent results
- `DoAttempt`/`DoSleep` (L108-113): Action markers for retry loop control

### Action System
- `BaseAction` (L116-134): Abstract base for retry actions with repr field system
- `RetryAction` (L136-142): Concrete action specifying sleep duration

### Core Retry Infrastructure
- `BaseRetrying` (L191-366): Abstract retry controller with configurable strategies:
  - Initialization with sleep, stop, wait, retry, before/after callbacks (L192-215)
  - `copy()` method for creating variants (L217-242)
  - `wraps()` for function decoration (L283-299)
  - `iter()` implements core retry logic (L307-342)
  - Thread-local statistics tracking (L255-281)
  - Abstract `__call__` method (L358-365)

- `Retrying` (L368-394): Concrete synchronous implementation of BaseRetrying
  - `__call__` executes retry loop with exception handling (L371-393)

### State Management
- `RetryCallState` (L425-495): Tracks state for single retry sequence:
  - Timing information (start_time, outcome_timestamp, idle_for)
  - Attempt tracking (attempt_number, outcome)
  - Result/exception handling (L469-481)
  - Comprehensive repr for debugging (L483-494)

- `Future` (L402-423): Wrapper around concurrent.futures.Future for attempt results
  - `failed` property for exception checking (L409-412)
  - `construct()` classmethod for creating results (L414-422)

### Management Utilities
- `AttemptManager` (L167-189): Context manager for attempt execution
  - Swallows exceptions and updates retry state on exit
- `_first_set()` (L147-148): Helper for parameter defaulting in copy operations

### Public Interface
- `retry()` decorator function (L518-545): Main entry point supporting both @retry and @retry() syntax
  - Auto-detects coroutine functions for AsyncRetrying
  - Warns about common misuse patterns (L530-534)
  - Tornado support disabled (L538-539)

### Imports and Dependencies
- Extensive imports of retry strategies from `.retry` module (L31-44)
- Wait strategies from `.wait` module (L58-68)
- Stop conditions from `.stop` module (L50-56)
- Before/after callbacks from respective modules (L70-80)
- AsyncRetrying imported at end (L548)

## Architecture Patterns
- Strategy pattern for retry/wait/stop conditions
- Template method in BaseRetrying with concrete implementations
- Thread-local storage for statistics
- Context manager pattern for attempt execution
- Decorator pattern for function wrapping

## Critical Constraints
- Tornado explicitly disabled to prevent pip conflicts
- Thread-safe statistics via threading.local
- Exception chaining preserved in RetryError
- Type safety with extensive type annotations