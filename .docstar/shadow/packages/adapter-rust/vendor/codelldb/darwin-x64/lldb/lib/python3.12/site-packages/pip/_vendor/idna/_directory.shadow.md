# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/idna/
@generated: 2026-02-09T18:16:08Z

## Module Purpose & Responsibility

The `idna` package provides comprehensive IDNA (Internationalized Domain Names in Applications) support following RFC 5891 and UTS46 specifications. It enables conversion between Unicode domain names and ASCII-compatible encoding (ACE) using Punycode, with full Unicode validation and normalization capabilities.

## Key Components & Architecture

### Core Implementation Layer
- **core.py**: Central IDNA processing engine with encoding/decoding functions, Unicode validation, bidirectional text handling, and label processing
- **idnadata.py**: Auto-generated Unicode property tables (scripts, joining types, codepoint classes) for character validation  
- **uts46data.py**: Auto-generated UTS46 character mapping data with normalization rules for international characters
- **intranges.py**: Optimized integer range compression utility for efficient Unicode set membership testing

### API & Compatibility Layer  
- **__init__.py**: Primary package interface exposing all public functions and exception classes
- **codec.py**: Python codec registration for 'idna2008' encoding, enabling standard codec framework integration
- **compat.py**: Legacy API wrapper providing ToASCII/ToUnicode functions for backward compatibility
- **package_data.py**: Version metadata (v3.7)

## Public API Surface

### Primary Entry Points (via __init__.py)
- **encode(domain)** / **decode(domain)**: Full domain name processing with UTS46 support
- **alabel(label)** / **ulabel(label)**: Individual label conversion to/from ASCII-compatible encoding
- **uts46_remap(domain)**: Unicode character mapping and normalization

### Validation Functions  
- **check_label()**, **check_bidi()**, **check_nfc()**: Core label validation
- **valid_contextj()**, **valid_contexto()**: Context-dependent character validation
- **valid_label_length()**, **valid_string_length()**: RFC length constraint validation

### Exception Classes
- **IDNAError**: Base exception with specialized subclasses for bidirectional, codepoint, and context errors

### Codec Integration
- **'idna2008' codec**: Registered with Python's codec system for transparent encoding/decoding

## Internal Data Flow

1. **Input Processing**: Domain strings split on Unicode dots, individual labels processed
2. **Character Validation**: Each codepoint checked against idnadata tables for script, joining type, and validity class
3. **UTS46 Mapping**: Characters normalized/mapped according to uts46data tables  
4. **Context Validation**: CONTEXTJ/CONTEXTO characters validated based on surrounding context
5. **Bidirectional Validation**: RTL/LTR directionality rules enforced per RFC requirements
6. **Length Validation**: Label (63 bytes) and domain (253/254 chars) limits enforced
7. **Punycode Encoding**: Non-ASCII labels converted with 'xn--' prefix

## Important Patterns & Conventions

- **Layered Validation**: Character → label → domain level validation with specific error types
- **Dual-Mode Processing**: Supports both strict RFC compliance and UTS46 compatibility modes  
- **Exception-Driven Design**: Specific exception types for different validation failure modes
- **Data-Driven Implementation**: Heavy reliance on auto-generated Unicode tables for standards compliance
- **Performance Optimization**: Range compression for efficient Unicode set operations

## Critical Dependencies

- Auto-generated data tables synchronized with Unicode 15.1.0
- Standard library integration through codec framework
- Punycode implementation for ASCII-compatible encoding
- Comprehensive Unicode property analysis for international character support