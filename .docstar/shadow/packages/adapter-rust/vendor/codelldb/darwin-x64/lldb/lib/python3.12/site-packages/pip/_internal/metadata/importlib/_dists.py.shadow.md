# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/importlib/_dists.py
@source-hash: b01d9e87076acac8
@generated: 2026-02-09T17:57:31Z

## Purpose
Python package metadata distribution adapter implementing pip's internal metadata interface using `importlib.metadata`. Provides unified access to package distribution information from wheels, directories, and metadata files.

## Key Classes

### WheelDistribution (L36-93)
Custom `importlib.metadata.Distribution` subclass for reading wheel metadata eagerly into memory rather than keeping ZipFile handles open.

**Key Methods:**
- `from_zipfile()` (L55-73): Class method creating WheelDistribution from wheel file by extracting all metadata files
- `read_text()` (L81-92): Reads metadata file content with UTF-8 decoding and UnsupportedWheel error handling
- `iterdir()` (L75-79): Limited directory iteration for metadata directory only

### Distribution (L95-228) 
Main distribution adapter wrapping `importlib.metadata.Distribution` with pip-specific functionality.

**Factory Methods:**
- `from_directory()` (L106-110): Creates distribution from filesystem directory
- `from_metadata_file_contents()` (L112-127): Creates distribution from raw metadata bytes using temporary directory
- `from_wheel()` (L129-136): Creates distribution from wheel file with BadZipFile error handling

**Core Properties:**
- `canonical_name` (L168-171): Normalized package name using fast path via directory name or fallback to metadata
- `version` (L174-175): Parsed Version object
- `location`/`info_location`/`installed_location` (L138-154): Various path properties

**Metadata Access:**
- `read_text()` (L193-197): File content reading with FileNotFoundError
- `iter_dependencies()` (L217-228): Requirement parsing with marker evaluation for extras
- `iter_provided_extras()` (L211-215): Available package extras
- `iter_entry_points()` (L199-201): Package entry points
- `_metadata_impl()` (L203-209): Raw email.message.Message access with type casting

**Utilities:**
- `_get_dist_name_from_location()` (L156-166): Fast name extraction from .dist-info/.egg-info directory names
- `iter_distutils_script_names()` (L184-191): Script enumeration for pathlib.Path installations only

## Dependencies
- Standard library: `importlib.metadata`, `email.message`, `zipfile`, `pathlib`
- pip._vendor.packaging: Requirements, version parsing, name canonicalization
- pip._internal: Base classes, wheel utilities, temp directories, exceptions

## Architecture Notes
- WheelDistribution solves lazy loading issues with standard PathDistribution by eager memory loading
- Distribution provides unified interface across installation types (directory, wheel, metadata-only)
- Fast path optimization for name resolution via directory inspection before metadata parsing
- Type casting workaround for importlib.metadata's incomplete PackageMetadata protocol