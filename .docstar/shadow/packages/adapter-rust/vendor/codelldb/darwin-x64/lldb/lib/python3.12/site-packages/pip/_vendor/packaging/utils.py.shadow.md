# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/utils.py
@source-hash: 3407585309e500ea
@generated: 2026-02-09T17:59:46Z

## Purpose

Provides utility functions and types for parsing and normalizing Python package names, versions, and distribution filenames (wheels and sdists). Core component of the packaging ecosystem handling PEP 427, PEP 440, and PEP 503 compliance.

## Key Types

- **NormalizedName (L14)**: NewType for normalized package names following PEP 503
- **BuildTag (L13)**: Union type for wheel build tags - either empty tuple or (int, str) pair
- **InvalidName (L17-21)**: Exception for invalid distribution names
- **InvalidWheelFilename (L23-27)**: Exception for invalid wheel filenames per PEP 427
- **InvalidSdistFilename (L29-33)**: Exception for invalid source distribution filenames

## Regex Patterns

- **_validate_regex (L36-38)**: Validates distribution names per Core Metadata spec
- **_canonicalize_regex (L39)**: Matches sequences of hyphens, dots, underscores for normalization
- **_normalized_regex (L40)**: Validates already-normalized names (lowercase, no consecutive hyphens)
- **_build_tag_regex (L42)**: Parses wheel build tags (digit prefix required per PEP 427)

## Core Functions

### Name Processing
- **canonicalize_name (L45-51)**: Converts package names to PEP 503 normalized form, optionally validates format first
- **is_normalized_name (L53-55)**: Checks if name is already in normalized form

### Version Processing  
- **canonicalize_version (L57-103)**: Converts Version objects or strings to canonical string representation with optional trailing zero stripping. Handles all PEP 440 version components: epoch, release, pre-release, post-release, dev, local.

### Filename Parsing
- **parse_wheel_filename (L105-146)**: Parses wheel filenames into components (name, version, build tag, platform tags). Validates .whl extension, dash count (4-5), project name format, and version validity.
- **parse_sdist_filename (L148-174)**: Parses source distribution filenames (.tar.gz or .zip) into name and version components using rightmost dash split strategy.

## Dependencies
- Imports `Tag`, `parse_tag` from `.tags` module
- Imports `Version`, `InvalidVersion` from `.version` module
- Uses standard `re` and `typing` modules

## Architecture Notes
- Follows PEP 503 (Simple Repository API) for name normalization
- Implements PEP 427 (Wheel Binary Package Format) parsing rules  
- Handles PEP 440 (Version Identification) compliance
- Uses defensive parsing with specific error types for different failure modes
- Leverages type hints and NewType for semantic clarity