# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/operations/install/wheel.py
@source-hash: c2c8435009f1b8f5
@generated: 2026-02-09T17:57:37Z

**Purpose**: Core wheel installation module for pip, handling extraction, script generation, and metadata recording for Python wheel packages.

## Key Components

### Primary Installation Functions
- `install_wheel()` (L714-735): Main public interface for wheel installation with error context handling
- `_install_wheel()` (L424-703): Core installation logic handling file extraction, script generation, and metadata recording

### File Handling Classes
- `ZipBackedFile` (L348-386): Represents files extracted from wheel archives, handles path traversal protection and executable permissions
- `ScriptFile` (L388-398): Wrapper for script files that applies shebang line fixes via `fix_script()`
- `PipScriptMaker` (L416-422): Custom ScriptMaker that validates entry point specifications

### Entry Point & Script Management
- `get_entrypoints()` (L118-126): Extracts console and GUI scripts from distribution metadata
- `get_console_script_specs()` (L273-345): Generates script specifications with special handling for pip/setuptools versioning based on ENSUREPIP_OPTIONS environment variable
- `fix_script()` (L94-111): Replaces generic `#!python` shebangs with actual Python executable path

### Path & Record Management
- `_fs_to_record_path()` (L231-238): Converts filesystem paths to RECORD format (forward slashes, relative to lib_dir)
- `_record_to_fs_path()` (L227-228): Converts RECORD paths to filesystem paths
- `get_csv_rows_for_installed()` (L241-270): Generates CSV rows for RECORD file tracking installed files

### Utility Functions
- `rehash()` (L80-84): Computes SHA256 hash and length for file integrity verification
- `message_about_scripts_not_on_PATH()` (L129-198): Generates warnings for scripts installed outside PATH
- `wheel_root_is_purelib()` (L114-115): Determines installation location based on wheel metadata

## Installation Flow
1. Parse wheel metadata and determine installation directories (purelib vs platlib)
2. Create file makers for root scheme and data scheme files with path traversal protection
3. Extract files while tracking installed/changed/generated file lists
4. Generate entry point scripts using PipScriptMaker
5. Compile Python files to bytecode if requested
6. Create metadata files (INSTALLER, REQUESTED, direct_url.json)
7. Update RECORD file with all installation details

## Key Dependencies
- `pip._vendor.distlib.scripts.ScriptMaker`: Script generation
- `pip._internal.metadata`: Wheel parsing and distribution handling
- `pip._internal.utils.unpacking`: Path traversal protection and file permissions

## Error Handling
- `MissingCallableSuffix` (L400-407): Custom exception for invalid entry point specifications
- `req_error_context()` (L705-711): Context manager that enriches InstallationErrors with requirement details
- Path traversal protection via `assert_no_path_traversal()` (L476-484)

## Environment Variables
- `ENSUREPIP_OPTIONS`: Controls pip/easy_install script generation behavior (altinstall/install modes)