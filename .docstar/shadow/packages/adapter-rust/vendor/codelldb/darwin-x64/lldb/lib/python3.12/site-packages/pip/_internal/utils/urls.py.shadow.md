# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/urls.py
@source-hash: a9c7923996f995b3
@generated: 2026-02-09T17:59:34Z

## Purpose
Provides URL/path conversion utilities for pip's internal operations, specifically handling bidirectional conversion between file system paths and file: URLs with proper platform-specific handling.

## Key Functions

### `path_to_url(path: str) -> str` (L9-16)
Converts local file system paths to file: URLs with proper encoding:
- Normalizes and makes paths absolute using `os.path.normpath` and `os.path.abspath`
- URL-encodes path components via `urllib.request.pathname2url`
- Returns properly formatted file: URL using `urllib.parse.urljoin`

### `url_to_path(url: str) -> str` (L19-55)
Converts file: URLs back to local paths with platform-aware processing:
- Validates input is file: URL scheme (L23-25)
- Handles netloc/authority parsing for localhost and UNC paths (L29-38)
- Windows-specific UNC path handling: prepends `\\` to non-localhost netloc (L32-34)
- Windows drive letter correction: strips leading slash from paths like "/C:/..." (L45-53)
- Uses `urllib.request.url2pathname` for URL decoding (L40)

## Dependencies
- **Standard Library**: `os`, `string`, `urllib.parse`, `urllib.request`
- **Internal**: `.compat.WINDOWS` for platform detection

## Platform Handling
- **Windows**: Special handling for UNC paths and drive letter normalization
- **Non-Windows**: Rejects non-local file URIs (L36-38)
- **All Platforms**: Treats empty netloc and "localhost" equivalently per RFC 8089 (L29-31)

## Critical Constraints
- Only accepts file: scheme URLs in `url_to_path`
- Non-local file URIs unsupported on non-Windows platforms
- Windows drive letter detection requires specific format: `/[A-Za-z]:[/]?`