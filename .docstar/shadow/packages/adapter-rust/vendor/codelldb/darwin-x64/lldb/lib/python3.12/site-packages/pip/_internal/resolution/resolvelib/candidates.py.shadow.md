# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py
@source-hash: d3b08173ce726b72
@generated: 2026-02-09T17:57:42Z

## Primary Purpose
This file implements candidate classes for pip's dependency resolution system using resolvelib. Candidates represent installable package versions that the resolver evaluates when solving dependencies.

## Key Classes and Responsibilities

### BaseCandidate Type Union (L33-37)
Union type encompassing the three main candidate implementations: `AlreadyInstalledCandidate`, `EditableCandidate`, and `LinkCandidate`.

### _InstallRequirementBackedCandidate (L124-258)
Abstract base class for candidates that require installation (not already installed). Key responsibilities:
- Manages `InstallRequirement` objects for package installation
- Handles metadata consistency validation via `_check_metadata_consistency()` (L209-231)
- Provides dependency iteration through `iter_dependencies()` (L250-254)
- Implements lazy evaluation of package metadata through `_prepare()` (L233-248)

### LinkCandidate (L260-315)
Concrete candidate for packages installable from links (URLs, file paths). Features:
- Handles wheel cache integration via factory methods (L272-301)  
- Validates wheel metadata consistency for remote wheels (L278-287)
- Prepares linked requirements through factory preparer (L312-314)

### EditableCandidate (L317-339)
Candidate for editable/development installations. Simpler than LinkCandidate as it doesn't handle caching complexities.

### AlreadyInstalledCandidate (L341-406)
Represents packages already present in the environment. Key features:
- Uses existing distribution metadata without preparation
- Returns `None` from `get_install_requirement()` to avoid reinstallation (L404-405)
- Implements equality based on name and version (L369-372)

### ExtrasCandidate (L408-530)
Wrapper candidate that adds extra dependencies to base candidates. Architecture decisions:
- Creates artificial dependency graph nodes for extras like `foo[extra]` (L418-419)
- Forces dependency on base candidate to prevent version conflicts (L427-430)
- Filters invalid extras with warnings (L506-516)
- Returns `None` for install requirement to delegate to base (L525-529)

### RequiresPythonCandidate (L532-569)
Special candidate representing Python interpreter version requirements. Uses `REQUIRES_PYTHON_IDENTIFIER` constant (L40) to avoid conflicts with PyPI packages.

## Key Utility Functions

- `as_base_candidate()` (L43-52): Runtime type narrowing for base candidate types
- `make_install_req_from_link()` (L55-77): Creates InstallRequirement from link and template
- `make_install_req_from_editable()` (L80-97): Creates editable InstallRequirement  
- `_make_install_req_from_dist()` (L100-121): Creates InstallRequirement from existing distribution

## Important Dependencies
- `pip._internal.req.req_install.InstallRequirement`: Core installation requirement representation
- `pip._internal.metadata.BaseDistribution`: Package metadata interface
- `pip._internal.models.link.Link`: Package location abstraction
- `.factory.Factory`: Creates and manages candidates/requirements (TYPE_CHECKING import)

## Critical Patterns
- Lazy metadata evaluation: Candidates defer expensive operations until needed
- Template-based InstallRequirement creation: Reuses configuration from template objects
- Cache-aware link handling: LinkCandidate integrates with wheel cache for performance
- Metadata consistency validation: Ensures expected vs actual package metadata alignment

## Architectural Constraints
- All candidates must implement the `Candidate` interface from `.base`
- InstallRequirement-backed candidates validate metadata consistency during preparation
- ExtrasCandidate must maintain dependency on base to ensure resolver constraint satisfaction