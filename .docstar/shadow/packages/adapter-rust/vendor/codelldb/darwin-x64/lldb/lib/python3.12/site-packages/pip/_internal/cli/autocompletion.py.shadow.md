# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/autocompletion.py
@source-hash: 2e58b732be9a0cdb
@generated: 2026-02-09T17:59:17Z

## Purpose
This module provides the core logic for pip's bash autocompletion functionality, handling completion of pip commands, options, package names, and file paths based on shell environment variables.

## Key Functions

### autocomplete() (L15-121)
Main entry point for autocompletion. Parses shell environment variables (`COMP_WORDS`, `COMP_CWORD`, `PIP_AUTO_COMPLETE`) to determine current completion context and prints appropriate completions to stdout. Handles:
- Subcommand detection from command line words
- Package name completion for `show`/`uninstall` commands (queries installed distributions)
- File path completion for `install` command
- Option completion for all commands
- Filtering of already-used options

### get_path_completion_type(cwords, cword, opts) (L124-145)
Analyzes command line context to determine if path completion is needed. Returns completion type (`"file"`, `"dir"`, `"path"`, or `None`) by examining the previous argument and matching it against option metavar patterns.

### auto_complete_paths(current, completion_type) (L148-175)
Generates file/directory path completions based on the current partial input and completion type. Yields absolute paths for files and directories that match the current prefix, with special handling for directory vs file completion based on the completion type.

## Dependencies
- `pip._internal.cli.main_parser`: Creates main argument parser
- `pip._internal.commands`: Provides command dictionary and command creation
- `pip._internal.metadata`: Accesses installed package information
- Standard libraries: `optparse`, `os`, `sys`, `itertools`

## Key Patterns
- Environment variable-driven completion (bash completion integration)
- Early exit pattern with `sys.exit(1)` after printing completions
- Special case handling for different pip subcommands (`help`, `show`, `uninstall`, `install`)
- Option filtering to prevent duplicate suggestions
- Path completion with proper normalization and access checking

## Architecture Notes
- Designed as a standalone completion engine that integrates with bash completion
- Uses pip's internal parser structures to dynamically discover available options
- Leverages pip's metadata system for package name completion
- Stateless - all context derived from environment variables