# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/commands/index.py
@source-hash: 4405f1989c058556
@generated: 2026-02-09T17:59:23Z

## Primary Purpose
Implements the experimental `pip index` command for inspecting package information from PyPI and other package indexes. Currently supports only the `versions` subcommand to list all available versions of a package.

## Key Classes and Functions

**IndexCommand (L22-139)**: Main command class inheriting from IndexGroupCommand
- `ignore_require_venv = True` (L27): Bypasses virtual environment requirement
- `add_options()` (L32-46): Configures CLI options including target Python, binary preferences, and index options
- `run()` (L48-76): Entry point that dispatches to action handlers based on first argument
- `_build_package_finder()` (L78-101): Creates PackageFinder with yanked packages disabled and configurable prerelease handling
- `get_available_package_versions()` (L103-139): Core functionality that queries package indexes and displays version information

## Dependencies and Relationships
- **Core pip modules**: Uses IndexGroupCommand base class, cmdoptions for CLI configuration
- **Package resolution**: Leverages PackageFinder, LinkCollector, and SelectionPreferences for package discovery
- **External output**: Delegates to `print_dist_installation_info()` from search command for installation details

## Key Patterns
- **Handler dispatch pattern** (L49-51): Maps subcommand strings to method handlers
- **Context manager usage** (L110): Ensures proper session cleanup via `_build_session()`
- **Exception boundary** (L70-74): Catches PipError exceptions at command level for consistent error handling
- **Experimental warning** (L53-57): Alerts users that command may change without notice

## Architecture Decisions
- **Single action support**: Currently hardcoded to only handle "versions" subcommand
- **Yanked package filtering**: Explicitly excludes yanked versions via `allow_yanked=False`
- **Version sorting**: Returns versions in descending order with latest first
- **Prerelease handling**: Filters prereleases unless `--pre` flag specified

## Critical Constraints
- Requires exactly one package name argument for versions command
- Experimental status means API may change without deprecation warnings
- Session management required for network operations