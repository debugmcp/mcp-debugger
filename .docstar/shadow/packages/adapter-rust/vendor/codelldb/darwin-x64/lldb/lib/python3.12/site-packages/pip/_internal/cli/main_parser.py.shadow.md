# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/main_parser.py
@source-hash: 95a0e9b2e04397a9
@generated: 2026-02-09T17:59:17Z

## Purpose
Central command-line parsing module for pip's main entry point. Handles initial argument parsing, command identification, and special execution modes (--python, --version, help).

## Key Components

### create_main_parser() (L19-47)
Creates the main ConfigOptionParser for pip's CLI interface. Configures usage pattern, disables interspersed arguments, sets version, adds general options group, and builds command description from commands_dict.

### identify_python_interpreter() (L50-66)
Resolves Python interpreter paths for --python option. Handles both direct file paths and virtual environment directories, checking standard locations (bin/python, Scripts/python.exe) for executables.

### parse_command() (L69-134)
Main parsing logic that processes command-line arguments and handles special execution modes:
- Parses general options vs subcommand arguments (L79)
- --python handling: Re-invokes pip with specified interpreter using subprocess (L82-105)
- --version handling: Prints version and exits (L108-111)
- Help handling: Shows help for empty args or 'help' command (L114-116)
- Command validation and suggestion for unknown commands (L121-128)
- Returns command name and remaining arguments (L131-134)

## Dependencies
- cmdoptions: Command option definitions and grouping
- ConfigOptionParser: Custom argument parser with configuration file support
- commands_dict: Registry of available pip commands
- get_runnable_pip(): Utility to get pip executable path
- subprocess: For Python interpreter re-invocation

## Architecture Patterns
- Environment variable guard (_PIP_RUNNING_IN_SUBPROCESS) prevents infinite recursion during re-invocation
- Disabled interspersed arguments to cleanly separate global options from subcommand options
- Command similarity matching for user-friendly error messages
- Direct sys.exit() calls for terminal conditions (version, help, subprocess completion)

## Critical Behaviors
- Re-invocation with different Python interpreter completely replaces current process
- Parser distinguishes between global pip options and subcommand-specific arguments
- Command validation occurs before returning to caller