# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/commands/cache.py
@source-hash: c60efafd9144042e
@generated: 2026-02-09T17:59:24Z

## Primary Purpose
Implements pip's cache management command for inspecting and manipulating pip's wheel cache and HTTP cache directories.

## Core Architecture

**CacheCommand Class (L15-225)**
- Inherits from `Command` base class
- Implements 5 subcommands: dir, info, list, remove, purge
- Uses handler dispatch pattern (L52-58) to route subcommands
- Centralized error handling in `run()` method (L74-80)

## Key Methods

**run() (L51-81)**
- Main entry point, validates cache_dir existence (L60-62)
- Dispatches to appropriate handler based on first argument
- Returns ERROR/SUCCESS status codes

**Cache Information Methods:**
- `get_cache_dir()` (L83-87): Displays cache directory path
- `get_cache_info()` (L89-129): Shows detailed cache statistics including sizes and file counts for HTTP and wheels caches

**Cache Listing Methods:**
- `list_cache_items()` (L131-144): Lists cached wheels with optional glob pattern
- `format_for_human()` (L146-157): Human-readable format with sizes
- `format_for_abspath()` (L159-161): Absolute path format

**Cache Modification Methods:**
- `remove_cache_items()` (L163-186): Removes files matching pattern, includes HTTP files for "*" pattern
- `purge_cache()` (L188-192): Removes all cache items by delegating to remove with "*"

## Internal Utilities

**Helper Methods:**
- `_cache_dir()` (L194-195): Constructs cache subdirectory paths
- `_find_http_files()` (L197-202): Finds files in both "http" and "http-v2" directories
- `_find_wheels()` (L204-225): Finds wheel files with PEP 427 compliant pattern matching

## Dependencies
- `pip._internal.cli.base_command.Command` for base functionality
- `pip._internal.utils.filesystem` for file operations and size formatting
- Standard library: `os`, `textwrap`, `optparse`

## Key Patterns
- **Command Pattern**: Handler dictionary for subcommand dispatch
- **Template Method**: Consistent argument validation across handlers
- **PEP 427 Compliance**: Wheel filename pattern matching logic (L207-223)

## Configuration
- `ignore_require_venv = True` (L30): Allows operation outside virtual environments
- `--format` option (L40-47): Controls list output format (human/abspath)

## Critical Constraints
- Requires `options.cache_dir` to be set (L60-62)
- Validates argument counts for all subcommands
- HTTP files only included in removal when using "*" pattern (L173-175)