# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/groff.py
@source-hash: c72f197f7b573a8e
@generated: 2026-02-09T17:57:33Z

**Primary Purpose**: A Pygments formatter that outputs syntax-highlighted code using groff/troff markup language. Part of the vendored pip dependencies for LLDB's Python environment.

**Key Classes and Functions**:

- `GroffFormatter(Formatter)` (L18-170): Main formatter class that converts tokenized source code into groff markup with color and font styling
  - `__init__(**options)` (L45-55): Initializes formatter with options for monospaced fonts, line numbers, and line wrapping
  - `_make_styles()` (L58-78): Builds groff markup strings for each token type based on style definitions (bold, italic, color, background)
  - `_define_colors(outfile)` (L81-88): Generates `.defcolor` groff commands for all colors used in the style
  - `_write_lineno(outfile)` (L91-93): Outputs formatted line numbers with proper spacing
  - `_wrap_line(line)` (L96-116): Handles line wrapping at specified character limits with proper indentation
  - `_escape_chars(text)` (L119-135): Escapes groff special characters and converts Unicode to groff escape sequences
  - `format_unencoded(tokensource, outfile)` (L138-170): Main formatting method that processes token stream and outputs groff markup

**Important Dependencies**:
- `pip._vendor.pygments.formatter.Formatter`: Base formatter class
- `pip._vendor.pygments.util`: Utility functions for option parsing (`get_bool_opt`, `get_int_opt`)
- `math`: For line wrapping calculations

**Configuration Options**:
- `monospaced`: Use monospace fonts (default: true)
- `linenos`: Show line numbers (default: false) 
- `wrap`: Character limit for line wrapping (default: 0/disabled)

**Key Patterns**:
- Token type inheritance traversal (L147-148): Walks up token type hierarchy to find applicable styles
- Groff markup generation: Uses `\f[font]`, `\m[color]`, `\M[bgcolor]` commands
- Character escaping for groff compatibility including Unicode handling

**Output Format**: Generates groff document with `.nf` (no-fill) and `.fi` (fill) commands, color definitions, and properly escaped text with styling markup.