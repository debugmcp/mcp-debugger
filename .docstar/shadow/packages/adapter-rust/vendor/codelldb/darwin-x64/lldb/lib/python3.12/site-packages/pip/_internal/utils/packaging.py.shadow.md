# packages/adapter-rust/vendor/codelldb/darwin-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/packaging.py
@source-hash: e569baff1ee52ab9
@generated: 2026-02-09T17:59:35Z

## Purpose
Utility functions for handling Python packaging requirements, version compatibility checks, and extra name normalization within pip's internal operations.

## Key Components

### Types and Constants
- `NormalizedExtra` (L9): NewType wrapper for standardized extra names
- `logger` (L11): Module-level logger for debugging

### Core Functions

#### `check_requires_python(requires_python, version_info)` (L14-34)
- **Purpose**: Validates if current Python version meets package requirements
- **Input**: Optional requires-python specifier string and version tuple (e.g., sys.version_info[:3])
- **Returns**: Boolean indicating compatibility
- **Logic**: Parses specifier using packaging library, converts version tuple to Version object
- **Edge case**: Returns True if no requirements specified (L28-30)

#### `get_requirement(req_string)` (L37-45)
- **Purpose**: Creates Requirement objects with LRU caching for performance
- **Decorator**: `@functools.lru_cache(maxsize=512)` for memoization
- **Rationale**: Requirement parsing is expensive and commonly repeated
- **Returns**: packaging.Requirement object

#### `safe_extra(extra)` (L48-57)
- **Purpose**: Normalizes arbitrary strings to valid extra names
- **Algorithm**: Replaces non-alphanumeric chars (except dots/hyphens) with underscore, lowercases result
- **Pattern**: `re.sub("[^A-Za-z0-9.-]+", "_", extra).lower()`
- **Note**: Duplicated from pkg_resources, distinct from canonicalize_name

## Dependencies
- `pip._vendor.packaging.{specifiers, version}`: Core packaging utilities
- `pip._vendor.packaging.requirements.Requirement`: Requirement parsing
- Standard library: functools, logging, re, typing

## Architecture Notes
- Heavy reliance on external packaging library for standards compliance
- Performance optimization through caching frequently parsed requirements
- Type safety with NewType for normalized extras