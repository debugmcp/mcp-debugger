# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/contrib/appengine.py
@source-hash: 551ebc780544d77e
@generated: 2026-02-09T17:57:32Z

## Google App Engine URLFetch Adapter for urllib3

This module provides a specialized pool manager that integrates urllib3 with Google App Engine's URLFetch service, enabling HTTP requests in GAE sandbox environments where socket access is restricted.

### Primary Components

**AppEngineManager (L79-306)** - Main connection manager class that inherits from RequestMethods and provides urllib3-compatible HTTP functionality using GAE's URLFetch API instead of sockets.

**Exception Classes:**
- `AppEnginePlatformWarning` (L71-72) - Warning for URLFetch-specific issues
- `AppEnginePlatformError` (L75-76) - Error for URLFetch platform limitations

### Key Methods

**`__init__` (L99-123)** - Initializes manager with URLFetch validation, certificate validation settings, and retry configuration. Raises AppEnginePlatformError if URLFetch unavailable.

**`urlopen` (L131-243)** - Core HTTP request method that:
- Handles retries and redirects using urllib3's Retry mechanism
- Maps URLFetch exceptions to urllib3 exceptions (L157-187)
- Manages redirect logic with GAE-specific considerations (L194-224)
- Implements retry logic for failed requests (L226-241)

**`_urlfetch_response_to_http_response` (L245-279)** - Converts GAE URLFetch responses to urllib3 HTTPResponse objects, handling:
- Content encoding cleanup for production GAE (L247-253)
- Transfer-encoding header normalization (L255-261)
- Response body wrapping in BytesIO streams

**`_get_absolute_timeout` (L281-292)** - Converts urllib3 Timeout objects to simple timeout values compatible with URLFetch, issuing warnings for unsupported granular timeouts.

**`_get_retries` (L294-305)** - Adapts urllib3 Retry objects for URLFetch limitations, warning about unsupported retry types.

### Dependencies and Integrations

- **Google App Engine API**: `google.appengine.api.urlfetch` (L63-65) with graceful ImportError handling
- **urllib3 Core**: RequestMethods, HTTPResponse, exceptions, Retry, Timeout
- **Environment Detection**: `_appengine_environ` module for GAE environment checks (L60, L308-314)

### Architectural Patterns

- **Adapter Pattern**: Wraps GAE URLFetch to provide urllib3-compatible interface
- **Exception Translation**: Maps URLFetch-specific exceptions to urllib3 equivalents
- **Context Manager**: Supports `with` statement usage (L124-129)
- **Public API Aliases**: Maintains compatibility by aliasing environment detection functions (L308-314)

### Critical Constraints

- **Request Size Limit**: 10MB maximum (enforced L161-166)
- **Response Size Limit**: 32MB maximum (enforced L174-179)
- **Limited HTTP Methods**: Some methods like OPTIONS unsupported (L184-187)
- **Timeout Limitations**: Only total timeout supported, not granular connect/read timeouts
- **Retry Limitations**: Only total retries supported, not per-operation retries

### Usage Context

Designed for GAE Standard Environment sandbox applications where socket access is restricted. Not suitable for GAE Flexible Environment where full socket support is available.