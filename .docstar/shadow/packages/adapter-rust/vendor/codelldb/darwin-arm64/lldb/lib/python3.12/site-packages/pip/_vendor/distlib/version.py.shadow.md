# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/version.py
@source-hash: f695e476e721bdef
@generated: 2026-02-09T17:59:05Z

## Purpose
Python package version parsing and matching system supporting multiple version schemes: PEP-440 (normalized), legacy/setuptools, and semantic versioning. Provides version comparison, constraint matching, and version suggestion utilities.

## Key Classes

### Version (L30-77) - Abstract Base Class
Abstract base for all version implementations. Provides:
- String parsing via abstract `parse()` method (L37-38)
- Full comparison operators (`__eq__`, `__lt__`, `__gt__`, etc.) (L44-62)
- Hash support for dict/set usage (L65-66)
- String representation methods (L68-72)
- Abstract `is_prerelease` property (L75-76)

### Matcher (L79-177) - Abstract Version Constraint Matcher
Base class for version constraint matching. Key features:
- Operator mapping via `_operators` dict (L83-93) supporting `<`, `>`, `<=`, `>=`, `==`, `===`, `~=`, `!=`
- Requirement parsing via `parse_requirement()` (L97-98)
- Constraint storage in `_parts` tuple (L127)
- `match()` method for version testing (L129-148)
- `exact_version` property for single equality constraints (L150-155)

### NormalizedVersion (L256-290) - PEP-440 Implementation
PEP-440 compliant version parsing using `_pep_440_key()` function (L184-250):
- Complex regex pattern `PEP440_VERSION_RE` (L179-181) handles epochs, pre/post releases, dev versions, local versions
- Stores original release clause for prefix matching (L282)
- Prerelease detection via `PREREL_TAGS` (L285, L288-289)

### NormalizedMatcher (L303-388) - PEP-440 Constraint Matching
Specialized matcher for PEP-440 versions with custom operators:
- Method-based operator implementations (`_match_lt`, `_match_gt`, etc.) (L332-387)
- Local version handling via `_adjust_local()` (L318-330)
- Compatible version matching (`~=`) with prefix logic (L375-387)
- Prefix matching utility `_match_prefix()` (L292-300)

### LegacyVersion (L614-627) - Setuptools Compatibility
Legacy setuptools-style version parsing:
- Uses `_legacy_key()` function (L588-611) with string-based sorting
- Pattern matching via `_VERSION_PART` regex (L576)
- Character replacement mapping `_VERSION_REPLACE` (L577-585)

### LegacyMatcher (L629-648) - Legacy Constraint Matching
Matcher for legacy versions with compatible matching support (L637-648).

### SemanticVersion (L685-692) - Semantic Versioning
Semantic version (semver) implementation:
- Uses `_semantic_key()` function (L664-682) 
- Validates against `_SEMVER_RE` pattern (L655-657)
- Prerelease detection via tuple inspection (L690-691)

### SemanticMatcher (L694-696) - Semantic Version Matching
Basic matcher for semantic versions using inherited Matcher behavior.

### VersionScheme (L698-734) - Scheme Management
Wrapper class combining version class, matcher, and suggestion function:
- Validation methods for versions, matchers, and constraint lists (L704-727)
- Optional suggestion capability (L729-734)

## Key Functions

### _pep_440_key() (L184-250)
Core PEP-440 parsing logic converting version strings to comparable tuples. Handles epochs, pre/post releases, dev versions, and local versions with complex normalization rules.

### _suggest_normalized_version() (L461-569)
Heuristic version string normalization with extensive regex-based cleaning rules. Attempts to convert non-standard version formats to PEP-440 compatible strings.

### _suggest_semantic_version() (L415-458)
Attempts semantic version conversion with prefix/suffix separation and validation.

### get_scheme() (L748-751)
Scheme registry accessor returning VersionScheme instances for 'normalized', 'legacy', 'semantic', or 'default'.

## Global Registry
`_SCHEMES` dict (L737-745) maps scheme names to VersionScheme instances, with 'default' aliased to 'normalized'.

## Dependencies
- `logging` for warning messages
- `re` for pattern matching
- `.compat.string_types` for Python 2/3 compatibility
- `.util.parse_requirement` for requirement parsing

## Architecture Notes
- Template method pattern in Version/Matcher base classes
- Strategy pattern via VersionScheme for different versioning approaches  
- Extensive use of regex for version string parsing and normalization
- Tuple-based comparison enables natural Python sorting