# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/box.py
@source-hash: 9ebe5f608520841f
@generated: 2026-02-09T17:59:20Z

## Primary Purpose
Defines box drawing characters for rich text UI tables and panels. Provides a `Box` class that encapsulates Unicode and ASCII characters for rendering bordered content, along with predefined box styles.

## Key Components

### Box Class (L16-189)
Core class that defines character sets for drawing table/panel borders. Initializes from 8-line string patterns representing different border segments.

**Constructor (L33-65)**: Parses 8-line box definition string into individual character attributes:
- `top_left`, `top`, `top_divider`, `top_right` (L38)
- `head_left`, `head_vertical`, `head_right` (L40) 
- `head_row_*` characters for header separators (L42-47)
- `mid_*`, `row_*`, `foot_row_*`, `foot_*`, `bottom_*` characters (L49-65)

**Key Methods:**
- `substitute(options, safe=True)` (L73-89): Returns platform-appropriate box variant, handles Windows legacy mode and ASCII-only requirements
- `get_plain_headed_box()` (L91-99): Returns equivalent box without header-specific characters
- `get_top(widths)` (L101-119): Generates top border string for given column widths
- `get_row(widths, level, edge)` (L121-168): Generates horizontal separator for different table sections
- `get_bottom(widths)` (L170-188): Generates bottom border string

### Predefined Box Styles (L192-408)
Extensive collection of box style constants:

**ASCII Variants:**
- `ASCII` (L192): Basic +/|/- characters, ascii=True
- `ASCII2`, `ASCII_DOUBLE_HEAD` (L204, L216): Enhanced ASCII styles

**Unicode Variants:**
- `SQUARE` (L228): Standard box drawing characters ┌─┬┐
- `ROUNDED` (L331): Rounded corners ╭─┬╮
- `HEAVY` (L342): Bold/thick lines ┏━┳┓
- `DOUBLE` (L375): Double-line borders ╔═╦╗
- `MINIMAL` (L250): Sparse vertical-only style
- `SIMPLE` (L285): Horizontal lines only
- Multiple head variants with special header styling

### Platform Compatibility (L410-427)
- `LEGACY_WINDOWS_SUBSTITUTIONS` (L411): Maps Unicode boxes to ASCII-compatible alternatives for legacy Windows terminals
- `PLAIN_HEADED_SUBSTITUTIONS` (L421): Maps header-styled boxes to plain equivalents

## Dependencies
- `._loop.loop_last` (L10): Utility for iterating with last-item detection
- `typing` imports for type hints (L2-7)
- Platform detection via `sys.version_info` (L4-7)

## Architecture Patterns
- **Template Pattern**: Box class defines interface, concrete instances provide character sets
- **Strategy Pattern**: Different box styles as interchangeable rendering strategies  
- **Fallback Chain**: substitute() method implements graceful degradation for platform compatibility

## Critical Invariants
- Box definition strings must be exactly 8 lines with 4 characters each
- Character mapping assumes specific positional layout in definition string
- ASCII boxes must set `ascii=True` flag for proper platform detection