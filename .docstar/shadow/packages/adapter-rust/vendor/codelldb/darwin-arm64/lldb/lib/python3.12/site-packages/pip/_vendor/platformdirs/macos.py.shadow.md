# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/platformdirs/macos.py
@source-hash: c1fb6c6ecbeaea76
@generated: 2026-02-09T17:58:56Z

**macOS Platform Directory Implementation**

This module provides macOS-specific directory path resolution for the platformdirs library, implementing Apple's file system guidelines for application data storage.

## Core Class
- **MacOS (L11-126)**: Concrete implementation of `PlatformDirsABC` providing macOS-compliant directory paths

## Key Dependencies
- **PlatformDirsABC (L8)**: Abstract base class defining the platform directory interface
- **os.path, sys (L5-6)**: Standard library modules for path manipulation and system information

## Directory Path Properties

### Application Data Directories
- **user_data_dir (L24-26)**: User-specific data storage (`~/Library/Application Support/$appname/$version`)
- **site_data_dir (L29-43)**: System-wide data storage with Homebrew detection and multipath support
- **user_config_dir (L46-48)**: Aliases to user_data_dir (macOS convention)
- **site_config_dir (L51-53)**: Aliases to site_data_dir (macOS convention)
- **user_state_dir (L78-80)**: Aliases to user_data_dir (no separate state directory on macOS)

### Cache Directories
- **user_cache_dir (L56-58)**: User cache storage (`~/Library/Caches/$appname/$version`)
- **site_cache_dir (L61-75)**: System cache with Homebrew detection and multipath support

### Log and Runtime Directories
- **user_log_dir (L83-85)**: User log storage (`~/Library/Logs/$appname/$version`)
- **user_runtime_dir (L118-120)**: Runtime data (`~/Library/Caches/TemporaryItems/$appname/$version`)
- **site_runtime_dir (L123-125)**: Aliases to user_runtime_dir (no system runtime on macOS)

### Standard User Directories
- **user_documents_dir (L88-90)**: `~/Documents`
- **user_downloads_dir (L93-95)**: `~/Downloads`
- **user_pictures_dir (L98-100)**: `~/Pictures`
- **user_videos_dir (L103-105)**: `~/Movies`
- **user_music_dir (L108-110)**: `~/Music`
- **user_desktop_dir (L113-115)**: `~/Desktop`

## Architectural Patterns

### Homebrew Integration
The implementation detects Homebrew Python installations (L38, L70) by checking if `sys.prefix` starts with `/opt/homebrew`. When detected:
- Prioritizes Homebrew-specific paths (`/opt/homebrew/share`, `/opt/homebrew/var/cache`)
- Falls back to system paths (`/Library/Application Support`, `/Library/Caches`)
- Supports multipath responses when `self.multipath` is enabled

### Path Construction
- Uses inherited `_append_app_name_and_version()` method for consistent app-specific path generation
- Employs `os.path.expanduser()` for tilde expansion in user directories
- Returns first path in list when multipath is disabled, colon-separated string when enabled

### macOS Conventions
- Config and data directories are unified (both use Application Support)
- State directory aliases to data directory (no separate state location)
- Site runtime directory aliases to user runtime (no system-wide runtime)
- Standard user directories follow macOS naming (Movies instead of Videos)

## Critical Invariants
- All user-specific paths use tilde expansion for home directory resolution
- Homebrew detection is consistent across data and cache directory methods
- Multipath behavior is uniform: returns first path when disabled, joined paths when enabled
- App name and version are consistently appended where appropriate using inherited helper method