# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/req/constructors.py
@source-hash: 682f4d73e484484c
@generated: 2026-02-09T17:58:44Z

## Purpose
Factory module for creating InstallRequirement instances from various input formats. Provides constructors and parsing utilities to handle editable installs, requirement lines, and different URL/path formats.

## Key Classes and Functions

### RequirementParts (L195-201)
Dataclass for structured requirement parsing results:
- `requirement`: Optional parsed Requirement object
- `link`: Optional Link object for URLs/paths
- `markers`: Optional environment markers
- `extras`: Set of package extras

### Core Constructors

**install_req_from_editable** (L222-252)
Creates InstallRequirement for editable packages (pip install -e). Handles VCS URLs, local directories, and file paths with extras.

**install_req_from_line** (L386-421) 
Main constructor for requirement strings. Parses various formats: package names, URLs, file paths, directories. Includes extensive error handling with helpful messages.

**install_req_from_req_string** (L423-459)
Creates InstallRequirement from standard requirement strings. Enforces PyPI security restrictions preventing external dependencies.

**install_req_from_parsed_requirement** (L461-499)
Bridge constructor that takes ParsedRequirement objects and delegates to appropriate constructor based on editable flag.

### Parsing Functions

**parse_editable** (L87-140)
Parses editable requirement strings into name, URL, and extras. Handles VCS schemes and local paths. Validates VCS URLs and extracts egg fragments.

**parse_req_from_line** (L307-384)
Core parsing logic for requirement lines. Handles markers, URLs, file paths, and wheel files. Complex logic for disambiguating paths vs requirement specs.

### Utility Functions

**_strip_extras** (L44-54)
Extracts extras from path strings using regex pattern matching.

**convert_extras** (L56-60)
Converts extras string to normalized set format.

**_set_requirement_extras** (L62-85)
Creates new Requirement object with modified extras using regex manipulation.

**_looks_like_path** (L254-271)
Heuristic to determine if string appears to be filesystem path.

**_get_url_from_path** (L273-305)
Converts local paths to file URLs, validates installable directories and archive files.

### Validation and Error Handling

**check_first_requirement_in_file** (L142-168)
Validates if file can be parsed as requirements file by checking first meaningful line.

**deduce_helpful_msg** (L170-193)
Generates user-friendly error messages for invalid requirements, detecting common mistakes.

## Dependencies
- pip._vendor.packaging: Core requirement/specifier parsing
- pip._internal.models: Link, Wheel models
- pip._internal.req: InstallRequirement, ParsedRequirement
- pip._internal.vcs: Version control system detection
- pip._internal.utils: File type detection, URL conversion

## Architecture Patterns
- Factory pattern with multiple constructors for different input types
- Extensive input validation with context-aware error messages
- Separation of parsing logic from InstallRequirement construction
- Security enforcement for PyPI package dependencies

## Critical Invariants
- All constructors return valid InstallRequirement instances
- Editable requirements must have valid VCS URLs or local paths
- PyPI packages cannot depend on external URLs (L445-451)
- Requirement parsing maintains extras and markers correctly