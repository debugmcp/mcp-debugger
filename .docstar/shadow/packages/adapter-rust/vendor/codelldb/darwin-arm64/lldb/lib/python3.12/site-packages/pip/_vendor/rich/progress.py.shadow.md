# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/progress.py
@source-hash: 3f4db18bb4f651ad
@generated: 2026-02-09T17:59:25Z

## Rich Progress Display System

A comprehensive progress tracking system providing visual progress bars, file reading progress, and task management for terminal applications. Part of the Rich library ecosystem.

### Core Progress Classes

**Progress (L1049-1635)**: Main progress display class managing multiple tasks, auto-refresh, and rendering. Key features:
- Auto-refreshing display using Live widget
- Thread-safe task management with RLock
- Configurable columns for different display elements
- Context manager support for automatic start/stop
- Methods: `add_task()`, `update()`, `advance()`, `track()`, `wrap_file()`, `open()`

**Task (L923-1047)**: Dataclass representing individual progress tasks with:
- Progress tracking (completed, total, percentage)
- Speed calculation using rolling samples in `_progress` deque (maxlen=1000)
- Time estimation (elapsed, remaining)
- Thread-safe updates via RLock
- Properties: `percentage`, `speed`, `time_remaining`, `finished`

**TaskID (L53)**: NewType wrapper around int for type-safe task identification.

### Progress Columns (Display Components)

**ProgressColumn (L495-535)**: Abstract base class for display widgets with render caching and max_refresh throttling.

**Core Column Implementations**:
- **BarColumn (L634-673)**: Visual progress bar with customizable styles
- **TextColumn (L604-632)**: Formatted text with markup support  
- **TaskProgressColumn (L688-757)**: Percentage display with speed fallback
- **TimeRemainingColumn (L760-805)**: ETA calculation with compact mode
- **SpinnerColumn (L554-601)**: Animated spinner for indeterminate progress

**File/Data Columns**:
- **DownloadColumn (L853-899)**: File size progress (completed/total with units)
- **FileSizeColumn (L808-814)**: Current file size completed
- **TransferSpeedColumn (L902-912)**: Human-readable speed display
- **MofNCompleteColumn (L826-850)**: Count-based progress display

### File Progress Utilities

**track() (L103-171)**: High-level function to wrap any sequence with progress display, automatically configuring columns and handling iteration.

**wrap_file() (L294-356)**: Context manager for tracking binary file reading progress with automatic total detection.

**open() (L409-492)**: Progress-aware file opener supporting both text and binary modes with overloads for type safety.

### Internal File Tracking

**_Reader (L173-271)**: BinaryIO wrapper that advances progress on all read operations (read, readline, readlines, readinto). Maintains original file interface while tracking bytes read.

**_TrackThread (L63-100)**: Background thread for auto-refresh scenarios, periodically syncing completed count to avoid UI blocking during iteration.

**_ReadContext (L273-292)**: Context manager coordinating progress display lifecycle with file reader lifecycle.

### Key Architectural Patterns

1. **Column-based Architecture**: Extensible display system where each column renders one aspect of progress
2. **Thread Safety**: All task operations protected by RLock for concurrent access
3. **Speed Estimation**: Rolling window of progress samples for accurate speed calculation
4. **Caching**: Render caching with max_refresh to prevent excessive recomputation
5. **Type Safety**: Extensive use of typing overloads and NewType for API clarity

### Dependencies

- Rich ecosystem: Console, Live, Table, Text, ProgressBar, Spinner
- Threading primitives for concurrency
- File I/O wrappers for progress tracking
- Math utilities for speed/time calculations