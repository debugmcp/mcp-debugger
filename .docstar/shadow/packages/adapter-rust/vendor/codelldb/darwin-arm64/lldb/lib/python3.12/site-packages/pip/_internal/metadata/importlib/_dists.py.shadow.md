# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/importlib/_dists.py
@source-hash: b01d9e87076acac8
@generated: 2026-02-09T17:57:26Z

**Primary Purpose**: Implements distribution metadata handling for pip's importlib-based metadata backend, providing concrete implementations for reading package metadata from wheels and installed distributions.

**Key Classes**:

- `WheelDistribution` (L36-93): Custom `importlib.metadata.Distribution` subclass for reading wheel metadata. Eagerly loads all metadata files into memory to avoid keeping ZipFile handles open. Key methods:
  - `from_zipfile()` (L55-73): Class method to construct from a ZipFile, extracts metadata directory
  - `read_text()` (L81-92): Reads metadata files with UTF-8 decoding and error handling

- `Distribution` (L95-228): Main distribution wrapper implementing `BaseDistribution` interface. Wraps `importlib.metadata.Distribution` with additional pip-specific functionality. Key methods:
  - `from_directory()` (L106-110): Creates distribution from metadata directory
  - `from_metadata_file_contents()` (L112-127): Creates distribution from raw metadata bytes in temp directory
  - `from_wheel()` (L129-136): Creates distribution from wheel file using `WheelDistribution`
  - `_get_dist_name_from_location()` (L156-166): Fast name extraction from directory structure
  - `iter_dependencies()` (L217-228): Dependency iteration with extras support and marker evaluation

**Key Dependencies**:
- `importlib.metadata`: Core metadata reading functionality
- `pip._vendor.packaging`: Requirement parsing, name canonicalization, version handling
- `pip._internal.metadata.base`: Base classes and interfaces
- `pip._internal.utils.wheel`: Wheel parsing utilities

**Architectural Patterns**:
- Factory pattern: Multiple `from_*` class methods for different distribution sources
- Adapter pattern: `Distribution` wraps `importlib.metadata.Distribution` with pip-specific interface
- Lazy evaluation: Properties for computed values like canonical names and versions
- Error handling: Converts low-level exceptions to pip-specific exceptions (`InvalidWheel`, `UnsupportedWheel`)

**Critical Constraints**:
- WheelDistribution eagerly loads metadata to avoid ZipFile lifetime issues
- UTF-8 encoding required for all metadata text files
- Supports both .dist-info and .egg-info directory formats
- Dependency marker evaluation respects extras context