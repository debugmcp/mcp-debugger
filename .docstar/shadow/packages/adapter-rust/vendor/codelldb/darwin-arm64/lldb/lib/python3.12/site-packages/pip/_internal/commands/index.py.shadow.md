# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/index.py
@source-hash: 4405f1989c058556
@generated: 2026-02-09T17:58:27Z

## Purpose
Implements the `pip index` experimental command for inspecting package information from PyPI and other package indexes. Currently supports querying available versions of packages.

## Key Components

### IndexCommand Class (L22-139)
Main command class inheriting from `IndexGroupCommand`. Provides package index inspection functionality.

**Key Methods:**
- `add_options()` (L32-46): Configures command-line options including target Python version, pre-release handling, and binary format preferences
- `run()` (L48-76): Main entry point that dispatches to action handlers based on first argument; currently only supports "versions" action
- `_build_package_finder()` (L78-101): Creates configured PackageFinder instance with link collector and selection preferences; sets `allow_yanked=False` to exclude yanked packages
- `get_available_package_versions()` (L103-139): Core functionality that queries package indexes, filters versions based on pre-release preferences, and outputs formatted results

## Architecture Patterns

### Command Dispatch Pattern
Uses handler dictionary (L49-51) to map action names to methods, with centralized error handling in `run()` method.

### Builder Pattern
`_build_package_finder()` constructs complex PackageFinder objects with proper configuration for index operations.

## Dependencies
- `PackageFinder`/`LinkCollector` for package discovery
- `SelectionPreferences` for version filtering logic
- `cmdoptions` module for CLI option management
- External `print_dist_installation_info()` from search command

## Key Behaviors
- Experimental status warning displayed on every execution (L53-57)
- Yanked packages explicitly excluded from results (L91-92)
- Pre-release versions filtered unless `--pre` flag specified (L122-127)
- Results sorted in descending version order (L134)
- Outputs package name with latest version and full available version list (L137-138)

## Error Handling
- Validates exactly one package argument (L104-105)
- Raises `DistributionNotFound` when no versions found (L129-132)
- Centralized PipError handling in run() method (L72-74)