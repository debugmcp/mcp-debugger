# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py
@source-hash: d3b08173ce726b72
@generated: 2026-02-09T17:57:36Z

## Purpose
Candidate implementation module for pip's ResolveLib-based dependency resolver. Defines different types of installation candidates (packages) that can be resolved during dependency resolution, each representing a potential solution for a package requirement.

## Key Classes

### Base Infrastructure
- **BaseCandidate** (L33-37): Type union of concrete candidate classes (AlreadyInstalledCandidate, EditableCandidate, LinkCandidate)
- **as_base_candidate()** (L43-52): Runtime type checker to convert generic Candidate to BaseCandidate

### InstallRequirement Factory Functions
- **make_install_req_from_link()** (L55-77): Creates InstallRequirement from Link and template for regular packages
- **make_install_req_from_editable()** (L80-97): Creates InstallRequirement for editable installations
- **_make_install_req_from_dist()** (L100-121): Creates InstallRequirement from existing distribution

### Core Candidate Classes

#### _InstallRequirementBackedCandidate (L124-258)
Abstract base class for candidates backed by InstallRequirement. Provides:
- Distribution preparation via `_prepare()` (L233-248) with error handling
- Metadata consistency checking via `_check_metadata_consistency()` (L209-231)
- Dependency iteration via `iter_dependencies()` (L250-254)
- Common properties: name, version, project_name
- Abstract `_prepare_distribution()` method for subclasses

#### LinkCandidate (L260-315)
For packages installed from links (URLs, files). Features:
- Wheel cache integration (L272-301)
- Wheel metadata validation for remote wheels (L278-287)
- Distribution preparation via preparer.prepare_linked_requirement()

#### EditableCandidate (L317-339)
For editable installs (development mode). Simpler than LinkCandidate:
- Always uses source link as both link and source_link
- Distribution preparation via preparer.prepare_editable_requirement()

#### AlreadyInstalledCandidate (L341-406)
Represents packages already in the environment:
- No installation needed, just dependency tracking
- Uses existing BaseDistribution
- Returns None for get_install_requirement() (L404-405)

#### ExtrasCandidate (L408-530)
Wrapper for candidates with extras (e.g., package[extra]):
- Delegates most operations to base candidate
- Adds dependency on base candidate to prevent version conflicts
- Filters valid extras and warns about invalid ones (L508-516)
- Returns None for install requirement (base provides it)

#### RequiresPythonCandidate (L532-569)
Special candidate representing Python version requirement:
- Uses sys.version_info or provided version info
- Immutable singleton-like behavior
- No dependencies or install requirements

## Key Dependencies
- **Factory**: Dependency injection for creating requirements and accessing services
- **BaseDistribution**: Metadata and dependency information
- **InstallRequirement**: Installation specification and state
- **Link**: Package source location (URL, file path, etc.)

## Architectural Patterns
- **Strategy Pattern**: Different candidate types handle preparation differently
- **Template Method**: _InstallRequirementBackedCandidate defines preparation flow
- **Delegation**: ExtrasCandidate delegates to base candidate
- **Factory Integration**: All candidates use Factory for requirement creation

## Critical Constraints
- Wheel cache entries must maintain source link information for provenance
- Metadata consistency must be validated during preparation
- ExtrasCandidate must depend on base to prevent version conflicts
- AlreadyInstalledCandidate and ExtrasCandidate return None for install requirements