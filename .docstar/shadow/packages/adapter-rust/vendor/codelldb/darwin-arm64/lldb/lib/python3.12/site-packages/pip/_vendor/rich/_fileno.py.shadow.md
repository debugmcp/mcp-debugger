# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_fileno.py
@source-hash: 1d66713f90b66a33
@generated: 2026-02-09T17:58:55Z

## Purpose
Provides safe file descriptor extraction from file-like objects with robust error handling for poorly implemented file-like objects.

## Key Components

### Functions
- **get_fileno** (L6-24): Safely extracts file descriptor from file-like objects
  - Parameters: `file_like: IO[str]` - any file-like object
  - Returns: `int | None` - file descriptor number or None on failure
  - Implementation: Uses `getattr` to check for fileno method, catches all exceptions during invocation

## Dependencies
- `typing.IO`: Type hint for file-like objects
- `typing.Callable`: Type hint for function objects

## Architecture & Patterns
- **Defensive Programming**: Wraps fileno() call in try-catch to handle poorly implemented file-like objects
- **Duck Typing**: Uses `getattr` to safely check for fileno method existence
- **Broad Exception Handling**: Catches all exceptions (not just OSError) due to real-world file-like object implementations

## Critical Implementation Details
- Line 15: Uses `getattr(file_like, "fileno", None)` for safe method detection
- Line 18-23: Broad exception handling acknowledges that file-like objects may raise unexpected exceptions beyond documented OSError
- Line 21-22: Comment explains rationale for catching all exceptions due to poorly implemented file-like objects in practice

## Use Cases
Essential utility for terminal/console operations where file descriptor access is needed but file-like object quality cannot be guaranteed.