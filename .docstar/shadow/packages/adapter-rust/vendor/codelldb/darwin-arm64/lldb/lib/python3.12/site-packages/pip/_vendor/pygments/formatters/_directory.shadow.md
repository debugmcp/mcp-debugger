# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/
@generated: 2026-02-09T18:16:20Z

## Overall Purpose and Responsibility

This directory contains the complete formatter subsystem for the Pygments syntax highlighting library. It provides output formatters that convert tokenized source code into various presentation formats including HTML, LaTeX, RTF, SVG, BBCode, IRC colors, terminal ANSI sequences, and image files. The module serves as the output layer in Pygments' three-stage pipeline: lexing → tokenization → formatting.

## Key Components and Architecture

### Core Infrastructure

**Formatter Discovery and Loading (`__init__.py`)**
- Central entry point providing unified API for formatter discovery and instantiation
- Lazy-loading system with caching (`_formatter_cache`, `_pattern_cache`) for performance
- Plugin architecture supporting both built-in and custom formatters
- Auto-import mechanism enabling `pygments.formatters.FormatterName` syntax
- Static formatter registry from `_mapping.py` with metadata for all available formatters

**Formatter Registry (`_mapping.py`)**
- Auto-generated mapping of 20+ formatter classes to their metadata
- 5-tuple structure: (module_path, display_name, aliases, file_extensions, description)
- Enables lazy loading and automatic format detection by file extension

### Format Categories

**Text/Markup Outputs:**
- `NullFormatter` (`other.py`) - Plain text without formatting
- `HtmlFormatter` (`html.py`) - Comprehensive HTML with CSS, line numbers, highlighting
- `LatexFormatter` (`latex.py`) - LaTeX markup for `fancyvrb` package
- `RtfFormatter` (`rtf.py`) - Rich Text Format for Microsoft Word
- `BBCodeFormatter` (`bbcode.py`) - Forum markup with color support

**Vector/Image Outputs:**
- `SvgFormatter` (`svg.py`) - SVG graphics with text elements and styling
- `ImageFormatter` (`img.py`) - PNG/GIF/JPEG/BMP via PIL with font management

**Terminal Outputs:**
- `TerminalFormatter` (`terminal.py`) - Basic ANSI colors (16 colors)
- `Terminal256Formatter` (`terminal256.py`) - 256-color terminal support
- `TerminalTrueColorFormatter` (`terminal256.py`) - 24-bit RGB terminal output
- `IRCFormatter` (`irc.py`) - IRC color control codes
- `PangoMarkupFormatter` (`pangomarkup.py`) - Pango markup for GTK applications

**Development/Debug Outputs:**
- `RawTokenFormatter` (`other.py`) - Serialized token streams with compression
- `TestcaseFormatter` (`other.py`) - Python test case generation
- `GroffFormatter` (`groff.py`) - Groff/troff typesetting markup

## Public API Surface

### Primary Entry Points

**`get_formatter_by_name(alias, **options)`** - Main API for formatter instantiation by name/alias
**`get_formatter_for_filename(filename, **options)`** - Automatic format detection by file extension
**`get_formatter_by_filename(filename, **options)`** - Alias for filename-based selection
**`load_formatter_from_file(filename, formattername, **options)`** - Custom formatter loading
**`get_all_formatters()`** - Generator of all available formatter classes

### Secondary APIs

**`find_formatter_class(alias)`** - Low-level formatter class lookup without instantiation
**Auto-import attributes** - Direct access via `pygments.formatters.HtmlFormatter` etc.

## Internal Organization and Data Flow

### Formatter Discovery Pipeline
1. **Static Registry**: `_mapping.py` provides base formatter metadata
2. **Plugin Discovery**: `find_plugin_formatters()` discovers third-party formatters
3. **Lazy Loading**: Formatters imported on first access via `_load_formatters()`
4. **Caching**: Multiple cache layers for performance optimization

### Formatting Pipeline
1. **Token Stream Input**: All formatters accept `(token_type, text)` generator
2. **Style Resolution**: Token types mapped to visual styles (colors, fonts, etc.)
3. **Format-specific Output**: Each formatter converts to target format
4. **Configuration**: Extensive options for customization (line numbers, colors, fonts)

### Common Patterns
- **Token Type Hierarchy**: Formatters traverse parent token types for style fallback
- **Generator Chains**: HTML formatter uses pipeline of wrapper generators
- **Style Caching**: Performance optimization through pre-computed style mappings
- **Platform Abstraction**: Image formatter handles cross-platform font discovery

## Important Patterns and Conventions

### Style System
- All formatters consume Pygments style definitions (colors, bold, italic, underline)
- Token type inheritance enables fallback styling
- Color format standardization across outputs (hex, RGB, named colors)

### Configuration Pattern
- Common options: `style`, `linenos`, `encoding`, format-specific parameters
- Option validation through utility functions (`get_bool_opt`, `get_int_opt`)
- Backward compatibility maintained through option aliasing

### Output Abstractions
- File-like object output interface (`outfile.write()`)
- Encoding handling varies by format (UTF-8, ASCII, binary)
- Some formatters support both fragment and full document modes

### Error Handling
- `ClassNotFound` for missing formatters
- Platform-specific exceptions (e.g., `PilNotAvailable`, `FontNotFound`)
- Graceful degradation in font/color selection

This formatter collection provides comprehensive output format support for code syntax highlighting, from simple terminal display to publication-ready documents and images.