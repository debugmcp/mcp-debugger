# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/live_render.py
@source-hash: cc9b41e3bd631b38
@generated: 2026-02-09T17:59:14Z

## Purpose
Implements a `LiveRender` class for creating updatable terminal renderings with cursor positioning control in the Rich library. Handles dynamic content updates while managing terminal cursor movement and overflow behavior.

## Core Components

### LiveRender Class (L20-112)
Primary class managing updatable terminal renderings with vertical overflow control.

**Key Methods:**
- `__init__()` (L28-37): Initializes with renderable, style, and vertical overflow behavior
- `set_renderable()` (L39-45): Updates the current renderable content
- `position_cursor()` (L47-66): Returns control codes to move cursor to start of render
- `restore_cursor()` (L68-80): Returns control codes to clear render and restore cursor
- `__rich_console__()` (L82-112): Core rendering method implementing Rich protocol

**State Management:**
- `_shape` (L37): Cached tuple of (width, height) for cursor positioning
- Tracks render dimensions for accurate cursor control operations

## Type System
- `VerticalOverflowMethod` (L17): Literal type defining overflow strategies: "crop", "ellipsis", "visible"
- Uses conditional typing imports for Python 3.8+ compatibility (L4-7)

## Key Dependencies
- `.console.Console`: Core rendering engine and style management
- `.control.Control`: Terminal control code generation
- `.segment.Segment`: Low-level terminal segment operations
- `._loop.loop_last`: Utility for iteration with last-item detection

## Architectural Patterns

### Terminal Control Strategy
Uses ANSI control sequences for cursor manipulation:
- `CARRIAGE_RETURN`: Move to line beginning
- `ERASE_IN_LINE`: Clear line content  
- `CURSOR_UP`: Move cursor vertically

### Overflow Handling (L91-106)
Three strategies when content exceeds available height:
1. **crop**: Truncate lines to fit available space
2. **ellipsis**: Show partial content with "..." indicator
3. **visible**: Allow content to extend beyond boundaries

### Rendering Protocol
Implements Rich's `__rich_console__` protocol for seamless integration with the rendering pipeline, yielding segment sequences with proper line breaks.