# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/idna/
@generated: 2026-02-09T18:16:17Z

## Purpose
This directory provides the IDNA (Internationalized Domain Names in Applications) library implementation for handling Unicode domain names according to the IDNA2008/RFC 5891 specification with UTS46 compatibility. It enables conversion between Unicode domain names and ASCII-compatible encoding (ACE) format using Punycode, along with comprehensive validation and normalization capabilities.

## Key Components and Data Flow

### Core Processing Engine (`core.py`)
Central module providing the main IDNA processing logic:
- **Label Processing**: `alabel()` (Unicode→ASCII) and `ulabel()` (ASCII→Unicode) for individual domain labels
- **Domain Processing**: `encode()`/`decode()` functions that split domains on dots and process each label
- **Validation Orchestra**: `check_label()` coordinates comprehensive validation including Unicode normalization, hyphen rules, codepoint validity, and bidirectional text requirements
- **Context Validation**: `valid_contextj()`/`valid_contexto()` for ambiguous characters requiring surrounding context analysis

### Unicode Data Tables
- **`idnadata.py`**: Auto-generated Unicode tables (v15.1.0) containing script mappings, joining types for Arabic/Hebrew text, and character classification (PVALID/CONTEXTJ/CONTEXTO)
- **`uts46data.py`**: Auto-generated UTS46 mapping data defining how Unicode characters should be normalized, mapped, or rejected in domain names
- **`intranges.py`**: Efficient sparse integer set representation using compressed ranges for O(log n) membership testing

### Public API and Integration
- **`__init__.py`**: Main entry point consolidating all public functions and exceptions into a clean namespace
- **`codec.py`**: Python codec registration providing 'idna2008' codec for use with Python's encoding infrastructure, including incremental processing support
- **`compat.py`**: Legacy API compatibility layer with `ToASCII()`/`ToUnicode()` functions
- **`package_data.py`**: Version metadata (3.7)

## Public API Surface

### Primary Functions
- `encode(domain)` / `decode(domain)` - Full domain name processing
- `alabel(label)` / `ulabel(label)` - Individual label conversion
- `uts46_remap(label)` - UTS46 Unicode mapping transformation

### Validation Functions
- `check_label()`, `check_bidi()`, `check_hyphen_ok()`, `check_nfc()`
- `valid_contextj()`, `valid_contexto()` - Context-dependent character validation
- `valid_label_length()`, `valid_string_length()` - Length constraint validation

### Exception Classes
- `IDNAError` (base), `IDNABidiError`, `InvalidCodepoint`, `InvalidCodepointContext`

### Codec Integration
- Automatic registration of 'idna2008' codec for use with Python's `codecs` module
- Incremental encoding/decoding support for streaming scenarios

## Internal Organization

### Data Processing Pipeline
1. **Input Normalization**: UTS46 mapping and Unicode normalization (NFC)
2. **Validation**: Multi-stage validation including codepoint classification, context rules, length limits, and bidirectional text requirements
3. **Encoding**: Punycode conversion for non-ASCII labels with 'xn--' prefix
4. **Assembly**: Reconstruction of full domain names from processed labels

### Performance Optimizations
- **Compressed Range Tables**: Integer ranges encoded as 64-bit values for memory efficiency
- **Binary Search**: O(log n) lookups in Unicode classification tables
- **Static Data Loading**: Large Unicode tables loaded once at import time
- **Incremental Processing**: Streaming support for large domain processing

## Important Patterns

### Unicode Compliance
- Strict adherence to IDNA2008/RFC 5891 with UTS46 transitional compatibility
- Comprehensive Unicode bidirectional algorithm implementation
- Context-sensitive validation for ambiguous characters (Zero Width Joiner, Arabic digits, etc.)

### Error Handling
- Hierarchical exception system with specific error types for different validation failures
- Strict error handling mode with detailed error reporting

### Dot Character Handling
- Support for multiple Unicode dot characters (U+002E, U+3002, U+FF0E, U+FF61) in domain splitting
- Consistent normalization to ASCII dots in output

This module serves as a critical component for internationalized web applications, domain registrars, and any system requiring proper Unicode domain name handling according to modern Internet standards.