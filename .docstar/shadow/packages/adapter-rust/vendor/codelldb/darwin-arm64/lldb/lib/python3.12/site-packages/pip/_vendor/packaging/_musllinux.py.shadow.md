# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/_musllinux.py
@source-hash: a7d66a35888e22d1
@generated: 2026-02-09T17:58:47Z

**Primary Purpose:** PEP 656 compliance module for detecting musl libc runtime and generating compatible musllinux platform tags for Python package distribution.

**Core Components:**

- `_MuslVersion` (L18-21): NamedTuple representing musl version with major/minor integer fields
- `_parse_musl_version()` (L23-30): Parses musl loader output to extract version numbers using regex pattern "Version (\d+)\.(\d+)"
- `_get_musl_version()` (L34-53): Main detection function that:
  - Uses ELFFile to extract interpreter path from executable
  - Checks if interpreter contains "musl" string
  - Executes loader and parses stderr output for version info
  - Returns None if not musl-linked or detection fails
- `platform_tags()` (L56-72): Generator yielding compatible musllinux tags in format "musllinux_{major}_{minor}_{arch}", iterating from current minor version down to 0

**Key Dependencies:**
- `._elffile.ELFFile`: ELF binary parser for extracting dynamic loader information
- `subprocess`: Executes musl loader to obtain version information
- Standard library: `functools.lru_cache`, `re`, `sys`

**Architecture Patterns:**
- Caching via `@functools.lru_cache` on version detection (L33)
- Defensive programming with comprehensive exception handling (L48)
- Generator pattern for tag enumeration optimizing memory usage

**Critical Logic:**
- Version detection relies on ELF interpreter path containing "musl" substring (L50)
- Tag generation produces backward-compatible versions by decrementing minor version (L71)
- Main block provides debugging utilities for platform detection (L75-85)

**Constraints:**
- Requires ELF executable format (Linux/Unix systems)
- musl detection depends on loader stderr output format consistency
- Platform tags assume "linux_" prefix prerequisite for musllinux compatibility