# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/protocol.py
@source-hash: e611c70c33477247
@generated: 2026-02-09T17:59:08Z

**Purpose**: Protocol utilities for Rich's renderable type system - provides detection and casting of objects that can be rendered by Rich's console output system.

**Key Functions**:
- `is_renderable()` (L10-16): Determines if an object can be rendered by Rich by checking for string type or Rich protocol methods (`__rich__` or `__rich_console__`)
- `rich_cast()` (L19-42): Safely converts objects to renderable types by recursively calling `__rich__` methods while preventing infinite loops

**Core Logic**:
- Uses duck typing to detect renderables via method presence rather than inheritance
- Implements cycle detection using `rich_visited_set` (L30) to prevent infinite recursion
- Includes defense against malicious objects that claim to have all attributes via `_GIBBERISH` constant (L7)
- Falls back to `repr()` for suspicious objects (L34)

**Dependencies**:
- Imports `RenderableType` from Rich's console module (conditional import for type checking)
- Uses standard library `typing`, `inspect.isclass`

**Architectural Notes**:
- Follows Rich's protocol-based design allowing any object to become renderable
- Prioritizes safety with multiple guards against infinite loops and malicious objects
- Separates detection (`is_renderable`) from transformation (`rich_cast`) concerns