# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/constrain.py
@source-hash: d5520fb82f0082d2
@generated: 2026-02-09T17:59:03Z

**Primary Purpose:** Width constraint wrapper for Rich terminal rendering system. Provides a way to limit the maximum width of any renderable object while preserving Rich's rendering protocol.

**Core Architecture:**
- **Constrain class (L10-37)**: Implements Rich's rendering protocol (`__rich_console__` and `__rich_measure__`) to constrain renderable width
- Inherits from `JupyterMixin` for Jupyter notebook compatibility
- Acts as a transparent wrapper that modifies rendering options rather than content

**Key Components:**

**Constructor (L18-20):**
- `renderable`: The wrapped object to be constrained  
- `width`: Maximum width in characters (defaults to 80, can be None for no constraint)

**Rendering Method (L22-29):**
- `__rich_console__()`: Core rendering implementation
- If width is None, passes through unchanged (L25-26)
- Otherwise, creates child options with constrained width using `min(self.width, options.max_width)` (L28)
- Delegates actual rendering to console with modified options (L29)

**Measurement Method (L31-37):**
- `__rich_measure__()`: Provides size calculation for layout
- Updates options with constrained width when width is specified (L34-35)
- Returns measurement from wrapped renderable using modified options (L36-37)

**Dependencies:**
- `JupyterMixin`: Base class for Jupyter integration
- `Measurement`: Rich's measurement system for size calculation
- Type imports from `console` module for Rich rendering protocol

**Design Patterns:**
- **Wrapper Pattern**: Transparently wraps any renderable while modifying behavior
- **Protocol Implementation**: Implements Rich's rendering protocol (`__rich_console__`, `__rich_measure__`)
- **Options Chain**: Modifies rendering options and delegates to console rather than manipulating content directly

**Key Behavior:**
- Width constraint is enforced at options level, not content level
- Respects existing width constraints (uses minimum of requested and available width)
- Maintains full Rich protocol compatibility