# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/wheel.py
@source-hash: 6f8e368e4c9d1478
@generated: 2026-02-09T17:58:41Z

## Primary Purpose
Utility module for parsing and validating Python wheel files, ensuring they meet pip's compatibility requirements and extracting metadata from wheel archives.

## Key Functions

**parse_wheel(wheel_zip: ZipFile, name: str) -> Tuple[str, Message] (L20-35)**
- Main entry point for wheel processing
- Orchestrates extraction of .dist-info directory, metadata parsing, and version compatibility checking
- Returns .dist-info directory name and parsed WHEEL metadata
- Wraps exceptions in UnsupportedWheel with contextual error messages

**wheel_dist_info_dir(source: ZipFile, name: str) -> str (L38-66)**
- Locates and validates the .dist-info directory within wheel archive
- Ensures exactly one .dist-info directory exists
- Validates directory name matches canonicalized package name
- Uses '/' path separators for zip file compatibility

**wheel_metadata(source: ZipFile, dist_info_dir: str) -> Message (L78-94)**
- Extracts and parses WHEEL metadata file from .dist-info directory
- Handles Unicode decoding of wheel contents
- Uses email.parser.Parser for RFC-compliant metadata parsing
- Ignores parser defects for backwards compatibility

**wheel_version(wheel_data: Message) -> Tuple[int, ...] (L97-110)**
- Extracts and parses Wheel-Version header from metadata
- Converts dotted version string to integer tuple
- Validates presence and format of version information

**check_compatibility(version: Tuple[int, ...], name: str) -> None (L113-134)**
- Enforces pip's wheel version compatibility policy
- Rejects major version mismatches (raises UnsupportedWheel)
- Warns on minor version ahead scenarios
- Compatible with wheel format version 1.0

**read_wheel_metadata_file(source: ZipFile, path: str) -> bytes (L69-75)**
- Low-level file reader with comprehensive error handling
- Handles BadZipFile, KeyError (missing files), and RuntimeError (password protection)

## Dependencies
- `zipfile.ZipFile`: Archive manipulation
- `email.parser.Parser`: RFC-compliant metadata parsing  
- `pip._vendor.packaging.utils.canonicalize_name`: Name normalization
- `pip._internal.exceptions.UnsupportedWheel`: Custom exception type

## Constants
- `VERSION_COMPATIBLE = (1, 0)` (L14): Defines pip's supported wheel format version

## Architecture Patterns
- Exception chaining for contextual error reporting
- Separation of concerns: parsing, validation, and compatibility checking
- Defensive programming with comprehensive error handling for zip file operations
- RFC 5322 email format for wheel metadata (standard wheel specification)