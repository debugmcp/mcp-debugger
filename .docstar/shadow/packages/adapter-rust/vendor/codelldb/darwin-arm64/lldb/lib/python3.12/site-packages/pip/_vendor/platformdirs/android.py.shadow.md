# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/platformdirs/android.py
@source-hash: 06a22c027230fba6
@generated: 2026-02-09T17:58:53Z

**Primary Purpose**: Android-specific implementation of platform directories following PlatformDirsABC interface. Provides cross-platform directory resolution for Android filesystem structure with fallback mechanisms.

**Core Architecture**:
- `Android` class (L14-117): Main implementation extending `PlatformDirsABC`
- Dual strategy approach: Primary via `pyjnius` Android API, fallback to hardcoded paths
- Heavy use of `@lru_cache` for performance optimization of directory lookups

**Key Directory Properties** (Android class):
- `user_data_dir` (L24-26): `/data/user/<userid>/<packagename>/files/<AppName>`
- `user_config_dir` (L34-39): Uses `shared_prefs` subdirectory 
- `user_cache_dir` (L47-49): Uses `cache` subdirectory
- `user_log_dir` (L62-70): Conditional `log` subdirectory based on `opinion` flag
- `user_runtime_dir` (L103-111): Conditional `tmp` subdirectory based on `opinion` flag
- Media directories (L73-100): Documents, Downloads, Pictures, Videos, Music, Desktop

**Helper Functions** (all cached with `@lru_cache(maxsize=1)`):
- `_android_folder` (L120-137): Base app directory detection via pyjnius or regex fallback
- `_android_documents_folder` (L141-153): External documents directory
- `_android_downloads_folder` (L157-169): External downloads directory  
- `_android_pictures_folder` (L173-185): External pictures directory
- `_android_videos_folder` (L189-201): External videos/DCIM directory
- `_android_music_folder` (L205-217): External music directory

**Dependencies**:
- `PlatformDirsABC` from `.api` - Base interface
- `jnius.autoclass` - Android Java class access (optional, with fallbacks)
- Standard library: `os`, `re`, `sys`, `functools.lru_cache`, `typing.cast`

**Error Handling Pattern**: All Android API calls wrapped in broad exception handling with hardcoded fallback paths (e.g., `/storage/emulated/0/...`).

**Notable Design Decisions**:
- Site directories always mirror user directories (no true system-wide dirs on Android)
- Opinion-based subdirectory creation for logs and runtime
- Regex pattern `/data/(data|user/\d+)/(.+)/files` for sys.path parsing fallback
- Extensive use of caching due to potentially expensive Android API calls