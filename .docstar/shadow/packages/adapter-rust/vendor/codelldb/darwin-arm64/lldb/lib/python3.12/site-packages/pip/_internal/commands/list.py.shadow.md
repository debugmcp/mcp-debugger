# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/list.py
@source-hash: 46068857890df9e3
@generated: 2026-02-09T17:58:31Z

## Purpose
Implements the `pip list` command for displaying installed Python packages with various filtering and formatting options. Supports listing outdated packages, up-to-date packages, editable packages, and packages not required as dependencies.

## Key Classes

### ListCommand (L38-311)
Main command class inheriting from `IndexGroupCommand`. Provides comprehensive package listing functionality with multiple output formats (columns, freeze, JSON).

**Key Methods:**
- `add_options()` (L49-135): Configures CLI options including --outdated, --uptodate, --editable, --local, --user, --format, --not-required, --exclude-editable
- `run()` (L164-203): Main execution logic that validates options, retrieves packages, applies filters, and outputs results
- `get_outdated()` (L205-212): Filters packages with newer versions available
- `get_uptodate()` (L214-221): Filters packages at latest version  
- `get_not_required()` (L223-235): Filters packages not required as dependencies
- `iter_packages_latest_infos()` (L237-273): Generator that enriches packages with latest version info from PyPI
- `output_package_listing()` (L275-294): Routes to appropriate output formatter based on --format option
- `output_package_listing_columns()` (L296-310): Renders tabular output with headers and separators

## Key Functions

### format_for_columns() (L313-355)
Converts package data into tabular format with dynamic columns based on options (outdated info, editable locations, verbose details).

### format_for_json() (L358-375)
Serializes package data to JSON format with conditional fields based on verbosity and outdated options.

## Type Definitions

### _DistWithLatestInfo (L22-31)
TYPE_CHECKING class extending BaseDistribution with `latest_version` and `latest_filetype` fields populated during outdated checks.

## Dependencies
- Uses `pip._internal.metadata` for package discovery
- Integrates with `PackageFinder` for latest version lookups
- Leverages `pip._vendor.packaging` for version comparison and name canonicalization
- Depends on `tabulate()` utility for column formatting

## Key Patterns
- Lazy imports heavy index modules (L148-149) to optimize performance for basic listing
- Filters packages in specific order: not-required first, then outdated/uptodate to maintain dependency analysis accuracy (L190-195)
- Dynamic column generation based on package characteristics and verbosity levels
- Consistent use of canonical names for package comparison and exclusion

## Critical Constraints
- Cannot combine --outdated and --uptodate options
- Cannot use freeze format with --outdated option
- Excludes stdlib packages by default
- Respects yanked package exclusion in version selection