# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/locations/base.py
@source-hash: 45088f8b57781553
@generated: 2026-02-09T17:58:33Z

## Purpose
Base module for pip's location management system that provides platform-aware path utilities and Python environment detection. Handles cross-platform path manipulation and determines installation directories based on environment context (virtualenv, system Python, etc.).

## Key Components

### Constants and Global Variables
- `USER_CACHE_DIR` (L13): User cache directory for pip using appdirs
- `site_packages` (L16): Python's purelib installation path from sysconfig
- `user_site` (L74-76): User site-packages directory with fallback handling

### Core Functions

**get_major_minor_version() (L19-24)**
- Returns Python version as "X.Y" string format
- Simple wrapper around sys.version_info for version detection

**change_root(new_root, pathname) (L27-52)**
- Cross-platform path root changing utility borrowed from distutils
- Handles POSIX (L36-40) and Windows (L42-46) path manipulations differently
- Strips leading separators and joins paths appropriately per platform
- Raises InstallationError for unsupported platforms (L49-52)

**get_src_prefix() (L55-68)**
- Determines source directory prefix based on environment context
- Virtual environment: uses `sys.prefix/src` (L57)
- System Python: uses current working directory + "src" (L61)
- Includes error handling for deleted/renamed working directories (L62-64)
- Returns absolute path with macOS virtualenv workaround (L66-68)

**is_osx_framework() (L79-81)**
- Cached detection of macOS framework Python installation
- Uses sysconfig PYTHONFRAMEWORK variable
- LRU cache with unlimited size for performance

## Dependencies
- Standard library: os, sys, site, sysconfig, functools, typing
- Internal pip modules: exceptions.InstallationError, utils.appdirs, utils.virtualenv

## Architecture Notes
- Platform abstraction layer for path operations
- Environment-aware directory resolution (virtualenv vs system)
- Caching strategy for expensive platform detection
- Error handling for edge cases (missing directories, unknown platforms)