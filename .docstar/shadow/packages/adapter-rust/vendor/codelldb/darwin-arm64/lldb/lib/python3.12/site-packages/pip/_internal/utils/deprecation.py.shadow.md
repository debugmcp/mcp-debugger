# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/deprecation.py
@source-hash: 93b420fd404069a4
@generated: 2026-02-09T17:58:35Z

**Primary Purpose:** Provides pip's deprecation warning infrastructure, integrating Python's warnings system with pip's logging to manage and display deprecation messages consistently.

**Key Components:**

- `PipDeprecationWarning` (L16-17): Custom warning class extending Python's `Warning` base class, used specifically for pip deprecation notifications.

- `_showwarning()` (L24-41): Custom warning handler that redirects `PipDeprecationWarning` instances to pip's internal deprecation logger (`pip._internal.deprecations`) while preserving default behavior for other warning types.

- `install_warning_logger()` (L44-52): Initializes the deprecation system by:
  - Enabling default handling for `PipDeprecationWarning` 
  - Replacing the global `warnings.showwarning` with custom handler
  - Storing original handler in `_original_showwarning` global

- `deprecated()` (L55-124): Main deprecation utility function that:
  - Accepts reason, replacement, gone_in version, feature_flag, and issue parameters
  - Constructs formatted deprecation messages with prefix `"DEPRECATION: "`
  - Compares current pip version against `gone_in` to determine if feature is expired
  - Raises `PipDeprecationWarning` exception if feature is already gone
  - Otherwise emits warning with `stacklevel=2` for proper source attribution

**Dependencies:**
- `pip._vendor.packaging.version.parse`: Version comparison logic
- `pip.__version__`: Current pip version for deprecation timeline checks
- Standard `logging` and `warnings` modules

**Architectural Patterns:**
- Global state management via `_original_showwarning` (L20)
- Message template system using tuple pairs of (value, format_string) (L86-112)
- Conditional message formatting based on deprecation state
- Integration point between warnings system and logging infrastructure

**Critical Invariants:**
- `install_warning_logger()` must be called before deprecation warnings work properly
- Version comparison uses semantic versioning via packaging library
- Feature flags only shown in messages when not yet gone (`is_gone` check)