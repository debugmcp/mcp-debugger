# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/direct_url_helpers.py
@source-hash: af6311b64543002b
@generated: 2026-02-09T17:58:36Z

**Purpose:** Utility module for converting pip's DirectUrl objects to and from various representations, specifically PEP 440 requirement strings and Link objects. Part of pip's internal infrastructure for handling direct URL dependencies.

**Key Functions:**

- `direct_url_as_pep440_direct_reference` (L9-29): Converts a DirectUrl object to a PEP 440 compliant requirement string with package name. Handles three info types:
  - VcsInfo: Creates format `name @ vcs+url@commit_id` 
  - ArchiveInfo: Creates format `name @ url` with optional hash fragment
  - DirInfo: Creates format `name @ url`
  - Appends subdirectory and hash fragments as URL fragments when present

- `direct_url_for_editable` (L32-36): Creates a DirectUrl for editable installations, converting local source directory path to file URL with DirInfo(editable=True)

- `direct_url_from_link` (L39-87): Converts pip Link objects to DirectUrl objects. Complex logic handles three link types:
  - VCS links (L42-71): Extracts VCS backend, determines commit ID from cache status or source checkout
  - Existing directories (L72-77): Creates DirectUrl with DirInfo for local directories  
  - Archive links (L78-87): Creates DirectUrl with ArchiveInfo, extracting hash information

**Dependencies:**
- `pip._internal.models.direct_url`: DirectUrl, VcsInfo, ArchiveInfo, DirInfo classes
- `pip._internal.models.link`: Link class for URL handling
- `pip._internal.utils.urls.path_to_url`: Path to URL conversion
- `pip._internal.vcs.vcs`: VCS backend registry and operations

**Architecture Notes:**
- Pure transformation functions with no side effects
- Relies on DirectUrl.validate() for input validation (L11)
- Uses assertion-based error handling for internal consistency
- VCS commit ID resolution differs based on wheel cache status (L49-62)
- Fragment-based URL parameter encoding for subdirectories and hashes