# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/locations/__init__.py
@source-hash: 51a031799fdff771
@generated: 2026-02-09T17:58:37Z

## Primary Purpose

Central location abstraction layer for pip installation paths, handling cross-platform and distribution-specific path resolution. Provides unified interface between legacy distutils and modern sysconfig backends with extensive compatibility shims for various Python distributions.

## Key Configuration & Detection

**Backend Selection (L46-67)**
- `_should_use_sysconfig()` (L46): Determines whether to use sysconfig (Python 3.10+) or distutils
- `_USE_SYSCONFIG` (L60): Global flag controlling backend selection
- Conditional `_distutils` import (L66) only when needed

**Distribution Detection Functions (L76-175)**
- `_looks_like_bpo_44860()` (L76): Detects Python bug affecting platlib paths
- `_looks_like_red_hat_patched_platlib_purelib()` (L90): Red Hat lib64 patch detection
- `_looks_like_red_hat_lib()` (L101): Red Hat distribution detection via install schemes
- `_looks_like_debian_scheme()` (L116): Debian-specific scheme detection
- `_looks_like_red_hat_scheme()` (L124): Red Hat prefix patching detection
- `_looks_like_slackware_scheme()` (L144): Slackware lib64 inconsistency detection
- `_looks_like_msys2_mingw_scheme()` (L160): MSYS2 MINGW path detection

## Core Path Resolution

**Main Scheme Function (L230-395)**
- `get_scheme()` (L230): Primary entry point returning `Scheme` object with all installation paths
- Extensive compatibility logic (L258-394) handling platform-specific edge cases
- Multiple skip conditions for known distribution quirks (PyPy, OSX framework, Linux distributions)
- Deprecation warnings for distutils config files (L377-387)

**Individual Path Functions**
- `get_bin_prefix()` (L397): Binary installation prefix with fallback logic
- `get_bin_user()` (L408): User binary directory (sysconfig-only)
- `get_purelib()` (L429): Pure Python library path with Debian special handling
- `get_platlib()` (L443): Platform-specific library path with Debian special handling

## Utility Functions

**Warning & Logging (L194-228)**
- `_warn_mismatched()` (L194): Cached warning for path mismatches
- `_warn_if_mismatch()` (L204): Conditional mismatch warning
- `_log_context()` (L212): Context logging for debugging

**Path Processing**
- `_fix_abiflags()` (L177): Generator fixing ABI flag issues in paths
- `_looks_like_deb_system_dist_packages()` (L412): Debian APT package detection

## Dependencies

- `pip._internal.models.scheme.Scheme`: Path scheme data structure
- `._sysconfig`, `._distutils`: Backend-specific implementations  
- `pip._internal.utils.compat.WINDOWS`: Platform detection
- Standard library: `sysconfig`, `pathlib`, `functools.lru_cache`

## Architecture Pattern

Facade pattern providing unified interface over two backends (sysconfig/distutils) with extensive platform-specific compatibility shims. Heavy use of caching (`@lru_cache`) for expensive detection functions. Graceful degradation with comprehensive logging for path mismatches between backends.