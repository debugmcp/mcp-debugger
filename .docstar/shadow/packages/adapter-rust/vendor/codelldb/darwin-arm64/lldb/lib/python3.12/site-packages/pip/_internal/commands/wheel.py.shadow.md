# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/wheel.py
@source-hash: 789461affaa834dc
@generated: 2026-02-09T17:58:33Z

## Primary Purpose
Implements the `pip wheel` command for building wheel archives from package requirements. Creates wheel distributions (.whl files) without installing them, enabling faster future installations by avoiding recompilation.

## Key Components

### WheelCommand (L24-182)
Main command class inheriting from `RequirementCommand`. Orchestrates the wheel building process including dependency resolution, requirement preparation, and wheel construction.

**Key Methods:**
- `add_options()` (L44-101): Configures CLI options including wheel directory (`--wheel-dir`), build isolation controls, PEP 517 settings, and verification options
- `run()` (L104-182): Core execution logic decorated with `@with_cleanup` for proper resource management

## Execution Flow (L104-182)

1. **Session Setup** (L105-110): Creates HTTP session and package finder, normalizes output directory
2. **Build Infrastructure** (L112-118): Initializes build tracker and temporary directory management
3. **Requirement Processing** (L120-121): Resolves requirements and validates legacy setup.py options
4. **Component Assembly** (L123-143): Creates wheel cache, requirement preparer, and dependency resolver
5. **Resolution** (L147): Resolves dependency graph with wheel support checking
6. **Build Classification** (L149-154): Separates existing wheels from packages needing builds
7. **Wheel Building** (L159-165): Invokes wheel builder with verification and build options
8. **Output Management** (L166-180): Copies successful builds to target directory, handles failures

## Key Dependencies

- `WheelCache` (L7): Manages wheel caching
- `RequirementCommand` (L9): Base class providing requirement processing
- `build`, `should_build_for_wheel_command` (L19): Core wheel building logic
- `get_build_tracker` (L12): Build process tracking
- `TempDirectory` (L18): Temporary directory management

## Configuration Options

**Build Control:**
- `--wheel-dir`: Output directory (defaults to current directory)
- `--no-verify`: Skip wheel validation
- `--no-build-isolation`: Disable build environment isolation
- PEP 517 controls (`--use-pep517`, `--no-use-pep517`)

**Package Selection:**
- Binary wheel preferences (`--no-binary`, `--only-binary`, `--prefer-binary`)
- Pre-release inclusion (`--pre`)
- Dependency handling (`--no-deps`)

## Error Handling

- Validates wheel directory accessibility (L109-110)
- Tracks build failures and raises `CommandError` if any builds fail (L179-180)
- Logs copy failures but continues processing (L173-178)

## Architectural Notes

- Uses context managers for resource cleanup (`@with_cleanup`, `enter_context`)
- Separates wheel copying from building for better error isolation
- Integrates with pip's broader requirement resolution and caching systems
- Maintains compatibility with both PEP 517 and legacy setup.py builds