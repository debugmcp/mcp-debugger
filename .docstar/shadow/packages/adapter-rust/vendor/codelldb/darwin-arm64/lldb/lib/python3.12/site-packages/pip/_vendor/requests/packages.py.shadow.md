# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/packages.py
@source-hash: fd94030894c9f123
@generated: 2026-02-09T17:58:55Z

## Purpose
Legacy compatibility shim that dynamically maps vendored packages to `requests.packages` namespace to maintain backwards compatibility for code expecting the old import paths.

## Core Functionality

**Package Re-mapping (L8-16)**: Dynamically imports `urllib3` and `idna` from `pip._vendor.*` and creates module aliases in `sys.modules` to make them accessible via `requests.packages.*`. Uses `locals()[package]` assignment (L10) and `__import__()` for dynamic loading.

**Module Identity Preservation (L13-16)**: Critical traversal of `sys.modules` ensures that submodules maintain their object identity - `requests.packages.urllib3.exceptions` points to the same object as `pip._vendor.urllib3.exceptions`.

**Chardet Handling (L18-25)**: Special case for `chardet` package with dual aliasing - creates both direct module mapping and normalized "chardet" naming in the `requests.packages` namespace.

## Key Dependencies
- `sys.modules`: Direct manipulation for module aliasing
- `.compat.chardet`: Conditional chardet import 
- Dynamic imports of `pip._vendor.urllib3` and `pip._vendor.idna`

## Architecture Notes
- **Backwards Compatibility Layer**: Exists solely to maintain compatibility with legacy code expecting `requests.packages.*` imports
- **Runtime Module Injection**: Modifies `sys.modules` at import time to create namespace aliases
- **Identity Preservation**: Ensures aliased modules reference the same objects as original vendored packages

## Critical Constraints
- Must preserve module object identities to maintain compatibility
- Handles conditional chardet availability gracefully
- Module name transformations must be consistent across package hierarchy