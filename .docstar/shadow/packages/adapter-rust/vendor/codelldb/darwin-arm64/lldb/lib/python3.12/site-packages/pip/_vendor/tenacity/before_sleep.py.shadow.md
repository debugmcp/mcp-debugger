# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/before_sleep.py
@source-hash: 626a6037d63b1c69
@generated: 2026-02-09T17:59:14Z

## Purpose and Responsibility
Implements "before sleep" callback strategies for the Tenacity retry library. These callbacks execute between retry attempts, typically for logging or other side effects before the delay period begins.

## Key Functions

### `before_sleep_nothing` (L27-28)
- **Purpose**: No-op strategy that performs no action between retry attempts
- **Signature**: `(retry_state: RetryCallState) -> None`
- **Use case**: Default/placeholder behavior when no pre-sleep action is needed

### `before_sleep_log` (L31-71)
- **Purpose**: Factory function that creates a logging strategy for retry attempts
- **Parameters**: 
  - `logger`: Logger instance for output
  - `log_level`: Logging level (e.g., INFO, DEBUG)
  - `exc_info`: Whether to include exception traceback in logs
- **Returns**: Configured callback function `log_it`
- **Key behavior**: 
  - Logs function name, sleep duration, and outcome (success/failure)
  - Handles both successful returns and raised exceptions
  - Uses `_utils.get_callback_name()` for function identification

### Inner `log_it` function (L38-70)
- **Validation**: Ensures `retry_state.outcome` and `next_action` are set before proceeding
- **Outcome handling**: 
  - Failed attempts: Logs exception type and message
  - Successful attempts: Logs return value
- **Message format**: "Retrying {function_name} in {sleep_seconds} seconds as it {verb} {value}"

## Dependencies
- `pip._vendor.tenacity._utils`: Provides `get_callback_name()` utility
- `pip._vendor.tenacity.RetryCallState`: Type hint for retry state object
- Standard `typing` and `logging` modules

## Architectural Pattern
Factory pattern implementation where `before_sleep_log` creates customized callback functions with closure over configuration parameters (logger, log_level, exc_info).