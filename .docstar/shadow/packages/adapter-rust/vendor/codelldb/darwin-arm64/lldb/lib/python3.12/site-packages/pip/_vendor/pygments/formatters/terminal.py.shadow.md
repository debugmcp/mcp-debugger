# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/terminal.py
@source-hash: 146faba634691663
@generated: 2026-02-09T17:57:26Z

## Primary Purpose
Terminal syntax highlighter formatter that outputs ANSI color sequences for code highlighting in text consoles. Part of Pygments library within pip's vendored dependencies.

## Key Components

### TERMINAL_COLORS Dictionary (L23-53)
Comprehensive token-to-color mapping supporting light/dark backgrounds. Maps Pygments token types (Keywords, Comments, Names, etc.) to tuples of (light_bg_color, dark_bg_color). Uses standard ANSI color names and special formatting markers like `_color_` for underlined text and `**` for bold.

### TerminalFormatter Class (L56-125)
Main formatter class inheriting from `Formatter`. Converts syntax-highlighted tokens to ANSI-colored terminal output.

**Key Methods:**
- `__init__(self, **options)` (L83-89): Configures background type, color scheme, and line numbering
- `_get_color(self, ttype)` (L98-106): Traverses token type hierarchy to find appropriate color, walking up parent types until match found
- `_write_lineno(self, outfile)` (L94-96): Outputs formatted line numbers when enabled
- `format_unencoded(self, tokensource, outfile)` (L108-125): Core formatting logic that processes token stream and writes ANSI-colored output

## Configuration Options
- `bg`: "light"/"dark" background setting (affects color selection)
- `colorscheme`: Custom color mapping dictionary (defaults to TERMINAL_COLORS)
- `linenos`: Boolean for line number display

## Key Dependencies
- `pip._vendor.pygments.formatter.Formatter`: Base formatter class
- `pip._vendor.pygments.console.ansiformat`: ANSI color sequence generator
- Various token types from `pip._vendor.pygments.token`

## Architecture Notes
- Color selection uses hierarchical token type lookup with parent fallback
- ANSI sequences terminated at newlines for proper paging compatibility
- Line numbers prefixed with newlines except for first line
- Handles multi-line values by splitting and processing line-by-line