# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/sphinxext.py
@source-hash: 5c81f107030c3366
@generated: 2026-02-09T17:58:55Z

**Purpose**: Sphinx extension for automatically generating documentation of Pygments lexers, formatters, and filters. Creates reStructuredText documentation from code inspection.

## Core Components

### PygmentsDoc Directive (L58-235)
Main Sphinx directive that generates automatic documentation. Inherits from `Directive` with:
- `has_content = False` - No content block expected
- `required_arguments = 1` - Takes one argument specifying doc type
- Supported arguments: 'lexers', 'formatters', 'filters', 'lexers_overview'

**Key Methods:**
- `run()` (L69-86): Entry point that dispatches to appropriate documentation method based on argument
- `document_lexers_overview()` (L88-146): Generates tabular overview of all lexers with names, extensions, aliases, and class references
- `document_lexers()` (L148-205): Creates detailed lexer documentation with module organization and example code blocks
- `document_formatters()` (L207-223): Documents formatter classes with their short names and file extensions
- `document_filters()` (L225-235): Documents filter classes with their names and descriptions

### Template Constants (L20-55)
reStructuredText templates for different documentation types:
- `MODULEDOC`: Module-level documentation template
- `LEXERDOC`: Individual lexer class documentation 
- `FMTERDOC`: Formatter class documentation
- `FILTERDOC`: Filter class documentation

## Key Dependencies
- `docutils`: Document processing (`nodes`, `ViewList`, `Directive`)
- `sphinx.util.nodes.nested_parse_with_titles`: RST parsing integration
- `pip._vendor.pygments`: Access to Pygments internals (`_mapping`, lexers, formatters, filters)

## Architecture Patterns
- **Template-based generation**: Uses string templates for consistent RST output
- **Dynamic import**: Imports modules at runtime to extract docstrings and metadata
- **File dependency tracking**: Records source files for Sphinx rebuild detection (L84-85)
- **Error handling**: Validates arguments and checks for missing docstrings

## Critical Features
- **Example file integration**: Automatically includes code examples from test files (L168-184)
- **Encoding handling**: Properly decodes bytes docstrings to UTF-8 (L165-166, L193-194, L217-218, L232-233)
- **RST escaping**: Escapes special characters in filenames and extensions (L110, L188, L221)
- **Sorted output**: Maintains consistent ordering for generated documentation

## Setup Function (L238-239)
Registers the `pygmentsdoc` directive with Sphinx application.