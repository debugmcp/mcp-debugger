# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/plugin.py
@source-hash: 8f5161df5d116d5d
@generated: 2026-02-09T17:58:55Z

## Purpose
Provides Pygments plugin discovery and loading infrastructure through Python entry points. Handles fallback across multiple package metadata systems (importlib.metadata → importlib_metadata → pkg_resources) for robust plugin detection across Python versions.

## Key Components

### Entry Point Constants (L41-44)
- `LEXER_ENTRY_POINT = 'pygments.lexers'` - Entry point group for syntax lexer plugins
- `FORMATTER_ENTRY_POINT = 'pygments.formatters'` - Entry point group for output formatter plugins  
- `STYLE_ENTRY_POINT = 'pygments.styles'` - Entry point group for syntax highlighting style plugins
- `FILTER_ENTRY_POINT = 'pygments.filters'` - Entry point group for text filter plugins

### Core Plugin Discovery

**`iter_entry_points(group_name)` (L47-68)**
- Primary plugin discovery engine with graceful degradation strategy
- First attempts `importlib.metadata.entry_points()` (Python 3.8+)
- Falls back to `importlib_metadata.entry_points()` (backport)
- Final fallback to `pip._vendor.pkg_resources.iter_entry_points()`
- Returns empty list if all systems unavailable
- Handles both new interface (`groups.select()` Python 3.10+) and legacy interface (`groups.get()`)

### Plugin Type Loaders

**`find_plugin_lexers()` (L71-73)**
- Discovers and yields loaded lexer classes
- Returns generator of instantiated lexer objects

**`find_plugin_formatters()` (L76-78)**  
- Discovers formatter plugins with names
- Returns generator of (name, formatter_class) tuples

**`find_plugin_styles()` (L81-83)**
- Discovers style plugins with names  
- Returns generator of (name, style_class) tuples

**`find_plugin_filters()` (L86-88)**
- Discovers filter plugins with names
- Returns generator of (name, filter_class) tuples

## Architecture Patterns

**Fallback Chain Strategy**: Implements robust plugin discovery by attempting multiple metadata systems in preference order, ensuring compatibility across Python versions and packaging environments.

**Generator-Based Loading**: All plugin finders return generators for lazy evaluation and memory efficiency when scanning potentially large plugin sets.

**Uniform Interface**: Provides consistent discovery API regardless of underlying metadata system, abstracting implementation differences.

## Dependencies
- `importlib.metadata` (Python 3.8+ standard library)
- `importlib_metadata` (backport package)  
- `pip._vendor.pkg_resources` (vendored pkg_resources fallback)

## Plugin Configuration Format
Supports standard Python entry point syntax in setup.py/pyproject.toml:
- Lexers: `[pygments.lexers] name = module:ClassName`
- Formatters: `[pygments.formatters] name = module:ClassName` (supports `/ext` extension syntax)
- Styles: `[pygments.styles] name = module:ClassName`  
- Filters: `[pygments.filters] name = module:ClassName`