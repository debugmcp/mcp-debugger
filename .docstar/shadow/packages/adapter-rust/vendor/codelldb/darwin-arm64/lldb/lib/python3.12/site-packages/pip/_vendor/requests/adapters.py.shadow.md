# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/adapters.py
@source-hash: 27b55e571281bdac
@generated: 2026-02-09T17:59:03Z

## Core Purpose
Transport adapter module for Requests library that provides HTTP/HTTPS connection management through urllib3. Implements the adapter pattern to abstract underlying connection handling while providing SSL/TLS verification, proxy support, and connection pooling.

## Key Classes

### BaseAdapter (L137-165)
Abstract base class defining the adapter interface:
- `send()` (L143-160): Abstract method for sending PreparedRequest objects
- `close()` (L162-164): Abstract cleanup method
- Must be subclassed to provide actual transport implementation

### HTTPAdapter (L167-719)
Main HTTP transport adapter built on urllib3:
- **Connection Management**: Uses PoolManager for connection pooling with configurable pool size and max connections
- **SSL/TLS Handling**: Supports certificate verification, custom CA bundles, client certificates
- **Proxy Support**: Handles HTTP and SOCKS proxies with authentication
- **Error Translation**: Maps urllib3 exceptions to Requests exceptions

#### Key Configuration (L202-222)
- `pool_connections`: Number of connection pools to cache (default: 10)
- `pool_maxsize`: Max connections per pool (default: 10)  
- `max_retries`: Retry configuration using urllib3.Retry (default: 0)
- `pool_block`: Whether to block when no free connections available

#### Critical Methods
- `init_poolmanager()` (L240-264): Creates urllib3.PoolManager with specified configuration
- `proxy_manager_for()` (L266-302): Returns cached or creates new ProxyManager for given proxy URL
- `get_connection_with_tls_context()` (L446-493): Primary method for obtaining connections with TLS settings
- `cert_verify()` (L304-357): Configures SSL certificate verification on connections
- `send()` (L613-719): Main request sending logic with comprehensive error handling
- `build_response()` (L359-394): Converts urllib3 response to Requests Response object

## Key Functions

### _urllib3_request_context() (L90-134)
Critical utility that builds connection parameters based on request, verification settings, and client certificates:
- Handles SSL context optimization using preloaded context when appropriate
- Configures certificate verification modes (CERT_REQUIRED vs CERT_NONE)
- Processes custom CA bundles and client certificate paths
- Returns tuple of (host_params, pool_kwargs) for connection establishment

## Dependencies & Integration
- **urllib3**: Core HTTP client library providing connection pooling and SSL handling
- **Requests ecosystem**: Integrates with models.Response, exceptions, auth, cookies modules
- **SSL context management**: Uses preloaded SSL context (_preloaded_ssl_context) for performance optimization

## Configuration Constants (L71-74)
- DEFAULT_POOLBLOCK = False
- DEFAULT_POOLSIZE = 10  
- DEFAULT_RETRIES = 0
- DEFAULT_POOL_TIMEOUT = None

## Error Handling Patterns
Comprehensive exception mapping in `send()` method (L681-718):
- Maps urllib3 exceptions to appropriate Requests exceptions
- Preserves original exception context
- Handles timeout, SSL, proxy, and connection errors distinctly

## Architectural Notes
- Uses adapter pattern allowing different transport backends
- Implements connection pooling for performance
- Provides extensive customization points through method overrides
- Maintains backward compatibility with deprecated `get_connection()` method