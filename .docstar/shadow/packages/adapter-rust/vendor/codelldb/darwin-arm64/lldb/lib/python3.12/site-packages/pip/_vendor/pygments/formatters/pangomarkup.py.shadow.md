# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/pangomarkup.py
@source-hash: e8b2a741cf32878f
@generated: 2026-02-09T17:57:25Z

## Purpose
Pygments formatter that converts syntax-highlighted tokens into Pango Markup format, which can be rendered to SVG. Part of the Pygments syntax highlighting library's formatter collection.

## Key Components

### Escape Function
- `escape_special_chars(text, table=_escape_table)` (L23-25): Escapes HTML special characters (&, <) using a translation table for Pango markup safety

### Main Formatter Class
- `PangoMarkupFormatter(Formatter)` (L28-83): Core formatter class
  - **Configuration** (L35-37): Named 'Pango Markup' with aliases ['pango', 'pangomarkup'], no specific file extensions
  - **Initialization** (L39-59): Builds style mapping from token types to Pango markup tags (span, b, i, u) based on color, bold, italic, underline properties
  - **Formatting** (L61-83): Main formatting logic that processes token stream, groups consecutive tokens of same type, and wraps output in `<tt>` tags

## Dependencies
- `pip._vendor.pygments.formatter.Formatter`: Base formatter class inheritance

## Architecture Patterns
- **Style Caching**: Pre-computes all style mappings in `__init__` for performance (L42-59)
- **Token Batching**: Accumulates consecutive tokens of same type to minimize markup overhead (L70-77)
- **Parent Fallback**: Traverses token type hierarchy to find applicable styles (L68-69)

## Output Format
Generates Pango markup with:
- Monospace wrapper: `<tt>...</tt>`
- Color spans: `<span fgcolor="#RRGGBB">`
- Text styling: `<b>`, `<i>`, `<u>` tags
- Properly nested and escaped content