# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distro/distro.py
@source-hash: 5ea6de7da7008434
@generated: 2026-02-09T17:59:01Z

## Linux Distribution Information Library

This module provides cross-platform Linux distribution identification and information retrieval capabilities. It serves as a replacement for the deprecated `platform.linux_distribution()` function, supporting multiple data sources and normalization techniques.

### Primary Components

**LinuxDistribution Class (L649-1357)**
- Core class encapsulating all distribution detection logic
- Supports multiple information sources: os-release files, lsb_release command, distro release files, uname output, and AIX oslevel
- Uses cached properties for performance optimization
- Handles file path resolution with configurable root directories
- Implements comprehensive parsing for various distribution file formats

**Module-Level API Functions (L160-626)**
- Convenience functions that delegate to singleton `_distro` instance (L1359)
- Primary functions: `id()`, `name()`, `version()`, `version_parts()`, `codename()`, `like()`, `info()`
- Data source specific functions: `os_release_info()`, `lsb_release_info()`, `distro_release_info()`, `uname_info()`
- Attribute accessor functions with consistent naming pattern

### Data Sources & Parsing

**OS-Release File Processing (L1090-1151)**
- Parses `/etc/os-release` and `/usr/lib/os-release` files
- Uses shell-like lexical analysis with `shlex` module
- Extracts codename from version strings using regex patterns
- Handles special Ubuntu and version_codename fields

**LSB Release Command Integration (L1153-1194)**
- Executes `lsb_release -a` when available
- Parses colon-separated key-value output format
- Gracefully handles command availability and execution errors

**Distribution Release File Handling (L1252-1356)**
- Searches `/etc` directory for `*-release` and `*-version` files
- Uses reversed regex pattern matching for flexible content parsing
- Implements fallback file search with predefined basename list
- Special handling for CloudLinux identification

**System Command Integration**
- uname parsing (L1196-1245): Extracts OS name and release information
- AIX oslevel support (L1208-1216): Handles AIX-specific version detection
- Debian version file support (L1218-1226): Reads `/etc/debian_version`

### Normalization & Constants

**ID Normalization Tables (L86-115)**
- `NORMALIZED_OS_ID`: Maps os-release IDs to canonical values
- `NORMALIZED_LSB_ID`: Maps lsb_release distributor IDs  
- `NORMALIZED_DISTRO_ID`: Maps release file derived IDs
- Ensures consistent identification across data source variations

**File Pattern Definitions (L118-157)**
- Regex patterns for release file content and basename matching
- Predefined lists of release file basenames to search and ignore
- Environment-configurable directory paths

### Key Algorithms

**ID Resolution Priority (L833-859)**
1. os-release "ID" attribute
2. lsb_release "Distributor ID" 
3. Distro release file basename
4. uname output (fallback)
Each normalized through respective translation tables.

**Version Resolution Strategy (L884-924)**
- Supports "best" mode: selects version with highest precision (most dots)
- Default mode: uses first available non-empty version
- Special handling for AIX (oslevel priority) and Debian-like systems
- Pretty mode appends codename in parentheses

### Type Definitions

**VersionDict & InfoDict (L61-73)**
- TypedDict definitions for structured return values
- Ensures consistent API contract for version components and distribution info
- Backwards compatible with Python 3.7 through dict fallback

### Command Line Interface (L1362-1403)**
- Supports JSON and human-readable output formats
- Configurable root directory for testing/analysis
- Uses logging framework for structured output

### Dependencies
- Standard library only: `os`, `re`, `subprocess`, `shlex`, `json`, `argparse`, `logging`
- Optional typing imports with fallbacks for older Python versions
- No external package dependencies

### Error Handling
- Graceful degradation when data sources unavailable
- Empty string returns for missing information
- Exception handling for file I/O and subprocess execution
- Validation for parameter combinations (root_dir conflicts)