# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/request.py
@source-hash: 0b4394b76b5c53a2
@generated: 2026-02-09T17:57:27Z

## Purpose
HTTP request utility module providing header construction and file positioning utilities for urllib3. Core functionality for building standardized HTTP headers and managing file body positioning during request redirects/retries.

## Key Components

### Header Construction
- **`make_headers()` (L20-89)**: Primary function for generating HTTP request headers with common patterns
  - Accepts boolean/list/string for `accept_encoding` with smart conversion logic
  - Handles basic auth (Authorization header) and proxy auth (Proxy-Authorization header) with base64 encoding
  - Supports keep-alive connections, user-agent, and cache control headers
  - Returns lowercase header names dictionary

### File Position Management
- **`set_file_position()` (L92-107)**: Positions file-like objects for subsequent operations
  - If position provided, calls `rewind_body()` to move to that position
  - Otherwise attempts to record current position using `tell()` method
  - Returns `_FAILEDTELL` sentinel on IO errors to differentiate from None

- **`rewind_body()` (L110-137)**: Rewinds file-like objects to specified positions
  - Used primarily for request redirects and retries when body needs to be re-read
  - Validates body_pos is integer type before seeking
  - Raises `UnrewindableBodyError` on seek failures or `_FAILEDTELL` sentinel
  - Raises `ValueError` for invalid position types

### Constants & Configuration
- **`SKIP_HEADER` (L12)**: Sentinel string "@@@SKIP_HEADER@@@" for header skipping
- **`SKIPPABLE_HEADERS` (L13)**: Frozenset of headers that can be automatically skipped
- **`ACCEPT_ENCODING` (L15)**: Default "gzip,deflate" encoding value
- **`_FAILEDTELL` (L17)**: Sentinel object marking failed tell() operations

## Dependencies
- `base64.b64encode`: For basic auth header encoding
- `..exceptions.UnrewindableBodyError`: Custom exception for body rewind failures  
- `..packages.six`: Compatibility utilities (`b()` for bytes, `integer_types`)

## Architecture Notes
- Header names consistently lowercased for standardization
- File position management uses sentinel patterns to distinguish between None and failed operations
- Basic auth implementation follows RFC standard with base64 encoding
- Error handling separates IO errors from logical errors with specific exception types