# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/utils.py
@source-hash: 2fbf6f9c56f32774
@generated: 2026-02-09T17:59:22Z

## Primary Purpose
Comprehensive utility module for the Requests HTTP library providing HTTP-specific utility functions, encoding detection, proxy handling, URL manipulation, header parsing, and authentication extraction.

## Key Components

### Constants and Configuration (L61-71)
- `NETRC_FILES` (L61): Defines .netrc and _netrc file patterns for authentication
- `DEFAULT_CA_BUNDLE_PATH` (L63): Path to default CA certificate bundle
- `DEFAULT_PORTS` (L65): Standard HTTP/HTTPS port mappings
- `DEFAULT_ACCEPT_ENCODING` (L68-70): Constructed from urllib3 headers
- `UNRESERVED_SET` (L631-633): RFC 3986 unreserved URI characters

### Platform-Specific Proxy Handling (L73-124)
- `proxy_bypass_registry(host)` (L76-112): Windows-specific proxy bypass using registry
- `proxy_bypass(host)` (L114-123): Cross-platform proxy bypass dispatcher

### Data Structure Utilities (L126-372)
- `dict_to_sequence(d)` (L126-132): Converts dict-like objects to sequences
- `super_len(o)` (L135-201): Intelligent length calculation for various object types including files, strings, and streams
- `from_key_val_list(value)` (L318-342): Converts sequences to OrderedDict
- `to_key_val_list(value)` (L345-371): Converts dict-like objects to list of tuples

### File and Archive Handling (L204-316)
- `get_netrc_auth(url, raise_errors=False)` (L204-259): Extracts authentication from .netrc files
- `guess_filename(obj)` (L261-265): Attempts to determine filename from object attributes
- `extract_zipped_paths(path)` (L268-302): Extracts files from zip archives to temp directory
- `atomic_open(filename)` (L305-315): Context manager for atomic file writing

### HTTP Header Processing (L375-486)
- `parse_list_header(value)` (L375-403): RFC 2068 compliant list header parsing
- `parse_dict_header(value)` (L407-438): Converts header strings to dictionaries
- `unquote_header_value(value, is_filename=False)` (L442-464): Unquotes HTTP header values
- `dict_from_cookiejar(cj)` (L467-475): Extracts cookies to dictionary
- `add_dict_to_cookiejar(cj, cookie_dict)` (L478-486): Adds dictionary cookies to jar

### Content Encoding Detection (L489-628)
- `get_encodings_from_content(content)` (L489-511): **DEPRECATED** - Regex-based charset detection from HTML/XML
- `_parse_content_type_header(header)` (L514-536): Parses Content-Type header into type and parameters
- `get_encoding_from_headers(headers)` (L539-562): Extracts encoding from HTTP headers with fallbacks
- `stream_decode_response_unicode(iterator, r)` (L564-578): Generator for streaming unicode decode
- `get_unicode_from_response(r)` (L591-627): **DEPRECATED** - Legacy unicode extraction

### URL Processing (L630-1094)
- `unquote_unreserved(uri)` (L636-657): Un-escapes only unreserved percent-encoded characters
- `requote_uri(uri)` (L660-679): Normalizes URI quoting
- `prepend_scheme_if_needed(url, new_scheme)` (L989-1015): Adds scheme to URLs lacking one
- `get_auth_from_url(url)` (L1018-1031): Extracts username/password from URL
- `urldefragauth(url)` (L1064-1078): Removes fragment and auth components from URL

### Network Utilities (L682-823)
- `address_in_network(ip, net)` (L682-694): CIDR subnet membership testing
- `dotted_netmask(mask)` (L697-705): Converts CIDR mask to dotted decimal
- `is_ipv4_address(string_ip)` (L708-716): IPv4 validation
- `is_valid_cidr(string_network)` (L719-740): CIDR format validation

### Proxy Resolution (L743-888)
- `set_environ(env_name, value)` (L743-762): Context manager for temporary environment variables
- `should_bypass_proxies(url, no_proxy)` (L765-823): Determines if URL should bypass proxy
- `get_environ_proxies(url, no_proxy=None)` (L826-835): Gets environment-based proxy configuration
- `select_proxy(url, proxies)` (L838-861): Selects appropriate proxy for URL
- `resolve_proxies(request, proxies, trust_env=True)` (L864-888): Resolves final proxy configuration

### Default Values (L891-949)
- `default_user_agent(name="python-requests")` (L891-897): Generates default User-Agent string
- `default_headers()` (L900-911): Creates default request headers
- `parse_header_links(value)` (L914-948): Parses RFC-compliant Link headers

### JSON Utilities (L951-986)
- `_null`, `_null2`, `_null3` (L952-954): Pre-computed null byte patterns
- `guess_json_utf(data)` (L957-986): UTF encoding detection for JSON data via BOM and null byte analysis

### Request Processing (L1034-1096)
- `check_header_validity(header)` (L1034-1042): Validates HTTP header format
- `_validate_header_part(header, header_part, header_validator_index)` (L1045-1061): Internal header validation
- `rewind_body(prepared_request)` (L1081-1096): Resets request body position for redirects

## Key Dependencies
- `urllib3.util`: URL parsing and header utilities
- `compat`: Cross-platform compatibility abstractions
- `_internal_utils`: Header validation patterns
- Standard library: `socket`, `struct`, `re`, `os`, `tempfile`, `codecs`

## Critical Design Patterns
- Extensive use of duck typing for object length detection
- Platform-specific proxy handling with Windows registry integration  
- Defensive programming with graceful fallbacks for encoding detection
- Context managers for atomic operations and environment isolation