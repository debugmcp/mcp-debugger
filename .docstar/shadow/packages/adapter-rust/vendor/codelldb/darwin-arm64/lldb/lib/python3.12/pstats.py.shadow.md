# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/pstats.py
@source-hash: 476a7f4298d02d74
@generated: 2026-02-09T18:07:22Z

## Purpose
Python's built-in profiling statistics module for analyzing performance data generated by the `profile` or `cProfile` modules. Provides tools for loading, combining, filtering, sorting, and displaying profiling results in various formats.

## Key Classes

### SortKey (L36-55)
String enum defining sort criteria for profiling statistics. Uses custom `__new__` method to support multiple aliases per sort key (e.g., 'calls'/'ncalls', 'time'/'tottime'). Primary sort options include CALLS, CUMULATIVE, FILENAME, LINE, NAME, TIME.

### FunctionProfile (L58-66)
Dataclass representing performance metrics for a single function:
- `ncalls`: call count as string (may include primitive/total format)
- `tottime`/`cumtime`: time spent in function alone vs including subcalls
- `percall_*`: per-call timing averages
- `file_name`, `line_number`: location information

### StatsProfile (L68-72)
Container for aggregated profiling data with total execution time and dictionary mapping function names to FunctionProfile instances.

### Stats (L74-433)
Main class for profiling report generation. Core functionality:
- **Loading**: `load_stats()` (L137-157) handles files, Profile objects, or marshal data
- **Combining**: `add()` (L169-193) merges multiple profiling runs
- **Sorting**: `sort_stats()` (L235-272) with flexible key specification
- **Filtering**: `strip_dirs()` (L279-306) removes path prefixes
- **Output**: Multiple print methods for different report formats

Key state includes:
- `stats`: dict mapping (filename, line, funcname) tuples to (cc, nc, tt, ct, callers)
- `fcn_list`: ordered list of functions after sorting
- `total_tt`, `total_calls`: aggregate statistics

### TupleComp (L520-539)
Generic tuple comparison class for multi-field sorting. Takes list of (index, direction) pairs to define sort hierarchy.

### ProfileBrowser (L618-762)
Interactive command-line interface for exploring profiling data. Extends `cmd.Cmd` with commands for loading, sorting, filtering, and displaying statistics.

## Key Functions

### Utility Functions (L545-605)
- `func_strip_path()` (L545): removes directory from function identifier
- `func_std_string()` (L552): formats function identifier for display
- `add_func_stats()`/`add_callers()` (L569-591): combine statistics from multiple runs
- `f8()` (L604): formats float to 8.3 precision for reports

## Data Structures
Function identifiers are 3-tuples: `(filename, line_number, function_name)`
Statistics tuples: `(cc, nc, tt, ct, callers)` where:
- `cc`: primitive call count
- `nc`: total call count  
- `tt`: total time in function
- `ct`: cumulative time including subcalls
- `callers`: dict of calling functions

## Architecture Patterns
- Fluent interface: methods return `self` for chaining (L103-105)
- Lazy computation: sorting/filtering only when needed
- Multiple input formats: supports file paths, Profile objects, raw data
- Extensible sorting: dict-based sort key resolution with abbreviation support