# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/progress_bar.py
@source-hash: 2f88f0f04e906ffc
@generated: 2026-02-09T17:59:16Z

**Primary Purpose**: Implements a customizable progress bar component for the Rich terminal formatting library, supporting both standard progress visualization and pulsing animations for indeterminate progress.

**Core Class**: `ProgressBar` (L18-207) extends `JupyterMixin` to provide terminal and Jupyter notebook compatible progress visualization.

**Key Configuration Parameters** (L33-53):
- `total`: Maximum value (None triggers pulse mode)
- `completed`: Current progress value
- `width`: Bar width (None uses available space)
- `pulse`: Force pulse animation
- Style parameters: `style`, `complete_style`, `finished_style`, `pulse_style`
- `animation_time`: Override system time for animations

**Core Methods**:

- `percentage_completed` property (L60-67): Calculates completion percentage, clamped to 0-100%
- `update()` (L116-124): Updates progress values
- `_get_pulse_segments()` (L69-114): LRU-cached pulse animation generator using cosine interpolation for smooth color blending
- `_render_pulse()` (L126-154): Renders animated pulse effect with time-based offset
- `__rich_console__()` (L156-198): Main rendering method implementing Rich protocol

**Rendering Logic**:
- **Pulse Mode** (L161-164): Uses animated segments with time-based scrolling
- **Progress Mode** (L166-198): Renders completed/incomplete sections with half-character precision using Unicode block characters (━, ╸, ╺)

**Animation System**:
- Uses `PULSE_SIZE = 20` character animation cycle
- Time-based offset calculation: `int(-current_time * 15) % segment_count` (L152)
- Color blending between fore/back colors using cosine fade function

**Dependencies**:
- Rich core: `Console`, `Segment`, `Style`, `Color`
- Color system: Supports standard/8-bit/truecolor with graceful fallbacks
- Time: `monotonic()` for smooth animations

**Architectural Patterns**:
- Rich protocol implementation (`__rich_console__`, `__rich_measure__`)
- LRU caching for expensive pulse segment generation
- ASCII fallback mode support
- Performance optimizations with local variable binding in hot paths