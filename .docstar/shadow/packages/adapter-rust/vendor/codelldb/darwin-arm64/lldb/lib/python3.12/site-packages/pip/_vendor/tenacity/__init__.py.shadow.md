# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/__init__.py
@source-hash: 643e19bd969b7d95
@generated: 2026-02-09T17:59:24Z

This is the main entry point for the tenacity library, a generic retry decorator for Python functions. The module provides a comprehensive framework for implementing retry logic with configurable strategies for when to retry, how long to wait between attempts, and when to stop.

**Core Architecture**

The module defines three key abstractions:
- **BaseRetrying (L191-366)**: Abstract base class for retry controllers implementing the core retry logic and state management
- **Retrying (L368-394)**: Concrete synchronous retry controller that executes functions with retry logic
- **AsyncRetrying (L548)**: Asynchronous retry controller imported from separate module

**State Management Classes**

- **RetryCallState (L425-495)**: Tracks state for a single retry operation including attempt count, timing, outcomes, and function context
- **Future (L402-423)**: Wrapper around concurrent.futures.Future that tracks attempt numbers and provides failed/success status
- **AttemptManager (L167-189)**: Context manager for handling individual retry attempts with exception capture

**Action Control**

- **TryAgain (L101-102)**: Exception that explicitly triggers a retry when raised
- **RetryError (L151-165)**: Exception raised when retry limits are exceeded, containing the last attempt's result
- **DoAttempt/DoSleep (L108-113)**: Control flow markers for retry state machine
- **BaseAction/RetryAction (L116-142)**: Represent actions the retry system should take

**Strategy Integration**

The module imports comprehensive strategy implementations:
- Retry conditions (L31-44): when to retry based on exceptions or results
- Wait strategies (L58-68): timing between retry attempts (exponential, fixed, random, etc.)
- Stop conditions (L51-56): when to give up (attempts, time limits, events)
- Lifecycle hooks (L71-80): callbacks before/after attempts and sleep periods

**Main Interface**

- **retry() function (L518-545)**: Primary decorator that automatically selects appropriate retry controller (sync/async/tornado) and wraps functions
- **wraps() method (L283-299)**: Creates wrapped functions with retry.retry_with() method for parameter modification

**Key Implementation Details**

- Thread-local statistics tracking via threading.local() (L213, L277-281)
- Tornado integration explicitly disabled for pip compatibility (L82-87)
- Version-aware Future generics handling for Python 3.9+ (L396-399)
- Comprehensive repr/str implementations for debugging
- Copy semantics for retry configuration modification (L217-242)

**Dependencies**

- Standard library: functools, threading, time, sys, warnings, abc, concurrent.futures, inspect
- Internal modules: retry, stop, wait, nap, before, after, before_sleep strategy implementations
- Conditional: AsyncRetrying from _asyncio module