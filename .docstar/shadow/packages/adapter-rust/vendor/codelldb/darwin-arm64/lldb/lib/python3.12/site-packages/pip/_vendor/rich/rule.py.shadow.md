# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/rule.py
@source-hash: d1f35a4bf68445ad
@generated: 2026-02-09T17:59:15Z

**Primary Purpose**: Implements a horizontal rule (line) renderable for the Rich console library, capable of drawing decorative lines with optional titles across the terminal width.

**Key Classes and Functions**:

- `Rule` (L12-114): Main renderable class that draws horizontal rules
  - `__init__` (L23-44): Initializes rule with title, characters, style, alignment; validates character width and alignment values
  - `__rich_console__` (L49-103): Core rendering method that handles ASCII fallback, title positioning, and width calculations
  - `_rule_line` (L105-109): Helper method to create simple rules without titles
  - `__rich_measure__` (L111-114): Returns fixed measurement of (1,1) for layout calculations

**Key Dependencies**:
- `.align.AlignMethod`: Type for alignment options
- `.cells`: Cell width calculations (`cell_len`, `set_cell_size`)
- `.console`: Console and rendering infrastructure
- `.text.Text`: Rich text handling with styling
- `.jupyter.JupyterMixin`: Jupyter notebook compatibility

**Architecture and Patterns**:
- Follows Rich's renderable protocol via `__rich_console__` and `__rich_measure__`
- Uses cell-aware text measurement for proper Unicode/emoji handling
- Implements three alignment modes: left, center, right with different spacing logic
- ASCII fallback mechanism for compatibility (L54-58)

**Key Algorithms**:
- Center alignment (L80-90): Calculates side widths, creates left/right rule segments around title
- Left/right alignment (L91-100): Positions title and fills remaining space with rule characters
- Width management: Uses truncation and overflow handling to fit content within terminal width

**Critical Invariants**:
- Characters parameter must have cell width â‰¥ 1 (validated L32-35)
- Alignment must be "left", "center", or "right" (validated L36-39)
- Final rule text is always set to exact terminal width via `set_cell_size` (L102, L108)
- Title text has newlines replaced with spaces and tabs expanded (L70-71)

**Demo Script** (L117-130): Standalone execution with command-line argument support for testing