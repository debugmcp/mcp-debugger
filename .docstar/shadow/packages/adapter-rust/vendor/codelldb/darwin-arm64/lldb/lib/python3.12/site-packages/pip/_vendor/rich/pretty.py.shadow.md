# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/pretty.py
@source-hash: e682073ff0865a71
@generated: 2026-02-09T17:59:22Z

## Primary Purpose

Rich library's pretty printing module for generating visually appealing, syntax-highlighted representations of Python objects with configurable formatting options like indentation, line wrapping, and depth limiting.

## Key Classes & Functions

### Pretty (L244-346)
Main renderable class that formats objects for Rich console output. Configurable with:
- `highlighter`: Syntax highlighting (defaults to ReprHighlighter)
- `max_length`, `max_string`, `max_depth`: Content limitation controls  
- `indent_guides`: Visual indentation markers
- `expand_all`: Force expansion of all containers
- `__rich_console__()` (L295): Renders pretty string via `pretty_repr()` and applies highlighting
- `__rich_measure__()` (L330): Calculates text width for layout

### Node (L389-472) 
Tree structure representing object hierarchy for pretty printing:
- `key_repr`, `value_repr`: String representations of keys/values
- `open_brace`, `close_brace`, `empty`: Container formatting braces
- `children`: Child nodes for nested structures
- `iter_tokens()` (L405): Generates string tokens for rendering
- `render()` (L448): Converts tree to formatted string with line expansion logic

### _Line (L474-540)
Individual line in pretty-printed output with expansion capabilities:
- `expand()` (L500): Converts single line to multiple indented lines
- `check_length()` (L492): Validates line fits within width constraints

## Core Functions

### traverse() (L561-854)
Recursively builds Node tree from any Python object:
- Handles special cases: dataclasses, namedtuples, attrs objects, containers
- Detects cycles via `visited_ids` tracking (L598-600)
- Supports `__rich_repr__()` protocol for custom representations
- Implements depth limiting and content truncation

### pretty_repr() (L857-894)
Main public API - converts object to formatted string representation using traverse() + Node.render()

### install() (L164-242) 
Installs pretty printing as default REPL display hook:
- Standard Python: replaces `sys.displayhook` 
- IPython/Jupyter: installs custom formatter via `RichFormatter` class (L221)

### pprint() (L897-931)
Convenience function for direct pretty printing to console

## Utility Functions

- `_is_attr_object()` (L58), `_get_attr_fields()` (L63): attrs library integration
- `_is_dataclass_repr()` (L68): Detects default dataclass repr
- `_is_namedtuple()` (L542): Namedtuple detection with safety checks
- `_safe_isinstance()` (L154): Exception-safe isinstance check
- `is_expandable()` (L379): Determines if object can be expanded

## Container Support

`_BRACES` dictionary (L360-374) defines formatting for built-in containers:
- `dict`, `list`, `tuple`, `set`, `frozenset`
- `collections.defaultdict`, `collections.deque`, `collections.Counter`
- `array.array`, `os._Environ`, `types.MappingProxyType`

## Dependencies

- Rich core: `Console`, `Text`, `Measurement`, `ReprHighlighter`
- Optional: `attr` module for attrs object support (L30-35)
- Standard library: `dataclasses`, `collections`, `inspect`

## Architecture Notes

- Uses visitor pattern via `_traverse()` inner function for object tree building
- Implements lazy expansion - lines only expand when they exceed width limits
- Cycle detection prevents infinite recursion on self-referential objects
- Graceful error handling for repr failures and missing attributes