# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/wheel.py
@source-hash: 155402bdef2ef8bd
@generated: 2026-02-09T17:59:01Z

**Primary Purpose:** Complete Python wheel (PEP 427) implementation for building, installing, mounting, verifying, and updating wheel files. This module provides the core functionality for distlib's wheel handling capabilities.

**Key Classes:**

**Mounter (L135-170):** Meta path finder and loader for dynamic library extensions from impure wheels. Manages `impure_wheels` mapping wheel paths to extensions and `libs` mapping module names to file paths. Key methods:
- `add()` (L141): Register wheel with extensions
- `find_module()` (L151): Locate extension modules 
- `load_module()` (L158): Load dynamic extensions using `_load_dynamic()`

**Wheel (L175-990):** Core wheel manipulation class. Handles wheel filename parsing, metadata extraction, building, installation, and verification.

**Properties:**
- `filename` (L225-239): Generates wheel filename from components
- `metadata` (L254-283): Cached property loading wheel metadata from dist-info
- `info` (L295-299): Cached wheel-specific metadata from WHEEL file
- `tags` (L247-251): Generator yielding all (pyver, abi, arch) combinations

**Key Methods:**
- `build()` (L372-487): Creates wheel from directory structure, handles pure/platlib detection, processes scripts with shebang normalization
- `install()` (L505-743): Extracts wheel contents with integrity verification, script generation from entry points, and bytecode compilation
- `verify()` (L834-888): Validates wheel integrity using RECORD file checksums
- `mount()/unmount()` (L801-832): Adds/removes wheel from sys.path for direct import
- `update()` (L890-990): Modifies wheel contents via callback function

**Important Global Variables:**
- Platform detection constants: `IMP_PREFIX` (L37-44), `PYVER` (L49), `ABI` (L54-77), `ARCH` (L52)
- Filename parsing regexes: `FILENAME_RE` (L80), `NAME_VERSION_RE` (L91)
- Shebang handling: `SHEBANG_RE` (L98), processing constants (L100-101)
- `COMPATIBLE_TAGS` (L1084): Pre-computed set of compatible platform tags

**Key Functions:**
- `compatible_tags()` (L1004-1081): Generates all compatible (python, abi, arch) tags for current platform, including manylinux variants
- `is_compatible()` (L1089-1098): Checks if wheel is compatible with platform
- `_get_glibc_version()` (L993-1001): Detects glibc version for manylinux compatibility

**Dependencies:**
- Internal: `.metadata.Metadata`, `.database.InstalledDistribution`, `.util.FileOperator`
- External: `zipfile`, `hashlib`, `tempfile` for wheel file operations
- Email parsing for metadata, JSON for modern metadata formats

**Architectural Patterns:**
- Extensive use of `cached_property` for expensive metadata operations
- Context managers for safe file/zip handling
- Platform-specific logic concentrated in initialization and compatibility functions
- Separation of wheel building vs installation concerns
- Support for both legacy and modern wheel metadata formats

**Critical Constraints:**
- Wheel filenames must match PEP 427 format exactly
- RECORD file integrity is mandatory for installation/verification 
- Shebang normalization required for cross-platform script compatibility
- Extension mounting requires compatible platform tags