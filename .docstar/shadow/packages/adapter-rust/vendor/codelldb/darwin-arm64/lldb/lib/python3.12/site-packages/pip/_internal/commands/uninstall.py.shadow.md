# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/uninstall.py
@source-hash: ee9391ede9caefa8
@generated: 2026-02-09T17:58:32Z

## Purpose
Implements pip's `uninstall` command for removing installed Python packages. Handles both individual package names and requirements files, with safety checks for externally managed environments and pip self-modification.

## Key Components

### UninstallCommand Class (L26-114)
Main command class inheriting from `Command` and `SessionCommandMixin`. Provides package uninstallation functionality with comprehensive validation and safety measures.

**Key Methods:**
- `add_options()` (L41-63): Configures command-line options including `-r/--requirement` for requirements files, `-y/--yes` for auto-confirmation, and externally managed environment overrides
- `run()` (L65-114): Core execution logic that processes arguments, validates requirements, and performs uninstallation

## Processing Flow

### Requirement Collection (L68-96)
1. **Direct arguments** (L69-82): Converts command-line package names to InstallRequirement objects using `install_req_from_line()`
2. **Requirements files** (L83-91): Parses `-r` specified files using `parse_requirements()` and converts to InstallRequirement objects
3. **Canonicalization**: All package names normalized using `canonicalize_name()` to handle case variations
4. **Validation**: Ensures at least one valid requirement provided, raises InstallationError if empty

### Safety Checks (L98-103)
- **Externally managed environments** (L98-99): Blocks uninstallation unless `--override-externally-managed` flag provided
- **Pip self-protection** (L101-103): Prevents pip from uninstalling itself on Windows systems

### Uninstallation Execution (L105-114)
- Iterates through validated requirements calling `req.uninstall()`
- Respects `--yes` flag for auto-confirmation and verbosity settings
- Commits uninstallation pathsets if successful
- Issues root user warnings when appropriate

## Dependencies
- **Internal pip modules**: CLI framework, requirement parsing, session management, utility functions
- **External**: packaging utils for name canonicalization
- **Core**: logging, optparse for command-line handling

## Design Patterns
- **Command pattern**: Extends base Command class with specific uninstall behavior
- **Mixin inheritance**: Uses SessionCommandMixin for HTTP session capabilities
- **Validation pipeline**: Multi-stage requirement collection and validation before execution
- **Safety-first approach**: Multiple protective checks before performing destructive operations

## Architectural Notes
- Deduplicates packages using canonicalized names as dictionary keys
- Maintains requirement order while preventing duplicates
- Separates validation phase from execution phase for better error handling
- Integrates with pip's broader command infrastructure and safety systems