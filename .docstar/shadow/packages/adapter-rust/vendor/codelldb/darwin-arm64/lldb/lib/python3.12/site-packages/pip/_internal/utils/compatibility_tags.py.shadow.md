# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/compatibility_tags.py
@source-hash: c9d8a7f101bc047a
@generated: 2026-02-09T17:58:42Z

## Primary Purpose
Generates and manipulates PEP 425 compatibility tags for pip package installation. Handles platform-specific tag expansion and Python version compatibility for wheel package resolution.

## Key Components

### Core Functions

**`get_supported(version, platforms, impl, abis)` (L112-165)**
- Main entry point that returns all supported Tag objects for given constraints
- Generates CPython tags (if impl is "cp") or generic interpreter tags
- Always adds compatible tags for broader compatibility
- Returns comprehensive list of supported package tags

**`version_info_to_nodot(version_info)` (L21-23)**
- Converts version tuple to dot-less string format (e.g., (3, 8) â†’ "38")
- Uses only first two version numbers for compatibility

### Platform Handling

**`_get_custom_platforms(arch)` (L67-75)**
- Dispatcher for platform-specific tag expansion
- Routes macOS and manylinux platforms to specialized handlers
- Returns list of compatible platform tags

**`_mac_platforms(arch)` (L26-43)**
- Parses macOS architecture strings using regex pattern `_osx_arch_pat` (L18)
- Extracts version info and delegates to packaging.tags.mac_platforms
- Handles custom prefixes for backward compatibility
- Falls back to original arch if pattern doesn't match

**`_custom_manylinux_platforms(arch)` (L46-64)**
- Implements manylinux compatibility hierarchy per PEPs 571/599
- manylinux2014 includes manylinux2010 and manylinux1 for i686/x86_64
- manylinux2010 includes manylinux1 compatibility
- Maintains backward compatibility for ncurses-dependent wheels

**`_expand_allowed_platforms(platforms)` (L78-92)**
- Expands platform list with all compatible variants
- Deduplicates using set tracking
- Returns None if input platforms is empty/None

### Helper Functions

**`_get_python_version(version)` (L95-99)**
- Parses version string into PythonVersion tuple
- Handles single digit (e.g., "3") and multi-digit (e.g., "38") formats

**`_get_custom_interpreter(implementation, version)` (L102-109)**
- Constructs interpreter string from implementation name and version
- Uses system defaults if parameters are None
- Returns formatted string like "cp38" or "pp37"

## Dependencies
- `pip._vendor.packaging.tags`: Core tag generation functionality
- `re`: Regex for macOS architecture parsing
- Standard typing annotations for type safety

## Architecture Notes
- Uses composition pattern, delegating to packaging.tags for core functionality
- Implements platform compatibility matrices following Python PEPs
- Maintains backward compatibility through legacy prefix support
- Deduplication ensures efficient tag lists without redundancy