# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/scripts.py
@source-hash: f3f80ff49effb653
@generated: 2026-02-09T17:58:54Z

## Purpose
Script generation and installation utility for Python packages. Handles creating executable scripts from callable specifications or copying existing script files, with cross-platform launcher support and proper shebang generation.

## Key Components

### Core Class
- **ScriptMaker (L91-466)**: Main class responsible for script creation and installation
  - Manages source/target directories and file operations
  - Handles platform-specific launcher generation (Windows .exe wrappers)
  - Supports dry-run mode and file clobbering controls

### Script Generation Methods
- **make() (L438-455)**: Public API to create single script from specification or file
- **make_multiple() (L457-466)**: Batch processing for multiple script specifications
- **_make_script() (L343-357)**: Creates script from callable entry point specification
- **_copy_script() (L359-409)**: Copies existing script file with optional shebang adjustment

### Shebang and Executable Handling
- **_get_shebang() (L185-255)**: Generates appropriate shebang lines with encoding validation
- **_build_shebang() (L154-183)**: Constructs shebang with length/complexity considerations
- **enquote_executable() (L71-84)**: Handles executable path quoting for spaces
- **_get_alternate_executable() (L121-126)**: GUI-specific executable selection (pythonw)

### Platform-Specific Features
- **_get_launcher() (L423-434)**: Windows launcher selection (32/64-bit, ARM support)
- **_fix_jython_executable() (L142-152)**: Jython-specific executable handling
- **_is_shell() (L130-140)**: Shell script detection for Jython

### File Writing
- **_write_script() (L269-327)**: Handles actual file writing with launcher embedding
- **get_script_filenames() (L331-341)**: Generates script name variants (X, X.Y versions)

## Key Constants
- **SCRIPT_TEMPLATE (L43-50)**: Template for generated Python scripts
- **FIRST_LINE_RE (L42)**: Regex for detecting Python shebangs
- **WRAPPERS (L64-68)**: Pre-loaded Windows executable launchers
- **_DEFAULT_MANIFEST (L23-39)**: Windows manifest template

## Dependencies
- FileOperator from util module for file operations
- Resource finder for launcher executable loading
- Cross-platform compatibility utilities (sysconfig, detect_encoding)
- Export entry parsing for callable specifications

## Architecture Patterns
- Template-based script generation with parameter substitution
- Platform detection with conditional behavior paths
- Resource pre-loading to avoid import issues during pip updates
- Defensive file handling with .deleteme fallback strategy
- Encoding validation for cross-platform shebang compatibility

## Critical Constraints
- Shebang length limits: 127 chars (Linux), 512 chars (macOS)
- UTF-8 encoding requirement for shebangs
- Windows launcher must be embedded as ZIP with script as __main__.py
- File mode setting only on POSIX systems