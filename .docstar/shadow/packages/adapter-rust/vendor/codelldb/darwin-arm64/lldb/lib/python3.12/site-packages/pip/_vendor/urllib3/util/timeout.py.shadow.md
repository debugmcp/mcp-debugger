# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/timeout.py
@source-hash: 730ab874c93cee62
@generated: 2026-02-09T17:57:31Z

## Purpose

Timeout management utility for urllib3 HTTP connections, providing fine-grained control over connection and read timeouts with intelligent default handling and time-aware timeout calculations.

## Core Components

### Timeout Class (L19-271)

Central timeout configuration class that manages three types of timeouts:
- `connect`: Maximum time for connection establishment 
- `read`: Maximum time between consecutive read operations
- `total`: Combined timeout that dynamically adjusts read timeout based on time spent connecting

**Key Methods:**
- `__init__(total=None, connect=_Default, read=_Default)` (L101): Constructor with validation
- `from_float(timeout)` (L169): Class method to create Timeout from legacy single timeout value
- `clone()` (L184): Creates copy for per-request use while preserving global default references
- `start_connect()` (L198): Begins timing connection attempt, stores timestamp in `_start_connect`
- `get_connect_duration()` (L209): Returns elapsed connection time since `start_connect()`

**Properties:**
- `connect_timeout` (L224): Returns effective connect timeout, considering total timeout constraints
- `read_timeout` (L242): Returns effective read timeout, dynamically adjusted for remaining total timeout

### Timeout Validation (L123-166)

`_validate_timeout()` validates and normalizes timeout values:
- Handles sentinel `_Default` object (L12) conversion to `DEFAULT_TIMEOUT`
- Rejects boolean values and non-numeric types
- Enforces positive timeout values (> 0)
- Returns validated timeout or raises `ValueError`

## Key Dependencies

- `socket._GLOBAL_DEFAULT_TIMEOUT, getdefaulttimeout` (L6): System default timeout integration
- `..exceptions.TimeoutStateError` (L8): Custom exception for invalid timeout state
- `time.monotonic` or `time.time` (L16): Monotonic timing via `current_time` function

## Architecture Patterns

**Sentinel Pattern**: Uses `_Default` object (L12) and `DEFAULT_TIMEOUT` (L99) to distinguish between user-specified `None` (infinite timeout) and unspecified timeout (use default).

**State Machine**: Connection timing requires sequential calls: `start_connect()` → `get_connect_duration()` → `read_timeout` property calculation.

**Dynamic Timeout Calculation**: `read_timeout` property intelligently reduces available time based on connection duration when `total` timeout is specified.

## Critical Constraints

1. Connection timer must be started before calculating read timeouts when total timeout is specified
2. Timeout values must be positive numbers, `None` (infinite), or default sentinel values
3. Boolean timeout values are explicitly rejected to prevent common errors
4. Global default timeout object references must be preserved during cloning to maintain socket.py integration