# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/filesize.py
@source-hash: f5f4cb00f080c079
@generated: 2026-02-09T17:59:04Z

## Purpose
File size formatting utility module that converts byte values to human-readable strings using decimal (SI) prefixes. Borrowed from pyfilesystem2 project.

## Key Functions

**`_to_str(size, suffixes, base, *, precision=1, separator=" ")` (L19-41)**
- Core formatting function that converts size to string representation
- Handles special cases: 1 byte and sizes < base
- Uses enumeration starting from index 2 to calculate appropriate unit scale
- Returns formatted string with specified precision and separator

**`pick_unit_and_suffix(size, suffixes, base)` (L44-50)**
- Utility function to determine appropriate unit and suffix for given size
- Returns tuple of (unit, suffix) for external formatting needs
- Iterates through suffixes to find first unit where size < unit * base

**`decimal(size, *, precision=1, separator=" ")` (L53-89)**
- Public API function for decimal/SI prefix formatting (1000-based)
- Uses suffixes: kB, MB, GB, TB, PB, EB, ZB, YB
- Delegates to `_to_str` with base=1000
- Well-documented with examples and parameter descriptions

## Dependencies
- `typing`: For type annotations (Iterable, List, Optional, Tuple)

## Architecture Notes
- Single responsibility: decimal file size formatting only
- Modular design with private helper `_to_str` for potential extension
- Uses keyword-only arguments for precision and separator parameters
- Exports only `decimal` function via `__all__`

## Key Behaviors
- Size of 1 returns "1 byte" (singular)
- Sizes < base return "{:,} bytes" with comma formatting
- Larger sizes use floating-point representation with specified precision
- Formula: `(base * size / unit)` for calculating display value