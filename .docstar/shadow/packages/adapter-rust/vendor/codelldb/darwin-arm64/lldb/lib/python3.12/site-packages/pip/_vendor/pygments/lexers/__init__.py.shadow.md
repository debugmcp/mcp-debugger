# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/lexers/__init__.py
@source-hash: 583d6e224d849883
@generated: 2026-02-09T17:57:32Z

## Purpose
Central registry and discovery module for Pygments lexers, providing utilities to find, load, and instantiate lexers by name, filename, mimetype, or text analysis. Part of the pip-vendored Pygments syntax highlighting library within a Rust adapter package.

## Core Architecture

### Lazy Loading System
- **`_lexer_cache` (L31)**: Global cache storing loaded lexer classes by name
- **`_pattern_cache` (L32)**: Cache for compiled filename pattern regexes
- **`_load_lexers()` (L43-49)**: Dynamically imports lexer modules and populates cache
- **`_automodule` class (L344-357)**: Custom module type enabling attribute-based lexer access

### Lexer Discovery Functions

**Primary Entry Points:**
- **`get_lexer_by_name()` (L110-133)**: Returns lexer instance by alias with options
- **`get_lexer_for_filename()` (L213-230)**: Returns lexer instance based on filename patterns
- **`get_lexer_for_mimetype()` (L232-249)**: Returns lexer instance by MIME type
- **`guess_lexer()` (L305-342)**: Analyzes text content to determine best lexer

**Class-Only Discovery:**
- **`find_lexer_class()` (L65-81)**: Returns lexer class by exact name match
- **`find_lexer_class_by_name()` (L83-108)**: Returns lexer class by alias
- **`find_lexer_class_for_filename()` (L170-211)**: Returns best lexer class for filename

### Specialized Functions

**Text Analysis:**
- **`guess_lexer_for_filename()` (L262-303)**: Combines filename and text analysis
- **Rating system (L195-206)**: Scores lexers by text analysis + filename bonus

**Custom Lexers:**
- **`load_lexer_from_file()` (L135-168)**: Loads lexer from Python file using exec()

**Enumeration:**
- **`get_all_lexers()` (L51-63)**: Generator yielding all available lexer metadata
- **`_iter_lexerclasses()` (L251-260)**: Iterator over all lexer classes

## Key Dependencies
- **`LEXERS` mapping (L17)**: Registry of built-in lexers from `_mapping` module
- **`find_plugin_lexers()` (L19)**: Discovers third-party lexers via entry points
- **`get_filetype_from_buffer()` (L18)**: Vim modeline detection for text analysis

## Compatibility & Module Replacement
- **`COMPAT` dict (L22-26)**: Maps deprecated lexer names to current ones
- **Module hijacking (L359-363)**: Replaces module with `_automodule` instance for dynamic imports

## Critical Patterns
- All discovery functions follow: builtin lexers → plugin lexers → raise ClassNotFound
- Filename matching uses `fnmatch` with regex compilation caching
- Text analysis returns numeric scores (0.0-1.0), with 1.0 being definitive match
- Lexer priorities and filename bonuses influence selection when multiple matches exist