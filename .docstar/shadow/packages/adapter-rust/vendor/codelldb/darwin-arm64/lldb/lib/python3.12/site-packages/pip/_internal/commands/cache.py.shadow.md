# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/cache.py
@source-hash: c60efafd9144042e
@generated: 2026-02-09T17:58:28Z

## Purpose
Pip cache management command implementation. Provides CLI interface for inspecting, listing, removing, and purging pip's wheel and HTTP package index caches.

## Core Class
**CacheCommand (L15-225)** - Main command class extending pip's base Command
- Handles 5 subcommands: dir, info, list, remove, purge
- `ignore_require_venv = True` (L30) - allows operation in any environment
- Usage patterns defined (L31-37) with format options

## Key Methods

**run (L51-81)** - Main entry point and dispatcher
- Validates cache is enabled (L60-62)
- Maps subcommands to handlers (L52-58)
- Centralized error handling with PipError catching (L75-79)

**get_cache_dir (L83-87)** - Shows cache directory path
**get_cache_info (L89-129)** - Displays comprehensive cache statistics
- Counts HTTP files and wheels (L93-94)
- Calculates sizes for http, http-v2, and wheels directories (L96-103)
- Formats detailed info message with locations and sizes (L105-129)

**list_cache_items (L131-144)** - Lists cached wheels with optional pattern matching
- Supports human-readable and absolute path formats (L141-144)
- Pattern defaults to "*" if not provided (L135-138)

**remove_cache_items (L163-186)** - Removes matching cache items
- For "*" pattern, includes both wheels and HTTP files (L173-175)
- Individual file deletion with verbose logging (L183-185)

**purge_cache (L188-192)** - Convenience method that removes all items

## Helper Methods
**_cache_dir (L194-195)** - Constructs cache subdirectory paths
**_find_http_files (L197-202)** - Locates HTTP cache files in both old and new formats
**_find_wheels (L204-225)** - Locates wheel files with PEP 427 compliant pattern matching
- Implements smart pattern expansion based on hyphen presence (L215-223)
- Handles distribution name normalization rules

## Dependencies
- Uses `pip._internal.utils.filesystem` for file operations and size formatting
- Leverages `optparse.Values` for option handling
- Standard logging through pip's logger infrastructure

## Architecture Notes
- Command pattern implementation with handler dispatch
- Separation of concerns: validation in run(), business logic in handlers
- Consistent error handling and user feedback patterns
- Format options abstracted into separate formatting methods (L146-161)