# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/cli/progress_bars.py
@source-hash: 35e75223c839fbaf
@generated: 2026-02-09T17:58:24Z

**Primary Purpose**: Provides progress bar rendering functionality for pip's download operations with support for rich visual progress bars and raw text-based progress indicators.

**Key Components**:

- `DownloadProgressRenderer` (L21): Type alias for callable that wraps iterables with progress tracking
- `_rich_progress_bar()` (L24-58): Creates rich visual progress bars using the Rich library with different column layouts based on whether total size is known
- `_raw_progress_bar()` (L60-80): Fallback text-based progress indicator for environments without rich display capabilities
- `get_download_progress_renderer()` (L82-94): Factory function that returns appropriate progress renderer based on bar_type configuration

**Dependencies**:
- `pip._vendor.rich.progress`: Rich library components for visual progress bars
- `pip._internal.cli.spinners.RateLimiter`: Controls update frequency for raw progress output
- `pip._internal.utils.logging.get_indentation`: Maintains consistent indentation with logging output

**Architectural Patterns**:
- Factory pattern: `get_download_progress_renderer()` selects appropriate implementation
- Partial function application: Uses `functools.partial` to create configured renderers
- Generator pattern: Both progress bar implementations yield chunks while tracking progress
- Strategy pattern: Different progress bar strategies based on display capabilities

**Key Behaviors**:
- Rich progress bar (L32-50): Shows spinner for unknown size downloads, progress bar for known sizes
- Rate limiting (L71, L76): Raw progress updates throttled to 0.25 second intervals
- Indentation handling (L53): Progress bars respect current logging indentation level
- Refresh rate (L52): Rich progress bars update at 30 fps

**Critical Invariants**:
- `bar_type` must be "on" for rich progress bars (assertion at L30)
- Unknown size downloads use infinite total with spinner display
- Raw progress always shows current/total format regardless of actual total value
- Both renderers preserve original iteration behavior while adding progress tracking