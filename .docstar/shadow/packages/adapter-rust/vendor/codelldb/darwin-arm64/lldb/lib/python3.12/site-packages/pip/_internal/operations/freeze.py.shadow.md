# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/operations/freeze.py
@source-hash: 579f72132092cff6
@generated: 2026-02-09T17:58:41Z

## Primary Purpose
Implements pip's freeze functionality to generate requirements.txt-style output showing installed packages with their versions and installation details. Core component for `pip freeze` command.

## Key Classes and Functions

### `_EditableInfo` (L21-24)
NamedTuple containing requirement string and comments list for editable package installations.

### `freeze()` (L26-145)
Main function generating frozen requirements output as string generator. Takes filtering options (local_only, user_only, exclude_editable) and optional requirements files for comparison.

**Key behavior:**
- Discovers installed packages via `get_environment().iter_installed_distributions()` (L37-41)
- Creates `FrozenRequirement` objects for each distribution (L43)
- When requirements files provided, parses them line-by-line (L57-130)
- Handles pip install options (--find-links, --index-url, etc.) by yielding them once (L64-82)
- Processes editable installs with `-e`/`--editable` prefix (L85-93)
- Warns about missing or duplicate requirements (L117-139)
- Outputs remaining unprocessed installations sorted alphabetically (L142-144)

### `_format_as_name_version()` (L147-154)
Formats distribution as "name==version" string, handling legacy invalid versions with "===" syntax.

### `_get_editable_info()` (L157-220)
Extracts VCS information for editable installations. Returns requirement string and explanatory comments.

**VCS handling logic:**
- Detects VCS backend for editable location (L168)
- No VCS: returns local path with explanatory comment (L170-180)
- VCS found: attempts to get source requirement (L184-185)
- Handles various VCS errors with appropriate fallback comments (L186-213)

### `FrozenRequirement` (L223-258)
Represents a frozen package requirement with name, requirement string, editable flag, and comments.

**Key methods:**
- `from_dist()` (L237-252): Class method creating instance from BaseDistribution
- `__str__()` (L254-258): Formats as requirements.txt entry, prefixing "-e" for editables

## Important Dependencies
- `pip._internal.metadata.get_environment()`: Package discovery
- `pip._vendor.packaging.utils.canonicalize_name()`: Name normalization  
- `pip._internal.req.constructors`: InstallRequirement creation
- `pip._internal.vcs`: VCS backend detection and operations
- `pip._internal.utils.direct_url_helpers`: PEP 610 direct URL handling

## Architectural Patterns
- Generator-based streaming output for memory efficiency
- Separation of editable vs non-editable package handling
- VCS abstraction with graceful degradation on errors
- Requirements file parsing with option deduplication
- Canonical name-based package matching and deduplication

## Critical Invariants
- Package names canonicalized for consistent matching (L112, L232)
- Editable packages prefixed with "-e" in output (L256-257)
- Requirements file options emitted only once (L53, L80-82)
- VCS errors handled gracefully with fallback to local paths
- Output maintains sorted order for deterministic results (L142)