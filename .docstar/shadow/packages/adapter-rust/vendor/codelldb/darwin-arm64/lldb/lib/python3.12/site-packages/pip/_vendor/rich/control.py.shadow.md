# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/control.py
@source-hash: 0d29074d440ba2b7
@generated: 2026-02-09T17:59:09Z

Terminal control code generation and management for Rich library. Provides abstraction layer for ANSI escape sequences used in terminal manipulation.

## Core Purpose
Converts high-level control operations (cursor movement, screen clearing, etc.) into ANSI escape sequences that terminals can interpret. Acts as interface between Rich's rendering system and terminal control capabilities.

## Key Components

### Constants & Mappings (L15-51)
- `STRIP_CONTROL_CODES` (L15-21): ASCII codes for control characters to remove (bell, backspace, vtab, form feed, carriage return)
- `_CONTROL_STRIP_TRANSLATE` (L22-24): Translation table for `str.translate()` to strip control codes
- `CONTROL_ESCAPE` (L26-32): Maps control codes to escaped string representations
- `CONTROL_CODES_FORMAT` (L34-51): Core mapping of ControlType enums to lambda functions that generate ANSI escape sequences

### Control Class (L54-185)
Primary class providing terminal control functionality:
- `__init__` (L64-72): Accepts ControlType enums or ControlCode tuples, renders them into ANSI sequences, stores as Segment
- Factory methods for common operations:
  - `bell()` (L75-77): Ring terminal bell
  - `home()` (L80-82): Move cursor to home position
  - `move()` (L85-111): Relative cursor movement with x,y offsets
  - `move_to_column()` (L114-135): Move to absolute column with optional row offset
  - `move_to()` (L138-148): Move cursor to absolute x,y position
  - `clear()` (L151-153): Clear entire screen
  - `show_cursor()` (L156-158): Toggle cursor visibility
  - `alt_screen()` (L161-166): Enable/disable alternate screen buffer
  - `title()` (L169-175): Set terminal window title
- `__rich_console__` (L180-184): Rich rendering protocol implementation

### Utility Functions (L187-214)
- `strip_control_codes()` (L187-198): Remove control characters from text using translation table
- `escape_control_codes()` (L201-214): Replace control codes with escaped representations for display

## Architecture Patterns
- Factory pattern: Static class methods create pre-configured Control instances
- Strategy pattern: CONTROL_CODES_FORMAT maps control types to formatting functions
- Rich protocol compliance: Implements `__rich_console__` for rendering integration

## Dependencies
- `segment.ControlCode, ControlType, Segment`: Core Rich segment types
- TYPE_CHECKING imports for Console integration
- Conditional typing import for Python 3.7 compatibility

## Critical Invariants
- All control sequences are ANSI-compliant terminal escape codes
- Control objects are immutable after creation (only segment attribute)
- Cursor positions use 0-based indexing internally, convert to 1-based for ANSI codes