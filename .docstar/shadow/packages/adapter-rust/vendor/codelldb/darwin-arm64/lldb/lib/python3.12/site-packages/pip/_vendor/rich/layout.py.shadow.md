# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/layout.py
@source-hash: 6a3912140b4456ff
@generated: 2026-02-09T17:59:15Z

## Purpose and Responsibility
Rich terminal UI layout system implementing hierarchical region division for complex console interfaces. Provides flexible row/column splitters with ratio-based sizing and named layout access.

## Core Components

### Layout Class (L142-416)
Main orchestrator for terminal layout management with:
- **Constructor (L156-175)**: Accepts renderable content, sizing constraints (size, minimum_size, ratio), visibility, and optional naming
- **Key Properties**:
  - `renderable` (L183-186): Returns self if has children, otherwise returns stored renderable
  - `children` (L188-191): Filtered list of visible child layouts only
  - `map` (L193-196): Access to last render's region mapping
- **Navigation Methods**:
  - `get()` (L198-214): Recursive name-based layout lookup
  - `__getitem__()` (L216-220): Dict-like access with KeyError on missing names
- **Splitting Operations**:
  - `split()` (L261-284): Generic split with configurable splitter (row/column)
  - `split_row()` (L299-305): Horizontal layout division
  - `split_column()` (L307-313): Vertical layout division
  - `add_split()` (L286-297): Add layouts to existing split
  - `unsplit()` (L315-317): Remove all child layouts
- **Rendering Pipeline**:
  - `_make_region_map()` (L345-364): Creates layout-to-region mapping using stack-based traversal
  - `render()` (L366-393): Generates RenderMap for all leaf layouts
  - `__rich_console__()` (L395-415): Main rendering entry point, thread-safe with RLock

### Splitter System
Abstract base `Splitter` (L80-99) with concrete implementations:
- **RowSplitter** (L101-118): Horizontal division using ratio_resolve for width distribution
- **ColumnSplitter** (L121-138): Vertical division using ratio_resolve for height distribution
- Both implement `divide()` method returning (Layout, Region) tuples

### Supporting Types
- **LayoutRender** (L32-36): NamedTuple pairing Region with rendered segment lines
- **_Placeholder** (L51-77): Default renderable showing layout dimensions and name in bordered panel
- **Custom Exceptions**: LayoutError (L43-44), NoSplitter (L47-48)

## Key Dependencies
- `ratio_resolve` from `_ratio`: Proportional space distribution algorithm
- Rich components: Console, Panel, Align, Pretty for rendering
- Threading: RLock for thread-safe updates and rendering

## Architecture Patterns
- **Composite Pattern**: Layouts contain child layouts in tree structure
- **Strategy Pattern**: Pluggable splitters (row/column) via splitters registry (L154)
- **Command Pattern**: Deferred rendering through render maps
- **Thread Safety**: RLock protection for concurrent access to renderables and render maps

## Critical Constraints
- Minimum size enforcement (default 1) prevents layouts from disappearing
- Thread-safe rendering and updates via RLock synchronization
- Lazy evaluation: regions calculated on-demand during rendering
- Visibility filtering: only visible children participate in layout calculations