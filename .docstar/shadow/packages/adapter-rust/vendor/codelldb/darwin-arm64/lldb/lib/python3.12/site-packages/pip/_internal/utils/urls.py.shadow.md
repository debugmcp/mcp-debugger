# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/urls.py
@source-hash: a9c7923996f995b3
@generated: 2026-02-09T17:58:38Z

## Purpose
Provides URL/file path conversion utilities for pip's internal operations, handling cross-platform file URL formatting and parsing with Windows-specific path handling.

## Key Functions

### `path_to_url(path: str) -> str` (L9-16)
Converts a filesystem path to a file: URL scheme. Normalizes and makes the path absolute before URL encoding. Uses `urllib.parse.urljoin` and `urllib.request.pathname2url` for proper URL construction.

### `url_to_path(url: str) -> str` (L19-55)  
Converts a file: URL back to a filesystem path. Core functionality:
- Validates input is a file: URL (L23-25)
- Parses URL components using `urllib.parse.urlsplit` (L27)
- Handles network location/authority section (L29-38):
  - Empty or "localhost" treated as local (L29-31)
  - Windows UNC paths get `\\` prefix (L32-34)
  - Non-local URIs rejected on non-Windows (L35-38)
- Windows-specific path normalization (L45-53): strips leading slash from drive letter paths like "/C:/Users/foo"

## Dependencies
- `os`: Path normalization operations
- `string`: ASCII letter validation for Windows drive detection
- `urllib.parse` & `urllib.request`: URL parsing and conversion utilities
- `.compat.WINDOWS`: Platform detection for Windows-specific logic

## Architecture Notes
- Cross-platform design with Windows-specific edge case handling
- Follows RFC 8089 for file URI authority handling
- Uses assertion-based input validation rather than exception handling for URL format
- Handles both regular paths and UNC network paths on Windows

## Critical Constraints
- Only accepts file: URLs (enforced by assertion L23-25)
- Non-local file URIs only supported on Windows platform
- Windows path normalization assumes specific URL parsing behavior from urllib