# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/resolvelib/structs.py
@source-hash: d3fd7f5cef33fc22
@generated: 2026-02-09T17:59:02Z

## Primary Purpose
Data structure utilities for the resolvelib library, providing graph representation and specialized iterator wrappers for dependency resolution algorithms.

## Core Classes and Functions

### DirectedGraph (L6-70)
A directed graph implementation for representing dependency relationships:
- **Storage**: Three internal structures - `_vertices` (set), `_forwards` (adjacency dict), `_backwards` (reverse adjacency dict) (L10-12)
- **Basic Operations**: 
  - `add(key)` (L31-37): Adds vertex with error on duplicates
  - `remove(key)` (L39-45): Removes vertex and all connected edges
  - `connect(f, t)` (L50-58): Creates directed edge from f to t
- **Query Methods**:
  - `connected(f, t)` (L47-48): Checks if direct edge exists
  - `iter_children(key)` (L65-66): Returns outgoing neighbors
  - `iter_parents(key)` (L68-69): Returns incoming neighbors
  - `iter_edges()` (L60-63): Yields all (from, to) edge pairs
- **Collections Interface**: Implements `__iter__`, `__len__`, `__contains__` for vertex iteration (L14-21)

### IteratorMapping (L72-107)
A specialized mapping that combines base mapping with accessor function and additional appends:
- **Constructor**: Takes `mapping`, `accessor` function, optional `appends` dict (L73-76)
- **Behavior**: `__getitem__` chains results from `accessor(mapping[k])` with `appends[k]` using `itertools.chain` (L93-98)
- **Collections Interface**: Full `collections_abc.Mapping` implementation with union semantics for keys (L90-106)

### Iterator View Classes

#### _FactoryIterableView (L109-140)
Wraps iterator factories to enable multiple iterations:
- **Purpose**: Converts callable factories into reusable iterables
- **Mechanism**: Uses `itertools.tee()` to split iterator for reuse (L138)
- **Key Methods**: `__iter__` caches and splits iterables, `__bool__` tests emptiness by attempting iteration (L125-130)

#### _SequenceIterableView (L142-162)
Simple proxy wrapper for sequence objects:
- **Purpose**: Provides uniform interface with `_FactoryIterableView`
- **Implementation**: Direct delegation to underlying sequence

### build_iter_view(matches) (L164-170)
Factory function that creates appropriate iterator view based on input type:
- Returns `_FactoryIterableView` for callables
- Returns `_SequenceIterableView` for sequences (converts other iterables to lists first)

## Dependencies
- `itertools`: Used for chaining iterators and splitting with `tee()`
- `.compat.collections_abc`: Compatibility layer for abstract base classes

## Architectural Patterns
- **Dual adjacency representation** in DirectedGraph for efficient bidirectional queries
- **Lazy evaluation** through iterator factories and chaining
- **Polymorphic iterator views** providing consistent interface regardless of underlying data type
- **Python 2/3 compatibility** with `__nonzero__` aliases (L88, L132, L158)