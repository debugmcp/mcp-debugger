# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/provider.py
@source-hash: 6dcb059d8be59ad0
@generated: 2026-02-09T17:57:30Z

**Primary Purpose:** Implements the PipProvider class that serves as pip's adapter to the resolvelib dependency resolution library, translating between pip's internal dependency resolution concepts and resolvelib's abstract provider interface.

**Key Components:**

**_get_with_identifier() (L54-76):** Utility function that performs intelligent lookups in package name mappings, handling both direct package names and package names with extras (e.g., "package[extra]"). Uses a hack to parse extras by partitioning on "[" bracket.

**PipProvider class (L79-258):** Core provider implementation inheriting from AbstractProvider.

**Constructor (L90-103):** Initializes provider with:
- `factory`: Factory for creating Requirement/Candidate objects
- `constraints`: User-specified package constraints
- `ignore_dependencies`: --no-deps flag handling
- `upgrade_strategy`: Controls upgrade behavior ("eager", "only-if-needed", etc.)
- `user_requested`: Dict mapping package names to request order
- `_known_depths`: Tracks dependency depth for preference calculation

**identify() (L105-106):** Returns the name identifier for requirements or candidates.

**get_preference() (L108-197):** Complex preference calculation for dependency resolution order. Returns tuple with priority factors:
1. Requires-Python packages (highest priority)
2. Direct requirements (URLs, local paths)
3. Pinned requirements (== operators)
4. Backtrack causes (packages that caused previous failures)
5. Dependency depth (closer to user requests preferred)
6. User request order
7. Constrained requirements (with version operators)
8. Alphabetical order (for consistency)

**find_matches() (L199-239):** Finds candidate packages matching requirements. Contains nested `_eligible_for_upgrade()` (L205-225) that determines upgrade eligibility based on strategy and user requests. Delegates to factory's find_candidates method.

**is_satisfied_by() (L241-243):** Cached method checking if a candidate satisfies a requirement. Uses @lru_cache for performance.

**get_dependencies() (L245-247):** Extracts dependencies from candidates, respecting the ignore_dependencies flag.

**is_backtrack_cause() (L249-258):** Static method determining if an identifier was involved in causing backtracking during resolution.

**Dependencies:**
- resolvelib: External dependency resolution library
- pip internal modules: base classes, factory, candidates
- Standard library: collections, math, functools, typing

**Architecture Notes:**
- Acts as bridge between pip's concrete Requirement/Candidate classes and resolvelib's abstract concepts
- Factory pattern separates object creation from resolution logic
- Preference system implements sophisticated heuristics for resolution order
- Heavy use of caching and memoization for performance optimization