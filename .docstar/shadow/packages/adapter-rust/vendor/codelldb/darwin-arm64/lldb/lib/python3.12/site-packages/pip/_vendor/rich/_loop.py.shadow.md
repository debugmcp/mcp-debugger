# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_loop.py
@source-hash: 855ffa08b7683e6d
@generated: 2026-02-09T17:58:56Z

**Purpose**: Provides iterator utility functions that augment iteration with positional flags (first, last, or both) for enhanced loop control in UI rendering contexts.

**Core Functions**:

- `loop_first(values)` (L6-15): Yields `(is_first: bool, value: T)` tuples, marking only the first element as `True`. Handles empty iterables gracefully by returning early.

- `loop_last(values)` (L18-28): Yields `(is_last: bool, value: T)` tuples, marking only the final element as `True`. Uses look-ahead pattern with `previous_value` buffering to detect the last item.

- `loop_first_last(values)` (L31-43): Yields `(is_first: bool, is_last: bool, value: T)` tuples, providing both positional flags. Combines the look-ahead pattern with first-element tracking.

**Key Design Patterns**:
- All functions use early return for empty iterables (StopIteration handling)
- Generic type variable `T` (L3) ensures type safety across different value types
- Look-ahead buffering pattern in `loop_last` and `loop_first_last` to identify final elements
- Generator-based implementation for memory efficiency

**Dependencies**: Only standard library `typing` module for type annotations.

**Use Cases**: Primarily used in rich text rendering where special formatting is needed for first/last elements (borders, separators, etc.) without requiring collection materialization or length calculation.