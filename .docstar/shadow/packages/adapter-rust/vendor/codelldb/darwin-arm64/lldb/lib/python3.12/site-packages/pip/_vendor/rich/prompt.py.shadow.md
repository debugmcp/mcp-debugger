# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/prompt.py
@source-hash: c1d3a7d97f174c92
@generated: 2026-02-09T17:59:18Z

**Primary Purpose**: Interactive prompt system for Rich terminal library, providing typed user input collection with validation, choices, and error handling.

**Core Architecture**:
- Base class `PromptBase[PromptType]` (L30-284) provides generic prompt framework with type safety
- Concrete implementations for specific types: `Prompt` (L286-296), `IntPrompt` (L298-308), `FloatPrompt` (L310-320), `Confirm` (L322-346)
- Exception hierarchy: `PromptError` (L11-13) â†’ `InvalidResponse` (L15-28) for validation errors

**Key Classes and Functions**:

`PromptBase[PromptType]` (L30-284):
- `__init__()` (L53-74): Configures prompt text, console, password mode, choices, display options
- `ask()` (L107-141): Class method shortcut for one-shot prompting - creates instance and runs loop
- `make_prompt()` (L154-183): Builds formatted prompt text with choices/defaults display
- `get_input()` (L186-203): Console input abstraction with password support
- `process_response()` (L217-238): Converts string input to typed value with validation
- `__call__()` (L262-283): Main prompt loop - retries on validation errors until valid input

`Prompt` (L286-296): String prompt implementation
`IntPrompt` (L298-308): Integer prompt with custom error message
`FloatPrompt` (L310-320): Float prompt with number validation
`Confirm` (L322-346): Boolean y/n prompt with custom rendering

**Key Dependencies**:
- Rich console system (`Console`, `get_console()`)
- Rich text formatting (`Text`, `TextType`)
- Generic typing with `TypeVar` for type safety

**Important Patterns**:
- Template method pattern: Base class defines flow, subclasses customize validation/conversion
- Type-safe generics using `PromptType` and `DefaultType` TypeVars
- Overloaded methods for handling optional defaults
- Rich markup support in prompt text with styles ("prompt", "prompt.choices", "prompt.default")

**Critical Behavior**:
- Empty input returns default value when provided
- Validation loop continues until valid input or user provides default
- Choice validation is case-sensitive and whitespace-stripped
- Password mode delegates to console for secure input handling
- Error messages use Rich markup for styled output