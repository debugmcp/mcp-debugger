# packages/adapter-rust/vendor/codelldb/darwin-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/version.py
@source-hash: c04e2c495945f9dd
@generated: 2026-02-09T17:59:00Z

## Purpose
Implements PEP 440 compliant version parsing and comparison for Python packages. Provides the core `Version` class for semantic version handling with support for epochs, pre/post releases, development versions, and local version identifiers.

## Key Components

### Public API
- `parse(version: str) -> Version` (L47-56): Factory function that creates Version instances from string input
- `Version` class (L161-452): Main version handling class with full PEP 440 compliance
- `InvalidVersion` exception (L59-67): Raised for malformed version strings
- `VERSION_PATTERN` constant (L148): Regex pattern for version validation

### Core Classes

**Version (_BaseVersion)** (L161-452)
- `__init__(version: str)` (L188-224): Parses version string using regex, validates format, creates internal representation
- String representation methods: `__str__` (L234-265), `__repr__` (L226-232)
- Properties for version components:
  - `epoch` (L267-276): Version epoch (default 0)
  - `release` (L278-292): Main version tuple (e.g., (1, 2, 3))
  - `pre` (L294-307): Pre-release info (alpha/beta/rc)
  - `post` (L309-318): Post-release number
  - `dev` (L320-329): Development release number
  - `local` (L331-343): Local version identifier
- Derived properties:
  - `public` (L345-356): Version without local component
  - `base_version` (L358-381): Version without pre/post/dev markers
  - `major/minor/micro` (L422-451): Individual release components
- Boolean flags: `is_prerelease` (L383-398), `is_postrelease` (L400-409), `is_devrelease` (L411-420)

**_BaseVersion** (L69-113)
- Implements all comparison operators (`__lt__`, `__le__`, `__eq__`, `__ge__`, `__gt__`, `__ne__`) based on `_key` attribute
- `__hash__` (L72-73): Hash based on comparison key
- All comparisons use `_key` for proper version ordering

**_Version (NamedTuple)** (L38-45)
- Internal data structure holding parsed version components
- Fields: epoch, release, dev, pre, post, local

### Parsing Functions

**_parse_letter_version** (L454-486)
- Normalizes pre/post/dev version labels (alpha→a, beta→b, etc.)
- Handles implicit numbering (default to 0 if no number provided)
- Supports implicit post-release syntax (number without letter)

**_parse_local_version** (L492-501)  
- Splits local version on separators (., _, -)
- Converts numeric parts to integers, keeps text as lowercase strings

**_cmpkey** (L504-563)
- Generates comparison key for version sorting
- Implements complex PEP 440 sorting rules:
  - Strips trailing zeros from release tuple
  - Uses Infinity/NegativeInfinity for proper ordering of None values
  - Special handling for dev-only versions (sorts before pre-releases)
  - Local version segments sorted with alpha-numeric precedence rules

## Type Definitions
- Complex type aliases for comparison keys (L20-35)
- `CmpKey` represents the 6-tuple used for version comparison
- `LocalType`, `CmpPrePostDevType`, `CmpLocalType` define component types

## Dependencies
- `_structures`: Provides Infinity and NegativeInfinity sentinel values
- Standard library: `re`, `itertools`, `typing`

## Version Regex Pattern
`_VERSION_PATTERN` (L117-146): Comprehensive regex matching PEP 440 versions with named groups for all components (epoch, release, pre, post, dev, local). Not anchored to allow embedding in larger patterns.

## Architecture Notes
- Uses regex parsing with named groups for robust version extraction
- Comparison implemented via tuple ordering of normalized components
- Supports round-trip string conversion (parse → str → parse)
- Thread-safe immutable design