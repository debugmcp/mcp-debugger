# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/pygments/formatters/terminal.py
@source-hash: 146faba634691663
@generated: 2026-02-09T18:02:07Z

This file implements a terminal formatter for Pygments syntax highlighting that outputs colored text using ANSI escape sequences.

## Core Purpose
Formats syntax-highlighted tokens for display in text terminals with ANSI color codes, supporting both light and dark terminal backgrounds.

## Key Components

### TERMINAL_COLORS Dictionary (L23-53)
Maps Pygments token types to color tuples (light_bg_color, dark_bg_color). Includes mappings for:
- Basic tokens: Keywords, Names, Comments, Strings, Numbers, Operators
- Generic types: Deleted, Inserted, Headings, Errors
- Special formatting with underscores for bold/emphasis effects

### TerminalFormatter Class (L56-124)
Main formatter class inheriting from `Formatter`. Key attributes:
- `name = 'Terminal'`, `aliases = ['terminal', 'console']` (L79-80)
- `filenames = []` - no specific file associations (L81)

#### Constructor `__init__` (L83-89)
Processes options:
- `bg`: 'light'/'dark' terminal background (default: 'light')
- `colorscheme`: custom token-to-color mapping (default: TERMINAL_COLORS)
- `linenos`: enable line numbers (default: False)
- `_lineno`: internal line counter

#### Core Methods

**`_get_color(ttype)` (L98-106)**
Token type color resolution with parent traversal. Walks up the token type hierarchy until finding a color mapping, then returns appropriate color based on `darkbg` setting.

**`_write_lineno(outfile)` (L94-96)**
Line number output helper. Increments counter and writes formatted line numbers with conditional newline prefix.

**`format_unencoded(tokensource, outfile)` (L108-124)**
Main formatting logic:
1. Writes initial line number if enabled
2. Processes each token-value pair from tokensource
3. Splits multi-line values and applies ANSI formatting per line
4. Handles newlines correctly to preserve terminal paging
5. Manages line number output for each new line

## Dependencies
- `pip._vendor.pygments.formatter.Formatter`: base formatter class
- `pip._vendor.pygments.token`: token type definitions
- `pip._vendor.pygments.console.ansiformat`: ANSI color formatting
- `pip._vendor.pygments.util.get_choice_opt`: option validation

## Architecture Notes
- Color sequences terminate at newlines for proper terminal paging
- Supports both custom and built-in color schemes
- Token type hierarchy traversal ensures fallback colors for specialized tokens
- Line number formatting integrates seamlessly with syntax highlighting