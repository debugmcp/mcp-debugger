# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/urllib3/contrib/ntlmpool.py
@source-hash: 3657e45bb58c756f
@generated: 2026-02-09T18:02:08Z

**Purpose**: Provides NTLM authentication support for HTTPS connections via a specialized connection pool. This is a deprecated module that extends urllib3's HTTPSConnectionPool to handle Windows NTLM authentication.

**Key Components**:

- `NTLMConnectionPool` (L27-130): Main class extending HTTPSConnectionPool to support NTLM authentication
  - `__init__` (L34-46): Initializes with user credentials and auth URL, parses domain\username format
  - `_new_conn` (L48-113): Core NTLM handshake implementation - creates connection with 3-way NTLM negotiation
  - `urlopen` (L115-130): Overrides parent method to ensure Keep-Alive headers are set

**Dependencies**:
- `ntlm.ntlm`: External NTLM library for message creation/parsing
- `urllib3.HTTPSConnectionPool`: Parent class providing base connection pool functionality
- `http_client.HTTPSConnection`: Underlying HTTPS connection implementation

**Authentication Flow** (L48-113):
1. Creates NTLM negotiate message and sends initial request
2. Parses server challenge from www-authenticate header
3. Creates authentication response with user credentials
4. Validates final server response (expects HTTP 200)

**Key Constraints**:
- Requires Keep-Alive connections for NTLM session persistence
- User format must be DOMAIN\username (parsed at L43-45)
- Socket must remain open throughout authentication process (L79, L111)
- Only supports HTTPS scheme (L32)

**Deprecation Status**: Module is deprecated (L16-22) and will be removed in urllib3 v2.0 due to maintenance issues.