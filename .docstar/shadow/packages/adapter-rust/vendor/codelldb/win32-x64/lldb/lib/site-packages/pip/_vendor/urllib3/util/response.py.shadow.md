# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/urllib3/util/response.py
@source-hash: 189a60dc4822f6a6
@generated: 2026-02-09T18:02:11Z

## Purpose
Utility module providing HTTP response validation and state checking functions for urllib3. Contains helpers for determining file-like object closure state, validating HTTP header parsing, and identifying HEAD request responses.

## Key Functions

### `is_fp_closed(obj)` (L9-37)
Multi-fallback approach to determine if a file-like object is closed. Attempts three detection methods in order:
1. `obj.isclosed()` - Python 3 specific method (addresses GH Issue #928)
2. `obj.closed` - Standard file-like object attribute
3. `obj.fp is None` - Container pattern check for objects like HTTPResponse
Raises `ValueError` if closure state cannot be determined.

### `assert_header_parsing(headers)` (L40-91)
Validates HTTP header parsing completeness on Python 3. Checks for parsing defects and unparsed data:
- Requires `httplib.HTTPMessage` input, raises `TypeError` otherwise
- Extracts `defects` and `get_payload` attributes from headers
- Filters out benign multipart-related defects (`StartBoundaryNotFoundDefect`, `MultipartInvariantViolationDefect`)
- Raises `HeaderParsingError` if genuine parsing issues found

### `is_response_to_head(response)` (L94-107)
Determines if HTTP response originated from HEAD request. Handles platform-specific quirks:
- Accesses private `response._method` attribute
- AppEngine compatibility: checks for integer value 3
- Standard case: compares uppercase method string to "HEAD"

## Dependencies
- `email.errors`: Multipart parsing defect classes
- `..exceptions.HeaderParsingError`: Custom exception for header parsing failures
- `..packages.six.moves.http_client`: Cross-version HTTP client compatibility

## Architectural Notes
- Defensive programming pattern with multiple fallbacks in `is_fp_closed`
- Platform abstraction handling AppEngine's non-standard method representation
- Email library integration for robust header parsing validation