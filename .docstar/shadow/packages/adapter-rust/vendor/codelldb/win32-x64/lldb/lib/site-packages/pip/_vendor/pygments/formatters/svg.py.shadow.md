# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/pygments/formatters/svg.py
@source-hash: 75038d5b2a5bcdfb
@generated: 2026-02-09T18:02:05Z

## Purpose
SVG formatter for Pygments syntax highlighting that converts tokenized code into SVG graphics output with positioned text elements and inline styling.

## Key Classes & Functions

### `SvgFormatter` (L29-188)
Primary formatter class extending `Formatter` base class. Converts syntax-highlighted tokens into SVG format with explicit positioning and styling.

**Constructor `__init__`** (L93-112):
- Processes formatter options: nowrap, font settings, positioning offsets
- Initializes line numbering configuration
- Creates style cache for performance optimization

**Core Method `format_unencoded`** (L114-171):
- Main formatting logic that processes `(tokentype, tokenstring)` tuples
- Handles SVG document structure (XML declaration, DOCTYPE, root elements)
- Implements line-by-line rendering with coordinate positioning
- Manages line numbering display when enabled
- Applies HTML escaping and space handling

**Style Resolution `_get_style`** (L173-188):
- Caches and resolves token type styling to SVG attributes
- Handles color, bold, and italic styling conversion
- Uses parent token type fallback for undefined styles

### Helper Functions

**`escape_html`** (L18-24):
- Escapes HTML/XML special characters for safe SVG output
- Handles &, <, >, quotes for proper XML formatting

## Key Dependencies
- `pip._vendor.pygments.formatter.Formatter` - Base formatter class
- `pip._vendor.pygments.token.Comment` - Token type for line number styling  
- `pip._vendor.pygments.util` - Option parsing utilities

## Configuration Options
Extensive customization through constructor options:
- **Layout**: `nowrap`, `xoffset`, `yoffset`, `ystep` for positioning
- **Typography**: `fontfamily`, `fontsize` for text styling  
- **Line Numbers**: `linenos`, `linenostart`, `linenostep`, `linenowidth`
- **Formatting**: `spacehack` for whitespace handling

## Architecture Notes
- Uses coordinate-based text positioning rather than CSS layout
- Implements custom line numbering with configurable stepping
- Maintains style cache (`_stylecache`) for performance optimization
- Supports both wrapped (full SVG document) and unwrapped (fragment) output modes
- Handles multi-line tokens by splitting on newlines and repositioning