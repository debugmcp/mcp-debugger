# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/pygments/formatters/pangomarkup.py
@source-hash: e8b2a741cf32878f
@generated: 2026-02-09T18:02:04Z

## Purpose
Pygments formatter that converts syntax-highlighted tokens into Pango markup format, suitable for rendering to SVG or other Pango-compatible outputs.

## Key Components

### Escape Function
- `escape_special_chars()` (L23-25): Escapes XML-sensitive characters (`&` and `<`) using character translation table `_escape_table` (L17-20)

### Main Formatter Class  
- `PangoMarkupFormatter(Formatter)` (L28-83): Core formatter implementing Pango markup conversion
  - **Metadata**: Name "Pango Markup", aliases ["pango", "pangomarkup"], no default file extensions (L35-37)
  - **Constructor** (L39-59): Builds style mapping from Pygments style tokens to Pango markup tags
    - Converts style properties (color, bold, italic, underline) to corresponding Pango tags
    - Stores as `(start_tag, end_tag)` tuples in `self.styles` dict
  - **Formatter method** `format_unencoded()` (L61-83): Main formatting logic
    - Wraps entire output in `<tt>` tags for monospace
    - Groups consecutive tokens of same type for efficiency
    - Applies style tags only when token type changes
    - Handles token type inheritance via `.parent` traversal (L68-69)

## Architecture Patterns
- **Token batching**: Accumulates consecutive same-type tokens before applying markup to minimize tag overhead
- **Style inheritance**: Uses Pygments token hierarchy to find applicable styles when exact match not found
- **Lazy style application**: Only writes markup tags when transitioning between different token types

## Dependencies
- Inherits from `pip._vendor.pygments.formatter.Formatter` (L11)
- Uses Pygments style system for color/formatting definitions

## Output Format
Generates Pango markup with:
- `<tt>` wrapper for monospace font
- `<span fgcolor="#...">` for colors  
- `<b>`, `<i>`, `<u>` for bold, italic, underline formatting
- Properly escaped XML entities for safe markup parsing