# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_internal/resolution/resolvelib/provider.py
@source-hash: 6dcb059d8be59ad0
@generated: 2026-02-09T18:02:02Z

**Primary Purpose**: Implements pip's provider for the resolvelib dependency resolution library, serving as the bridge between pip's internal package management and resolvelib's abstract resolution algorithm.

**Core Architecture**:
- `PipProvider` (L79-258): Main provider class implementing AbstractProvider interface
- `_get_with_identifier()` (L54-76): Utility for package name lookups with identifier normalization
- Factory pattern integration: Uses Factory (L92) for creating Requirements/Candidates

**Key Dependencies**:
- `pip._vendor.resolvelib.providers.AbstractProvider`: Base provider interface
- `.base`: Candidate, Constraint, Requirement classes
- `.factory.Factory`: Creates and manages package objects
- `.candidates.REQUIRES_PYTHON_IDENTIFIER`: Special Python version requirement handling

**Provider Methods**:
- `identify()` (L105-106): Returns package name for requirement/candidate
- `get_preference()` (L108-197): Complex preference calculation for resolution order
- `find_matches()` (L199-239): Finds candidate packages matching requirements
- `is_satisfied_by()` (L242-243): Checks if candidate satisfies requirement (cached)
- `get_dependencies()` (L245-247): Extracts dependencies from candidates

**Preference Strategy** (L108-197):
Multi-criteria sorting with priority order:
1. Requires-Python packages (highest priority)
2. Direct/explicit URLs
3. Pinned versions (== operators)
4. Backtracking causes
5. Dependency depth (closer to user requests)
6. User-specified order
7. Constrained versions (with operators)
8. Alphabetical (consistency)

**State Management**:
- `_known_depths` (L103): Tracks dependency depths for preference calculation
- `_constraints`, `_user_requested`: User-specified constraints and packages
- `_upgrade_strategy`, `_ignore_dependencies`: Resolution behavior flags

**Notable Patterns**:
- LRU caching on satisfaction checks (L241)
- Infinite depth handling for unknown dependencies
- HACK comment (L68-72) for identifier parsing workaround
- Upgrade eligibility logic based on strategy ("eager"/"only-if-needed")

**Critical Invariants**:
- Preference tuple structure must maintain sort order consistency
- Identifier normalization handles extras notation "[EXTRAS]"
- Depth calculation prevents infinite recursion in dependency trees