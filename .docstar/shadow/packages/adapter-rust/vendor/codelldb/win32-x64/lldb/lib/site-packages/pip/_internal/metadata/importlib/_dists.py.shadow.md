# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_internal/metadata/importlib/_dists.py
@source-hash: b01d9e87076acac8
@generated: 2026-02-09T18:02:02Z

## Purpose
Provides distribution metadata handling for pip's importlib-based metadata backend. Implements concrete distribution classes that wrap `importlib.metadata.Distribution` for both wheel files and installed packages, enabling pip to read package metadata consistently across different installation formats.

## Key Classes

### WheelDistribution (L36-93)
Custom `importlib.metadata.Distribution` subclass for reading metadata from wheel files. Eagerly loads entire metadata directory into memory to avoid keeping ZipFile handles open.

**Key Methods:**
- `from_zipfile()` (L55-73): Creates instance from wheel file, parsing metadata directory
- `read_text()` (L81-92): Reads metadata files with UTF-8 decoding and error handling
- `iterdir()` (L75-79): Provides directory iteration for metadata paths

### Distribution (L95-228) 
Main distribution wrapper implementing `BaseDistribution` interface. Handles both installed packages and wheel files through composition with `importlib.metadata.Distribution`.

**Factory Methods:**
- `from_directory()` (L107-110): Creates from installed package directory
- `from_metadata_file_contents()` (L113-127): Creates from raw metadata bytes via temp directory
- `from_wheel()` (L130-136): Creates from wheel file using `WheelDistribution`

**Core Properties:**
- `canonical_name` (L169-171): Normalized package name with performance optimization
- `version`/`raw_version` (L174-179): Version parsing and access
- Location properties (L139-154): Package installation paths

**Metadata Operations:**
- `iter_dependencies()` (L217-228): Dependency parsing with extras support and marker evaluation
- `iter_provided_extras()` (L211-215): Extra feature enumeration
- `iter_entry_points()` (L199-201): Entry point discovery
- `read_text()` (L193-197): Metadata file reading with error handling

## Key Dependencies
- `importlib.metadata`: Core metadata reading functionality
- `pip._vendor.packaging`: Requirement parsing and version handling  
- `pip._internal.utils.wheel`: Wheel file parsing utilities
- `pip._internal.metadata.base`: Abstract base classes

## Architecture Notes
- Uses composition over inheritance to wrap `importlib.metadata.Distribution`
- Separates wheel-specific logic into dedicated `WheelDistribution` class
- Implements performance optimization in `_get_dist_name_from_location()` (L156-166) to avoid metadata parsing when possible
- Handles encoding errors gracefully with `UnsupportedWheel` exceptions
- Supports temporary metadata creation for in-memory package data

## Critical Invariants
- `WheelDistribution` eagerly loads all metadata to avoid file handle lifecycle issues
- Path normalization applied consistently via `normalize_path()`
- UTF-8 encoding assumed for all metadata files with explicit error handling
- Marker evaluation context includes empty extra for baseline dependencies