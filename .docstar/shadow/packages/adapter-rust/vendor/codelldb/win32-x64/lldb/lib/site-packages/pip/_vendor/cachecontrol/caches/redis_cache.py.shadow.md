# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/cachecontrol/caches/redis_cache.py
@source-hash: f6b9aac2d62efe58
@generated: 2026-02-09T18:02:00Z

## Purpose
Redis-based cache implementation for HTTP caching in pip's vendored cachecontrol library. Provides persistent caching using Redis as the storage backend.

## Core Components

### RedisCache Class (L16-48)
Main cache implementation extending BaseCache interface:
- **Constructor (L17-18)**: Accepts Redis connection instance with bytes typing
- **get() (L20-21)**: Retrieves cached value by key, returns bytes or None
- **set() (L23-35)**: Stores key-value pairs with optional expiration handling
- **delete() (L37-38)**: Removes single cache entry
- **clear() (L40-44)**: Flushes entire cache database
- **close() (L46-48)**: No-op due to Redis connection pooling

## Key Dependencies
- `BaseCache` from pip._vendor.cachecontrol.cache (L10)
- `Redis` type from redis library (L13, TYPE_CHECKING)
- `datetime`, `timezone` for expiration handling (L7)

## Implementation Details

### Expiration Logic (L26-35)
Three expiration modes:
1. **No expiration**: Uses `conn.set()` for permanent storage
2. **Datetime expiration**: Calculates seconds until expiry, handles timezone-aware/naive datetime conversion
3. **Integer expiration**: Direct seconds value passed to `conn.setex()`

### Cache Operations
- All operations delegate directly to underlying Redis connection
- Keys are strings, values are bytes
- Clear operation iterates through all keys for deletion (potentially expensive)

## Architectural Notes
- Follows adapter pattern wrapping Redis client
- Type hints indicate bytes-only value storage
- Connection management delegated to Redis client's pooling
- Timezone handling ensures consistent UTC-based expiration calculations