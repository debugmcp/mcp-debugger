# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/urllib3/contrib/appengine.py
@source-hash: 551ebc780544d77e
@generated: 2026-02-09T18:02:14Z

## Primary Purpose
Google App Engine adapter for urllib3 that provides HTTP connection management using App Engine's URLFetch service instead of socket-based connections. Enables urllib3 compatibility within GAE sandbox environments with URLFetch-specific limitations and error handling.

## Core Architecture

### Custom Exception Classes
- **AppEnginePlatformWarning** (L71-72): HTTPWarning subclass for GAE-specific warnings
- **AppEnginePlatformError** (L75-76): HTTPError subclass for GAE platform limitations

### Main Connection Manager
- **AppEngineManager** (L79-306): Primary connection manager class inheriting from RequestMethods
  - Replaces standard socket-based HTTP with Google App Engine's URLFetch API
  - Handles URLFetch service limitations (10MB request, 32MB response limits)
  - Manages retries, redirects, and timeout conversion for URLFetch compatibility

## Key Methods & Functionality

### Initialization & Configuration
- **__init__** (L99-123): Validates URLFetch availability, sets up retries and SSL validation
- **__enter__/__exit__** (L124-129): Context manager support for resource management

### Core HTTP Operations  
- **urlopen** (L131-243): Main HTTP request method
  - Converts urllib3 requests to URLFetch API calls (L147-156)
  - Handles URLFetch-specific exceptions (L157-188)
  - Manages redirects and retries with URLFetch constraints (L193-243)

### Response Processing
- **_urlfetch_response_to_http_response** (L245-279): Converts URLFetch responses to HTTPResponse objects
  - Handles GAE production deflate encoding quirks (L247-253)
  - Removes chunked transfer encoding headers (L255-261)
  - Creates HTTPResponse with BytesIO body wrapper (L263-279)

### Utility Methods
- **_get_absolute_timeout** (L281-292): Converts Timeout objects to URLFetch deadline format
- **_get_retries** (L294-305): Validates and converts retry configurations for URLFetch limitations

## Dependencies & Imports
- **google.appengine.api.urlfetch**: URLFetch service (optional import L62-65)
- **urllib3 core modules**: exceptions, response, retry, timeout utilities (L47-59)
- **_appengine_environ**: Environment detection utilities (L60)

## Public API Aliases
Environment detection functions aliased from _appengine_environ module (L308-314):
- `is_appengine`, `is_appengine_sandbox`, `is_local_appengine`, `is_prod_appengine`, `is_prod_appengine_mvms`

## Critical Constraints
- URLFetch request size limit: 10MB (enforced L161-166)
- URLFetch response size limit: 32MB (enforced L174-179) 
- Limited HTTP method support (enforced L184-187)
- No granular timeout control - only total timeout (L285-291)
- No separate connect/read/redirect retry controls (L298-303)