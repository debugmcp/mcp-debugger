# packages/adapter-rust/vendor/codelldb/win32-x64/lldb/lib/site-packages/pip/_vendor/pygments/formatters/
@generated: 2026-02-09T18:16:21Z

## Purpose

The `formatters` directory implements Pygments' output formatting system, converting syntax-highlighted token streams into various display formats including HTML, terminal colors, images, documents, and markup languages. This is the core output layer of the Pygments syntax highlighting library.

## Architecture Overview

**Plugin-Based Discovery System**: The module uses a centralized registry pattern with lazy loading:
- `__init__.py` serves as the main entry point with factory functions and formatter discovery
- `_mapping.py` contains the auto-generated formatter registry mapping class names to module locations
- Dynamic loading via `_load_formatters()` reduces startup time by importing formatters on-demand

**Common Base Pattern**: All formatters inherit from `pip._vendor.pygments.formatter.Formatter` and implement the core interface:
- `format_unencoded(tokensource, outfile)` - main formatting method
- Class-level metadata: `name`, `aliases`, `filenames` attributes
- Constructor accepting style and option parameters

## Key Components

### Core Entry Points (`__init__.py`)
- `get_formatter_by_name(alias, **options)` - Primary factory function for creating formatters by alias
- `get_formatter_for_filename(filename, **options)` - Filename-based formatter selection
- `get_all_formatters()` - Discovery of all available formatters (built-in + plugins)
- `find_formatter_class(alias)` - Low-level class lookup
- `load_formatter_from_file(filename, formattername, **options)` - Dynamic loading from custom files

### Formatter Categories

**Web/Markup Output**:
- `HtmlFormatter` - Rich HTML with CSS classes, line numbers, highlighting, full document generation
- `SvgFormatter` - SVG graphics with positioned text elements and inline styling
- `BBCodeFormatter` - Forum-compatible BBCode markup
- `PangoMarkupFormatter` - Pango markup for SVG/Cairo rendering

**Terminal Output**:
- `TerminalFormatter` - Basic ANSI colors (16-color)
- `Terminal256Formatter` - 256-color terminal support with RGB approximation
- `TerminalTrueColorFormatter` - True-color (24-bit) terminal output
- `IRCFormatter` - IRC color codes with control sequences

**Document Formats**:
- `LatexFormatter` - LaTeX markup with fancyvrb integration and full document support
- `RtfFormatter` - Rich Text Format for Microsoft Word compatibility

**Image Output** (`img.py`):
- `ImageFormatter` - Base PIL-based pixmap generation (PNG default)
- `GifImageFormatter`, `JpgImageFormatter`, `BmpImageFormatter` - Format-specific variants
- Cross-platform font management with automatic fallbacks

**Specialized/Utility**:
- `NullFormatter` - Plain text pass-through
- `RawTokenFormatter` - Token stream serialization with compression support
- `TestcaseFormatter` - Python test case generation
- `GroffFormatter` - Groff/troff markup for manual pages

## Data Flow

1. **Token Input**: All formatters accept `tokensource` (iterator of `(tokentype, text)` tuples)
2. **Style Resolution**: Token types mapped to visual styles via Pygments style system
3. **Format-Specific Rendering**: Each formatter converts styles to target format's markup/codes
4. **Output Generation**: Formatted content written to `outfile` or returned as string

## Key Patterns

**Token Type Hierarchy**: Formatters walk up token type parent chains when exact style matches not found, enabling inheritance-based styling.

**Wrapper Generators** (HTML): Pipeline architecture where multiple formatting passes (line numbers → highlighting → anchors → containers) compose via generator chains.

**Lazy Loading & Caching**: 
- Formatter classes loaded on-demand via `_load_formatters()`
- Style definitions cached after first computation
- Pattern matching uses compiled regex cache

**Cross-Platform Abstraction**: Image formatter handles platform-specific font resolution (Windows registry, macOS directories, Unix fontconfig) with consistent fallbacks.

**Template-Based Output**: Document formatters (LaTeX, RTF, HTML full mode) use string templates with parameter substitution for complete document generation.

## Integration Points

- **Style System**: All formatters integrate with Pygments style definitions for consistent theming
- **Token System**: Consumes standardized token streams from Pygments lexers
- **Plugin Architecture**: Supports third-party formatter plugins via `find_plugin_formatters()`
- **Option System**: Consistent option parsing using `pygments.util` utilities (`get_bool_opt`, `get_int_opt`, etc.)

## Error Handling

- `ClassNotFound` exceptions for missing formatters with descriptive messages
- Graceful degradation (font fallbacks, missing PIL handling)
- Format-specific validation (binary output requirements, encoding constraints)

This directory provides the complete output formatting capabilities for the Pygments syntax highlighting system, supporting everything from simple terminal display to publication-ready documents and images.