# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/compat.py
@source-hash: 724905bde0626108
@generated: 2026-02-09T18:00:24Z

**Primary Purpose**: Provides cross-platform and cross-version compatibility utilities for pip's internal operations, handling differences between Python versions, platforms, and distributions.

**Key Functions**:

- `has_tls() -> bool` (L16-26): Detects TLS/SSL support by attempting to import `_ssl` module, falling back to checking PyOpenSSL availability via urllib3
- `get_path_uid(path: str) -> int` (L29-53): Safely retrieves file UID without following symlinks, with platform-specific implementations for AIX/Jython vs systems with `O_NOFOLLOW` support
- `open_text_resource()` (L58-67): Version-aware wrapper around importlib.resources for opening text resources, adapting to API changes in Python 3.11+

**Key Constants**:
- `stdlib_pkgs` (L75): Set of standard library packages that should not be considered as "installed" packages
- `WINDOWS` (L79): Cross-implementation Windows platform detection for CPython and IronPython

**Architecture Patterns**:
- Version-conditional function definition (L58-67) to handle importlib.resources API deprecation
- Platform-specific code paths with fallbacks for older/limited platforms
- Security-conscious file operations avoiding TOCTOU vulnerabilities where possible

**Dependencies**:
- Standard library: `importlib.resources`, `logging`, `os`, `sys`
- Internal: `pip._vendor.urllib3.util.IS_PYOPENSSL`

**Critical Constraints**:
- `get_path_uid()` explicitly refuses to follow symlinks for security reasons
- File operations use `O_NOFOLLOW` when available to prevent symlink attacks
- Maintains compatibility with AIX and Jython limitations