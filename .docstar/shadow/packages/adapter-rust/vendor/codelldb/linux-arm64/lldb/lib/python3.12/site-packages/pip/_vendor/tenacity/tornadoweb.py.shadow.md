# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/tornadoweb.py
@source-hash: a68dbdfc5d4cb7ca
@generated: 2026-02-09T18:01:01Z

## Primary Purpose
Provides Tornado web framework integration for the Tenacity retry library, enabling asynchronous retry logic using Tornado's coroutine system.

## Key Components

### TornadoRetrying Class (L31-59)
- **Purpose**: Tornado-specific retry mechanism that extends BaseRetrying for async operations
- **Constructor (L32-34)**: Accepts optional `sleep` callable (defaults to `gen.sleep`) and forwards kwargs to parent
- **`__call__` method (L36-59)**: Main retry execution logic as a Tornado coroutine
  - Returns a Generator that yields retry attempts or sleep operations
  - Handles both successful results and exceptions during retry attempts

## Key Dependencies
- `pip._vendor.tenacity`: Core retry functionality (BaseRetrying, DoAttempt, DoSleep, RetryCallState)
- `tornado.gen`: Tornado's coroutine decorators and utilities
- `tornado.concurrent.Future`: Type hints for async operations (TYPE_CHECKING only)

## Architecture Pattern
Implements the adapter pattern to integrate Tenacity's synchronous retry logic with Tornado's asynchronous event loop:
1. Uses `@gen.coroutine` decorator for async compatibility
2. Yields control back to event loop during sleep periods (`yield self.sleep(do)` L57)
3. Yields function execution to allow async operations (`yield fn(*args, **kwargs)` L50)

## Retry Flow Logic (L46-59)
1. Creates RetryCallState to track attempt history
2. Enters infinite loop calling `self.iter(retry_state)`
3. On DoAttempt: executes target function and captures result/exception
4. On DoSleep: yields to sleep function for backoff delay
5. Otherwise: returns final result via `gen.Return`

## Type System
- Uses generic `_RetValT` TypeVar (L28) for return value type preservation
- Complex union types for functions returning either Generators or Futures
- Full typing support for both sync and async callable targets