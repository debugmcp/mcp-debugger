# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/provider.py
@source-hash: 6dcb059d8be59ad0
@generated: 2026-02-09T17:57:49Z

## Primary Purpose
This file implements `PipProvider`, the main adapter class that bridges pip's dependency resolution with the ResolveLib library. It translates pip's internal requirement/candidate system into ResolveLib's abstract provider interface for dependency resolution.

## Key Components

### PipProvider Class (L79-258)
The core provider implementation that handles:
- **__init__** (L90-103): Accepts factory, constraints, dependency settings, upgrade strategy, and user-requested packages. Initializes depth tracking with `collections.defaultdict(lambda: math.inf)`
- **identify** (L105-106): Returns the canonical name for requirements/candidates
- **get_preference** (L108-197): Complex preference scoring for resolution order based on:
  - Direct requirements (explicit URLs)
  - Pinned versions (== or ===)
  - Dependency depth inference
  - User request order
  - Backtrack cause analysis
  - Returns tuple for sorting priority
- **find_matches** (L199-239): Finds candidate packages using factory, handles upgrade strategies ("eager", "only-if-needed")
- **is_satisfied_by** (L241-243): LRU-cached requirement satisfaction check
- **get_dependencies** (L245-247): Retrieves candidate dependencies, respects `--no-deps` flag
- **is_backtrack_cause** (L249-258): Static method identifying if package caused backtracking

### Utility Functions
- **_get_with_identifier** (L54-76): Helper for package name lookup with extras handling (e.g., "package[extra]" â†’ "package")

## Dependencies and Architecture
- Extends `AbstractProvider` from ResolveLib
- Uses `Factory` for creating Requirements/Candidates
- Imports base classes: `Candidate`, `Constraint`, `Requirement`
- Integrates with pip's finder/preparer through factory pattern

## Key Patterns
- **Preference-based resolution**: Complex tuple-based sorting for dependency order
- **Lazy evaluation**: Uses iterators and generators for candidate discovery
- **Caching**: LRU cache on satisfaction checks for performance
- **Depth tracking**: Infers dependency tree depth for resolution prioritization

## Critical Constraints
- Provider is stateless except for depth tracking
- Must handle special "Requires-Python" identifier
- Upgrade strategy affects candidate selection
- Backtracking analysis influences resolution order