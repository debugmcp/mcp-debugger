# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/glibc.py
@source-hash: 0b28d4cf4c7f034d
@generated: 2026-02-09T18:00:27Z

**Purpose**: Detects GNU C Library (glibc) version on Linux systems with fallback mechanisms.

**Key Functions**:
- `glibc_version_string()` (L6-8): Main entry point returning glibc version string or None. Uses failover pattern: confstr â†’ ctypes.
- `glibc_version_string_confstr()` (L11-28): Primary implementation using `os.confstr("CS_GNU_LIBC_VERSION")`. Skips Windows (L17), parses "glibc X.Y" format (L24), handles exceptions gracefully (L25-27).
- `glibc_version_string_ctypes()` (L31-61): Fallback using ctypes to call `gnu_get_libc_version` via `dlopen(NULL)`. Handles import errors, missing symbols, and string encoding for Python 2/3 compatibility.
- `libc_ver()` (L81-91): Public API returning tuple `("glibc", version)` or `("", "")` on failure.

**Dependencies**: 
- `os` for confstr access
- `ctypes` (optional) for direct libc interaction
- `sys` for platform detection

**Architecture**: Two-tier detection strategy prioritizing speed (confstr) over reliability (ctypes). Designed to replace unreliable `platform.libc_ver()` which returns incorrect versions (documented issue L64-80).

**Return Patterns**:
- Success: version string (e.g., "2.17") or ("glibc", "2.17") tuple
- Failure: None or ("", "") tuple
- Platform incompatibility: None (Windows)

**Error Handling**: Comprehensive exception catching for AttributeError, OSError, ValueError, ImportError without propagation.