# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/sphinxext.py
@source-hash: 5c81f107030c3366
@generated: 2026-02-09T18:00:45Z

## Primary Purpose
Sphinx extension that automatically generates documentation for Pygments lexers, formatters, and filters. Creates reStructuredText documentation from Pygments component metadata and docstrings.

## Key Components

### Template Constants (L20-55)
- `MODULEDOC`: reStructuredText template for module documentation with heading underlines
- `LEXERDOC`: Class template with short names, filenames, MIME types, and docstring
- `FMTERDOC`: Formatter template with short names and filenames
- `FILTERDOC`: Filter template with name and docstring

### PygmentsDoc Directive (L58-235)
Main Sphinx directive class inheriting from `docutils.parsers.rst.Directive`. Processes single required argument to determine documentation type.

#### Core Methods
- `run()` (L69-86): Entry point that routes to appropriate documentation method based on argument ('lexers', 'formatters', 'filters', 'lexers_overview')
- `document_lexers_overview()` (L88-146): Generates tabular overview of all lexers with names, extensions, aliases, and class references
- `document_lexers()` (L148-205): Creates detailed lexer documentation with module grouping and example code blocks
- `document_formatters()` (L207-223): Documents formatter classes with metadata
- `document_filters()` (L225-235): Documents filter classes

#### Key Features
- Tracks source filenames via `self.filenames` for Sphinx dependency management (L84-85)
- Dynamically imports Pygments components using `__import__()` 
- Handles byte/string docstring encoding conversion
- Injects example code blocks from `_example` attribute and test files (L168-184)
- Escapes special reStructuredText characters in filenames and extensions

### Setup Function (L238-239)
Registers the `pygmentsdoc` directive with Sphinx application.

## Dependencies
- **docutils**: Core document processing (nodes, ViewList, Directive)
- **sphinx.util.nodes**: For nested reStructuredText parsing
- **pip._vendor.pygments**: Accesses lexer/formatter/filter mappings and classes
- **inspect, pathlib**: For example file resolution

## Architecture Patterns
- Template-based documentation generation using string formatting
- Dynamic module import pattern for component discovery
- Sphinx directive pattern with argument-based routing
- File dependency tracking for incremental builds

## Critical Invariants
- All generated documentation must be valid reStructuredText
- Source files must be tracked for Sphinx dependency resolution
- Docstrings require UTF-8 encoding handling for bytes objects
- Module docstrings must exist and follow expected format (first line extraction on L200)