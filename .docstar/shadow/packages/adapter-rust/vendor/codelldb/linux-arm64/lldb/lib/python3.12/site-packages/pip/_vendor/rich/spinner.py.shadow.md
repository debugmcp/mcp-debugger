# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/spinner.py
@source-hash: d799280a61740d07
@generated: 2026-02-09T18:01:02Z

This file implements a terminal spinner animation widget for the Rich library.

## Primary Purpose
Provides a `Spinner` class that renders animated ASCII spinners with optional text, integrated with Rich's rendering system for terminal display.

## Key Components

### Spinner Class (L13-114)
Core animation widget implementing Rich's renderable protocol.

**Constructor (__init__, L26-48):**
- Accepts spinner name, text, style, and speed parameters
- Loads frame data from `SPINNERS` dictionary via `_spinners` module (L35)
- Converts string text to Text objects via `Text.from_markup()` (L38-40)
- Initializes timing state: `start_time`, `frame_no_offset`, `_update_speed`

**Rich Protocol Methods:**
- `__rich_console__()` (L49-52): Delegates to `render()` with current console time
- `__rich_measure__()` (L54-58): Returns measurement of rendered content at time=0

**Core Rendering (render(), L60-92):**
- Calculates current frame index using elapsed time, speed, and interval (L72-74)
- Handles dynamic speed updates by adjusting frame offset and start time (L79-83)
- Returns either standalone frame or composite layout:
  - No text: returns frame Text object (L85-86)
  - String/Text: assembles frame + space + text (L87-88)
  - Complex renderable: uses Table.grid layout (L90-92)

**Dynamic Updates (update(), L94-113):**
- Allows modification of text, style, and speed during animation
- Speed changes are deferred via `_update_speed` to maintain smooth transitions

## Dependencies
- `_spinners.SPINNERS`: Dictionary of spinner definitions with frames and intervals
- `measure.Measurement`: For size calculation
- `table.Table`: For complex layout rendering
- `text.Text`: For text rendering and markup conversion

## Architecture Patterns
- **Rich Protocol Compliance**: Implements `__rich_console__()` and `__rich_measure__()`
- **Time-based Animation**: Uses elapsed time calculation rather than frame counting
- **Lazy Initialization**: `start_time` set on first render call
- **Deferred Updates**: Speed changes applied during next render to avoid timing disruption

## Demo Module (L116-137)
Self-contained demonstration that displays all available spinners in a live-updating grid layout using `Live`, `Panel`, and `Columns` components.

## Critical Constraints
- Spinner names must exist in `SPINNERS` dictionary (raises KeyError otherwise)
- Time parameter in `render()` must be monotonically increasing for smooth animation
- Frame intervals in spinner definitions expected in milliseconds