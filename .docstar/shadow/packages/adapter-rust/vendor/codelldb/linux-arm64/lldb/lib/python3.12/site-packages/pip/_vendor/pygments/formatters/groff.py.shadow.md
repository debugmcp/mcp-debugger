# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/groff.py
@source-hash: c72f197f7b573a8e
@generated: 2026-02-09T17:57:47Z

**Purpose**: Pygments formatter that outputs syntax-highlighted code using groff markup language, supporting color, font styling, line numbers, and text wrapping.

**Core Class**: 
- `GroffFormatter` (L18-169): Main formatter class inheriting from Pygments' `Formatter` base class

**Key Configuration Options** (L45-52):
- `monospaced`: Boolean flag for monospace vs proportional fonts
- `linenos`: Boolean flag to enable/disable line numbering  
- `wrap`: Integer for line wrapping at specified character count (0 = disabled)
- Internal state: `_lineno`, `_linelen` for tracking position

**Style Processing**:
- `_make_styles()` (L58-78): Converts Pygments style definitions into groff escape sequences, handling color (`\m[color]`), bold (`\f[CB]` or `\f[B]`), italic (`\f[CI]` or `\f[I]`), and background color (`\M[color]`)
- `_define_colors()` (L81-88): Outputs `.defcolor` definitions for all colors used in the style

**Text Processing Methods**:
- `_escape_chars()` (L119-135): Escapes groff special characters using Unicode escapes, handles both ASCII and Unicode characters
- `_wrap_line()` (L96-116): Implements line wrapping logic with proper indentation for line numbers
- `_write_lineno()` (L91-93): Outputs formatted line numbers

**Main Formatting**:
- `format_unencoded()` (L138-169): Core method that processes token stream, applies styles, handles line breaks, and coordinates all formatting features

**Dependencies**:
- `pip._vendor.pygments.formatter.Formatter`: Base class
- `pip._vendor.pygments.util`: Utility functions for option parsing
- `math`: Used for line wrapping calculations

**Output Format**: Produces groff/troff markup with `.nf`/`.fi` no-fill blocks, font changes, and color definitions suitable for processing by groff document formatters.