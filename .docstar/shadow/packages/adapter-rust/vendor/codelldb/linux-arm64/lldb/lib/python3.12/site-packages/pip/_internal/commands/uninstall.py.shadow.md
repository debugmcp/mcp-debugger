# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/uninstall.py
@source-hash: ee9391ede9caefa8
@generated: 2026-02-09T18:00:19Z

## Purpose
Implements pip's `uninstall` command functionality for removing installed Python packages. Handles both individual package names and requirements files, with safety checks for externally managed environments and system protection.

## Key Components

### UninstallCommand Class (L26-114)
Main command class inheriting from `Command` and `SessionCommandMixin`. Provides complete uninstall functionality with options parsing and execution.

**Key Methods:**
- `add_options()` (L41-63): Configures command-line options including `-r/--requirement` for requirements files, `-y/--yes` for auto-confirmation, and safety options for root users and externally managed environments
- `run()` (L65-114): Core execution logic that processes package names and requirements files, performs safety checks, and executes uninstallation

## Execution Flow

### Requirements Processing (L68-96)
1. **Command line packages** (L69-82): Converts package names to InstallRequirement objects using `install_req_from_line`, canonicalizes names, warns about invalid requirements
2. **Requirements files** (L83-91): Parses requirements files using `parse_requirements`, converts to InstallRequirement objects
3. **Validation** (L92-96): Ensures at least one package specified for uninstallation

### Safety Checks (L98-103)
- **Externally managed environments** (L98-99): Checks if environment allows modifications unless overridden
- **Windows pip protection** (L101-103): Prevents pip self-modification issues on Windows

### Uninstallation Execution (L105-114)
- Iterates through requirements, calls `req.uninstall()` with confirmation and verbosity settings
- Commits uninstallation pathset if successful
- Issues root user warnings if configured

## Dependencies
- `pip._vendor.packaging.utils.canonicalize_name`: Package name normalization
- `pip._internal.req`: Requirement parsing and construction utilities
- `pip._internal.utils.misc`: Safety check utilities for external management, Windows protection, and root warnings
- `pip._internal.cli`: Command infrastructure and option definitions

## Notable Patterns
- Uses dictionary with canonicalized names as keys to deduplicate requirements
- Implements two-phase uninstallation (pathset creation + commit) for transactional behavior
- Provides multiple safety layers to prevent system damage or permission issues