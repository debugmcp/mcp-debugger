# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/style.py
@source-hash: de18a8707ff837cb
@generated: 2026-02-09T18:01:05Z

## Terminal Style System for Rich Library

Core module implementing terminal text styling with ANSI escape codes, color management, and attribute handling.

### Primary Classes

**Style (L31-760)**: Main class representing terminal text styles with colors, attributes (bold, italic, etc.), and links. Uses bitfield operations for efficient attribute storage.

Key attributes:
- `_color/_bgcolor` (L58-59): Optional foreground/background Color objects  
- `_attributes/_set_attributes` (L60-61): Bitfields for style attributes and which are explicitly set
- `_link/_link_id` (L71-72): URL links and unique identifiers
- `_meta` (L64): Serialized metadata dictionary

**_Bit (L16-28)**: Descriptor for bit-based style attribute access using bitwise operations on `_attributes` field.

**StyleStack (L765-796)**: Stack-based style combination system for nested styling contexts.

### Key Methods

**Style.__init__ (L122-197)**: Constructor accepting all style parameters, uses bitwise operations to encode attributes efficiently.

**Style.parse (L497-562)**: Parses string style definitions like "bold red on blue", handles "not" negation and color parsing.

**Style._make_ansi_codes (L335-376)**: Generates ANSI escape sequences from style attributes using SGR parameters.

**Style.render (L694-718)**: Applies style to text with ANSI codes, handles hyperlinks via OSC 8 sequences.

**Style._add (L733-755)**: Combines two styles with proper attribute precedence (cached with LRU).

### Architecture Patterns

- **Bitfield Optimization**: Uses single integers to store multiple boolean attributes efficiently
- **Lazy Evaluation**: ANSI codes and string representations computed on-demand and cached
- **Descriptor Pattern**: `_Bit` descriptors provide clean attribute access while maintaining bitfield storage
- **Factory Methods**: Multiple `classmethod` constructors for different creation patterns
- **Immutability**: Style objects are effectively immutable; operations return new instances

### Style Definition Format

String format: `"[not] attribute [not] attribute ... [color] [on bgcolor] [link url]"`
- Attributes: bold, italic, underline, dim, strike, etc. with optional shorthand (b, i, u, etc.)
- Colors: Any format supported by Color.parse()
- Negation: "not bold" explicitly disables attributes

### Dependencies

- `.color`: Color parsing and manipulation (L8)
- `.errors`: StyleSyntaxError for parsing failures (L7)  
- `.terminal_theme`: Default terminal color schemes (L10)
- `marshal`: Efficient metadata serialization (L3)
- `functools.lru_cache`: Method result caching (L2)

### Constants

- `NULL_STYLE` (L762): Singleton empty style for performance
- `_style_map` (L81-95): Maps bit positions to SGR parameter codes
- `STYLE_ATTRIBUTES` (L97-120): Maps attribute names to canonical forms with shortcuts