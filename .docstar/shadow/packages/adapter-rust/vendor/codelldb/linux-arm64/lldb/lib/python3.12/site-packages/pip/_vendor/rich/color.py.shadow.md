# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/color.py
@source-hash: 6c24404d57517b92
@generated: 2026-02-09T18:00:57Z

## Primary Purpose

Rich library color system implementation providing terminal color abstraction, parsing, and downgrading capabilities across different color systems (standard 16-color, 8-bit 256-color, truecolor 24-bit, Windows).

## Core Components

### Enums and Constants
- **ColorSystem (L21-34)**: IntEnum defining 4 terminal color systems (STANDARD, EIGHT_BIT, TRUECOLOR, WINDOWS)
- **ColorType (L36-47)**: IntEnum categorizing color storage types (DEFAULT, STANDARD, EIGHT_BIT, TRUECOLOR, WINDOWS)  
- **ANSI_COLOR_NAMES (L49-285)**: Comprehensive dict mapping 200+ color names to ANSI codes
- **RE_COLOR (L292-299)**: Compiled regex for parsing hex (#rrggbb), color(n), and rgb(r,g,b) formats

### Main Color Class
- **Color (L303-568)**: NamedTuple representing terminal colors with:
  - `name`: String identifier
  - `type`: ColorType enum value
  - `number`: Optional ANSI color code (0-255)
  - `triplet`: Optional RGB ColorTriplet for truecolor

### Key Methods
- **parse() (L432-482)**: Cached classmethod parsing string color definitions (hex, named, rgb, color codes)
- **get_truecolor() (L349-378)**: Converts any color to RGB triplet using terminal theme
- **get_ansi_codes() (L484-510)**: Cached method generating ANSI escape sequences for foreground/background
- **downgrade() (L512-568)**: Cached method converting colors to lower capability color systems

### Factory Methods
- **from_ansi() (L380-394)**: Creates Color from 8-bit ANSI number
- **from_triplet() (L396-406)**: Creates truecolor from ColorTriplet
- **from_rgb() (L408-420)**: Creates truecolor from RGB float components
- **default() (L422-429)**: Returns default terminal color

### Utility Functions  
- **parse_rgb_hex() (L571-577)**: Converts 6-character hex string to ColorTriplet
- **blend_rgb() (L580-591)**: Blends two RGB colors with cross-fade factor
- **ColorParseError (L288-289)**: Exception for invalid color parsing

## Dependencies
- Standard library: platform, re, colorsys, enum, functools, typing
- Rich internal: _palettes, color_triplet, repr, terminal_theme
- Conditional imports for TYPE_CHECKING

## Architectural Patterns
- Extensive use of LRU caching (@lru_cache) for performance on parse(), get_ansi_codes(), downgrade()
- NamedTuple for immutable color representation with rich display support
- Factory pattern for color creation from various sources
- Strategy pattern for color system downgrading with complex RGB-to-8bit conversion algorithms
- Windows platform detection for color system selection

## Critical Invariants
- Color numbers must be 0-255 for ANSI codes
- RGB components must be 0-255 
- Grayscale detection uses 15% saturation threshold for 8-bit downgrading
- Color downgrading preserves visual similarity through HLS color space conversion