# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/cookies.py
@source-hash: 6cd8be8aa123e0d3
@generated: 2026-02-09T18:00:57Z

## Purpose
Provides cookie handling compatibility layer between the requests library and Python's standard `http.cookiejar.CookieJar`. Enables requests to work with HTTP cookies by adapting the cookiejar interface and providing a dict-like interface for cookie manipulation.

## Key Classes

### MockRequest (L23-101)
Adapter class that wraps a `requests.Request` to mimic `urllib2.Request` interface required by `http.cookiejar.CookieJar`. Enables cookie policies to work correctly by providing expected methods like `get_host()`, `get_type()`, and `get_full_url()`. Handles Host header reconstruction when present. Key methods:
- `__init__(request)` (L35): Initialize with requests.Request object
- `get_full_url()` (L49): Returns URL, reconstructing with Host header if present
- `add_unredirected_header()` (L84): Adds headers for cookie management
- `get_new_headers()` (L87): Returns headers added during cookie processing

### MockResponse (L103-122)
Minimal adapter wrapping `httplib.HTTPMessage` to expose parsed HTTP headers in the format expected by `http.cookiejar`. Provides `info()` and `getheaders()` methods.

### RequestsCookieJar (L176-438)
Primary cookie container extending `cookielib.CookieJar` with `MutableMapping` interface. Provides dict-like operations while maintaining full CookieJar functionality. Thread-safe and pickleable.

Key dict-like methods:
- `get()`, `set()` (L194, L206): Enhanced with domain/path parameters
- `__getitem__()`, `__setitem__()` (L327, L336): Standard dict access
- `keys()`, `values()`, `items()` (L234, L251, L268): Dict interface methods

Utility methods:
- `list_domains()`, `list_paths()` (L277, L285): Domain/path enumeration
- `get_dict()` (L306): Extract filtered dict representation
- `_find()`, `_find_no_duplicates()` (L366, L386): Internal cookie lookup
- `copy()` (L428): Deep copy with policy preservation

### CookieConflictError (L170-173)
Exception raised when multiple cookies match lookup criteria in RequestsCookieJar operations.

## Key Functions

### extract_cookies_to_jar() (L124-137)
Extracts cookies from urllib3.HTTPResponse into CookieJar using MockRequest/MockResponse adapters.

### get_cookie_header() (L140-148)
Generates Cookie header string for outgoing requests using CookieJar.

### remove_cookie_by_name() (L151-167)
Utility for removing cookies by name with optional domain/path filtering.

### create_cookie() (L455-489)
Factory function creating `http.cookiejar.Cookie` objects from parameters. Sets sensible defaults for unspecified attributes.

### morsel_to_cookie() (L492-518)
Converts `http.cookies.Morsel` objects to `Cookie` objects, handling expiration time parsing.

### cookiejar_from_dict() (L521-539)
Creates RequestsCookieJar from dictionary of name-value pairs.

### merge_cookies() (L542-560)
Merges cookies from dict or CookieJar into existing CookieJar.

## Dependencies
- Standard library: `calendar`, `copy`, `time`, `threading`
- Internal: `._internal_utils.to_native_string`
- Compatibility layer: `.compat` for cross-Python version support

## Architectural Notes
- Uses adapter pattern extensively to bridge requests and cookiejar interfaces
- Thread-safe through RLock usage (restored in `__setstate__`)
- Performance warnings: dict operations are O(n) due to linear cookie search
- Handles quoted cookie values by stripping escape sequences
- Fallback to `dummy_threading` when threading unavailable