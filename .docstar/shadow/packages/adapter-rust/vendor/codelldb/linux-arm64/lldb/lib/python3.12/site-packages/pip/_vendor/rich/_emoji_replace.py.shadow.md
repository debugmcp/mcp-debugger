# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_emoji_replace.py
@source-hash: 9fe91c7adb04531d
@generated: 2026-02-09T18:00:45Z

**Purpose**: Provides emoji code replacement functionality for converting text-based emoji codes (like `:smile:`) into Unicode emoji characters.

**Core Function**:
- `_emoji_replace(text, default_variant, _emoji_sub)` (L12-32): Main replacement function that processes text containing emoji codes and converts them to Unicode emoji characters

**Key Components**:
- **Type Aliases** (L7-9): Defines type hints for regex match objects and callable functions used in the replacement process
- **Regex Pattern**: Uses compiled regex `r"(:(\S*?)(?:(?:\-)(emoji|text))?:)"` (L15) to match emoji codes with optional variant suffixes
- **Variant Support** (L19): Handles text (`\uFE0E`) and emoji (`\uFE0F`) presentation variants
- **Nested Replacement Function** `do_replace` (L23-30): Processes individual emoji matches, looks up emoji names in EMOJI dictionary, handles KeyError by returning original code

**Dependencies**:
- `_emoji_codes.EMOJI`: Dictionary/mapping containing emoji name to Unicode character mappings (L4, L18)
- Standard `re` module for regex operations (L2, L15)

**Pattern**: Uses closure pattern with nested function to capture replacement logic while maintaining access to variant mappings and emoji lookup

**Error Handling**: Gracefully handles unknown emoji codes by returning the original matched text (L29-30)

**Performance Optimization**: Pre-fetches dictionary methods (`__getitem__`, `get`) to avoid repeated attribute lookups during replacement (L18, L20)