# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/specifiers.py
@source-hash: 1df1a07cd251bebc
@generated: 2026-02-09T18:00:44Z

## Python Package Version Specifier System

This module implements PEP 440 version specifier handling for Python package dependency resolution. It provides classes for parsing, validating, and evaluating version constraints against package versions.

### Core Classes

**InvalidSpecifier (L32-41)**: Exception raised for malformed specifier strings like "lolwat" instead of valid operators.

**BaseSpecifier (L44-97)**: Abstract base class defining the specifier interface with methods for string representation, equality, hashing, containment checking (`contains`), and version filtering (`filter`). Includes abstract `prereleases` property for controlling pre-release version handling.

**Specifier (L99-625)**: Main implementation for single version specifiers (e.g., ">=1.2.3", "~=2.0"). Key components:

- **Regex Parsing (L109-209)**: Complex regex patterns for parsing operators (`~=`, `==`, `!=`, `<=`, `>=`, `<`, `>`, `===`) and version strings, with special handling for identity operator (`===`) and compatible operator (`~=`)
- **Operator Mapping (L211-220)**: Maps operator symbols to method names
- **Comparison Methods (L368-498)**: Individual comparison implementations:
  - `_compare_compatible` (L368): Implements `~=` as combination of `>=` and `==` with wildcard
  - `_compare_equal` (L388): Handles prefix matching with `.*` suffix
  - `_compare_less_than/greater_than` (L443-495): Special logic for pre-release and post-release version handling
- **Filtering Logic (L565-624)**: Smart filtering that follows PEP 440 rule to accept pre-releases if no stable versions match

**SpecifierSet (L690-1009)**: Container for multiple specifiers with comma-separated parsing (e.g., ">=3.0,!=3.1"). Implements logical AND across all contained specifiers and provides set operations via `__and__`.

### Utility Functions

**_coerce_version (L26-29)**: Converts string versions to Version objects
**_version_split/_version_join (L630-661)**: Version string manipulation utilities
**_pad_version (L669-687)**: Normalizes version component lists for comparison
**_is_not_suffix (L663-666)**: Identifies non-suffix version components

### Key Dependencies
- `Version` class from `.version` module for version object representation
- `canonicalize_version` from `.utils` for version normalization
- Standard library: `abc`, `itertools`, `re`, `typing`

### Architecture Patterns
- Uses operator dispatch pattern via `_get_operator` method (L362-366)
- Implements PEP 440 prerelease handling logic throughout filtering methods
- Extensive use of regex for version specification parsing with verbose patterns
- Canonical form caching for efficient equality comparisons

### Critical Invariants
- All version comparisons work on canonical forms
- Pre-release versions require explicit opt-in except when they're the only matches
- Empty SpecifierSet accepts all versions (explicit design decision, L928-929)
- Local version identifiers are stripped for comparison operators except equality