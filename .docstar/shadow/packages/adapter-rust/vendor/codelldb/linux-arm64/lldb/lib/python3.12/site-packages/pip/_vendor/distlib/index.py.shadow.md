# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/index.py
@source-hash: 9536f0dbaf2b4618
@generated: 2026-02-09T18:00:36Z

**Purpose:** PyPI (Python Package Index) client for package distribution management. Provides functionality to upload packages, documentation, verify signatures, and interact with PyPI-compatible repositories.

**Core Class:**
- `PackageIndex` (L29-508): Main interface for PyPI operations with authentication, file uploads, signature verification, and package search capabilities.

**Key Dependencies:**
- Internal: `DistlibException`, `compat` (HTTP utilities), `util` (zip_dir, ServerProxy, PyPI config)
- Standard: `hashlib`, `subprocess`, `tempfile`, `threading`, `urllib` components
- GPG binary detection for signature operations (L53-64)

**Configuration & Authentication:**
- `__init__` (L37-65): URL validation, GPG binary detection, initializes password handler
- `read_configuration` (L74-85): Loads PyPI credentials from distutils config (.pypirc)
- `save_configuration` (L87-94): Persists credentials to config file
- `check_credentials` (L96-106): Validates and sets up HTTP Basic Auth handler

**Upload Operations:**
- `register` (L108-126): Package metadata registration with verify/submit workflow
- `upload_file` (L232-287): Upload distribution files with optional GPG signing, MD5/SHA256 checksums
- `upload_documentation` (L289-315): Upload documentation as ZIP archive

**Signature Operations:**
- `get_sign_command` (L146-172): Constructs GPG signing command with keystore support
- `sign_file` (L209-230): Signs files using GPG, returns signature file path
- `get_verify_command` (L317-339): Constructs GPG verification command
- `verify_signature` (L341-363): Verifies file signatures against GPG keystore

**Utility Methods:**
- `run_command` (L174-207): Subprocess execution with threaded I/O handling
- `_reader` (L128-144): Thread worker for capturing subprocess output streams
- `download_file` (L365-441): HTTP file download with optional digest verification
- `encode_request` (L458-499): Multipart form encoding for HTTP uploads
- `send_request` (L442-456): HTTP request execution with authentication
- `search` (L501-508): Package search via XML-RPC interface

**Constants:**
- `DEFAULT_INDEX` (L25): PyPI URL 'https://pypi.org/pypi'
- `DEFAULT_REALM` (L26): Authentication realm 'pypi'
- `boundary` (L35): Multipart form boundary for uploads

**Architecture Notes:**
- Thread-safe subprocess I/O handling using separate reader threads
- GPG integration with automatic binary detection (prefers gpg over gpg2)
- HTTP authentication via urllib2 password managers
- Multipart form encoding for file uploads following HTTP standards
- Comprehensive error handling with DistlibException for domain-specific errors