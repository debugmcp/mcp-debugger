# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/misc.py
@source-hash: 3cedea55cf7c0ce4
@generated: 2026-02-09T18:00:38Z

## Core Purpose
Central utility module providing filesystem operations, path handling, URL processing, user interaction, and build backend integration for pip's internal operations.

## Key Utility Functions

### Filesystem Operations
- `ensure_dir(path)` (L100-108): Creates directories, handling EEXIST/ENOTEMPTY errors
- `rmtree(dir, ignore_errors, onexc)` (L125-145): Robust directory removal with retry logic (3s timeout, 0.5s intervals) and cross-platform error handling
- `rmtree_errorhandler(func, path, exc_info, onexc)` (L155-194): Error handler for rmtree implementing "rm -f" behavior by removing read-only flags
- `renames(old, new)` (L349-364): Cross-device file moving with directory cleanup

### Path Processing
- `normalize_path(path, resolve_symlinks)` (L327-337): Canonical path normalization with optional symlink resolution
- `display_path(path)` (L196-202): Converts absolute paths to relative for user display
- `splitext(path)` (L340-346): Enhanced extension splitting handling .tar files specially
- `is_installable_dir(path)` (L299-313): Detects Python packages by checking for pyproject.toml or setup.py

### URL and Authentication Handling
- `remove_auth_from_url(url)` (L528-532): Strips authentication credentials from URLs
- `redact_auth_from_url(url)` (L535-537): Replaces passwords with "****" for logging
- `split_auth_from_netloc(netloc)` (L439-465): Parses username/password from network location
- `HiddenText` class (L547-566): Dataclass for storing sensitive data with redacted display

### User Interaction
- `ask(message, options)` (L231-243): Interactive prompts with validation, respects PIP_NO_INPUT
- `ask_input(message)` (L246-249): General input prompting
- `ask_password(message)` (L252-255): Secure password input using getpass
- `ask_path_exists(message, options)` (L216-220): Path conflict resolution with PIP_EXISTS_ACTION support

### Build System Integration
- `ConfiguredBuildBackendHookCaller` class (L660-747): Extends BuildBackendHookCaller to inject config settings into all build operations
  - Overrides all build methods (build_wheel, build_sdist, build_editable) to use holder's config_settings
  - Provides consistent config injection for PEP 517/518 build backends

### System Information
- `get_pip_version()` (L74-78): Constructs pip version string with installation path and Python version
- `get_prog()` (L110-119): Determines appropriate pip command name for error messages
- `warn_if_run_as_root()` (L750-780): Unix root user warning system

### Data Processing Utilities
- `format_size(bytes)` (L274-282): Human-readable byte size formatting
- `tabulate(rows)` (L285-296): Text table formatting with column alignment
- `hash_file(path, blocksize)` (L623-632): SHA256 file hashing with configurable block size
- `pairwise(iterable)` (L635-643): Iterator pairing elements
- `partition(pred, iterable)` (L646-657): Predicate-based iterable splitting

## Key Dependencies
- Uses tenacity for retry logic on filesystem operations
- Integrates with pip's virtualenv detection and build backend systems
- Relies on packaging.requirements for requirement URL processing

## Architectural Patterns
- Extensive cross-platform compatibility handling (Windows-specific error codes, path handling)
- Environment variable configuration support (PIP_NO_INPUT, PIP_EXISTS_ACTION)
- Defensive programming with comprehensive error handling
- Separation of concerns between URL processing, filesystem ops, and user interaction