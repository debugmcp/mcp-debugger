# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/deprecation.py
@source-hash: 93b420fd404069a4
@generated: 2026-02-09T18:00:29Z

## Primary Purpose
Provides deprecation warning infrastructure for pip, enabling structured warnings about deprecated functionality with version-based lifecycle management and custom logging integration.

## Key Components

### Classes
- **PipDeprecationWarning (L16-17)**: Custom warning class extending built-in Warning for pip-specific deprecation messages
- Inherits standard warning behavior but allows pip-specific handling and filtering

### Core Functions
- **deprecated() (L55-124)**: Main deprecation API for marking functionality as deprecated
  - Takes reason, replacement, gone_in version, optional feature_flag and issue number
  - Constructs formatted warning messages with contextual information
  - Automatically raises exception if current version >= gone_in version (L84, L121-122)
  - Uses stacklevel=2 to point warnings at caller's location (L124)

- **install_warning_logger() (L44-52)**: Sets up custom warning handling system
  - Enables default filtering for PipDeprecationWarning (L46)
  - Replaces warnings.showwarning with custom _showwarning handler (L51-52)
  - Uses global state to preserve original showwarning function

- **_showwarning() (L24-41)**: Custom warning display handler
  - Routes PipDeprecationWarning to dedicated logger "pip._internal.deprecations" (L38-39)
  - Falls back to original showwarning for other warning types
  - Preserves file output behavior when file parameter provided

## Key Dependencies
- `pip._vendor.packaging.version.parse`: For version comparison logic
- `pip.__version__`: Current pip version for lifecycle checks
- Standard library: `logging`, `warnings`, `typing`

## Architecture Patterns
- **Global State Management**: Uses module-level `_original_showwarning` to preserve original warning handler
- **Version-Based Lifecycle**: Automatically transitions from warnings to errors based on version comparison
- **Custom Logger Integration**: Routes deprecation warnings through pip's internal logging system rather than stderr
- **Message Template System**: Constructs warnings from conditional message parts based on available parameters

## Critical Invariants
- Deprecation messages always prefixed with "DEPRECATION: " (L13)
- Version parsing must handle pip's versioning scheme correctly
- Global warning handler replacement is one-time only (L50 guard)
- Stack level 2 ensures warnings point to actual deprecated usage, not deprecation call

## Constants
- **DEPRECATION_MSG_PREFIX (L13)**: "DEPRECATION: " - standardized prefix for all deprecation messages