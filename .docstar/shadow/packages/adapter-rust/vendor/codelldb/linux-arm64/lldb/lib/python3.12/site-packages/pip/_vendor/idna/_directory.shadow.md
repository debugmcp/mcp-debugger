# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/idna/
@generated: 2026-02-09T18:16:11Z

## Purpose
This directory contains a complete IDNA (Internationalized Domain Names in Applications) library implementation, providing RFC 5891 compliant Unicode domain name encoding/decoding capabilities. It serves as a vendored dependency within pip's ecosystem, enabling proper handling of international domain names with full Unicode support.

## Key Components and Architecture

### Public API Layer (`__init__.py`)
- **Primary Entry Point**: Consolidates all public functionality into a clean API surface
- **Core Functions**: `encode()`, `decode()`, `alabel()`, `ulabel()` for domain name conversion
- **Validation Suite**: 9 specialized validation functions (`check_label()`, `check_bidi()`, etc.)
- **Exception Hierarchy**: `IDNAError`, `IDNABidiError`, `InvalidCodepoint`, `InvalidCodepointContext`

### Core Processing Engine (`core.py`)
- **RFC 5891 Implementation**: Complete IDNA2008 specification with UTS46 compatibility
- **Validation Pipeline**: NFC normalization → hyphen rules → combiner checks → codepoint validation → bidirectional text rules
- **Label Processing**: Converts between Unicode (U-labels) and ASCII-compatible encoding (A-labels) using Punycode
- **Domain Processing**: Full domain name handling with dot normalization and length validation

### Unicode Data Foundation
- **`idnadata.py`**: Unicode 15.1.0 character classification tables (scripts, joining types, codepoint classes)
- **`uts46data.py`**: UTS46 mapping tables for character normalization and validation
- **`intranges.py`**: Optimized range compression and O(log n) lookup utility for Unicode codepoint processing

### Integration Interfaces
- **`codec.py`**: Python codec registration for 'idna2008' encoding with streaming support
- **`compat.py`**: IDNA 2003 compatibility layer providing `ToASCII()` and `ToUnicode()` functions
- **`package_data.py`**: Version metadata (3.7)

## Data Flow and Internal Organization

1. **Input Processing**: Domain names enter through public API (`encode`/`decode`) or codec interface
2. **Unicode Normalization**: UTS46 remapping applied using `uts46data` lookup tables
3. **Validation Pipeline**: Multiple validation layers using `idnadata` for script/codepoint classification
4. **Label Conversion**: Punycode encoding/decoding between Unicode and ASCII representations
5. **Output Assembly**: Reconstructed domain names with proper dot handling

## Public API Surface

### Primary Functions
- `encode(domain, strict=True)`: Unicode → ASCII domain conversion
- `decode(domain, strict=True)`: ASCII → Unicode domain conversion
- `alabel(label)`: Single label Unicode → ASCII conversion
- `ulabel(label)`: Single label ASCII → Unicode conversion

### Validation Functions
- `check_label()`, `check_bidi()`, `check_hyphen_ok()`, `check_nfc()`
- `valid_label_length()`, `valid_string_length()`, `valid_contextj()`, `valid_contexto()`

### Codec Integration
- Python codec registration as 'idna2008' with full streaming support
- Incremental encoding/decoding for large domain processing

## Important Patterns and Conventions

- **Strict vs Lenient Processing**: Configurable handling of Unicode dots and validation rules
- **Error Handling**: Comprehensive exception hierarchy with specific error types
- **Unicode Compliance**: Full Unicode 15.1.0 support with script mixing validation
- **Performance Optimization**: Efficient range-based lookups and incremental processing
- **RFC Compliance**: Strict adherence to IDNA2008/UTS46 specifications

## System Role
This module enables pip and related Python tooling to correctly handle international domain names in package URLs, repository locations, and network operations, ensuring proper Unicode domain name resolution across diverse linguistic contexts.