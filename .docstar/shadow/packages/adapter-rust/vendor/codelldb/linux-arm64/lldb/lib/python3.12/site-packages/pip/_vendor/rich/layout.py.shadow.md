# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/layout.py
@source-hash: 6a3912140b4456ff
@generated: 2026-02-09T18:01:01Z

## Purpose
Implements a flexible layout system for terminal rendering, allowing division of screen regions into rows and columns with dynamic sizing. Part of the Rich library's rendering pipeline for creating complex terminal UIs.

## Key Classes

### `LayoutRender` (L32-36)
NamedTuple containing a Region and rendered segment lines for a layout component.

### `_Placeholder` (L51-77)
Internal renderable displaying layout dimensions and name when no content is provided. Renders as a centered panel with highlighted title showing layout size.

### `Splitter` (L80-98)
Abstract base class defining the interface for layout division strategies. Requires implementation of `get_tree_icon()` and `divide()` methods.

### `RowSplitter` (L101-118)
Concrete splitter that divides regions horizontally into columns. Uses `ratio_resolve()` to calculate width distributions among child layouts.

### `ColumnSplitter` (L121-138)
Concrete splitter that divides regions vertically into rows. Uses `ratio_resolve()` to calculate height distributions among child layouts.

### `Layout` (L142-415)
**Core class** - Main layout container supporting hierarchical division of screen real estate.

**Key Properties:**
- `renderable` (L184): Returns self if has children, otherwise returns internal renderable
- `children` (L189): Filtered list of visible child layouts  
- `map` (L194): Last render result mapping layouts to regions
- `tree` (L223): Generates tree view of layout structure

**Key Methods:**
- `get()` / `__getitem__()` (L198/L216): Recursive name-based layout lookup
- `split()` (L261): Divides layout using specified splitter and child layouts
- `split_row()` / `split_column()` (L299/L307): Convenience methods for common splits
- `update()` (L319): Thread-safe renderable content updates
- `refresh_screen()` (L328): Partial screen updates for specific sub-layouts
- `_make_region_map()` (L345): Recursively calculates region assignments using stack-based traversal
- `render()` (L366): Generates render map by calculating regions and rendering leaf layouts
- `__rich_console__()` (L395): Main rendering method combining all layout segments into screen lines

## Dependencies
- `._ratio`: Provides `ratio_resolve()` for proportional space distribution
- `.region`: Defines rectangular screen regions
- Rich console/rendering infrastructure for terminal output
- Threading support via `RLock` for concurrent access

## Architectural Patterns
- **Composite Pattern**: Layout trees with recursive operations
- **Strategy Pattern**: Pluggable splitter implementations  
- **Stack-based Traversal**: Non-recursive region calculation (L347-358)
- **Thread Safety**: RLock protection for concurrent updates

## Critical Constraints
- Minimum size enforcement (default 1)
- Visibility filtering affects layout calculations
- Region coordinates are absolute screen positions
- Render maps cache results for partial updates