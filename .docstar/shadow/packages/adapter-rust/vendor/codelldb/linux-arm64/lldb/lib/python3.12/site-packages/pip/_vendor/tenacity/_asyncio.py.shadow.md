# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/_asyncio.py
@source-hash: 422eb0810b066bd3
@generated: 2026-02-09T18:01:00Z

**Primary Purpose**: Provides async/await support for the tenacity retry library by implementing an AsyncRetrying class that can retry asynchronous functions with configurable retry policies.

**Key Components**:

- **Type Variables** (L29-30): `WrappedFnReturnT` and `WrappedFn` define generic types for wrapped async functions and their return types
- **AsyncRetrying Class** (L33-94): Main async retry orchestrator that extends BaseRetrying
  - `__init__` (L36-38): Initializes with configurable sleep function (defaults to asyncio.sleep)
  - `__call__` (L40-59): Core retry loop - executes async function with retry logic, handling DoAttempt/DoSleep actions
  - `__aiter__/__anext__` (L64-80): Implements async iterator protocol for manual retry control
  - `wraps` (L82-94): Creates async wrapper decorator that preserves retry attributes

**Dependencies**:
- Imports core tenacity components: BaseRetrying, AttemptManager, DoAttempt, DoSleep, RetryCallState (L23-27)
- Uses asyncio.sleep for async delays (L21)
- Integrates with base retry framework while providing async semantics

**Key Patterns**:
- **Async State Machine**: Uses DoAttempt/DoSleep objects to control retry flow in async context
- **Exception Preservation**: Captures and preserves exception info using sys.exc_info() (L52)
- **Attribute Forwarding**: Preserves retry and retry_with attributes on wrapped functions (L91-92)
- **Iterator Protocol**: Blocks sync iteration (__iter__ raises TypeError) while enabling async iteration

**Critical Behavior**:
- Retry state is managed through RetryCallState objects that track attempt history
- Sleep operations are awaitable and respect the configured sleep function
- Exception handling captures all BaseExceptions for retry evaluation
- Async iteration allows manual step-through of retry attempts with AttemptManager