# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/models/direct_url.py
@source-hash: b81b58d871dddd33
@generated: 2026-02-09T18:00:22Z

## Purpose
Implementation of PEP 610 direct URL metadata for pip package installation tracking. Provides structured representation of package installation sources (VCS repositories, archives, local directories) with serialization/deserialization capabilities.

## Key Classes

### DirectUrl (L158-224)
Main dataclass representing a direct URL installation source. Contains:
- `url`: source URL string
- `info`: one of three info types (VcsInfo, ArchiveInfo, DirInfo)  
- `subdirectory`: optional subdirectory path
- `redacted_url` property (L178-189): removes authentication credentials except for git users and environment variables
- `validate()` (L191-192): round-trip validation via dict serialization
- `from_dict()/to_dict()` (L194-214): dict serialization with validation
- `from_json()/to_json()` (L216-221): JSON serialization
- `is_local_editable()` (L223-224): checks if installation is local editable

### VcsInfo (L69-93)
Dataclass for VCS repository installations:
- `vcs`: version control system name
- `commit_id`: specific commit identifier
- `requested_revision`: optional user-requested revision
- Provides `_from_dict()/_to_dict()` serialization methods

### ArchiveInfo (L95-137)
Class for archive-based installations with hash validation:
- Supports both legacy `hash` (single hash string) and new `hashes` (dict) formats
- Hash setter (L111-127) auto-populates hashes dict for format migration
- Handles hash format validation (expects "algorithm=value" format)

### DirInfo (L139-153)  
Dataclass for local directory installations:
- `editable`: boolean flag for editable installs
- Minimal structure compared to other info types

## Utility Functions

- `_get()` (L27-38): Safe dictionary access with type validation
- `_get_required()` (L41-47): Required field extraction with validation
- `_exactly_one_of()` (L50-61): Ensures exactly one info type is present
- `_filter_none()` (L64-66): Creates dict excluding None values
- `_remove_auth_from_netloc()` (L164-176): Strips authentication from URLs with exceptions

## Key Constants

- `DIRECT_URL_METADATA_NAME` (L19): Standard metadata filename "direct_url.json"  
- `ENV_VAR_RE` (L20): Regex for environment variable patterns in URLs
- `InfoType` (L155): Union type alias for all info classes

## Architecture Notes

- Uses dataclasses for structured data with automatic serialization
- Implements PEP 610 specification for direct URL metadata
- Supports backward compatibility between hash formats in ArchiveInfo
- URL credential redaction follows security best practices while preserving functional credentials (git user, environment variables)
- Validation enforces exactly one info type per DirectUrl instance