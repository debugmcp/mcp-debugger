# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/vcs/subversion.py
@source-hash: 75d4ee80706a1f35
@generated: 2026-02-09T18:00:41Z

## Primary Purpose
Implements Subversion (SVN) version control system integration for pip package installation. Provides functionality to checkout, update, and manage SVN repositories as part of pip's VCS support system.

## Key Classes and Functions

**Subversion Class (L30-323)**
- Main VCS implementation extending `VersionControl` base class
- Handles SVN-specific URL schemes: `svn+ssh`, `svn+http`, `svn+https`, `svn+svn`, `svn+file`
- Repository identifier: `.svn` directory, checkout type

**Core Repository Operations:**
- `fetch_new()` (L280-302): Initial SVN checkout with revision options and verbosity control
- `switch()` (L304-312): Switch working copy to different URL/branch
- `update()` (L314-321): Update existing working copy to latest or specified revision

**URL and Authentication Handling:**
- `get_netloc_and_auth()` (L74-86): Extracts auth from URLs, special handling for SSH schemes
- `get_url_rev_and_auth()` (L89-94): Processes URLs with revision info, fixes `svn+ssh://` scheme
- `make_rev_args()` (L97-106): Generates command args for username/password authentication

**Revision and Metadata Extraction:**
- `get_revision()` (L45-71): Walks directory tree to find maximum revision across all files
- `get_remote_url()` (L109-130): Discovers SVN repository URL from local working copy
- `_get_svn_url_rev()` (L133-180): Core parser for SVN metadata from entries files or `svn info` XML

**Version Management:**
- `call_vcs_version()` (L201-227): Queries installed SVN client version
- `get_vcs_version()` (L229-247): Cached version retrieval with memoization
- `get_remote_call_options()` (L249-278): Version-aware interactive/non-interactive mode selection

## Important Dependencies
- `pip._internal.vcs.versioncontrol`: Base VCS classes and interfaces
- `pip._internal.utils.misc`: URL parsing, path utilities, console interaction detection
- `pip._internal.utils.subprocess`: Command execution utilities

## Key Patterns and Architecture

**Multi-Format SVN Metadata Parsing (L144-174):**
- Handles legacy entries format (versions 8, 9, 10)
- XML-based entries format for older SVN
- Modern `svn info --xml` for SVN >= 1.7

**Authentication Strategy:**
- Extracts credentials from URLs for command-line `--username`/`--password` options
- Special case: SSH schemes keep auth in URL (credentials can't be passed via CLI)

**Interactive Mode Handling:**
- SVN < 1.8: Interactive by default, uses `--non-interactive` when needed
- SVN >= 1.8: Non-interactive by default, uses `--force-interactive` for user prompts

**Regular Expressions (L24-27):**
- `_svn_xml_url_re`: Extracts repository URL from XML
- `_svn_rev_re`: Finds committed revisions in XML
- `_svn_info_xml_rev_re`: Parses revision from `svn info` XML output
- `_svn_info_xml_url_re`: Extracts URL from info XML

## Critical Invariants
- Always returns string revision numbers (even when internally using integers)
- `is_commit_id_equal()` always returns `False` - assumes versions never match for safety
- Directory traversal stops at filesystem root if no Python project found
- Version parsing failures result in empty tuple `()` rather than exceptions