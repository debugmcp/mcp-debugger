# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/index.py
@source-hash: 4405f1989c058556
@generated: 2026-02-09T18:00:19Z

## Purpose
Implements pip's experimental `index` command for inspecting package information from PyPI and other package indexes. Provides functionality to query available versions of packages without installing them.

## Key Classes & Functions

### IndexCommand (L22-139)
Main command class inheriting from `IndexGroupCommand`. Implements the `pip index` CLI command.

**Key Methods:**
- `add_options()` (L32-46): Configures command-line options including target Python version, pre-releases, binary preferences, and index URLs
- `run()` (L48-76): Main entry point that dispatches to action handlers based on first argument. Currently only supports "versions" action
- `_build_package_finder()` (L78-101): Creates a `PackageFinder` instance configured for index operations with yanked packages disabled
- `get_available_package_versions()` (L103-139): Core functionality that queries package indexes and displays available versions for a given package

## Dependencies & Architecture

**External Dependencies:**
- `pip._vendor.packaging.version.Version`: Version parsing and comparison
- `pip._internal.cli.req_command.IndexGroupCommand`: Base command class providing session management
- `pip._internal.index.package_finder.PackageFinder`: Core package discovery engine
- `pip._internal.commands.search.print_dist_installation_info`: Shared output formatting

**Key Relationships:**
- Uses `LinkCollector` (L88) to gather package links from configured indexes
- Leverages `SelectionPreferences` (L91-95) to control version filtering (no yanked packages, optional pre-releases)
- Integrates with pip's session management for HTTP requests

## Architecture Patterns

**Command Dispatch Pattern (L49-51):** Uses a handlers dictionary to map action names to methods, enabling easy extension of supported operations.

**Builder Pattern (L78-101):** `_build_package_finder()` constructs complex `PackageFinder` objects with appropriate configuration.

**Context Manager Usage (L110):** Properly manages HTTP sessions for network operations.

## Critical Invariants

1. **Experimental Status (L53-57):** Command explicitly warns users about experimental nature and potential future changes
2. **Single Package Constraint (L104-105):** `versions` action requires exactly one package name argument
3. **Yanked Package Exclusion (L92):** Always filters out yanked packages from results
4. **Version Ordering (L134):** Results are sorted in reverse order (newest first)

## Error Handling
- Returns `ERROR` status code for invalid arguments or pip exceptions
- Raises `CommandError` for incorrect argument counts
- Raises `DistributionNotFound` when no matching packages found
- Centralizes error handling in `run()` method rather than individual handlers