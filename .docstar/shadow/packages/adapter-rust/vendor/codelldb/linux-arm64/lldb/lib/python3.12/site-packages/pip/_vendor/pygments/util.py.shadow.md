# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/util.py
@source-hash: 004558d2aa27cb21
@generated: 2026-02-09T18:00:52Z

## Primary Purpose
Utility module for the Pygments syntax highlighting library providing option processing, text analysis, and document type detection functionality.

## Key Components

### Exception Classes
- **ClassNotFound** (L30-32): ValueError subclass for lookup function failures
- **OptionError** (L34-38): Exception for invalid option processing arguments

### Option Processing Functions
- **get_choice_opt** (L40-51): Validates option values against allowed choices with optional case normalization
- **get_bool_opt** (L54-82): Converts string/numeric values to booleans; accepts "1/yes/true/on" for True, "0/no/false/off" for False
- **get_int_opt** (L85-97): Converts option values to integers with error handling
- **get_list_opt** (L99-113): Converts strings to lists via whitespace splitting or validates existing sequences

### Text Analysis Utilities
- **docstring_headline** (L116-125): Extracts first paragraph from docstrings, stopping at first blank line
- **make_analysator** (L128-142): Decorator that wraps text analysis functions to return normalized float scores (0.0-1.0)
- **shebang_matches** (L145-187): Regex matching against shebang lines with path splitting and Windows extension handling
- **doctype_matches** (L190-200): Regex matching against DOCTYPE declarations
- **html_doctype_matches** (L203-205): Convenience function for HTML doctype detection

### Document Detection
- **looks_like_xml** (L211-224): Multi-strategy XML detection using XML declarations, DOCTYPE, and tag patterns with caching
- **_looks_like_xml_cache** (L208): Global cache dictionary for XML detection results

### Unicode and Formatting Utilities
- **surrogatepair** (L227-233): Converts Unicode codepoints >16 bits to UTF-16 surrogate pairs
- **format_lines** (L236-252): Formats sequences as pretty-printed Python tuples with indentation
- **duplicates_removed** (L255-268): Removes duplicates while preserving order

### Text Encoding Detection
- **guess_decode** (L281-299): Progressive encoding detection (UTF-8 → locale → latin-1 fallback)
- **guess_decode_from_terminal** (L302-316): Terminal-aware encoding detection with terminal.encoding priority
- **terminal_encoding** (L319-324): Extracts encoding from terminal objects or falls back to locale

### Infrastructure Classes
- **Future** (L271-278): Abstract base class for deferred computation (used by RegexLexerMeta)
- **UnclosingTextIOWrapper** (L327-330): TextIOWrapper subclass that prevents underlying buffer closure

## Global Regular Expressions (L15-27)
- **split_path_re**: Splits paths on `/`, `\`, or spaces
- **doctype_lookup_re**: Complex DOCTYPE declaration parser with optional attributes
- **tag_re**: Basic XML/HTML tag matcher
- **xml_decl_re**: XML declaration matcher

## Dependencies
- Standard library: `re`, `io.TextIOWrapper`, `locale` (conditional import)