# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/request.py
@source-hash: 0b4394b76b5c53a2
@generated: 2026-02-09T17:57:50Z

## Purpose
HTTP request header generation and file position management utilities for urllib3. Provides helper functions for constructing common request headers and managing file-like object positioning during request retries/redirects.

## Key Functions

### make_headers (L20-89)
Generates HTTP request headers dictionary from common parameters:
- `keep_alive`: Adds 'connection: keep-alive' 
- `accept_encoding`: Handles boolean (Trueâ†’'gzip,deflate'), list (comma-joined), or string values
- `user_agent`: Direct string mapping
- `basic_auth`/`proxy_basic_auth`: Base64 encodes username:password for Authorization/Proxy-Authorization headers
- `disable_cache`: Adds 'cache-control: no-cache'

### set_file_position (L92-107)
Manages file position tracking for request bodies:
- If `pos` provided, rewinds body to that position
- Otherwise attempts to record current position via `body.tell()`
- Returns `_FAILEDTELL` sentinel if tell() fails (IOError/OSError)
- Used for preparing request bodies for potential retries/redirects

### rewind_body (L110-137)
Rewinds file-like request bodies to specified positions:
- Validates `body_pos` is integer type
- Uses `body.seek(body_pos)` to rewind
- Raises `UnrewindableBodyError` on seek failures or if position was `_FAILEDTELL`
- Raises `ValueError` for invalid position types

## Key Constants
- `SKIP_HEADER` (L12): Sentinel value "@@@SKIP_HEADER@@@" for skipping automatic headers
- `SKIPPABLE_HEADERS` (L13): Frozenset of headers that can be skipped: accept-encoding, host, user-agent
- `ACCEPT_ENCODING` (L15): Default encoding "gzip,deflate"
- `_FAILEDTELL` (L17): Sentinel object for failed position recording

## Dependencies
- `base64.b64encode`: For Basic auth encoding
- `..exceptions.UnrewindableBodyError`: Custom exception for rewind failures
- `..packages.six.b, integer_types`: Python 2/3 compatibility utilities

## Architecture Notes
- Separates header generation from position management for clean modularity
- Uses sentinel objects for state tracking (failed tell operations)
- Handles file-like object operations defensively with proper exception handling
- Designed for HTTP request retry/redirect scenarios where body rewinding is needed