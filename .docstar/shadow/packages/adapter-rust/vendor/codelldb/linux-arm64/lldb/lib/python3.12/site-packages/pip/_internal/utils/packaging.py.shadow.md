# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/packaging.py
@source-hash: e569baff1ee52ab9
@generated: 2026-02-09T18:00:30Z

## Purpose
Utility module for packaging-related operations in pip's internal codebase, providing Python version compatibility checking, requirement parsing with caching, and extra name normalization.

## Key Components

### Types
- `NormalizedExtra` (L9): NewType wrapper for str representing normalized package extra names

### Functions

**`check_requires_python(requires_python, version_info)` (L14-34)**
- Validates if a Python version tuple satisfies a "Requires-Python" specifier string
- Returns True for None specifiers (no restriction), False otherwise
- Uses packaging.specifiers.SpecifierSet for validation
- Can raise InvalidSpecifier for malformed specifiers

**`get_requirement(req_string)` (L37-45)**
- Factory function for creating packaging.Requirement objects with LRU caching (512 entries)
- Optimizes performance by caching expensive requirement string parsing
- Critical for pip's dependency resolution performance

**`safe_extra(extra)` (L48-57)**
- Normalizes arbitrary strings to valid package extra names
- Replaces non-alphanumeric runs with single underscore, converts to lowercase
- Follows pkg_resources convention, distinct from canonicalize_name

## Dependencies
- Uses pip._vendor.packaging for version parsing and specifier handling
- Relies on functools.lru_cache for performance optimization
- Regular expressions for string normalization

## Architectural Notes
- Performance-focused design with strategic caching on hot path (requirement parsing)
- Type safety with NewType for extra names
- Defensive programming with None-handling in version checking