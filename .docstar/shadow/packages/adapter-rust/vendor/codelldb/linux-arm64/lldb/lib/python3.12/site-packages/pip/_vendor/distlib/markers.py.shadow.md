# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/markers.py
@source-hash: 9f70df3a1d72bd9f
@generated: 2026-02-09T18:00:34Z

## Purpose
Parser and evaluator for PEP 508 environment markers - a micro-language used in Python packaging to specify conditional dependencies based on platform/environment variables.

## Key Components

### Core Evaluation Engine
- **`Evaluator` class (L45-98)**: Main expression evaluator with operation mapping (L50-63) supporting comparison operators (`==`, `!=`, `<`, etc.), logical operators (`and`, `or`), and membership operators (`in`, `not in`)
- **`evaluate()` method (L65-98)**: Recursive expression evaluator handling string literals, variable lookups, and nested operations with special version comparison logic

### Utility Functions
- **`_is_version_marker()` (L31-32)**: Identifies version-related marker variables (`python_version`, `python_full_version`)
- **`_is_literal()` (L35-38)**: Detects quoted string literals
- **`_get_versions()` (L41-42)**: Extracts version objects from strings using regex pattern

### Context Management
- **`default_context()` (L104-138)**: Builds environment context dictionary with platform info, Python version details, and system properties
- **`DEFAULT_CONTEXT` (L141)**: Pre-computed default environment context
- **Global `evaluator` instance (L144)**: Shared evaluator for all marker interpretations

### Public Interface
- **`interpret()` function (L147-167)**: Main entry point that parses marker strings and evaluates them against environment context, with optional custom execution context override

## Dependencies
- **External**: `os`, `re`, `sys`, `platform` for system introspection
- **Internal**: `.compat.string_types`, `.util.{in_venv, parse_marker}`, `.version.LegacyVersion`

## Key Patterns
- Expression tree evaluation using recursive descent
- Version comparison using `LegacyVersion` wrapper for semantic versioning
- Context-based variable resolution with fallback to system defaults
- Regex-based version extraction for complex version strings

## Constants
- **`_VERSION_PATTERN` (L26-27)**: Regex for extracting quoted/unquoted version strings
- **`_VERSION_MARKERS` (L28)**: Set defining version-related marker variable names
- **`_DIGITS` (L101)**: Regex for extracting major.minor version format