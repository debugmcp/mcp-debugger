# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/cachecontrol/cache.py
@source-hash: 393423ef6b547fc0
@generated: 2026-02-09T18:00:33Z

**Purpose:** Defines abstract cache interfaces and a concrete in-memory implementation for HTTP caching in the pip cachecontrol library.

**Key Classes:**

- **BaseCache (L18-32)**: Abstract base class defining the standard cache interface
  - `get(key)` (L19-20): Retrieves cached bytes by string key
  - `set(key, value, expires)` (L22-25): Stores bytes with optional expiration
  - `delete(key)` (L27-28): Removes cached entry
  - `close()` (L30-31): Cleanup method (no-op in base class)

- **DictCache (L34-52)**: Thread-safe in-memory dictionary cache implementation
  - Uses `threading.Lock` (L36) for thread safety during writes
  - Stores data in `self.data` dictionary (L37)
  - `get()` (L39-40): Simple dictionary lookup without locking
  - `set()` (L42-46): Thread-safe write operation, ignores `expires` parameter
  - `delete()` (L48-51): Thread-safe removal with existence check

- **SeparateBodyBaseCache (L54-74)**: Abstract extension for caches that separate metadata from response bodies
  - `set_body(key, body)` (L67-68): Store response body separately
  - `get_body(key)` (L70-74): Retrieve body as file-like object

**Dependencies:**
- `threading.Lock` for thread synchronization
- Type hints from `typing` module for MutableMapping and IO types
- Optional datetime import for expiration timestamps

**Architectural Patterns:**
- Abstract base class pattern with NotImplementedError for unimplemented methods
- Template method pattern where subclasses implement cache storage specifics
- Separation of concerns: metadata vs. body storage in SeparateBodyBaseCache

**Key Constraints:**
- DictCache ignores expiration parameters (no TTL implementation)
- Thread safety only guaranteed for write operations in DictCache
- SeparateBodyBaseCache requires separate calls for metadata and body storage