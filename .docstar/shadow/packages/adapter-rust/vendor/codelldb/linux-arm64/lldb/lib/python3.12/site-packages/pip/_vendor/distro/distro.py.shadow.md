# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distro/distro.py
@source-hash: 5ea6de7da7008434
@generated: 2026-02-09T18:00:45Z

**Primary Purpose**: Linux distribution detection and information retrieval module - replacement for Python's deprecated `platform.linux_distribution()`. Provides reliable machine-readable distribution identification across multiple data sources (os-release files, lsb_release command, distro release files, uname).

**Core Architecture**:
- Main class: `LinuxDistribution` (L649-1357) - encapsulates all distribution detection logic
- Module-level singleton: `_distro` (L1359) - default instance for global functions
- Data source hierarchy: os-release → lsb_release → distro files → uname/oslevel

**Key Classes**:
- `VersionDict` (L61-64): TypedDict for version components (major, minor, build_number)
- `InfoDict` (L67-72): TypedDict for complete distribution information
- `cached_property` (L633-646): Custom property decorator for Python <3.8 compatibility
- `LinuxDistribution` (L649-1357): Main distribution detection class

**Primary Methods**:
- `id()` (L833-859): Returns normalized distro ID with fallback hierarchy
- `name()` (L861-882): Returns distribution name (pretty or plain)
- `version()` (L884-924): Returns version with "best" precision algorithm
- `version_parts()` (L926-940): Parses version into tuple components
- `codename()` (L974-989): Returns release codename
- `info()` (L991-1008): Returns complete InfoDict

**Data Source Processors** (cached properties):
- `_os_release_info` (L1090-1101): Parses /etc/os-release files
- `_lsb_release_info` (L1153-1170): Executes lsb_release command
- `_distro_release_info` (L1252-1309): Parses distro-specific release files
- `_uname_info` (L1196-1206): Executes uname command
- `_oslevel_info` (L1208-1216): AIX oslevel command support
- `_debian_version` (L1218-1226): Debian version file parsing

**Normalization Tables**:
- `NORMALIZED_OS_ID` (L86-89): os-release ID normalization
- `NORMALIZED_LSB_ID` (L98-104): lsb_release ID normalization  
- `NORMALIZED_DISTRO_ID` (L113-115): distro file ID normalization

**File Patterns & Constants**:
- `_DISTRO_RELEASE_CONTENT_REVERSED_PATTERN` (L118-120): Regex for parsing release content
- `_DISTRO_RELEASE_BASENAME_PATTERN` (L123): File basename matching
- `_DISTRO_RELEASE_BASENAMES` (L126-144): Known release file names
- `_DISTRO_RELEASE_IGNORE_BASENAMES` (L147-157): Files to skip

**Module Functions**: All delegate to `_distro` singleton:
- `linux_distribution()` (L160-200): Deprecated compatibility function
- Global accessors: `id()` (L203), `name()` (L287), `version()` (L326), etc.
- Data source accessors: `os_release_info()` (L515), `lsb_release_info()` (L525), etc.

**Key Architectural Decisions**:
- Multi-source fallback strategy ensures reliability across distributions
- Normalization tables handle distro ID inconsistencies
- Caching via `@cached_property` prevents repeated file/command operations
- Supports custom root directories for chroot environments
- AIX support via oslevel command integration

**Critical Constraints**:
- subprocess data sources disabled when using custom root_dir (L785-789)
- File encoding assumptions: UTF-8 for most files, ASCII for debian_version
- Version parsing prioritizes precision when `best=True` parameter used
- String normalization: lowercase + underscores for reliable matching