# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_fileno.py
@source-hash: 1d66713f90b66a33
@generated: 2026-02-09T18:00:44Z

## Purpose
Utility module providing safe file descriptor extraction from file-like objects, handling edge cases with poorly implemented file-like interfaces.

## Key Components

### `get_fileno(file_like: IO[str]) -> int | None` (L6-24)
Primary function that safely retrieves a file descriptor number from file-like objects. Uses defensive programming to handle exceptions from broken `fileno()` implementations.

**Parameters:**
- `file_like`: File-like object expected to have a `fileno()` method

**Return:** File descriptor integer or `None` if unavailable/failed

**Implementation Strategy:**
1. Uses `getattr()` to safely check for `fileno` attribute (L15)
2. Wraps `fileno()` call in try-catch to handle any exception type (L17-23)
3. Returns `None` for any failure case, providing consistent fallback behavior

## Dependencies
- `typing.IO`: Type annotation for file-like objects
- `typing.Callable`: Type annotation for the fileno method

## Architectural Notes
- **Defensive Design**: Catches broad `Exception` rather than specific `OSError` due to real-world experience with poorly implemented file-like objects
- **Graceful Degradation**: Always returns `None` on failure rather than propagating exceptions
- **Type Safety**: Uses modern Python type hints with union types (`int | None`)

## Use Cases
Likely used by Rich terminal library components that need to determine if output is going to a real terminal (for features like color detection, terminal size queries, etc.) while safely handling various file-like object implementations.