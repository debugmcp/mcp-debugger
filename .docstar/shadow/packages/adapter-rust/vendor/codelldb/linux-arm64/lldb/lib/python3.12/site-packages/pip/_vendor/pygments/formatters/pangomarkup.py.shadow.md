# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/pangomarkup.py
@source-hash: e8b2a741cf32878f
@generated: 2026-02-09T17:57:48Z

## Purpose
Pygments formatter that converts syntax-highlighted code tokens to Pango Markup format, which can be rendered to SVG. Part of the pip-vendored Pygments library.

## Key Components

### Constants & Utilities
- `_escape_table` (L17-20): Translation table mapping `&` and `<` characters to HTML entities for Pango markup safety
- `escape_special_chars()` (L23-25): Utility function that escapes special characters using the translation table

### Main Formatter Class
- `PangoMarkupFormatter` (L28-83): Core formatter class inheriting from Pygments `Formatter`
  - **Metadata** (L35-37): Name "Pango Markup", aliases ['pango', 'pangomarkup'], no file extensions
  - **Constructor** (L39-59): Builds style mapping from Pygments style tokens to Pango markup tags
    - Converts color, bold, italic, underline styles to corresponding Pango tags
    - Stores start/end tag pairs in `self.styles` dictionary
  - **Format method** (L61-83): Main formatting logic that processes token stream
    - Wraps output in `<tt>` tags for monospace
    - Groups consecutive tokens of same type for efficiency
    - Applies appropriate Pango markup tags based on token type

## Dependencies
- `pip._vendor.pygments.formatter.Formatter`: Base formatter class
- Standard library `translate()` method for character escaping

## Architecture Notes
- Uses token type inheritance via `ttype.parent` to find applicable styles (L68-69)
- Optimizes output by batching consecutive tokens of the same type (L70-77)
- Properly nests markup tags by building start/end pairs in reverse order (L47-59)

## Output Format
Generates Pango markup with structure: `<tt><span fgcolor="#color"><b><i><u>content</u></i></b></span></tt>`