# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/download.py
@source-hash: d2a0749f2b3a6443
@generated: 2026-02-09T18:00:14Z

**Primary Purpose**: Implements pip's download command that downloads Python packages without installing them. Downloads packages from PyPI, VCS URLs, local directories, or archives to a specified directory.

**Core Class**: 
- `DownloadCommand` (L18-146): Extends `RequirementCommand` to provide package downloading functionality without installation

**Key Methods**:
- `add_options()` (L38-76): Configures command-line options including constraints, requirements, binary preferences, destination directory (-d/--dest), and target Python options
- `run()` (L78-146): Main execution flow decorated with `@with_cleanup` - processes requirements, resolves dependencies, and downloads packages

**Execution Flow** (in `run()`):
1. Sets `ignore_installed=True` and empty `editables` list (L79-82)
2. Normalizes and ensures download directory exists (L86-87)
3. Creates session, target Python, and package finder (L89-97)
4. Initializes build tracker and temporary directory (L99-105)
5. Gets requirements and checks legacy setup.py options (L107-108)
6. Creates requirement preparer with download directory (L110-119)
7. Creates resolver with PEP 517 options (L121-128)
8. Resolves requirements and downloads unsatisfied ones (L132-142)
9. Reports successfully downloaded packages (L143-145)

**Key Dependencies**:
- Inherits from `RequirementCommand` for shared pip command functionality
- Uses `cmdoptions` for command-line option definitions
- Leverages `get_build_tracker()` for build process tracking
- Uses `TempDirectory` for temporary file management during downloads

**Notable Patterns**:
- Uses context managers for resource cleanup (`@with_cleanup`, `enter_context`)
- Only downloads packages where `req.satisfied_by is None` (L136)
- Separates requirement preparation into two phases: individual saves (L138) then batch preparation (L141)

**Critical Constraints**:
- Forces `ignore_installed=True` since download doesn't check installed packages
- Sets empty `editables` list as editable installs don't apply to downloads
- Uses `globally_managed=True` for temp directory to handle cleanup properly