# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/direct_url_helpers.py
@source-hash: af6311b64543002b
@generated: 2026-02-09T18:00:26Z

## Purpose
Utility functions for converting between pip's internal URL representations and standardized formats. Handles conversion of DirectUrl objects to PEP 440 requirement strings and creation of DirectUrl objects from various source types.

## Key Functions

**direct_url_as_pep440_direct_reference** (L9-29)
- Converts DirectUrl objects to pip requirement strings in PEP 440 format
- Handles three URL types: VCS (with commit ID), Archive (with optional hash), Directory
- Builds requirement string with format: `name @ url[#fragments]`
- Fragments include hash info and subdirectory paths when present

**direct_url_for_editable** (L32-36) 
- Creates DirectUrl for editable installations from local source directory
- Always marks as editable and converts path to file URL

**direct_url_from_link** (L39-87)
- Main factory function converting Link objects to DirectUrl objects
- Handles three link types:
  - VCS links (L42-71): Extracts commit ID from cache or source directory
  - Existing directories (L72-77): Creates DirInfo for local paths  
  - Archive links (L78-87): Creates ArchiveInfo with optional hash

## Dependencies
- `DirectUrl`, `VcsInfo`, `ArchiveInfo`, `DirInfo` from models.direct_url
- `Link` from models.link for URL parsing
- `vcs` module for VCS backend operations
- `path_to_url` utility for path conversion

## Architecture Notes
- Uses isinstance() pattern matching for handling different URL info types
- VCS handling differentiates between cached wheels (immutable commits) vs fresh checkouts
- All functions validate inputs and use assertions for internal consistency
- Subdirectory fragments preserved across conversions for monorepo support