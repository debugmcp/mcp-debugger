# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/live.py
@source-hash: bd4727255d8b3122
@generated: 2026-02-09T18:01:02Z

## Primary Purpose
Real-time display system for Rich library that renders continuously updating content to the terminal. Provides auto-refreshing displays with thread-based updates, stdout/stderr redirection, and support for both regular terminal and alternate screen modes.

## Key Classes & Functions

### _RefreshThread (L16-32)
Background daemon thread that calls `refresh()` at regular intervals. Uses threading.Event for clean shutdown coordination. Maintains reference to parent Live instance and refresh rate.

### Live (L35-268) 
Main class implementing auto-updating live display functionality. Inherits from JupyterMixin and RenderHook for Jupyter notebook integration and render pipeline hooks.

**Key Methods:**
- `__init__` (L51-89): Configures console, threading, redirection, and LiveRender instance
- `start()` (L104-132): Initiates live display, enables alternate screen, starts refresh thread
- `stop()` (L134-163): Cleanly shuts down display, restores terminal state, handles cleanup
- `refresh()` (L220-247): Core update method that renders current content to console
- `update()` (L206-218): Changes the displayed renderable content
- `process_renderables()` (L249-268): RenderHook implementation for cursor positioning

**Key Properties:**
- `is_started` (L92-94): Thread-safe status check
- `renderable` (L196-204): Returns current display content, wraps in Screen for alt mode

## Architecture & Dependencies

**Threading Model**: Uses RLock for thread safety across all operations. _RefreshThread runs independently but coordinates through done Event.

**Console Integration**: Tightly coupled with Rich Console class for rendering. Supports terminal detection, alternate screen mode, and Jupyter environments.

**I/O Redirection**: Implements FileProxy-based stdout/stderr capture to prevent interference with live display updates (L177-194).

**Dependencies:**
- LiveRender: Handles vertical overflow and cursor positioning
- Screen: Wraps content for alternate screen mode  
- FileProxy: Enables I/O redirection
- JupyterMixin: Provides ipywidgets integration

## Critical Patterns

**Context Manager**: Implements `__enter__`/`__exit__` (L165-175) for automatic start/stop lifecycle.

**State Management**: `_started` flag prevents double-initialization. Complex cleanup sequence in stop() ensures proper terminal restoration.

**Error Handling**: Refresh failures in start() trigger immediate stop() to prevent broken I/O redirection (L121-129).

**Jupyter Support**: Conditional ipywidgets integration with fallback warnings (L224-239).

## Configuration Options
- `auto_refresh`: Enables background thread updates
- `refresh_per_second`: Controls update frequency (must be > 0)
- `transient`: Clears display on exit (unless screen=True)
- `screen`: Uses alternate screen mode
- `vertical_overflow`: Handles content too tall for terminal
- `redirect_stdout/stderr`: Captures print() calls during updates