# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/version.py
@source-hash: f695e476e721bdef
@generated: 2026-02-09T18:00:50Z

## Purpose
Implements a flexible Python version parsing and comparison system supporting three schemes: PEP-440 (normalized), legacy (setuptools-compatible), and semantic versioning. Primary components provide version parsing, constraint matching, and version suggestion capabilities.

## Core Architecture

### Base Classes
- **Version (L30-77)**: Abstract base for version objects with comparison operators, hash support, and prerelease detection. Stores raw string and parsed tuple parts.
- **Matcher (L79-177)**: Abstract base for version constraint matching with operator dispatch system and requirement parsing.

### PEP-440 Support (Primary Implementation)
- **PEP440_VERSION_RE (L179-181)**: Complex regex matching PEP-440 version format including epochs, prereleases, post-releases, dev releases, and local versions
- **_pep_440_key (L184-250)**: Core parsing function converting PEP-440 strings to sortable tuples with epoch normalization and component handling
- **NormalizedVersion (L256-289)**: PEP-440 compliant version class with prerelease detection via PREREL_TAGS
- **NormalizedMatcher (L303-387)**: Advanced matcher with local version handling, prefix matching, and compatible release operator (~=) support

### Legacy Setuptools Support  
- **_legacy_key (L588-611)**: Legacy version parsing using distribute-compatible algorithm with character replacement and padding
- **LegacyVersion (L614-626)**: Legacy version implementation
- **LegacyMatcher (L629-648)**: Matcher for legacy versions with compatible release support

### Semantic Versioning Support
- **_SEMVER_RE (L655-657)**: Regex for semantic versioning format (major.minor.patch with optional pre-release/build)
- **_semantic_key (L664-682)**: Semantic version parsing into sortable tuples
- **SemanticVersion (L685-691)**: Semantic version implementation
- **SemanticMatcher (L694-695)**: Basic semantic version matcher

### Version Normalization & Suggestions
- **_suggest_normalized_version (L461-569)**: Extensive normalization with 20+ regex replacements to convert arbitrary version strings to PEP-440 format
- **_suggest_semantic_version (L415-458)**: Converts arbitrary strings to semantic version format via prefix extraction and suffix massaging
- **_REPLACEMENTS (L390-402)** and **_SUFFIX_REPLACEMENTS (L404-410)**: Regex patterns for version string cleanup

### Scheme Management
- **VersionScheme (L698-734)**: Wrapper providing validation and suggestion capabilities for each versioning scheme
- **_SCHEMES (L737-745)**: Registry mapping scheme names to VersionScheme instances
- **get_scheme (L748-751)**: Scheme retrieval function

## Key Dependencies
- `re` for extensive regex-based parsing
- `.compat.string_types` for Python 2/3 compatibility  
- `.util.parse_requirement` for requirement string parsing

## Critical Invariants
- Version._parts must be non-empty tuple for comparison operators
- All comparison operations require same version class types
- PEP-440 local versions stripped for certain comparison operations
- Semantic versions require exact major.minor.patch format
- Legacy versions use lexicographic comparison with special character handling