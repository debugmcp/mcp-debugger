# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/__init__.py
@source-hash: f695375b7b3ee87b
@generated: 2026-02-09T18:00:21Z

**Purpose**: Central factory module for pip's metadata abstraction layer, providing backend selection between `importlib.metadata` and `pkg_resources` with unified interface.

**Key Components**:

- `_should_use_importlib_metadata()` (L29-49): Backend selection logic based on Python version (3.11+), environment variable `_PIP_USE_IMPORTLIB_METADATA`, and optional distributor patches
- `Backend` protocol (L52-55): Type protocol defining required attributes for metadata backends (NAME, Distribution, Environment types)
- `select_backend()` (L58-66): Cached backend selector returning either importlib or pkg_resources module based on selection logic
- `get_default_environment()` (L69-75): Creates default environment from sys.path using selected backend
- `get_environment()` (L79-86): Creates environment from custom paths
- `get_directory_distribution()` (L89-95): Creates distribution from .dist-info directory
- `get_wheel_distribution()` (L98-106): Creates distribution from wheel file
- `get_metadata_distribution()` (L109-128): Creates distribution from raw METADATA file contents

**Architecture**:
- Factory pattern with backend abstraction
- LRU caching on backend selection (L58)
- Runtime backend switching based on environment/version
- Unified API over heterogeneous metadata systems
- Type safety through Protocol-based backend contracts

**Dependencies**:
- Base classes from `.base` module (L9)
- Conditional imports of backend modules (L61, L64)
- Environment variable `_PIP_USE_IMPORTLIB_METADATA` for override
- Optional `importlib.metadata._PIP_USE_IMPORTLIB_METADATA` distributor patch

**Critical Behavior**:
- Python < 3.11 defaults to pkg_resources
- Python >= 3.11 defaults to importlib.metadata unless patched
- Environment variable always overrides version-based selection
- Backend selection is cached for performance