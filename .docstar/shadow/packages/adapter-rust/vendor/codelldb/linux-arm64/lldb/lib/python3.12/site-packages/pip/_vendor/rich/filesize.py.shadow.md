# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/filesize.py
@source-hash: f5f4cb00f080c079
@generated: 2026-02-09T18:00:54Z

## Purpose
Provides file size formatting utilities using decimal (base-1000) units, borrowed from PyFilesystem2. Converts byte values to human-readable strings with SI prefixes (kB, MB, GB, etc.).

## Key Components

### `_to_str()` (L19-41)
Core formatting function that converts raw byte sizes to formatted strings. Handles special cases for 1 byte and sizes < base, then iterates through suffixes to find appropriate unit. Returns formatted string with configurable precision and separator.

**Parameters:**
- `size`: Raw byte count
- `suffixes`: Unit suffix strings (kB, MB, etc.)
- `base`: Conversion base (1000 for decimal)
- `precision`: Decimal places (default 1)
- `separator`: String between value and unit (default " ")

### `pick_unit_and_suffix()` (L44-50) 
Utility function to determine appropriate unit and suffix for a given size. Returns tuple of (unit_value, suffix_string) by finding the largest unit that doesn't exceed size * base.

### `decimal()` (L53-89)
Public API function for decimal (SI) file size formatting. Uses base-1000 with suffixes kB through YB. Delegates to `_to_str()` with hardcoded decimal parameters.

**Example outputs:**
- `decimal(30000)` → "30.0 kB"  
- `decimal(30000, precision=2, separator="")` → "30.00kB"

## Architecture
- Module exports only `decimal` function via `__all__`
- Follows separation of concerns: core logic in `_to_str()`, public interface in `decimal()`
- Designed for extensibility (could add binary/legacy variants using same core)

## Dependencies
- `typing` for type hints
- No external dependencies

## Critical Details
- Uses 1000 as base (decimal/SI standard) vs 1024 (binary standard)
- Special handling for exactly 1 byte ("1 byte" not "1 bytes")
- Format uses thousands separators in output
- Algorithm finds largest appropriate unit by powers of base