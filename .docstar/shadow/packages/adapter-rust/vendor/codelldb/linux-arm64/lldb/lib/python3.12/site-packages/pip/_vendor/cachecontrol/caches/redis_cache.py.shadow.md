# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/cachecontrol/caches/redis_cache.py
@source-hash: f6b9aac2d62efe58
@generated: 2026-02-09T17:57:47Z

**Primary Purpose**: Redis-backed cache implementation for pip's cachecontrol system, providing HTTP response caching through Redis server.

**Core Class**: 
- `RedisCache(BaseCache)` (L16-48): Main cache implementation wrapping Redis connection with BaseCache interface compliance

**Key Methods**:
- `__init__(conn: Redis[bytes])` (L17-18): Accepts Redis connection instance, stores as `self.conn`
- `get(key: str) -> bytes | None` (L20-21): Direct Redis GET operation wrapper
- `set(key, value, expires=None)` (L23-35): Intelligent expiration handling - supports integer seconds, datetime objects with timezone awareness, or no expiration
- `delete(key: str)` (L37-38): Single key deletion via Redis DELETE
- `clear()` (L40-44): **Destructive operation** - deletes ALL keys in Redis database using keys() scan
- `close()` (L46-48): No-op method due to Redis connection pooling

**Dependencies**:
- `pip._vendor.cachecontrol.cache.BaseCache`: Parent abstract class
- `redis.Redis`: Redis client (TYPE_CHECKING import only)
- `datetime.datetime/timezone`: For expiration time calculations

**Critical Behaviors**:
- Timezone-aware datetime handling (L28-33): Strips timezone from current time if expires datetime is naive
- Expiration conversion: datetime objects converted to seconds via `total_seconds()` before Redis `setex`
- Connection management: Relies on Redis client's built-in pooling, no explicit cleanup

**Architectural Pattern**: Adapter pattern wrapping Redis client to conform to BaseCache interface for HTTP caching layer.