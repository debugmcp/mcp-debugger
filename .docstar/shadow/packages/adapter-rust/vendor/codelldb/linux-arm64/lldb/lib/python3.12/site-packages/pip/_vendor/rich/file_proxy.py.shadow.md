# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/file_proxy.py
@source-hash: 4e5f531cc0d9f8f9
@generated: 2026-02-09T18:00:57Z

## Purpose
FileProxy (L11-57) serves as a wrapper around file objects (like sys.stdout) that redirects write operations to Rich's console system for enhanced text rendering with ANSI support.

## Core Class

**FileProxy (L11-57)** - Inherits from `io.TextIOBase`
- Wraps a file object and intercepts write calls
- Buffers partial lines until complete lines are available
- Processes ANSI escape sequences through AnsiDecoder
- Renders output via Rich console for formatted display

## Key Methods

**`__init__(console, file)` (L14-18)**
- Stores console and file references
- Initializes internal buffer for line accumulation
- Sets up AnsiDecoder for ANSI escape sequence processing

**`write(text)` (L28-48)** - Core functionality
- Type-checks input (must be str)
- Partitions text on newlines using `str.partition()`
- Accumulates partial lines in buffer until newline found
- Flushes complete lines through console with ANSI decoding
- Returns original text length (not Rich-processed length)

**`flush()` (L50-54)**
- Forces output of buffered content to console
- Clears buffer after output
- Used for incomplete lines or forced buffer clearing

**`rich_proxied_file` property (L20-23)**
- Provides access to underlying wrapped file object

**`__getattr__(name)` (L25-26)**
- Delegates unknown attribute access to wrapped file
- Enables transparent proxy behavior for file-like operations

## Dependencies
- `AnsiDecoder` from `.ansi` - Processes ANSI escape sequences
- `Text` from `.text` - Rich text object for formatted output
- `Console` from `.console` (TYPE_CHECKING only)

## Key Patterns
- **Buffering Strategy**: Accumulates text until newlines are encountered
- **Line-by-line Processing**: Processes complete lines through ANSI decoder
- **Transparent Proxy**: Delegates unknown methods to wrapped file
- **Context Management**: Uses console context for thread-safe output

## Critical Behavior
- Buffer persists across write calls until explicit flush or newline
- ANSI sequences are decoded only for complete lines
- Original file methods remain accessible via attribute delegation
- Write returns original text length, not processed output length