# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/cache.py
@source-hash: c60efafd9144042e
@generated: 2026-02-09T18:00:15Z

**Purpose**: Command-line interface for inspecting and managing pip's wheel cache, supporting operations like directory display, cache info, listing, removal, and purging.

**Core Components**:

- **CacheCommand (L15-225)**: Main command class inheriting from `Command`, implements pip's cache management functionality
  - **ignore_require_venv (L30)**: Set to True, allows operation outside virtual environments
  - **usage (L31-37)**: Defines CLI syntax for all supported subcommands

**Key Methods**:

- **add_options() (L39-49)**: Adds `--format` option for list output formatting (human/abspath)
- **run() (L51-81)**: Main entry point, validates cache availability and dispatches to appropriate handler
  - Handlers mapping (L52-58): Maps subcommands to their respective methods
  - Cache validation (L60-62): Ensures cache directory is available before proceeding
- **get_cache_dir() (L83-87)**: Returns cache directory path
- **get_cache_info() (L89-129)**: Displays comprehensive cache statistics including locations, sizes, and file counts
- **list_cache_items() (L131-144)**: Lists cached wheels with optional pattern matching
  - **format_for_human() (L146-157)**: Human-readable output with file sizes
  - **format_for_abspath() (L159-161)**: Absolute path output format
- **remove_cache_items() (L163-186)**: Removes cache items matching pattern, includes HTTP files for wildcard
- **purge_cache() (L188-192)**: Removes all cache items by delegating to remove with "*" pattern

**Helper Methods**:

- **_cache_dir() (L194-195)**: Constructs cache subdirectory paths
- **_find_http_files() (L197-202)**: Locates HTTP cache files in both old and new cache directories
- **_find_wheels() (L204-225)**: Locates wheel files using PEP 427-compliant pattern matching logic

**Dependencies**: 
- pip._internal.cli.base_command.Command (base class)
- pip._internal.utils.filesystem (file operations)
- pip._internal.exceptions (error handling)

**Key Patterns**:
- Command pattern with handler dispatch dictionary
- Pattern-based file matching with PEP 427 wheel filename compliance
- Dual HTTP cache directory support (http and http-v2)
- Centralized error handling in run() method

**Cache Structure**:
- `wheels/`: Locally built wheels
- `http/`: Legacy HTTP cache 
- `http-v2/`: Current HTTP cache (pip v23.3+)