# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/database.py
@source-hash: d15f50becd15af16
@generated: 2026-02-09T18:00:40Z

**Python Distribution Database Implementation (PEP 376)**

This module implements PEP 376 compliance for Python package database operations, managing both modern `.dist-info` and legacy `.egg-info` distributions across sys.path.

## Primary Classes

### DistributionPath (L75-325)
Main entry point for discovering and managing installed distributions. Maintains dual caches for `.dist-info` and `.egg-info` distributions with configurable caching behavior.

**Key Methods:**
- `get_distributions()` (L210-230): Iterator over all found distributions
- `get_distribution(name)` (L232-256): Find specific distribution by name
- `provides_distribution(name, version)` (L258-297): Find distributions providing given name/version
- `_yield_distributions()` (L115-167): Core discovery logic scanning filesystem resources

### Distribution (L327-481)
Base class for all distribution types. Represents package metadata and dependency relationships.

**Key Properties:**
- `provides` (L378-388): Set of provided distribution names/versions
- Various requirement properties (L398-416): `run_requires`, `meta_requires`, etc.
- `matches_requirement(req)` (L418-449): Check if distribution satisfies requirement

### InstalledDistribution (L538-865)
PEP 376 compliant `.dist-info` distribution implementation with full RECORD file support.

**Key Features:**
- RECORD file management: `_get_records()` (L589-610), `write_installed_files()` (L682-715)
- File integrity checking: `check_installed_files()` (L717-751)
- Export management: `exports` property (L612-624), `read_exports()/write_exports()` (L626-650)
- Resource path resolution: `get_resource_path()` (L652-670)
- Shared location handling: `shared_locations` (L753-778)

### EggInfoDistribution (L867-1090)
Legacy `.egg-info` and `.egg` distribution support with setuptools compatibility.

**Key Features:**
- Metadata parsing from PKG-INFO files
- Requirements parsing from requires.txt: `parse_requires_data()` (L901-929)
- Top-level module discovery from top_level.txt
- installed-files.txt support: `list_installed_files()` (L1018-1054)

### DependencyGraph (L1097-1238)
Graph-based dependency analysis with topological sorting capabilities.

**Key Methods:**
- `add_distribution()/add_edge()` (L1118-1141): Graph construction
- `topological_sort()` (L1202-1231): Dependency resolution order
- `to_dot()` (L1170-1200): GraphViz visualization export

## Utility Functions

- `make_graph(dists, scheme)` (L1241-1292): Build dependency graph from distribution list
- `get_dependent_dists()/get_required_dists()` (L1295-1347): Recursive dependency traversal
- `make_dist(name, version)` (L1350-1359): Convenience distribution constructor

## Architecture Notes

- Uses resource finders for cross-platform path handling
- Dual caching strategy separates modern and legacy distributions
- Supports both file-based and zip-based (egg) distributions
- Implements PEP 376 RECORD format for installation tracking
- Backward compatibility maintained for setuptools/distutils legacy formats

## Dependencies

- `resources` module for path abstraction
- `metadata.Metadata` for package metadata parsing
- `version` module for version scheme handling
- `util` module for requirement parsing and CSV operations