# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/progress_bar.py
@source-hash: 2f88f0f04e906ffc
@generated: 2026-02-09T18:01:10Z

## Primary Purpose

Visual progress bar component for Rich console library. Renders horizontal progress bars with support for determinate progress tracking and indeterminate pulse animations. Used by the broader rich.progress system.

## Core Class

**ProgressBar (L18-208)** - Main progress bar renderer extending JupyterMixin
- Constructor (L33-53): Configures total steps, completion, width, styling, and animation
- Key properties: `total` (max value), `completed` (current value), `width` (display width), `pulse` (animation mode)
- Style properties: `style` (background), `complete_style` (filled portion), `finished_style` (100% complete), `pulse_style` (animation)

## Key Methods

**percentage_completed (L60-67)** - Property calculating completion percentage (0-100), returns None for indeterminate bars

**update (L116-124)** - Updates progress values, accepts new completed count and optional new total

**_get_pulse_segments (L69-114)** - LRU-cached method generating animated pulse segments
- Creates smooth color transitions using cosine fade calculations
- Handles different color systems and ASCII fallback mode
- Returns list of styled Segment objects for animation frames

**_render_pulse (L126-154)** - Renders animated pulse bars for indeterminate progress
- Uses time-based offset calculation for smooth animation (L152)
- Repeats pulse pattern across bar width
- Animation speed: 15 characters per second

**__rich_console__ (L156-198)** - Main rendering method implementing Rich protocol
- Determines pulse vs. normal mode based on `self.pulse` or `total is None` (L161)
- Normal mode: Calculates filled/empty portions using half-character precision (L173-179)
- Renders completed bars, half-bars, and remaining background segments
- Handles ASCII fallback for legacy terminals

**__rich_measure__ (L200-207)** - Returns measurement constraints for layout system

## Dependencies

- `rich.segment.Segment` - Styled text units for rendering
- `rich.style.Style` - Text styling and colors
- `rich.color` - Color blending utilities for smooth animations
- `math.cos` - Cosine function for pulse animation fade calculations
- `time.monotonic` - High-resolution timing for animations

## Key Constants

- `PULSE_SIZE = 20` (L15) - Character count for one complete pulse animation cycle

## Architectural Patterns

- **Rich Protocol Implementation** - Implements `__rich_console__` and `__rich_measure__` for Rich ecosystem integration
- **LRU Caching** - Pulse segments cached to avoid expensive color calculations
- **Unicode Fallback** - Graceful degradation to ASCII characters for compatibility
- **Time-based Animation** - Smooth pulse animation using monotonic time source

## Usage Modes

1. **Determinate Progress** - Known total, shows completion percentage
2. **Indeterminate Progress** - Unknown total (`None`), shows pulsing animation
3. **Finished State** - Special styling when progress reaches 100%