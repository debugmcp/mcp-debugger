# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py
@source-hash: f61ad3c90a85be5f
@generated: 2026-02-09T17:57:47Z

**Primary Purpose:** Provides lazy candidate iteration for pip's dependency resolution, optimizing performance by deferring expensive operations (fetching, extracting, building) until candidates are actually needed.

**Core Functionality:**
- `FoundCandidates` (L127-174): Main class implementing lazy sequence of package candidates for resolver
- Three iteration strategies based on installed package preferences:
  - `_iter_built` (L42-71): No installed package, iterate index candidates only
  - `_iter_built_with_prepended` (L73-93): Prefer installed, yield installed first then index candidates
  - `_iter_built_with_inserted` (L95-125): Prefer upgrade, insert installed at correct version position

**Key Types:**
- `IndexCandidateInfo` (L24): Tuple of version and callable that lazily creates candidate
- `SequenceCandidate` (L27-39): Compatibility alias for Sequence[Candidate] (pre-Python 3.9)

**FoundCandidates Class Details:**
- Constructor (L136-147): Takes info getter, optional installed candidate, preference flag, incompatible IDs
- `__iter__` (L154-162): Selects appropriate iteration strategy, filters incompatible candidates
- `__getitem__` (L148-152): Raises NotImplementedError - not used by resolver
- `__len__` (L164-168): Raises NotImplementedError - not used by resolver  
- `__bool__` (L170-174): Cached check for candidate existence

**Error Handling:**
- Catches `MetadataInvalid` exceptions (L54-65), logs warnings and skips invalid candidates
- Deduplicates versions using `versions_found` sets to avoid processing same version multiple times

**Performance Optimizations:**
- Lazy evaluation throughout - candidates only created when iterator accessed
- LRU cache on `__bool__` method (L170)
- Version deduplication prevents redundant work
- Incompatible candidate filtering at iteration level

**Dependencies:**
- `pip._vendor.packaging.version._BaseVersion` for version handling
- `pip._internal.exceptions.MetadataInvalid` for error handling
- `.base.Candidate` for candidate interface