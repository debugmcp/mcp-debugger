# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/__init__.py
@source-hash: 4d5193c67cb8d13a
@generated: 2026-02-09T18:00:38Z

## Primary Purpose
Main entry point and public API for Pygments syntax highlighting library. Provides three high-level functions that compose the core highlighting pipeline: lexical analysis, token formatting, and combined highlighting.

## Key Functions

### `lex(code, lexer)` (L35-49)
- Tokenizes source code using a lexer instance
- Delegates to `lexer.get_tokens(code)`
- Type safety: catches common mistake of passing lexer class instead of instance
- Returns iterable of tokens

### `format(tokens, formatter, outfile=None)` (L52-74) 
- Formats token stream using a formatter instance
- Handles both string return and file output modes
- Output logic: uses BytesIO for encoding-aware formatters, StringIO otherwise (L63)
- Type safety: validates formatter is instance, not class
- Parameter `outfile` is redefined builtin (acknowledged via pylint disable)

### `highlight(code, lexer, formatter, outfile=None)` (L77-82)
- High-level convenience function combining lex + format operations
- Complete highlighting pipeline in single call
- Simply composes the two lower-level functions

## Module Metadata
- Version: '2.17.2' (L29)
- Public API exports: `__all__ = ['lex', 'format', 'highlight']` (L32)
- Doc format: restructuredtext (L30)

## Dependencies
- `io.StringIO, BytesIO` (L27) for output handling
- Lazy imports for error handling:
  - `pip._vendor.pygments.lexer.RegexLexer` (L45)
  - `pip._vendor.pygments.formatter.Formatter` (L70)

## Architecture Patterns
- **Error Handling**: Both `lex()` and `format()` use TypeError catching to provide helpful error messages when classes are passed instead of instances
- **Output Flexibility**: `format()` supports both return-value and file-writing modes
- **Lazy Imports**: Error-handling imports are deferred until needed
- **Function Composition**: `highlight()` demonstrates clean composition pattern