# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/pkg_resources.py
@source-hash: 534ec44c020d4867
@generated: 2026-02-09T18:00:20Z

## Primary Purpose
Implements pkg_resources-based metadata provider for pip's package introspection system. Acts as a concrete adapter implementing pip's BaseDistribution and BaseEnvironment interfaces using pkg_resources as the underlying metadata system.

## Key Classes

**EntryPoint (L42-46)**: Simple NamedTuple for representing package entry points with name, value, and group fields.

**InMemoryMetadata (L48-81)**: IMetadataProvider implementation that reads metadata from a dictionary in memory. Key features:
- Maps metadata decoding exceptions to UnsupportedWheel
- Implements pkg_resources IMetadataProvider interface
- Used for wheel file metadata handling

**Distribution (L83-251)**: Core distribution wrapper implementing BaseDistribution interface around pkg_resources.Distribution. Key methods:
- `from_directory()` (L99-117): Creates distribution from .egg-info/.dist-info directory
- `from_metadata_file_contents()` (L119-134): Creates distribution from raw metadata bytes  
- `from_wheel()` (L136-155): Extracts and creates distribution from wheel file
- `_metadata_impl()` (L219-239): Reads METADATA/PKG-INFO and parses as email.message
- `iter_dependencies()` (L241-247): Returns requirements with optional extras support
- Properties for location, version, canonical_name, etc.

**Environment (L253-301)**: Working set wrapper implementing BaseEnvironment interface. Key methods:
- `default()` (L257-259): Returns environment from pkg_resources.working_set
- `from_paths()` (L261-263): Creates environment from custom paths
- `get_distribution()` (L281-301): Searches for distribution with fallback working set refresh

## Dependencies & Relationships
- Wraps `pkg_resources` as underlying metadata system
- Inherits from pip._internal.metadata.base interfaces (BaseDistribution, BaseEnvironment, BaseEntryPoint)
- Uses pip's wheel utilities for wheel file parsing
- Integrates with pip's exception hierarchy

## Architectural Patterns
- Adapter pattern: Adapts pkg_resources API to pip's internal metadata interfaces
- Lazy initialization: Distribution._extra_mapping populated on first access
- Factory methods: Multiple classmethods for creating Distribution instances from different sources
- Provider pattern: InMemoryMetadata implements pkg_resources IMetadataProvider interface

## Critical Invariants
- Distribution instances must wrap valid pkg_resources.Distribution objects
- Metadata encoding failures are mapped to UnsupportedWheel exceptions
- Working set refresh attempted when distribution initially not found
- Extra names are canonicalized for consistent lookup