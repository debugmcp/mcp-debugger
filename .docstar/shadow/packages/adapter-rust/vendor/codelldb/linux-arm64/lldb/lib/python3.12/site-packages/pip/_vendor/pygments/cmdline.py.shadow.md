# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/cmdline.py
@source-hash: bdb972686abbf4e2
@generated: 2026-02-09T18:00:46Z

## Primary Purpose

Command-line interface for the Pygments syntax highlighting tool. Provides a comprehensive CLI with argument parsing, lexer/formatter selection, and code processing capabilities for syntax highlighting operations.

## Key Components

### Argument Parsing Functions
- `_parse_options(o_strs)` (L33-51): Parses comma-separated key=value option strings into dictionaries, handling boolean flags
- `_parse_filters(f_strs)` (L54-64): Parses filter specifications with optional colon-separated options

### Information Display Functions
- `_print_help(what, name)` (L67-84): Shows detailed help for specific lexers, formatters, or filters
- `_print_list(what)` (L87-136): Lists available lexers, formatters, filters, or styles in human-readable format
- `_print_list_as_json(requested_items)` (L138-180): JSON output version of listing functionality

### Core Logic
- `main_inner(parser, argns)` (L182-515): Main processing logic handling all command options:
  - Version display (-V) and help (-h) (L187-194)
  - Listing functionality (-L) with JSON support (L196-224)
  - Help for specific components (-H) (L227-235)
  - Lexer name guessing (-N, -C) (L254-271)
  - Style definition output (-S) (L273-293)
  - Input processing from files or stdin (L340-388)
  - Lexer and formatter selection with custom loading support (L306-432)
  - Output encoding and platform-specific terminal handling (L456-477)
  - LaTeX special case handling (L479-486)
  - Main highlighting loop with streaming support (-s) (L489-514)

### UI Components
- `HelpFormatter` (L517-525): Custom argparse formatter that auto-detects terminal width
- `main(args)` (L528-668): Entry point with comprehensive argument parser setup and exception handling

## Architecture Patterns

- **Command Pattern**: Each CLI option maps to specific processing logic in main_inner
- **Strategy Pattern**: Dynamic lexer/formatter selection based on file extensions, content analysis, or explicit names
- **Factory Pattern**: Custom lexer/formatter loading from external Python files when -x flag is used

## Key Dependencies

- **Core Pygments**: lexers, formatters, filters, styles modules for syntax highlighting
- **Utilities**: guess_decode, terminal_encoding for encoding detection
- **Standard Library**: argparse for CLI, json for structured output, sys/os for I/O

## Critical Features

- **Streaming Mode (-s)**: Line-by-line processing for continuous input like `tail -f`
- **Custom Components (-x)**: Security-sensitive feature allowing loading of external Python modules
- **Encoding Handling**: Automatic detection and conversion between input/output encodings
- **Platform Support**: Special Windows terminal coloring with colorama integration
- **Error Recovery**: Graceful fallback to TextLexer when automatic detection fails

## Constraints

- Custom lexer/formatter loading requires -x flag for security
- Streaming mode only works with stdin and compatible lexers
- Terminal formatting varies by platform and terminal capabilities
- JSON output only available with listing operations (-L)