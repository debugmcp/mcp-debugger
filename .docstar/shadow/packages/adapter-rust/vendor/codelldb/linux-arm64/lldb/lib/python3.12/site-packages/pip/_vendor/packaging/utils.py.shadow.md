# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/utils.py
@source-hash: 3407585309e500ea
@generated: 2026-02-09T18:00:38Z

## Purpose
Utility functions for parsing, validating, and normalizing Python package names and version strings according to PEP 503, PEP 427 (wheels), and PEP 440 (versions). Part of the Python packaging ecosystem.

## Key Types
- `BuildTag` (L13): Union type for wheel build tags - either empty tuple or (int, str)
- `NormalizedName` (L14): NewType wrapper for validated/normalized package names

## Exception Classes
- `InvalidName` (L17-21): Raised for invalid distribution names
- `InvalidWheelFilename` (L23-27): Raised for malformed wheel filenames (PEP 427 violations)
- `InvalidSdistFilename` (L29-33): Raised for malformed source distribution filenames

## Core Regex Patterns
- `_validate_regex` (L36-38): Validates package names against core metadata spec
- `_canonicalize_regex` (L39): Matches sequences of hyphens, dots, underscores for normalization
- `_normalized_regex` (L40): Validates already-normalized package names
- `_build_tag_regex` (L42): Parses wheel build tags (must start with digit)

## Primary Functions

### Name Processing
- `canonicalize_name(name, validate=False)` (L45-50): Converts package names to PEP 503 normalized form (lowercase, hyphens replace dots/underscores). Optional validation against core metadata spec.
- `is_normalized_name(name)` (L53-54): Checks if name is already in normalized form

### Version Processing  
- `canonicalize_version(version, strip_trailing_zero=True)` (L57-102): Normalizes Version objects or strings into canonical string representation. Handles epochs, pre/post/dev releases, local versions. Optionally strips trailing .0 segments.

### Filename Parsing
- `parse_wheel_filename(filename)` (L105-145): Parses wheel filenames into (name, version, build_tag, tags) tuple. Validates .whl extension, correct dash count (4-5), project name format, and extracts build numbers per PEP 427.
- `parse_sdist_filename(filename)` (L148-174): Parses source distribution filenames (.tar.gz/.zip) into (name, version) tuple. Splits on last dash to separate name from PEP 440 version.

## Dependencies
- `tags.Tag, parse_tag` (L10): For parsing platform/ABI tags from wheel filenames
- `version.Version, InvalidVersion` (L11): For version parsing and validation

## Architecture Notes
- Strict adherence to Python packaging standards (PEP 427, 440, 503)
- Defensive parsing with comprehensive error handling and validation
- Type-safe design with NewType wrappers and Union types
- Regex-based validation for performance and spec compliance