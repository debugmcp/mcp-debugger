# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/stop.py
@source-hash: 60c26ced98197cd0
@generated: 2026-02-09T18:01:03Z

**Primary Purpose:** Defines stopping condition strategies for the Tenacity retry library, providing a modular system to determine when retry attempts should cease.

**Core Architecture:**
- Abstract base class `stop_base` (L27-38) defines the stopping strategy interface with `__call__` method returning boolean
- Implements operator overloading (`__and__`, `__or__`) for composing multiple stop conditions
- All concrete strategies inherit from `stop_base` and implement the `__call__(retry_state: RetryCallState) -> bool` pattern

**Key Classes:**

**`stop_base` (L27-38)** - Abstract base class
- Defines `__call__` abstract method for evaluation against `RetryCallState`
- Provides `__and__` and `__or__` operators for logical composition
- Foundation for all stopping strategies

**`stop_any` (L44-51)** - Logical OR compositor
- Stops when ANY of the provided stop conditions evaluates to True
- Takes variable arguments of `stop_base` instances
- Uses `any()` builtin for efficient short-circuit evaluation

**`stop_all` (L54-61)** - Logical AND compositor  
- Stops when ALL provided stop conditions evaluate to True
- Takes variable arguments of `stop_base` instances
- Uses `all()` builtin for efficient short-circuit evaluation

**`_stop_never` (L64-68) & `stop_never` (L71)** - Never-stop strategy
- Always returns False, effectively disabling stopping conditions
- Singleton instance provided as module-level constant

**`stop_when_event_set` (L74-81)** - Threading event-based stopping
- Stops when a `threading.Event` is set
- Enables external control over retry termination
- Useful for graceful shutdown scenarios

**`stop_after_attempt` (L84-91)** - Attempt count-based stopping
- Stops after reaching maximum attempt count
- Uses `>=` comparison against `retry_state.attempt_number`

**`stop_after_delay` (L94-103)** - Time-based stopping
- Stops after elapsed time from first attempt exceeds limit
- Converts time units using `_utils.to_seconds()` utility
- Raises `RuntimeError` if `seconds_since_start` is None (L101-102)

**Dependencies:**
- `pip._vendor.tenacity._utils` for time unit conversion utilities
- `pip._vendor.tenacity.RetryCallState` (TYPE_CHECKING import) for state evaluation
- `threading.Event` (TYPE_CHECKING import) for event-based stopping

**Type System:**
- `StopBaseT` (L41) union type alias allows both `stop_base` instances and raw callables
- Extensive use of forward references for `RetryCallState` to avoid circular imports

**Design Patterns:**
- Strategy pattern for pluggable stopping behaviors
- Composite pattern for combining multiple conditions with logical operators
- Operator overloading for intuitive condition composition (`stop1 & stop2`, `stop1 | stop2`)