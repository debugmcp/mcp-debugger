# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/text.py
@source-hash: e6b437cef36b8395
@generated: 2026-02-09T18:01:10Z

**Core Purpose:** Rich text implementation supporting styled content, markup parsing, and console rendering for the Rich library.

**Primary Classes:**

**Span (L46-115):** NamedTuple representing styled regions within text
- Fields: `start` (L49), `end` (L51), `style` (L53)
- Key methods: `split()` (L62-73), `move()` (L75-85), `right_crop()` (L87-99), `extend()` (L101-115)
- Used to mark regions of text with specific styling

**Text (L117-1330):** Main class for styled text content
- Inherits from JupyterMixin for notebook support
- Internal storage: `_text` list (L156), `_spans` list (L163), `_length` cache (L164)
- Base properties: `style`, `justify`, `overflow`, `no_wrap`, `end`, `tab_size`

**Construction Methods:**
- `__init__()` (L143-164): Basic constructor with control code sanitization
- `from_markup()` (L258-290): Parse console markup tags into styled text
- `from_ansi()` (L292-328): Parse ANSI escape sequences
- `styled()` (L330-353): Apply uniform style to plain text
- `assemble()` (L355-399): Build from sequence of text/style pairs

**Core Properties:**
- `plain` (L402-417): Get/set underlying text string with span adjustment
- `markup` (L228-256): Generate console markup representation
- `cell_len` (L223-226): Terminal cell width calculation
- `spans` (L419-427): Access to internal style spans

**Text Manipulation:**
- `append()` (L962-1004): Add text/Text instances with optional styling
- `stylize()` (L456-480): Apply styles to character ranges
- `highlight_regex()` (L592-628): Style text matching regex patterns
- `highlight_words()` (L630-657): Style specific word matches
- `split()` (L1059-1101): Divide into Lines preserving styles
- `divide()` (L1103-1180): Split at specific offsets with span redistribution
- `join()` (L776-813): Combine Text instances with separator

**Layout Operations:**
- `wrap()` (L1198-1244): Word wrap with justification and overflow handling
- `truncate()` (L857-882): Limit width with ellipsis/crop options
- `pad()`, `pad_left()`, `pad_right()` (L898-940): Add padding characters
- `align()` (L942-960): Align within specified width

**Advanced Features:**
- `expand_tabs()` (L815-855): Convert tabs to spaces with proper cell alignment
- `detect_indentation()` (L1262-1281): Auto-detect code indentation using GCD
- `with_indent_guides()` (L1283-1329): Add visual indentation guides
- `render()` (L717-774): Generate Segment objects for console output

**Rich Protocol Implementation:**
- `__rich_console__()` (L686-703): Main console rendering entry point
- `__rich_measure__()` (L705-715): Calculate min/max width requirements

**Key Dependencies:**
- Uses `Segment` for renderable output chunks
- Integrates with `Style` system for appearance
- Leverages `divide_line()` for text wrapping
- Supports `Lines` container for multi-line content

**Critical Invariants:**
- `_length` must match actual text length for performance
- Spans must not extend beyond text boundaries (maintained by `_trim_spans()`)
- Control codes are stripped during text input
- Span coordinates are absolute within the full text