# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/urls.py
@source-hash: a9c7923996f995b3
@generated: 2026-02-09T18:00:33Z

This module provides utilities for bidirectional conversion between file system paths and file: URLs, handling platform-specific differences for Windows and Unix systems.

## Core Functions

**path_to_url (L9-16)**: Converts a file system path to a file: URL. Normalizes and makes the path absolute using `os.path.normpath` and `os.path.abspath`, then properly URL-encodes the path components via `urllib.request.pathname2url` and joins with "file:" scheme.

**url_to_path (L19-55)**: Converts a file: URL back to a file system path with comprehensive platform handling:
- Validates input is a file: URL (L23-25)
- Parses URL components using `urllib.parse.urlsplit` (L27)
- Handles network location (netloc) logic (L29-38):
  - Empty or "localhost" → treated as local file
  - On Windows: prepends UNC notation (`\\`) for network paths
  - On other platforms: rejects non-local URIs
- Applies Windows-specific path normalization (L45-53) to strip leading slash from drive letter paths (e.g., "/C:/Users" → "C:/Users")

## Dependencies and Architecture

Imports standard library modules: `os`, `string`, `urllib.parse`, `urllib.request`
Uses local `.compat` module for `WINDOWS` platform detection

## Platform Considerations

The module implements RFC 8089 compliance for file URI handling and includes Windows-specific logic for:
- UNC path handling with network locations
- Drive letter path normalization
- Proper slash handling in URL-to-path conversion

## Critical Invariants

- `path_to_url` always produces absolute, normalized paths
- `url_to_path` only accepts file: scheme URLs
- Network locations are only supported on Windows (for UNC paths)
- Path encoding/decoding is handled by urllib functions to ensure proper character escaping