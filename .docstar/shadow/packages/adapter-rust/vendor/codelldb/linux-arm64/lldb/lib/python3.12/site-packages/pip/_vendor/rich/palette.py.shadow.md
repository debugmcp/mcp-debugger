# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/palette.py
@source-hash: 9489ef4753830d3d
@generated: 2026-02-09T18:00:55Z

## Primary Purpose
Color palette management system for the Rich terminal library. Provides color matching, indexing, and visualization capabilities for terminal color schemes.

## Key Components

### Palette Class (L11-72)
Main palette container with RGB color management:
- `__init__(colors: Sequence[Tuple[int, int, int]])` (L14): Initializes with RGB triplet sequence
- `__getitem__(number: int)` (L17): Returns ColorTriplet for indexed access
- `__rich__()` (L20): Rich protocol implementation for table visualization with color swatches
- `match(color: Tuple[int, int, int])` (L45): LRU-cached color distance matching using weighted Euclidean distance

### Color Distance Algorithm (L58-69)
Implements perceptual color matching using red-mean weighted distance formula:
- Accounts for human eye sensitivity differences across RGB channels
- Uses bit-shifting optimization for performance
- Returns closest palette index for any RGB input

### Demo ColorBox Class (L83-97)
Standalone color gradient generator for testing:
- Creates HLS color space visualization
- Generates terminal color gradients using Unicode block characters

## Dependencies
- `.color_triplet`: ColorTriplet wrapper class
- Rich ecosystem: Table, Color, Style, Text, Console components
- Standard library: math.sqrt, functools.lru_cache

## Architecture Patterns
- LRU caching for performance optimization on color matching
- Rich protocol support (__rich__) for integrated rendering
- Index-based color access with ColorTriplet abstraction
- Separation of core palette logic from visualization demo code

## Critical Constraints
- Colors stored as integer RGB triplets (0-255 range)
- Palette indexing must remain stable for consistent color references
- Color matching algorithm optimized for perceptual accuracy over mathematical precision