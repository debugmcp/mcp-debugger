# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/
@generated: 2026-02-09T18:16:19Z

## Overall Purpose and Responsibility

This directory implements the Pygments formatter system - a comprehensive collection of output formatters that convert syntax-highlighted token streams into various presentation formats. The module serves as the output layer of the Pygments syntax highlighting pipeline, transforming tokenized source code into formats suitable for different display contexts including web pages, documents, terminals, and images.

## Key Components and Architecture

### Formatter Discovery and Loading (`__init__.py`)
Central registry and factory system providing:
- **Formatter Discovery**: `get_all_formatters()`, `find_formatter_class()` for enumerating available formatters
- **Instantiation API**: `get_formatter_by_name()`, `get_formatter_for_filename()` for creating formatter instances
- **Dynamic Loading**: `load_formatter_from_file()` for custom formatters
- **Lazy Loading**: On-demand formatter import via `_formatter_cache` and plugin system integration
- **Registry Pattern**: Uses `_mapping.FORMATTERS` dictionary for metadata-driven formatter lookup

### Formatter Registry (`_mapping.py`)
Auto-generated mapping table containing metadata for all built-in formatters:
- Maps formatter class names to tuples: `(module_path, display_name, aliases, file_extensions, description)`
- Serves as single source of truth for formatter discovery
- Enables decoupled loading of formatter implementations

### Format Categories

**Document Formats:**
- **HTML** (`html.py`): Full-featured web formatter with CSS styling, line numbers, and complete document generation
- **LaTeX** (`latex.py`): Academic document formatter using fancyvrb package with math mode support
- **RTF** (`rtf.py`): Rich Text Format for Microsoft Word compatibility
- **SVG** (`svg.py`): Scalable vector graphics with positioned text elements

**Markup Formats:**
- **BBCode** (`bbcode.py`): Bulletin board markup for forums
- **Pango Markup** (`pangomarkup.py`): GTK/SVG rendering format
- **Groff** (`groff.py`): Unix document processing system

**Terminal Formats:**
- **Terminal** (`terminal.py`): Basic ANSI color sequences for console output
- **Terminal256** (`terminal256.py`): Enhanced terminal with 256-color and true-color support
- **IRC** (`irc.py`): Internet Relay Chat color codes

**Image Formats:**
- **Image Formatters** (`img.py`): Pixmap generation (PNG, GIF, JPEG, BMP) using PIL with cross-platform font management

**Utility Formats:**
- **Raw Tokens** (`other.py`): Serialized token stream for storage/transmission
- **Null Formatter** (`other.py`): Plain text passthrough
- **Test Case Generator** (`other.py`): Python test code generation for lexer testing

## Public API Surface

### Main Entry Points
- `get_formatter_by_name(alias, **options)`: Primary API for formatter instantiation by alias
- `get_formatter_for_filename(filename, **options)`: Filename-based formatter selection
- `find_formatter_class(alias)`: Returns formatter class without instantiation
- `get_all_formatters()`: Generator of all available formatter classes

### Formatter Base Interface
All formatters inherit from `Formatter` base class and implement:
- `format(tokensource, outfile)`: Core formatting method
- Style system integration for color/font customization
- Configuration via constructor options
- Standard metadata (name, aliases, filenames)

## Internal Organization and Data Flow

### Processing Pipeline
1. **Token Stream Input**: Formatters receive `(token_type, token_value)` tuples from lexers
2. **Style Resolution**: Token types mapped to visual styles (colors, fonts, emphasis)
3. **Format-Specific Rendering**: Conversion to target format syntax/markup
4. **Output Generation**: Final formatted content written to output stream

### Common Patterns
- **Style Mapping**: All formatters build token-type-to-style dictionaries from Pygments style definitions
- **Token Type Hierarchy**: Hierarchical lookup using `token.parent` for style inheritance
- **Option Processing**: Standardized configuration via constructor `**options`
- **Lazy Loading**: Deferred module imports for performance
- **Template Systems**: Many formatters use template constants for document structure

### Cross-Cutting Concerns
- **Unicode Handling**: Proper encoding support across all formatters
- **Error Handling**: Consistent `ClassNotFound` exceptions for missing formatters
- **Plugin Integration**: Seamless third-party formatter support
- **Performance**: Caching systems for expensive operations (style lookups, color conversions)

## Important Conventions

### Formatter Metadata
- `name`: Human-readable formatter name
- `aliases`: List of command-line aliases
- `filenames`: Associated file extensions
- `unicodeoutput`: Boolean indicating Unicode support

### Style Integration
- All formatters consume Pygments `Style` objects
- Token types follow hierarchical inheritance (e.g., `String.Double` inherits from `String`)
- Color formats standardized across formatters with format-specific conversion

### Configuration Patterns
- Boolean options via `get_bool_opt()`
- Choice options via `get_choice_opt()`
- Numeric options via `get_int_opt()`
- Consistent option naming conventions (e.g., `linenos`, `nowrap`, `noclasses`)

This formatter system enables Pygments to output syntax-highlighted code to virtually any presentation medium while maintaining consistent APIs and extensibility through the plugin system.