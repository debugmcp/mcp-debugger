# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/utils/wheel.py
@source-hash: 6f8e368e4c9d1478
@generated: 2026-02-09T18:00:31Z

**Primary Purpose**: Utility module for parsing and validating wheel files in pip's internal operations. Handles wheel metadata extraction, version compatibility checking, and structural validation.

**Key Functions**:
- `parse_wheel(wheel_zip, name)` (L20-35): Main entry point that orchestrates wheel validation. Returns dist-info directory name and parsed WHEEL metadata. Wraps validation errors with package name context.
- `wheel_dist_info_dir(source, name)` (L38-66): Locates and validates the `.dist-info` directory within a wheel. Ensures exactly one exists and name matches the canonical package name.
- `read_wheel_metadata_file(source, path)` (L69-75): Safe file reader that converts zip/file access errors into `UnsupportedWheel` exceptions.
- `wheel_metadata(source, dist_info_dir)` (L78-94): Extracts and parses WHEEL metadata file using email.parser. Returns parsed Message object.
- `wheel_version(wheel_data)` (L97-110): Extracts and parses Wheel-Version header into integer tuple for compatibility checking.
- `check_compatibility(version, name)` (L113-134): Validates wheel version against pip's supported version (1.0). Raises exceptions for major version incompatibility, warns for minor version differences.

**Important Dependencies**:
- `zipfile.ZipFile`: Core wheel file access
- `email.parser.Parser`: WHEEL metadata parsing (RFC 5322 format)
- `pip._vendor.packaging.utils.canonicalize_name`: Package name normalization
- `pip._internal.exceptions.UnsupportedWheel`: Primary exception type

**Key Constants**:
- `VERSION_COMPATIBLE = (1, 0)` (L14): Pip's supported wheel format version

**Architectural Patterns**:
- Progressive validation: Each function validates one aspect and propagates UnsupportedWheel exceptions upward
- Error context enhancement: `parse_wheel` wraps lower-level errors with package name information
- Canonical name matching: Uses packaging utilities for consistent name comparison
- Email format parsing: Leverages email.parser for WHEEL metadata (follows PEP 427)

**Critical Constraints**:
- Wheel files must contain exactly one `.dist-info` directory
- Directory name must match canonical package name
- WHEEL metadata must be UTF-8 decodable and contain Wheel-Version header
- Major version incompatibility (>1.x) blocks installation
- Path separators in zip files must be forward slashes (/)