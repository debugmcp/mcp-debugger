# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py
@source-hash: d3b08173ce726b72
@generated: 2026-02-09T17:57:55Z

## Purpose
This module implements candidate classes for pip's dependency resolution system using resolvelib. It defines various types of installation candidates that represent different sources of Python packages (already installed, from links, editable installs, etc.) and manages their metadata, dependencies, and installation requirements.

## Key Components

### Type Definitions and Utilities
- `BaseCandidate` (L33-37): Union type for core candidate classes
- `REQUIRES_PYTHON_IDENTIFIER` (L40): Special identifier for Python version requirements
- `as_base_candidate()` (L43-52): Runtime type checker for BaseCandidate instances

### InstallRequirement Factory Functions
- `make_install_req_from_link()` (L55-77): Creates InstallRequirement from Link for regular packages
- `make_install_req_from_editable()` (L80-97): Creates InstallRequirement from Link for editable packages  
- `_make_install_req_from_dist()` (L100-121): Creates InstallRequirement from already-installed distribution

### Core Candidate Classes

#### `_InstallRequirementBackedCandidate` (L124-257)
Abstract base class for candidates that require installation. Provides common functionality:
- Metadata consistency validation (`_check_metadata_consistency()` L209-231)
- Distribution preparation with error handling (`_prepare()` L233-248)
- Dependency iteration with Requires-Python support (`iter_dependencies()` L250-254)
- Lazy loading of name/version properties

#### `LinkCandidate` (L260-314)
Handles packages from URLs/links with wheel cache optimization:
- Checks wheel cache first, falls back to source link
- Validates wheel metadata against expected name/version (L278-287)
- Manages download_info for cached wheels (L289-301)
- Uses `_prepare_distribution()` via preparer (L312-314)

#### `EditableCandidate` (L317-338)
Handles editable/development installs:
- Always uses source link (no caching)
- Delegates to factory's editable preparer (L337-338)

#### `AlreadyInstalledCandidate` (L341-405)
Represents packages already in the environment:
- No actual installation needed
- Returns `None` for `get_install_requirement()` (L404-405)
- Provides metadata from existing distribution

### Special Candidate Classes

#### `ExtrasCandidate` (L408-529)
Wrapper for packages with optional dependencies ([extra] syntax):
- Creates artificial dependency node for resolver
- Adds dependency on base candidate to prevent version conflicts
- Validates and filters requested extras against available ones (L508-516)
- Returns `None` for install requirement (base provides it)

#### `RequiresPythonCandidate` (L532-569)
Represents Python version requirements:
- Uses system Python version by default
- Normalizes version info to semantic version
- No dependencies or install requirements

## Key Patterns

### Lazy Property Loading
All candidates use lazy loading for expensive properties like name/version, computing them from distribution metadata only when accessed.

### Error Context Propagation
The `_prepare()` method (L233-248) enhances HashError and InstallationSubprocessError with additional context from the InstallRequirement.

### Cache Integration
LinkCandidate integrates with wheel cache system, preferring cached wheels while maintaining original source link information for provenance.

### Metadata Validation
Candidates validate that expected name/version matches actual distribution metadata, raising MetadataInconsistent exceptions for mismatches.