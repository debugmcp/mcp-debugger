# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/operations/freeze.py
@source-hash: 579f72132092cff6
@generated: 2026-02-09T18:00:27Z

**Purpose**: Core implementation for pip's freeze functionality - generates requirements.txt compatible output from installed packages.

## Key Classes

**_EditableInfo (L21-24)**: NamedTuple storing requirement string and associated comments for editable installs.

**FrozenRequirement (L223-258)**: Central class representing a frozen package requirement with:
- `__init__` (L224-235): Constructor taking name, requirement string, editable flag, and comments
- `from_dist` classmethod (L237-252): Factory method creating instances from BaseDistribution objects
- `__str__` (L254-258): Formats as requirements.txt entry, prefixing `-e` for editable packages

## Core Functions

**freeze (L26-144)**: Main entry point generating frozen requirements as string generator. Parameters control filtering:
- `requirement`: Optional list of requirements files to process
- `local_only`, `user_only`: Filter installed packages by location
- `exclude_editable`: Skip editable installs
- `skip`: Container of package names to exclude

Flow:
1. Collect installed distributions into `installations` dict (L35-46)
2. If requirements files provided, process each line (L48-139):
   - Handle pip options (L60-83)
   - Parse editable vs regular requirements (L85-98) 
   - Match against installed packages, warn on duplicates/missing
3. Yield remaining unprocessed installations (L142-144)

**_format_as_name_version (L147-154)**: Formats distribution as `name==version` string, handling legacy versions with `===`.

**_get_editable_info (L157-220)**: Extracts VCS information for editable installs:
- Attempts to detect VCS backend and get source requirement
- Falls back to local path with descriptive comments on VCS failures
- Handles multiple exception cases with appropriate error messages

## Dependencies

- `pip._vendor.packaging`: Package name canonicalization and version handling
- `pip._internal.metadata`: Distribution introspection via `get_environment()`
- `pip._internal.req.constructors`: Requirement parsing from lines/editable specs
- `pip._internal.vcs`: Version control system integration for editable packages
- `pip._internal.utils.direct_url_helpers`: PEP 610 direct URL handling

## Key Patterns

- Generator-based output for memory efficiency with large package lists
- Canonical name normalization for consistent package matching
- Comprehensive error handling with informative logging for VCS operations
- Requirements file parsing with pip option pass-through support
- Deduplication tracking to prevent duplicate requirement entries

## Critical Invariants

- Package names are canonicalized for consistent matching across formats
- Editable packages preserve VCS information when available
- Requirements file options are emitted exactly once even if duplicated
- Output format maintains compatibility with pip install requirements