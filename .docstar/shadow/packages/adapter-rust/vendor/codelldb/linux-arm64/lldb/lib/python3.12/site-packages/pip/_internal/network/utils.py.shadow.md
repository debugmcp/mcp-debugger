# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/network/utils.py
@source-hash: e80e52ad42441141
@generated: 2026-02-09T18:00:20Z

**Purpose:** Network utility functions for handling HTTP responses in pip's internal networking layer, focusing on proper handling of compressed content and error responses.

**Key Components:**

- `HEADERS` constant (L26): Default HTTP headers dictionary containing "Accept-Encoding: identity" to prevent automatic compression handling by servers that might double-compress already compressed files.

- `raise_for_status()` function (L29-54): Enhanced HTTP error handler that converts 4xx/5xx status codes into `NetworkConnectionError` exceptions. Handles byte-encoded reason strings with UTF-8/ISO-8859-1 fallback decoding. More specific than standard requests error handling.

- `response_chunks()` generator (L57-96): Streams response data in configurable chunks (defaults to `CONTENT_CHUNK_SIZE`). Uses `decode_content=False` to preserve raw bytes for checksum verification. Handles both urllib3 responses (via `.raw.stream()`) and standard file-like objects (via `.raw.read()`).

**Dependencies:**
- `pip._vendor.requests.models`: For Response type and CONTENT_CHUNK_SIZE constant
- `pip._internal.exceptions.NetworkConnectionError`: Custom exception for network errors
- Standard typing module for type hints

**Architectural Patterns:**
- Generator-based streaming for memory-efficient large file handling
- Dual-path error handling for different response object types
- Explicit compression control to maintain data integrity for verification

**Critical Constraints:**
- Must preserve raw bytes without decompression for checksum validation
- Must handle server compression behavior variations (identity, gzip, double-compression)
- Encoding fallback required for international reason strings