# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/commands/inspect.py
@source-hash: 3c6ad8f534534423
@generated: 2026-02-09T18:00:18Z

## Purpose
Implements pip's `inspect` command that analyzes Python environments and generates detailed JSON reports of installed packages and environment metadata.

## Core Components

**InspectCommand (L19-92)**: Main command class inheriting from `Command`
- `ignore_require_venv = True` (L24): Allows execution in any environment
- `add_options()` (L28-46): Configures CLI options for --local, --user, and --path filtering
- `run()` (L48-63): Primary execution method that orchestrates environment inspection and JSON output
- `_dist_to_dict()` (L65-92): Converts package distribution objects to dictionary representation

## Key Dependencies
- `pip._internal.metadata.get_environment()`: Retrieves environment for package iteration
- `pip._vendor.packaging.markers.default_environment()`: Gets platform/environment markers
- `pip._vendor.rich.print_json()`: Handles formatted JSON output
- `pip._internal.utils.compat.stdlib_pkgs`: Standard library package exclusion list

## Architecture & Data Flow
1. Command options validation via `cmdoptions.check_list_path_option()` (L49)
2. Environment scanning with filtering: local-only, user-only, stdlib exclusion (L50-54)
3. JSON report generation with schema version "1" including:
   - Pip version metadata
   - Installed package details with metadata, locations, direct URLs
   - Environment markers for platform compatibility

## Package Representation Logic
Each package dictionary includes:
- Core metadata and installation location (L67-68)
- Direct URL handling for VCS/URL installs (L72-74)
- Legacy editable install emulation using `path_to_url()` (L76-84)
- Installer information when available (L86-88)
- Request status for dist-info installations (L90-91)

## Output Format
Structured JSON with fixed schema version, pip version, installed packages array, and environment markers for consumption by package management tools.