# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/__init__.py
@source-hash: d7fcccffbf61c71b
@generated: 2026-02-09T17:57:48Z

**Primary Purpose**: Central module for Pygments formatters, providing discovery, loading, and instantiation of formatter classes by name, filename pattern, or from custom files.

**Key Functions**:

- `_fn_matches(fn, glob)` (L28-33): Pattern matching utility using cached regex patterns from fnmatch for filename-based formatter selection
- `_load_formatters(module_name)` (L36-42): Lazy loader that imports formatter modules and caches formatter classes by name
- `get_all_formatters()` (L44-53): Generator yielding all available formatter classes from both built-in FORMATTERS mapping and plugin system
- `find_formatter_class(alias)` (L55-68): Lookup function returning formatter class by alias, checking both FORMATTERS registry and plugins
- `get_formatter_by_name(_alias, **options)` (L70-82): Main API for instantiating formatters by alias with configuration options
- `load_formatter_from_file(filename, formattername, **options)` (L84-117): Dynamic loader for custom formatters using exec() - security-sensitive operation
- `get_formatter_for_filename(fn, **options)` (L119-139): Formatter selection based on filename pattern matching

**Key Classes**:

- `_automodule(types.ModuleType)` (L141-152): Custom module type enabling lazy attribute-based formatter imports via __getattr__

**Dependencies**:
- `pip._vendor.pygments.formatters._mapping.FORMATTERS`: Registry of built-in formatters
- `pip._vendor.pygments.plugin.find_plugin_formatters`: Plugin system integration
- `pip._vendor.pygments.util.ClassNotFound`: Exception for missing formatters

**Architecture Patterns**:
- **Lazy Loading**: Formatters loaded on-demand via `_formatter_cache` (L24) and `_pattern_cache` (L25)
- **Registry Pattern**: FORMATTERS mapping provides metadata (module, name, aliases, filenames, description)
- **Plugin System**: Seamless integration of third-party formatters alongside built-ins
- **Module Swapping**: sys.modules replacement (L154-158) enables direct attribute access to formatters

**Critical Invariants**:
- Formatter cache consistency: once loaded, classes remain cached for performance
- Error propagation: All functions raise ClassNotFound for missing formatters
- Security consideration: load_formatter_from_file uses exec() and requires trusted input

**Export Interface**: __all__ includes main API functions plus all formatter names from FORMATTERS registry (L21-22)