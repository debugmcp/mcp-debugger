# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/bbcode.py
@source-hash: af56fbc33593268b
@generated: 2026-02-09T17:57:47Z

## Primary Purpose
BBCode formatter for Pygments syntax highlighting. Converts tokenized source code into BBcode markup for bulletin board systems and forums.

## Key Components

### BBCodeFormatter (L18-108)
Main formatter class extending `Formatter` base class. Converts syntax-highlighted tokens to BBcode tags.

**Key attributes:**
- `name = 'BBCode'` (L47) - formatter identifier
- `aliases = ['bbcode', 'bb']` (L48) - command-line aliases
- `styles` dict (L56) - maps token types to BBcode tag pairs

**Constructor (__init__, L51-57):**
- Parses `codetag` boolean option (L53) - wraps output in `[code]` tags
- Parses `monofont` boolean option (L54) - adds monospace font tags
- Initializes styles dictionary and calls `_make_styles()`

### Style Generation (_make_styles, L59-76)
Builds BBcode tag mappings from Pygments style definitions:
- Maps color to `[color=#RRGGBB]` tags (L62-64)
- Maps bold/italic/underline to respective BBcode tags (L65-73)
- Note: No background-color or border support due to BBcode limitations (L74)

### Token Processing (format_unencoded, L78-108)
Core formatting logic:
- Writes opening tags for `codetag` and `monofont` options (L79-82)
- Processes token stream, grouping consecutive tokens of same type (L87-97)
- Uses parent token type fallback when exact type not in styles (L88-89)
- Writes closing tags in reverse order (L103-108)

## Dependencies
- `pip._vendor.pygments.formatter.Formatter` (L12) - base formatter class
- `pip._vendor.pygments.util.get_bool_opt` (L13) - option parsing utility

## Architecture Notes
- Token type inheritance: walks up token type hierarchy until match found in styles
- Efficient token batching: consecutive same-type tokens combined before output
- Proper tag nesting: closing tags written in LIFO order
- BBcode limitations acknowledged: no background colors or borders

## Critical Behavior
- Empty token types handled via parent traversal (L88-89)
- Final token batch must be explicitly written after loop (L99-101)
- Monospace and code tags properly nested and closed