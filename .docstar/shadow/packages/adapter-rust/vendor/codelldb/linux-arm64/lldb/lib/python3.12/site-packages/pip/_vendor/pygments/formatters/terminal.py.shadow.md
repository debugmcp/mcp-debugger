# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/terminal.py
@source-hash: 146faba634691663
@generated: 2026-02-09T17:57:50Z

## Primary Purpose
Terminal output formatter for Pygments that renders syntax-highlighted code with ANSI color sequences for console display.

## Key Components

### TERMINAL_COLORS Dictionary (L23-53)
Static color mapping that defines light/dark background color pairs for different token types. Uses standard ANSI color names (e.g., 'blue', 'brightblue') and special formatting markers ('**' for bold, '_color_' for underline). Covers all major token categories including keywords, strings, comments, names, and generic diff markers.

### TerminalFormatter Class (L56-127)
Main formatter class inheriting from `Formatter`. Renders tokens with ANSI escape sequences.

**Key Attributes:**
- `name`: 'Terminal' (L79)
- `aliases`: ['terminal', 'console'] (L80)
- `darkbg`: Boolean flag for dark background mode (L85-86)
- `colorscheme`: Color mapping dictionary, defaults to TERMINAL_COLORS (L87)
- `linenos`: Line numbering option (L88)
- `_lineno`: Internal line counter (L89)

**Key Methods:**

#### `__init__(self, **options)` (L83-89)
Configures formatter with three main options:
- `bg`: 'light'/'dark' background mode
- `colorscheme`: Custom color mapping override
- `linenos`: Enable/disable line numbers

#### `_get_color(self, ttype)` (L98-106)
Token type color resolver. Implements hierarchical lookup by walking up the token type tree until a match is found in the colorscheme. Returns appropriate color based on `darkbg` setting.

#### `_write_lineno(self, outfile)` (L94-96)
Line number writer. Increments counter and outputs formatted line number with conditional newline prefix.

#### `format_unencoded(self, tokensource, outfile)` (L108-127)
Core formatting logic. Processes token stream, applies ANSI colors via `ansiformat()`, handles line breaks, and optionally adds line numbers. Strips newlines before coloring but preserves them in output structure.

## Dependencies
- `pip._vendor.pygments.formatter.Formatter`: Base formatter class
- `pip._vendor.pygments.token`: Token type definitions
- `pip._vendor.pygments.console.ansiformat`: ANSI formatting function
- `pip._vendor.pygments.util.get_choice_opt`: Option validation utility

## Architecture Notes
- Color sequences are terminated at newlines for proper paging support
- Hierarchical token type resolution allows fallback to parent types
- Line numbering is conditional and integrated into the main formatting loop
- No special `get_style_defs()` implementation since terminal doesn't support common styles