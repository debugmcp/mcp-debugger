# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/repr.py
@source-hash: e4c64966638d802e
@generated: 2026-02-09T18:01:03Z

## Purpose
Rich library's automatic `__repr__` generation system. Provides decorators that automatically create string representations for classes by introspecting either a custom `__rich_repr__` method or the class's `__init__` signature.

## Key Components

### Type Definitions (L19-20)
- `Result`: Type alias for rich repr output - iterable of values, single-tuples, key-value pairs, or key-value-default triplets
- `RichReprResult`: Alias for `Result` type

### Exception Class
- `ReprError` (L23-24): Custom exception for repr generation failures

### Core Decorators

#### `auto()` (L27-101)
Primary decorator with two usage patterns:
1. Direct decoration: `@auto` 
2. Parameterized: `@auto(angular=True)`

**Internal Functions:**
- `do_replace()` (L42-96): Main logic for adding `__repr__` and optionally `__rich_repr__` to classes
- `auto_repr()` (L43-66): Generated `__repr__` method that processes `__rich_repr__` output
  - Handles tuples of length 1 (positional args), 2+ (named args with optional defaults)
  - Supports angular (`<Class args>`) vs parenthetical (`Class(args)`) formatting
- `auto_rich_repr()` (L68-86): Auto-generates `__rich_repr__` by inspecting `__init__` signature
  - Maps parameter types to appropriate repr output format
  - Yields positional-only params directly, others as key-value pairs with defaults

#### `rich_repr()` (L104-120)
Convenience wrapper around `auto()` - provides same functionality with clearer naming.

## Key Patterns

### Repr Output Processing (L49-62)
- Bare values: `repr(arg)`
- Single tuples: `repr(arg[0])`  
- Key-value pairs: `key=value!r`
- Key-value-default triplets: Skip if value equals default, otherwise `key=value!r`

### Parameter Introspection (L71-82)
Uses `inspect.signature()` to map `__init__` parameters to repr fields:
- `POSITIONAL_ONLY`: Yield attribute value directly
- `POSITIONAL_OR_KEYWORD`/`KEYWORD_ONLY`: Yield as key-value pair, include default if present

## Dependencies
- `inspect`: For signature introspection
- `functools.partial`: For parameterized decorator pattern
- Standard typing modules for type annotations

## Architecture Notes
- Decorator can be applied with or without parameters using overloading pattern
- Auto-generation falls back gracefully - if `__rich_repr__` exists, only adds `__repr__`
- Angular formatting controlled via attribute on `__rich_repr__` method
- Error handling wraps inspection failures in custom `ReprError`