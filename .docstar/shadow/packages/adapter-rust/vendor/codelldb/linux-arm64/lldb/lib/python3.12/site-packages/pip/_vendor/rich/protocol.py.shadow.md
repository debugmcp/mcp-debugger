# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/protocol.py
@source-hash: e611c70c33477247
@generated: 2026-02-09T18:00:55Z

**Purpose**: Protocol utilities for Rich's rendering system, providing type checking and safe casting for renderable objects.

**Key Functions**:
- `is_renderable(check_object: Any) -> bool` (L10-16): Determines if an object can be rendered by Rich by checking for string type or `__rich__`/`__rich_console__` methods
- `rich_cast(renderable: object) -> "RenderableType"` (L19-42): Safely converts objects to renderable types by recursively calling `__rich__` methods with infinite loop protection

**Core Logic**:
- `is_renderable` uses duck typing to identify renderable objects (strings or objects with Rich protocol methods)
- `rich_cast` implements a safe casting mechanism with:
  - Infinite loop prevention via `rich_visited_set` tracking (L30, L38-40)
  - Malicious object detection using gibberish attribute test (L33-34)
  - Class object filtering (L31)
  - Recursive `__rich__` method calling (L35-36)

**Dependencies**:
- `pip._vendor.rich.console.RenderableType` for type annotations
- Standard library `typing`, `inspect` modules

**Security Features**:
- `_GIBBERISH` constant (L7): Used to detect objects that claim to have all attributes, preventing potential abuse
- Loop detection prevents infinite recursion in malformed `__rich__` implementations

**Architectural Role**: 
Foundation layer for Rich's rendering pipeline, ensuring type safety and protocol compliance before objects enter the rendering system. Part of Rich's defensive programming approach against malicious or malformed renderable objects.