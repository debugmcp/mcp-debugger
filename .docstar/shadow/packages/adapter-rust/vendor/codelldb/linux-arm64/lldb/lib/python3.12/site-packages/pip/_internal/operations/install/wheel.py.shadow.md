# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_internal/operations/install/wheel.py
@source-hash: c2c8435009f1b8f5
@generated: 2026-02-09T17:57:53Z

**Primary Purpose**: Implements wheel package installation for pip, handling the extraction and installation of Python wheel files including metadata management, entry point generation, and file system operations.

**Core Architecture**:
- Main entry point: `install_wheel()` (L714-735) - public interface for wheel installation
- Core implementation: `_install_wheel()` (L424-703) - handles the complete installation process
- File abstraction layer using Protocol-based `File` interface (L65-72) for different file types

**Key Classes and Functions**:

**File Management Classes**:
- `ZipBackedFile` (L348-386) - handles extraction of files from wheel zip archive
- `ScriptFile` (L388-398) - wrapper for script files with shebang fixing capability
- `PipScriptMaker` (L416-422) - extends distlib's ScriptMaker with entry point validation

**Core Installation Functions**:
- `_install_wheel()` (L424-703) - main installation logic handling:
  - File extraction and path mapping (L464-472)
  - Script generation and entry point processing (L553-646)
  - RECORD file management (L684-702)
  - Python bytecode compilation (L604-621)
- `get_console_script_specs()` (L273-345) - generates console script specifications with special handling for pip/setuptools versioning
- `get_entrypoints()` (L118-126) - extracts console and GUI scripts from distribution metadata

**Path and Record Management**:
- `_record_to_fs_path()` / `_fs_to_record_path()` (L227-238) - bidirectional path conversion
- `get_csv_rows_for_installed()` (L241-270) - generates RECORD file entries
- `_normalized_outrows()` (L201-224) - normalizes and sorts RECORD entries

**Utility Functions**:
- `rehash()` (L80-84) - computes SHA256 hash for installed files
- `fix_script()` (L94-111) - replaces generic python shebang with actual interpreter path
- `message_about_scripts_not_on_PATH()` (L129-198) - generates warnings for scripts not on PATH

**Critical Installation Flow**:
1. Parse wheel metadata and determine installation directories (L449-454)
2. Partition files into root scheme vs data scheme paths (L534-547)
3. Extract and install files with proper permissions (L583-585)
4. Generate entry point scripts with version-specific handling (L638-646)
5. Compile Python files to bytecode (L604-621)
6. Create metadata files (INSTALLER, RECORD, REQUESTED) (L664-682)

**Key Dependencies**:
- `pip._vendor.distlib.scripts.ScriptMaker` for script generation
- `pip._internal.metadata.FilesystemWheel` for wheel metadata access
- `pip._internal.utils.unpacking` for file extraction utilities

**Important Constraints**:
- Path traversal protection via `assert_no_path_traversal()` (L476-484)
- Special versioning logic for pip/setuptools scripts respecting ENSUREPIP_OPTIONS (L314-340)
- Atomic file operations using temporary files and replace semantics (L655-661)
- Proper handling of executable permissions for extracted files (L384-385)