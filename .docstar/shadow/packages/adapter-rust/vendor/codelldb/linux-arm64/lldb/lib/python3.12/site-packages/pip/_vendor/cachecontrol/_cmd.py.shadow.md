# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/cachecontrol/_cmd.py
@source-hash: 8a2b2dd84a7326f0
@generated: 2026-02-09T18:00:33Z

## Purpose
Command-line utility for testing HTTP cache functionality using the cachecontrol library. Provides a simple way to verify that HTTP responses can be cached and retrieved correctly.

## Key Functions
- **setup_logging()** (L22-25): Configures debug logging for the cache controller, outputs to stderr via StreamHandler
- **get_session()** (L28-37): Creates a requests.Session with CacheControlAdapter mounted for both HTTP/HTTPS protocols, uses DictCache (in-memory) with ETags enabled
- **get_args()** (L40-43): Simple argument parser that accepts a single URL parameter
- **main()** (L46-66): Core execution flow - makes HTTP request, enables logging, manually caches the response, then tests if it was cached successfully

## Dependencies
- **requests**: HTTP client library (pip vendored)
- **cachecontrol.adapter.CacheControlAdapter**: HTTP adapter implementing cache control logic
- **cachecontrol.cache.DictCache**: In-memory cache implementation
- **cachecontrol.controller**: Cache controller and logger

## Architecture Notes
- Uses monkey-patching to attach `cache_controller` attribute to Session object (L36, L58)
- Logging is enabled *after* the initial request, which may miss cache-related debug info for the first request
- Manual cache testing approach: explicitly calls `cache_response()` then `cached_request()` to verify caching worked
- ETags are enabled but serializer and heuristic are explicitly disabled (None values)

## Type Safety
Uses TYPE_CHECKING imports for type annotations while avoiding runtime import costs. Includes type ignores for the monkey-patched cache_controller attribute.