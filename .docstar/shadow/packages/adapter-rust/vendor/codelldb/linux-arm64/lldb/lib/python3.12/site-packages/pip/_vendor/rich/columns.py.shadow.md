# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/columns.py
@source-hash: 1d45f429c326f5db
@generated: 2026-02-09T18:00:59Z

## Primary Purpose
Provides the `Columns` class for arranging Rich renderables in columnar layouts with flexible formatting options. Part of the Rich terminal formatting library's layout system.

## Key Classes and Functions

### Columns (L16-172)
Main class inheriting from `JupyterMixin` for columnar layout rendering.

**Constructor** (L31-52):
- `renderables`: Optional iterable of Rich renderables to display
- `padding`: Cell padding dimensions (default: (0, 1))  
- `width`: Fixed column width or None for auto-detection
- `expand`: Whether to expand columns to full width
- `equal`: Make all columns equal sized
- `column_first`: Fill columns top-to-bottom vs left-to-right
- `right_to_left`: Reverse column order
- `align`: Text alignment method
- `title`: Optional column title

**Key Methods**:
- `add_renderable()` (L54-60): Appends new renderable to the collection
- `__rich_console__()` (L62-171): Core rendering logic implementing Rich protocol

### iter_renderables() (L86-117)
Local function within `__rich_console__` that yields renderable items with their widths based on layout mode:
- Column-first mode (L90-111): Creates grid layout filling columns vertically first
- Row-first mode (L113): Simple left-to-right filling
- Handles padding for incomplete rows (L115-117)

## Dependencies and Relationships
- **Core Rich imports**: Console, ConsoleOptions, RenderableType, RenderResult for rendering protocol
- **Layout components**: Align, Constrain, Padding for content formatting
- **Measurement**: For calculating renderable dimensions
- **Table**: Uses Table.grid() as underlying layout mechanism
- **JupyterMixin**: Provides Jupyter notebook compatibility

## Architecture and Patterns

### Rendering Strategy
1. **Width Calculation** (L78-84): Measures all renderables, optionally equalizes widths
2. **Column Count Determination** (L123-142): 
   - Fixed width mode: Calculates columns based on specified width
   - Auto mode: Iteratively reduces columns until content fits available width
3. **Layout Generation** (L144-170): Applies constraints, alignment, and directional preferences
4. **Table Construction**: Uses Rich's Table.grid() for final rendering

### Layout Modes
- **Column-first**: Items flow vertically then horizontally, requires complex grid cell mapping
- **Row-first**: Simple left-to-right flow
- **Right-to-left**: Reverses final row order

## Critical Invariants
- Always ensures renderables fit within console width constraints
- Maintains consistent padding between columns
- Handles empty renderable lists gracefully (L70-71)
- Pads incomplete rows with None values for proper table structure

## Implementation Notes
- Uses `defaultdict(int)` for width tracking during column optimization
- Leverages `itemgetter(1)` for efficient renderable extraction
- Employs `chain.from_iterable()` for flattening column-first grid structure
- String renderables are converted using `console.render_str()` (L66-68)