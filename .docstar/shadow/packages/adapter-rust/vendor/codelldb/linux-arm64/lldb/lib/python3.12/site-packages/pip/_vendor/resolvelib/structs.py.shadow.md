# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/resolvelib/structs.py
@source-hash: d3fd7f5cef33fc22
@generated: 2026-02-09T18:00:53Z

Core data structures module for resolvelib dependency resolver, providing graph and iterable view utilities.

## Primary Components

**DirectedGraph (L6-70)**: Bidirectional adjacency list implementation for dependency graph management
- Purpose: Tracks vertices and directed edges with O(1) connectivity queries
- Core data: `_vertices` (set), `_forwards` (dict), `_backwards` (dict) for efficient traversal
- Key methods:
  - `add(key)` (L31-37): Adds isolated vertex, raises ValueError if exists
  - `remove(key)` (L39-45): Removes vertex and all connected edges
  - `connect(f, t)` (L50-58): Creates directed edge from f to t
  - `connected(f, t)` (L47-48): O(1) edge existence check
  - `iter_edges()` (L60-63): Generator for all (from, to) pairs
  - `iter_children/parents()` (L65-69): Navigate forward/backward edges

**IteratorMapping (L72-107)**: Collections.abc.Mapping implementation with accessor function
- Purpose: Lazy mapping that transforms values via accessor function and supports appends
- Constructor: `mapping` (base dict), `accessor` (transform function), `appends` (optional dict)
- Key behavior: `__getitem__` chains accessor(value) with appends using itertools.chain
- Use case: Likely for candidate/requirement mappings in resolver

**Iterable View Classes (L109-163)**: Unified interface for callable vs sequence iterables
- `_FactoryIterableView` (L109-140): Wraps iterator factory with multiple iteration support
  - Uses `itertools.tee()` to enable re-iteration while preserving factory semantics
- `_SequenceIterableView` (L142-162): Simple proxy for sequence types
- `build_iter_view(matches)` (L164-170): Factory function choosing appropriate view type

## Dependencies & Patterns
- Uses `collections_abc` for proper abstract base class inheritance
- Extensive use of `itertools` for efficient iteration patterns
- Python 2/3 compatibility via `__nonzero__ = __bool__` assignments (L88, 132, 158)

## Architectural Notes
- DirectedGraph maintains bidirectional indices for O(1) parent/child queries
- Iterator views provide consistent interface regardless of underlying data type (callable vs sequence)
- Design optimized for dependency resolution where graphs need frequent connectivity queries and iteration over candidates