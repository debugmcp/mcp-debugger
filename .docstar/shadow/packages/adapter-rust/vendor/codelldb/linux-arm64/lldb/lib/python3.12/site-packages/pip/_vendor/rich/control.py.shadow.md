# packages/adapter-rust/vendor/codelldb/linux-arm64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/control.py
@source-hash: 0d29074d440ba2b7
@generated: 2026-02-09T18:01:03Z

**Terminal Control Code Management for Rich Library**

Primary purpose: Provides terminal control sequence generation and text processing utilities for the Rich Python library, enabling cursor movement, screen clearing, and other terminal manipulations.

## Key Constants & Data Structures

**STRIP_CONTROL_CODES (L15-21)**: List of ASCII control code points (bell, backspace, vertical tab, form feed, carriage return) that should be stripped from text.

**_CONTROL_STRIP_TRANSLATE (L22-24)**: Translation table mapping control codes to None for efficient removal using `str.translate()`.

**CONTROL_ESCAPE (L26-32)**: Maps control codes to their escaped string representations (e.g., 7 â†’ "\\a").

**CONTROL_CODES_FORMAT (L34-51)**: Core mapping dictionary from `ControlType` enums to lambda functions that generate ANSI escape sequences. Covers cursor movement, screen operations, and terminal features.

## Core Classes

**Control (L54-184)**: Main renderable class for terminal control sequences.
- `__init__ (L64-72)`: Accepts variable control codes, converts them to proper format, and creates a Segment with rendered ANSI sequences
- `segment` attribute: Contains the final rendered control sequence as a Segment object

### Factory Methods (Classmethods)
- `bell() (L74-77)`: Creates bell/beep control
- `home() (L79-82)`: Moves cursor to top-left position
- `move() (L84-111)`: Relative cursor movement with internal `get_codes()` generator
- `move_to_column() (L113-135)`: Absolute column positioning with optional row offset
- `move_to() (L137-148)`: Absolute cursor positioning
- `clear() (L150-153)`: Screen clearing
- `show_cursor() (L155-158)`: Cursor visibility toggle
- `alt_screen() (L160-166)`: Alternate screen buffer management
- `title() (L168-175)`: Terminal window title setting

### Rendering Interface
- `__str__ (L177-178)`: Returns raw control sequence text
- `__rich_console__ (L180-184)`: Rich protocol implementation, yields segment if non-empty

## Utility Functions

**strip_control_codes() (L187-198)**: Removes specified control characters from text using translation table for performance.

**escape_control_codes() (L201-214)**: Converts control characters to visible escaped representations using translation table.

## Architecture Patterns

- **Factory pattern**: Extensive use of classmethods for creating specific control types
- **Translation tables**: Pre-computed dictionaries for efficient text processing
- **Lazy evaluation**: Lambda functions in CONTROL_CODES_FORMAT for on-demand sequence generation
- **Rich protocol compliance**: Implements `__rich_console__` for integration with Rich's rendering system

## Dependencies

- Imports `ControlType`, `ControlCode`, `Segment` from `.segment` module
- Type checking imports for Console integration
- Typing compatibility layer for Python <3.8

## Critical Constraints

- Control codes must match ControlType enum values in CONTROL_CODES_FORMAT
- Coordinate parameters are 0-indexed but converted to 1-indexed for ANSI sequences
- Empty segments are not yielded in rendering to avoid unnecessary output