# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/commands/index.py
@source-hash: 4405f1989c058556
@generated: 2026-02-09T18:01:08Z

## Primary Purpose
Implements the `pip index` command for inspecting package information from PyPI indexes. Currently experimental with only a "versions" subcommand that lists available versions of a specified package.

## Key Classes and Functions

### IndexCommand (L22-139)
Main command class extending `IndexGroupCommand`. Handles the experimental `pip index` command functionality.

**Key Methods:**
- `add_options()` (L32-46): Configures command-line options including target Python, binary preferences, and index options
- `run()` (L48-76): Main entry point that dispatches to action handlers based on first argument
- `_build_package_finder()` (L78-101): Creates a `PackageFinder` with appropriate settings for index operations
- `get_available_package_versions()` (L103-139): Implements the "versions" subcommand to query and display package versions

## Architecture Patterns

**Command Pattern**: Uses a handlers dictionary (L49-51) to map subcommands to methods, currently only supporting "versions".

**Session Management**: Uses context manager pattern (L110) for HTTP session lifecycle management via `self._build_session()`.

**Error Boundary**: Centralizes error handling in `run()` method (L69-75) rather than individual action handlers.

## Key Dependencies
- `PackageFinder` and `LinkCollector`: Core package discovery functionality
- `SelectionPreferences`: Controls version filtering (yanked packages, prereleases)
- `TargetPython`: Handles Python version compatibility
- `cmdoptions`: Provides reusable command-line option definitions

## Critical Behavior
- **Yanked Package Filtering**: Explicitly sets `allow_yanked=False` (L92) to exclude yanked versions
- **Prerelease Handling**: Filters prereleases unless `--pre` flag is used (L122-126)
- **Experimental Status**: Logs warning about experimental nature (L53-57)
- **Version Sorting**: Displays versions in descending order with latest first (L134-135)

## Output Format
Displays package name with latest version, followed by comma-separated list of all available versions, plus installation information via `print_dist_installation_info()`.