# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatters/terminal.py
@source-hash: 146faba634691663
@generated: 2026-02-09T17:57:56Z

**Primary Purpose**: Terminal formatter for Pygments that outputs syntax-highlighted code using ANSI color escape sequences for console display.

**Core Components**:

- `TERMINAL_COLORS` (L23-53): Dictionary mapping Pygments token types to color tuples (light_bg_color, dark_bg_color). Defines default color scheme for syntax highlighting including keywords, strings, comments, names, operators, and generic tokens.

- `TerminalFormatter` (L56-127): Main formatter class inheriting from `Formatter`. Converts tokenized source code to ANSI-colored terminal output.

**Key Methods**:

- `__init__()` (L83-89): Initializes formatter with options:
  - `bg`: "light"/"dark" background mode (affects color selection)
  - `colorscheme`: Custom color mapping (defaults to TERMINAL_COLORS)
  - `linenos`: Enable line numbering
  - `_lineno`: Internal line counter

- `_get_color()` (L98-106): Resolves color for token type by walking up token inheritance tree until match found in colorscheme

- `_write_lineno()` (L94-96): Outputs formatted line numbers with conditional newlines

- `format_unencoded()` (L108-127): Core formatting logic that:
  - Iterates through token stream
  - Applies ANSI colors via `ansiformat()` 
  - Handles line breaks and optional line numbering
  - Strips trailing newlines from colored output to prevent color bleeding

**Dependencies**:
- `pip._vendor.pygments.formatter.Formatter`: Base formatter class
- `pip._vendor.pygments.token.*`: Token type definitions
- `pip._vendor.pygments.console.ansiformat`: ANSI color formatting utility
- `pip._vendor.pygments.util.get_choice_opt`: Option validation helper

**Architecture Notes**:
- Color resolution uses token type inheritance (parent traversal)
- ANSI sequences terminated at newlines for proper paging support
- Line numbering integrated with color formatting
- Supports both light and dark terminal backgrounds