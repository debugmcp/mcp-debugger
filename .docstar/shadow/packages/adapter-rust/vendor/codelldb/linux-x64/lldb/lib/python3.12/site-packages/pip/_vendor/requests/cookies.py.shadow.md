# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/cookies.py
@source-hash: 6cd8be8aa123e0d3
@generated: 2026-02-09T18:01:45Z

This module provides compatibility layer for using `http.cookiejar.CookieJar` with the requests library. It bridges the gap between requests' internal structures and Python's standard cookie handling mechanisms.

## Core Classes

**MockRequest (L23-101)**: Adapter that wraps `requests.Request` to mimic `urllib2.Request` interface for `http.cookiejar.CookieJar` compatibility. Key methods:
- `__init__(request)` (L35): Stores request and initializes new headers dict
- `get_full_url()` (L49): Returns URL, respecting Host header overrides
- `add_unredirected_header(name, value)` (L84): Adds headers that cookiejar can use
- Properties for `host`, `origin_req_host`, `unverifiable` (L90-101)

**MockResponse (L103-122)**: Adapter that wraps HTTP headers to mimic `urllib.addinfourl` for cookiejar extraction.
- `info()` (L117): Returns the wrapped headers object
- `getheaders(name)` (L120): Missing return statement - likely a bug

**RequestsCookieJar (L176-438)**: Main cookie container that extends `cookielib.CookieJar` with dict-like interface. Provides:
- Dict operations: `get()`, `set()`, `__getitem__`, `__setitem__`, `__delitem__` (L194-347)
- Iterator methods: `iterkeys()`, `itervalues()`, `iteritems()` and their list variants (L225-275)
- Cookie management: `set_cookie()` (L349), `update()` (L358), `_find()` (L366)
- Utility methods: `list_domains()`, `list_paths()`, `get_dict()` (L277-319)
- Pickling support: `__getstate__()`, `__setstate__()` (L415-426)
- Copy functionality: `copy()` (L428-433)

**CookieConflictError (L170-173)**: Exception for ambiguous cookie lookups.

## Key Functions

**extract_cookies_to_jar(jar, request, response)** (L124-137): Extracts cookies from urllib3 response into cookiejar using mock adapters.

**get_cookie_header(jar, request)** (L140-148): Generates Cookie header string for outgoing requests.

**remove_cookie_by_name(cookiejar, name, domain=None, path=None)** (L151-167): Removes cookies by name with optional domain/path filtering.

**create_cookie(name, value, **kwargs)** (L455-489): Creates `cookielib.Cookie` from parameters with sensible defaults.

**morsel_to_cookie(morsel)** (L492-518): Converts `http.cookies.Morsel` to `cookielib.Cookie`, handling expires/max-age conversion.

**cookiejar_from_dict(cookie_dict, cookiejar=None, overwrite=True)** (L521-539): Creates cookiejar from dictionary.

**merge_cookies(cookiejar, cookies)** (L542-561): Merges dict or cookiejar into existing cookiejar.

## Dependencies
- Standard library: `calendar`, `copy`, `time`, `threading` (with fallback to `dummy_threading`)
- Internal: `._internal_utils.to_native_string`, `.compat` (Morsel, MutableMapping, cookielib, url parsing)

## Architectural Notes
- Uses adapter pattern to bridge requests and stdlib cookie interfaces
- RequestsCookieJar provides dict-like API while maintaining CookieJar compatibility
- Thread-safe via RLock (removed/restored during pickling)
- Warning: Dict operations are O(n) due to linear search through cookies
- Handles cookie value quote stripping in `set_cookie()`