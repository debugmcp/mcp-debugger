# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/layout.py
@source-hash: 6a3912140b4456ff
@generated: 2026-02-09T18:01:56Z

## Purpose
Rich library's layout system for dividing terminal screen real estate into hierarchical regions. Enables complex terminal UIs by recursively splitting areas into rows and columns with configurable sizing, ratios, and visibility.

## Key Classes and Functions

**LayoutRender (L32-36)** - NamedTuple containing a Region and rendered segments for a layout area.

**LayoutError/NoSplitter (L43-48)** - Exception hierarchy for layout-related errors.

**_Placeholder (L51-78)** - Internal renderable that displays layout debugging info (name, dimensions) in a blue-bordered panel when no content is assigned.

**Splitter (L80-99)** - Abstract base class defining the interface for dividing regions among child layouts. Requires `get_tree_icon()` and `divide()` methods.

**RowSplitter (L101-119)** - Concrete splitter that divides regions horizontally using ratio_resolve() to calculate widths. Uses ⬌ tree icon.

**ColumnSplitter (L121-139)** - Concrete splitter that divides regions vertically using ratio_resolve() to calculate heights. Uses ⬍ tree icon.

**Layout (L142-416)** - Main layout class implementing hierarchical screen division:
- Constructor (L156-175) accepts renderable content, sizing parameters (size, minimum_size, ratio), name, and visibility
- Properties: `renderable` (L184), `children` (L189), `map` (L194)
- Navigation: `get()` (L198), `__getitem__()` (L216) for finding named layouts
- Tree visualization: `tree` property (L223) creates Rich Tree representation
- Splitting: `split()` (L261), `split_row()` (L299), `split_column()` (L307), `add_split()` (L286)
- Management: `unsplit()` (L315), `update()` (L319)
- Rendering: `_make_region_map()` (L345) creates layout-to-region mapping, `render()` (L366) produces final output
- Console integration: `__rich_console__()` (L395) handles Rich rendering protocol

## Dependencies
- `._ratio.ratio_resolve` - Core logic for proportional size calculation
- Rich components: Console, Panel, Align, Pretty, Tree, Segment
- Threading: RLock for thread-safe updates

## Architecture Patterns
- **Composite Pattern**: Layouts contain child layouts in recursive tree structure
- **Strategy Pattern**: Pluggable splitters (row/column) determine division behavior  
- **Template Method**: Abstract Splitter defines division algorithm structure
- **Factory Pattern**: String-based splitter lookup via `splitters` dict

## Key Invariants
- Layout tree maintains parent-child relationships via `_children` list
- Region mapping ensures no overlapping areas during rendering
- Thread safety via RLock around renderable updates and screen refresh
- Visibility filtering: only visible children participate in layout calculations

## Performance Notes
- Uses local variable caching (`_Region`, `_islice`) in hot paths
- Optimized stack-based region calculation avoids recursion
- Lazy tree generation only when `tree` property accessed