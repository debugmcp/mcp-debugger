# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/cmdline.py
@source-hash: bdb972686abbf4e2
@generated: 2026-02-09T18:01:39Z

## Purpose
Primary entry point for Pygments command-line interface (`pygmentize` command). Handles argument parsing, lexer/formatter selection, input/output processing, and code highlighting operations.

## Key Components

### Utility Functions
- `_parse_options(o_strs)` (L33-51): Parses comma-separated option strings into key-value dictionaries, handling both boolean flags and value assignments
- `_parse_filters(f_strs)` (L54-64): Parses filter specifications with optional colon-separated options
- `_print_help(what, name)` (L67-84): Displays help documentation for specific lexers, formatters, or filters
- `_print_list(what)` (L87-136): Pretty-prints available lexers, formatters, filters, or styles to console
- `_print_list_as_json(requested_items)` (L138-180): Outputs available components as JSON structure

### Core Logic
- `main_inner(parser, argns)` (L182-515): Primary command processing logic handling all operation modes:
  - Version display (`-V`)
  - List operations (`-L`) with optional JSON output
  - Help display (`-H`)
  - Lexer name guessing (`-N`, `-C`)
  - Style sheet generation (`-S`)
  - Main highlighting workflow with lexer/formatter selection
  - Stream processing mode (`-s`) for line-by-line input
  - File I/O with encoding detection and terminal color support

### Argument Parser Setup
- `HelpFormatter` class (L517-525): Custom help formatter that adapts to terminal width
- `main(args)` (L528-668): Entry point function that:
  - Creates comprehensive argument parser with grouped options
  - Handles exception processing with optional verbose tracebacks
  - Manages BrokenPipeError for pager scenarios

## Key Dependencies
- **Pygments core**: lexers, formatters, filters, styles from `pip._vendor.pygments`
- **Encoding utilities**: `guess_decode`, `guess_decode_from_terminal`, `terminal_encoding`
- **Special components**: `TextLexer`, `LatexEmbeddedLexer`, terminal formatters
- **Optional**: `colorama` for Windows terminal color support

## Architecture Patterns
- **Command pattern**: Each major operation mode (`-L`, `-H`, `-S`, etc.) handled as separate code paths
- **Factory pattern**: Dynamic lexer/formatter loading based on names, filenames, or content analysis
- **Stream processing**: Supports both batch and streaming input modes
- **Graceful fallbacks**: TextLexer as default when detection fails

## Critical Behavior
- **Encoding detection**: Automatic input/output encoding inference with manual override support
- **Custom component loading**: `-x` flag enables loading user-defined lexers/formatters from Python files
- **Terminal detection**: Automatic formatter selection based on COLORTERM and TERM environment variables
- **LaTeX integration**: Special lexer wrapping for `escapeinside` option with LatexFormatter
- **Error handling**: Comprehensive exception catching with optional verbose mode for debugging

## Input/Output Handling
- Supports stdin/stdout, file input/output, and mixed scenarios
- Binary stream handling with encoding detection
- Terminal color support detection and setup
- Cross-platform compatibility (Windows colorama integration)