# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/file_proxy.py
@source-hash: 4e5f531cc0d9f8f9
@generated: 2026-02-09T18:01:46Z

**Primary Purpose**
File proxy that intercepts and redirects file writes (typically stdout/stderr) to a Rich console for enhanced terminal output with ANSI escape sequence processing.

**Core Class: FileProxy (L11-57)**
Extends `io.TextIOBase` to wrap file objects and redirect writes through Rich's console system.

**Constructor (L14-18)**
- Takes `console: Console` and `file: IO[str]` parameters
- Maintains internal buffer (`__buffer: List[str]`) for line accumulation
- Creates `AnsiDecoder` instance for ANSI escape sequence processing

**Key Methods**

**`write(text: str) -> int` (L28-48)**
- Core write interception logic with line-by-line processing
- Buffers partial lines until newline encountered
- Processes complete lines through ANSI decoder and console output
- Returns original text length (not bytes written)

**`flush() -> None` (L50-54)**  
- Forces output of buffered content through console
- Clears internal buffer using `del self.__buffer[:]`

**`rich_proxied_file` property (L20-23)**
- Provides access to the original wrapped file object

**`__getattr__(name: str) -> Any` (L25-26)**
- Delegates unknown attribute access to wrapped file object
- Enables transparent proxy behavior for file operations

**Key Dependencies**
- `.ansi.AnsiDecoder`: Processes ANSI escape sequences in output
- `.text.Text`: Rich's text representation with styling support  
- `.console.Console`: Terminal output management (TYPE_CHECKING import)

**Architectural Patterns**
- Proxy pattern: Wraps file object while intercepting specific operations
- Line buffering: Accumulates partial writes until complete lines available
- ANSI processing: Converts raw ANSI codes to Rich styling before console output

**Critical Behavior**
- Write operations are buffered and only flushed to console on newlines or explicit flush()
- Original file object remains accessible for direct operations if needed
- Type checking enforced on write() input (must be str)