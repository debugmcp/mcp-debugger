# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/timeout.py
@source-hash: 730ab874c93cee62
@generated: 2026-02-09T17:58:05Z

## Primary Purpose
HTTP timeout configuration utility for urllib3, providing granular control over connection and read timeouts with intelligent timeout calculation and validation.

## Key Components

### Timeout Class (L19-271)
Core timeout configuration class with three timeout types: `total`, `connect`, and `read`. Supports both pool-level defaults and per-request overrides.

**Key Attributes:**
- `_connect` (L102): Connection timeout value (validated)
- `_read` (L103): Read timeout value (validated)  
- `total` (L104): Total timeout combining connect and read phases
- `_start_connect` (L105): Timer start timestamp for duration calculations
- `DEFAULT_TIMEOUT` (L99): Sentinel referencing `_GLOBAL_DEFAULT_TIMEOUT`

**Core Methods:**
- `__init__(total, connect, read)` (L101): Constructor with timeout validation
- `_validate_timeout(value, name)` (L123): Static validation ensuring positive numeric values or None
- `from_float(timeout)` (L169): Factory method creating Timeout from legacy single timeout value
- `clone()` (L184): Creates copy preserving sentinel object references for socket compatibility

**Timer Management:**
- `start_connect()` (L198): Begins connection timing, prevents double-start with TimeoutStateError
- `get_connect_duration()` (L209): Returns elapsed connection time, requires prior start_connect() call

**Smart Timeout Properties:**
- `connect_timeout` (L224): Returns effective connection timeout considering total timeout constraints
- `read_timeout` (L242): Calculates remaining read timeout after connection phase, accounting for elapsed time

## Dependencies
- `socket._GLOBAL_DEFAULT_TIMEOUT, getdefaulttimeout` (L6): System socket timeout integration
- `..exceptions.TimeoutStateError` (L8): Custom exception for invalid timer states
- `time.monotonic` or `time.time` (L16): Monotonic clock for accurate duration measurement

## Key Patterns
- **Sentinel Pattern**: `_Default` object (L12) distinguishes user-specified None from unspecified parameters
- **Smart Timeout Logic**: Properties dynamically calculate effective timeouts considering total constraints and elapsed time
- **Validation Layer**: All timeout values validated for type and positive values with descriptive error messages

## Critical Constraints
- Connection timer can only be started once per instance
- Read timeout calculation requires connection timer to be started when total timeout is set
- Timeout values must be positive numbers, None (infinite), or DEFAULT_TIMEOUT sentinel
- Boolean values explicitly rejected to prevent common mistakes