# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/_asyncio.py
@source-hash: 422eb0810b066bd3
@generated: 2026-02-09T18:01:51Z

## Primary Purpose
Asyncio-compatible retry mechanism for the tenacity library. Provides async/await compatible retry functionality with configurable sleep, stop, and wait strategies.

## Key Components

### AsyncRetrying Class (L33-94)
Main async retry orchestrator extending `BaseRetrying`. Core functionality:

**Constructor (L36-38)**: Accepts async sleep function (defaults to `asyncio.sleep`) and forwards other retry configuration to parent class.

**`__call__` method (L40-59)**: Primary retry execution logic. Creates `RetryCallState`, enters retry loop using `iter()` from parent to determine next action:
- `DoAttempt`: Executes wrapped function, captures exceptions or results
- `DoSleep`: Waits specified duration before next attempt  
- Other return values: Terminates with that value

**Async Iterator Protocol (L64-80)**: 
- `__aiter__` (L64-67): Initializes retry state for iteration
- `__anext__` (L69-80): Yields `AttemptManager` instances for manual retry control

**`wraps` method (L82-94)**: Creates async wrapper function that preserves retry attributes (`retry`, `retry_with`) while ensuring proper coroutine behavior.

**`__iter__` override (L61-62)**: Explicitly prevents sync iteration by raising `TypeError`.

## Type Variables (L29-30)
- `WrappedFnReturnT`: Return type of wrapped function
- `WrappedFn`: Bounded to async callable types

## Dependencies
- `asyncio.sleep` for async delays
- Parent `BaseRetrying` for core retry logic (`iter`, `begin` methods)
- `RetryCallState`, `AttemptManager`, `DoAttempt`, `DoSleep` for state management

## Architecture Notes
- Delegates retry decision logic to parent class via `iter()` method
- Uses composition pattern - accepts injectable sleep function for testability
- Maintains backward compatibility with sync tenacity API while adding async support
- Exception handling preserves full traceback via `sys.exc_info()`