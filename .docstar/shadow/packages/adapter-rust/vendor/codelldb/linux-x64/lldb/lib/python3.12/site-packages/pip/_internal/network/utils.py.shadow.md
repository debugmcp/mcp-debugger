# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/network/utils.py
@source-hash: e80e52ad42441141
@generated: 2026-02-09T18:01:14Z

**Purpose**: Network utilities for handling HTTP responses in pip's download operations, providing controlled response processing and error handling.

**Core Components**:

- `HEADERS` constant (L26): Dictionary containing `Accept-Encoding: identity` header to prevent server compression issues during package downloads
- `raise_for_status()` function (L29-54): Custom HTTP status code checker that raises `NetworkConnectionError` for 4xx/5xx responses with proper Unicode handling for response reasons
- `response_chunks()` generator (L57-96): Streams response data in configurable chunks with raw byte preservation for checksum verification

**Key Dependencies**:
- `pip._vendor.requests.models`: Uses `CONTENT_CHUNK_SIZE` and `Response` types
- `pip._internal.exceptions.NetworkConnectionError`: Custom exception for network errors

**Critical Implementation Details**:

The `HEADERS` configuration (L7-26) addresses server compression behavior variations where some servers double-compress already compressed files. Setting `Accept-Encoding: identity` prevents this issue.

The `raise_for_status()` function handles Unicode decoding robustly (L31-41), attempting UTF-8 first then falling back to ISO-8859-1 for localized server error messages.

The `response_chunks()` function preserves raw bytes by setting `decode_content=False` (L87) to maintain file integrity for checksum verification. It handles both urllib3 streaming (L63-89) and standard file-like objects (L90-96) as fallback.

**Architectural Pattern**: Low-level HTTP response handling utilities that prioritize data integrity and robust error reporting for package management operations.