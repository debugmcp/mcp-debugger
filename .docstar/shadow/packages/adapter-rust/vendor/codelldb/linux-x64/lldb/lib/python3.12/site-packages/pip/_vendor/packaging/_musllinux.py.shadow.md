# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/_musllinux.py
@source-hash: a7d66a35888e22d1
@generated: 2026-02-09T18:01:27Z

**Primary Purpose**: Implements PEP 656 support for detecting musl libc runtime and generating compatible musllinux platform tags for Python package distribution.

**Key Classes & Functions**:
- `_MuslVersion(NamedTuple)` (L18-21): Simple container for major.minor version numbers
- `_parse_musl_version(output: str)` (L23-30): Parses musl version from loader output using regex pattern "Version (\d+)\.(\d+)"
- `_get_musl_version(executable: str)` (L34-53): Core detection function that:
  - Opens executable as ELF file to extract dynamic linker path
  - Checks if linker contains "musl" string
  - Executes the linker and parses stderr for version info
  - Uses `@functools.lru_cache` for performance optimization
- `platform_tags(archs: Sequence[str])` (L56-72): Main public API that generates backwards-compatible musllinux tags in format "musllinux_{major}_{minor}_{arch}"

**Dependencies**:
- `._elffile.ELFFile`: Custom ELF parser for extracting dynamic linker information
- Standard library: `subprocess`, `re`, `sys`, `functools`

**Architecture Patterns**:
- Caching pattern: Uses `@functools.lru_cache` on expensive musl detection
- Error handling: Graceful fallback on ELF parsing failures (OSError, TypeError, ValueError)
- Generator pattern: `platform_tags()` yields compatible tags in descending version order
- Subprocess interaction: Executes dynamic linker directly to get version info

**Critical Logic**:
- Version compatibility: Generates tags from detected version down to {major}_0_{arch}
- Platform detection: Only works when Python is dynamically linked against musl
- Tag format: Follows PEP 656 specification for musllinux platform tags

**Main Script Behavior** (L75-85): Debug utility that prints current platform, detected musl version, and all compatible tags.