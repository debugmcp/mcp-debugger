# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/pkg_resources.py
@source-hash: 534ec44c020d4867
@generated: 2026-02-09T18:01:16Z

## Purpose and Responsibility
This module provides a pkg_resources-based implementation of pip's metadata abstraction layer. It wraps pkg_resources functionality to provide standardized access to Python package metadata through Distribution and Environment classes.

## Key Classes and Components

### EntryPoint (L42-46)
NamedTuple representing package entry points with name, value, and group attributes.

### InMemoryMetadata (L48-81)
IMetadataProvider implementation that reads metadata from a dictionary. Handles metadata decoding with proper error mapping to internal exception types. Key methods:
- `get_metadata(name)` (L61-68): Decodes metadata bytes to string, wraps UnicodeDecodeError as UnsupportedWheel
- `has_metadata(name)` (L58-59): Checks metadata existence
- `get_metadata_lines(name)` (L70-71): Returns metadata as iterable lines

### Distribution (L83-251)
Core class wrapping pkg_resources.Distribution to provide standardized metadata access. Maintains lazy-loaded extra mapping for performance.

**Key Properties:**
- `location` (L157-159): Package location path
- `installed_location` (L161-170): Normalized installation path, handles egg links
- `canonical_name` (L186-188): Canonicalized package name
- `version` (L190-192): Parsed Version object
- `installed_by_distutils` (L176-184): Detects distutils installations via provider introspection

**Factory Methods:**
- `from_directory(directory)` (L99-117): Creates Distribution from .egg-info/.dist-info directory
- `from_metadata_file_contents(metadata, filename, project_name)` (L119-134): Creates from raw metadata bytes
- `from_wheel(wheel, name)` (L136-155): Extracts metadata from wheel files, handles zip errors

**Core Methods:**
- `_metadata_impl()` (L219-239): Parses METADATA/PKG-INFO using email parser
- `iter_dependencies(extras)` (L241-247): Returns requirements with optional extras filtering
- `iter_entry_points()` (L213-217): Yields EntryPoint objects from distribution

### Environment (L253-301)
Manages collections of distributions through pkg_resources.WorkingSet wrapper.

**Factory Methods:**
- `default()` (L257-259): Uses global working_set
- `from_paths(paths)` (L261-263): Creates from custom path list

**Key Methods:**
- `_search_distribution(name)` (L269-279): Searches all distributions for canonical name match
- `get_distribution(name)` (L281-301): Enhanced search with working set refresh fallback for edge cases like double installation/uninstallation

## Dependencies and Relationships
- Wraps `pkg_resources` module for legacy metadata access
- Inherits from base classes: BaseDistribution, BaseEnvironment, BaseEntryPoint
- Uses packaging utilities for name canonicalization and version parsing
- Integrates with pip's wheel and exception handling utilities

## Architectural Patterns
- **Adapter Pattern**: Wraps pkg_resources API to match pip's internal interfaces
- **Factory Methods**: Multiple construction paths for different package formats
- **Lazy Loading**: Extra mapping computed on first access for performance
- **Error Translation**: Maps external exceptions to internal pip exception types

## Critical Invariants
- Distribution names are always canonicalized for consistent lookup
- Metadata encoding errors are wrapped as UnsupportedWheel exceptions
- Working set refresh mechanism handles double installation edge cases
- Entry points are parsed consistently regardless of underlying format