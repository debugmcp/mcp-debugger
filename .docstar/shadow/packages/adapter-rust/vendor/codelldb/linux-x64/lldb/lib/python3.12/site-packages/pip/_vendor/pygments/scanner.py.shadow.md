# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/scanner.py
@source-hash: 6ff9eee7f7f71c28
@generated: 2026-02-09T18:01:33Z

## Purpose
Provides a regex-based text scanner for context-dependent lexing in Pygments. Designed for languages where keyword recognition depends on context, making simple regex lexers insufficient (like Pascal/Delphi).

## Core Components

### EndOfText Exception (L20-24)
RuntimeError subclass raised when attempting to match patterns after reaching end of text.

### Scanner Class (L27-104)
Main scanner implementation providing stateful regex pattern matching with position tracking.

**Initialization (L35-47):**
- `text`: Input text to scan
- `flags`: Default regex flags
- Maintains position state: `pos` (current), `start_pos` (match start), `data_length`
- Caches compiled regex patterns in `_re_cache` dict
- Tracks `match` (current) and `last` (previous) match results

**Core Methods:**
- `eos` property (L49-52): Returns True if at end of text
- `check(pattern)` (L54-64): Tests pattern at current position without advancing (lookahead)
- `test(pattern)` (L66-70): Boolean version of check()
- `scan(pattern)` (L72-93): Main scanning method - matches pattern, updates position and match state
- `get_char()` (L95-97): Convenience method to scan single character using '.' pattern

## Key Behaviors

**Pattern Caching:** All regex patterns are compiled once and cached in `_re_cache` to avoid recompilation overhead.

**State Management:** Scanner maintains position pointers and match history:
- `start_pos`: Position before current match
- `pos`: Current position (end of last match)  
- `match`: Current match text
- `last`: Previous match text

**Error Handling:** Raises EndOfText when attempting operations at end of input.

## Dependencies
- `re` module for regex operations

## Usage Pattern
Designed for building lexers that need contextual keyword recognition. Scanner provides building blocks for stateful parsing where simple regex tokenization is insufficient.