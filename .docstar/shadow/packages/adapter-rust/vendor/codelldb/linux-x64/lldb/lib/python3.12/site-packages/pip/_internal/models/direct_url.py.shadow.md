# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/models/direct_url.py
@source-hash: b81b58d871dddd33
@generated: 2026-02-09T18:01:14Z

**Primary Purpose**: Implementation of PEP 610 direct URL standard for pip package installation metadata. Handles serialization/deserialization of package installation source information including VCS repositories, archives, and local directories.

**Key Classes**:

- **DirectUrl (L159-224)**: Main class representing a direct URL installation source
  - Properties: `url`, `info` (InfoType), `subdirectory`
  - `redacted_url` property (L179-189): Returns URL with credentials removed unless environment variables or git user
  - `from_dict`/`to_dict` (L195-214): JSON schema serialization
  - `from_json`/`to_json` (L217-221): JSON string conversion
  - `is_local_editable()` (L223-224): Checks if installation is local editable

- **VcsInfo (L70-93)**: Version control system information (dataclass)
  - Fields: `vcs`, `commit_id`, `requested_revision`
  - ClassVar `name = "vcs_info"`

- **ArchiveInfo (L95-137)**: Archive/package file information
  - Properties: `hash`, `hashes` (dict)
  - Hash setter (L112-127): Auto-populates hashes dict from legacy hash format
  - `name = "archive_info"`

- **DirInfo (L140-153)**: Local directory information (dataclass) 
  - Field: `editable` (bool)
  - ClassVar `name = "dir_info"`

**Key Functions**:

- `_get()` (L27-38): Safe dictionary value extraction with type checking
- `_get_required()` (L41-47): Required field extraction, raises on None
- `_exactly_one_of()` (L50-61): Validates exactly one info type is provided
- `_filter_none()` (L64-66): Creates dict excluding None values

**Critical Patterns**:

- **InfoType Union** (L155): `Union[ArchiveInfo, DirInfo, VcsInfo]` - exactly one required
- **Validation Strategy**: Type checking on deserialization, validation through round-trip serialization
- **Auth Handling**: Credential redaction preserves environment variables (`${VAR}`) and git usernames
- **Legacy Compatibility**: ArchiveInfo maintains both `hash` (legacy) and `hashes` (new) formats

**Dependencies**: `json`, `re`, `urllib.parse`, `dataclasses`, `typing`

**Constants**:
- `DIRECT_URL_METADATA_NAME = "direct_url.json"` (L19)
- `ENV_VAR_RE` (L20): Pattern for environment variable syntax