# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_emoji_replace.py
@source-hash: 9fe91c7adb04531d
@generated: 2026-02-09T18:01:39Z

**Primary Purpose:** Provides emoji code replacement functionality for the Rich library, converting textual emoji representations (e.g., `:smile:`) into Unicode emoji characters with optional variant selectors.

**Core Function:**
- `_emoji_replace` (L12-32): Main replacement function that processes text containing emoji codes and converts them to Unicode emoji characters

**Key Components:**
- **Type Aliases (L7-9):** Defines type hints for regex operations - `_ReStringMatch` for match objects, `_ReSubCallable` for replacement functions, and `_EmojiSubMethod` for compiled regex substitution methods
- **Regex Pattern (L15):** Uses precompiled regex `r"(:(\S*?)(?:(?:\-)(emoji|text))?:)"` to match emoji codes with optional variant specifiers
- **Variant System (L19-21):** Maps variant names to Unicode variant selectors - "text" maps to `\uFE0E` (text presentation) and "emoji" maps to `\uFE0F` (emoji presentation)
- **Nested Replacement Function `do_replace` (L23-30):** Handles individual emoji code matches by looking up emoji names in the EMOJI dictionary and appending appropriate variant selectors

**Dependencies:**
- `._emoji_codes.EMOJI`: Dictionary containing emoji name-to-Unicode mappings
- Standard library `re` module for regex operations
- `typing` module for type annotations

**Key Behavior:**
- Emoji codes follow format `:name:` or `:name-variant:` where variant can be "emoji" or "text"
- Case-insensitive emoji name lookup (converts to lowercase)
- Falls back to original text if emoji name not found in dictionary
- Supports default variant specification that applies when no explicit variant provided
- Uses optimized lookup methods (`__getitem__`, `.get`) for performance

**Architecture Pattern:** Uses dependency injection pattern with `_emoji_sub` parameter allowing custom regex substitution methods while defaulting to a precompiled regex.