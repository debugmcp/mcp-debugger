# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/auth.py
@source-hash: 905ef9b6a9cb72d6
@generated: 2026-02-09T18:01:44Z

## Primary Purpose
This module implements HTTP authentication mechanisms for the Requests library, providing Basic Auth, Proxy Auth, and Digest Auth handlers that modify request headers to include authentication credentials.

## Key Components

### Base Class
- **AuthBase (L69-73)**: Abstract base class for all authentication handlers. Requires implementing `__call__(self, r)` method that modifies a request object.

### Authentication Classes

**HTTPBasicAuth (L76-97)**
- Implements HTTP Basic Authentication using base64 encoding
- Constructor stores username/password (L79-81)
- `__call__` method (L94-96) adds "Authorization" header with Basic auth string
- Includes equality comparison methods (L83-92)

**HTTPProxyAuth (L99-104)**
- Extends HTTPBasicAuth for proxy authentication
- Overrides `__call__` to use "Proxy-Authorization" header instead (L102-104)

**HTTPDigestAuth (L107-314)**
- Complex digest authentication implementation with thread-local state
- Uses `threading.local()` for per-thread state management (L114)
- Key methods:
  - `init_per_thread_state()` (L116-124): Initializes thread-local variables
  - `build_digest_header()` (L126-234): Constructs digest auth header using MD5/SHA algorithms
  - `handle_401()` (L241-283): Handles 401 responses and retries with digest auth
  - `handle_redirect()` (L236-239): Resets auth state on redirects
  - `__call__()` (L285-303): Main entry point, registers response hooks

### Helper Functions
- **_basic_auth_str() (L25-66)**: Creates Basic Auth header string with base64 encoding. Includes deprecated behavior for non-string inputs with warnings.

## Dependencies
- Standard library: `hashlib`, `os`, `re`, `threading`, `time`, `warnings`, `base64`
- Internal: `_internal_utils.to_native_string`, `compat` module, `cookies.extract_cookies_to_jar`, `utils.parse_dict_header`

## Key Patterns
- **Hook-based architecture**: Digest auth registers response hooks for automatic retry handling
- **Thread safety**: HTTPDigestAuth uses thread-local storage for state management
- **Algorithm flexibility**: Supports MD5, SHA-1, SHA-256, SHA-512 hashing algorithms
- **Nonce tracking**: Maintains nonce counts and last nonce for digest auth efficiency

## Constants
- `CONTENT_TYPE_FORM_URLENCODED` and `CONTENT_TYPE_MULTI_PART` (L21-22): Content type constants (unused in this file)

## Critical Behavior
- Digest auth automatically handles 401 responses and retries (max 2 attempts per thread state)
- Request body position is tracked for digest auth retries when body is seekable
- Non-string username/password inputs trigger deprecation warnings but are converted for backward compatibility