# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/measure.py
@source-hash: 1e6ac8257f2c5914
@generated: 2026-02-09T18:01:51Z

## Purpose
Provides measurement functionality for determining rendering width requirements of Rich console objects. Core utility for layout calculations in the Rich text rendering library.

## Key Components

### Measurement Class (L11-123)
NamedTuple storing minimum and maximum character widths required to render an object. Core data structure for width calculations.

**Attributes:**
- `minimum` (L14): Minimum cells needed for rendering
- `maximum` (L16): Maximum cells needed for rendering

**Key Methods:**
- `span` property (L19-22): Returns width range (max - min)
- `normalize()` (L24-32): Ensures minimum ≤ maximum and minimum ≥ 0
- `with_maximum(width)` (L34-44): Clamps maximum width to specified value
- `with_minimum(width)` (L46-57): Clamps minimum width to specified value
- `clamp()` (L59-76): Applies both min/max width constraints
- `get()` classmethod (L78-122): Main entry point for measuring renderables

### Core Algorithm in `get()` Method (L78-122)
1. Returns (0,0) for invalid max_width < 1
2. Converts strings to rendered format via `console.render_str()`
3. Uses `rich_cast()` to normalize renderable objects
4. Checks for `__rich_measure__` method on renderable objects
5. Calls object's measurement method if available, otherwise defaults to (0, max_width)
6. Normalizes and clamps results to max_width

### Utility Functions

#### measure_renderables() (L125-151)
Calculates combined measurement for multiple renderables by taking maximum minimum width and maximum maximum width across all objects.

## Dependencies
- `operator.itemgetter`: For efficient tuple field access in measurements
- `.protocol`: `is_renderable()`, `rich_cast()` for type checking/conversion
- `.errors`: `NotRenderableError` exception
- Console/ConsoleOptions via TYPE_CHECKING

## Key Patterns
- Immutable measurement objects with fluent interface methods
- Delegation to renderable objects via `__rich_measure__` protocol
- Defensive programming with width validation and normalization
- Type-safe approach with TYPE_CHECKING imports

## Critical Invariants
- Measurements must satisfy: 0 ≤ minimum ≤ maximum
- All width operations preserve non-negative values
- normalize() ensures mathematical consistency of measurements