# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/pretty.py
@source-hash: e682073ff0865a71
@generated: 2026-02-09T18:02:02Z

## Core Purpose
Rich library's pretty printing module that provides enhanced repr formatting with intelligent indentation, syntax highlighting, and expandable object representations. Designed for both programmatic use and REPL integration.

## Key Classes & Functions

### Pretty Class (L244-346)
Main renderable class for pretty-printing objects. Inherits from JupyterMixin for notebook support.
- `__init__` (L264-293): Configures formatting options (indent_size, max_depth, expand_all, etc.)
- `__rich_console__` (L295-328): Primary rendering method that generates formatted Text objects
- `__rich_measure__` (L330-345): Calculates required width for proper layout

### Node Class (L389-472) 
Core data structure representing elements in the repr tree.
- Properties: key_repr, value_repr, open/close_brace, children list
- `iter_tokens` (L405-425): Generates string tokens for rendering
- `check_length` (L427-442): Validates if representation fits within width constraints
- `render` (L448-471): Converts node tree to formatted string with line wrapping

### _Line Class (L474-540)
Represents individual lines in multi-line pretty output.
- `expandable` property (L487-490): Checks if line can be expanded to multiple lines
- `expand` (L500-531): Breaks line into multiple indented child lines

## Core Functions

### traverse (L561-854)
Central tree-building function that walks object hierarchies and creates Node representations.
- Handles circular reference detection via visited_ids set
- Supports rich_repr protocol, dataclasses, attrs, namedtuples, and standard containers
- Respects max_depth, max_length, max_string limits
- Special handling for containers in _BRACES dict (L360-374)

### pretty_repr (L857-894)
High-level function that combines traverse() and Node.render() to generate formatted strings.

### install (L164-242)
Installs pretty printing as default REPL display hook.
- Detects IPython vs standard Python environments
- Creates RichFormatter for IPython integration (L221-237)

## Key Data Structures

### _BRACES Dictionary (L360-374)
Maps container types to their bracket formatting functions:
- dict, list, tuple, set, frozenset
- collections: Counter, deque, defaultdict
- Special types: array, os._Environ, MappingProxyType

### _CONTAINERS & _MAPPING_CONTAINERS (L375-376)
Tuples defining which types are treated as expandable containers vs key-value mappings.

## Helper Functions

### Object Type Detection
- `_is_attr_object` (L58-60): Detects attrs-decorated classes
- `_is_dataclass_repr` (L68-82): Checks if dataclass uses default repr
- `_has_default_namedtuple_repr` (L88-105): Validates namedtuple default repr
- `_is_namedtuple` (L542-558): Heuristic namedtuple detection
- `is_expandable` (L379-386): Determines if object can be expanded in pretty output

### Utility Functions
- `_safe_isinstance` (L154-161): Exception-safe isinstance check
- `_ipy_display_hook` (L108-151): IPython display hook implementation
- `pprint` (L897-931): Convenience function for direct pretty printing

## Integration Points
- IPython/Jupyter notebook support via JupyterMixin
- Console integration through Rich's console system
- Syntax highlighting via ReprHighlighter
- Measurement system for layout calculations

## Notable Patterns
- Visitor pattern in traverse() for different object types
- Defensive programming with try/except blocks for object introspection
- Lazy evaluation of container contents with max_length limiting
- Circular reference detection using object id tracking