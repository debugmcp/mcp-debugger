# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/modeline.py
@source-hash: 785daf3b82e9386a
@generated: 2026-02-09T18:01:31Z

## Purpose
Parses vi/vim modelines from text buffers to extract filetype information for syntax highlighting. Based on the pymodeline project, this module provides a simple interface to detect file types from embedded editor directives.

## Key Components

**modeline_re (L16-19)**: Compiled regex pattern that matches vi/vim/ex modeline syntax. Captures filetype declarations using patterns like `ft=python`, `filetype=javascript`, `syn=cpp`, or `syntax=ruby`. Uses verbose mode for readability with whitespace and comments ignored.

**get_filetype_from_line(l) (L22-25)**: Single-line parser that applies the modeline regex to extract filetype. Returns the captured filetype string if found, otherwise None.

**get_filetype_from_buffer(buf, max_lines=5) (L28-42)**: Main entry point that scans text buffer for modelines. Implements dual-direction search strategy:
- First scans last `max_lines` lines (L33-36) - common modeline location
- Then scans first `max_lines` lines (L37-41) - alternative modeline location
- Returns first filetype found or None if no modelines detected

## Dependencies
- `re` module for regex pattern matching
- No external dependencies beyond Python standard library

## Usage Pattern
Designed for integration with syntax highlighters (Pygments) to auto-detect file types when filename extensions are insufficient or missing. Follows vi/vim modeline conventions where editors embed configuration directives in comments.

## Export Interface
Exports single function `get_filetype_from_buffer` via `__all__` (L13) for public API consumption.