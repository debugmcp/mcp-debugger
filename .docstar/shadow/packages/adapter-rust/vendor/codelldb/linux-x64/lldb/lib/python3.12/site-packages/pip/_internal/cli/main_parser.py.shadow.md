# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/main_parser.py
@source-hash: 95a0e9b2e04397a9
@generated: 2026-02-09T18:01:08Z

This module provides pip's CLI main parser construction and command parsing functionality.

## Primary Purpose
Central entry point for pip's command-line interface parsing, handling global options, command identification, and Python interpreter delegation.

## Key Functions

**create_main_parser() (L19-47)**
- Returns configured `ConfigOptionParser` instance for pip's main CLI
- Sets up usage pattern, help formatting, and version information
- Adds general option groups from `cmdoptions.general_group`
- Builds dynamic command description from `commands_dict`
- Disables interspersed arguments to separate global options from subcommands

**identify_python_interpreter(python: str) (L50-66)**
- Resolves Python interpreter path from string specification
- Handles both file paths and virtual environment directories
- Cross-platform support for Unix (`bin/python`) and Windows (`Scripts/python.exe`) executables
- Returns None if interpreter cannot be located

**parse_command(args: List[str]) (L69-134)**
- Main command parsing entry point returning (command_name, command_args) tuple
- Separates global options from subcommand and its arguments
- Handles special behaviors:
  - `--python` option: Re-invokes pip with specified interpreter (L82-105)
  - `--version` option: Prints version and exits (L108-111)
  - No args or `help`: Shows help and exits (L114-116)
- Command validation with similarity suggestions using `get_similar_commands`
- Subprocess management with `_PIP_RUNNING_IN_SUBPROCESS` environment flag to prevent infinite recursion

## Dependencies
- `pip._internal.cli.parser.ConfigOptionParser`: Custom option parser
- `pip._internal.commands.commands_dict`: Available pip commands registry
- `pip._internal.build_env.get_runnable_pip`: Executable pip path resolution
- `pip._internal.utils.misc.get_pip_version, get_prog`: Version and program name utilities

## Architecture Patterns
- Factory pattern for parser creation
- Command delegation through subprocess re-invocation
- Environment-based recursion prevention
- Graceful command suggestion on typos

## Critical Behaviors
- Parser disables interspersed args to cleanly separate global from command-specific options
- Python interpreter delegation creates new subprocess with original arguments
- Command validation provides helpful error messages with suggestions