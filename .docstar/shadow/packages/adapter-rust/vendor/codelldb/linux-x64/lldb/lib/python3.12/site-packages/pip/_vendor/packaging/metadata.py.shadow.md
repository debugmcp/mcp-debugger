# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/metadata.py
@source-hash: 28836e4a4275daef
@generated: 2026-02-09T18:01:39Z

This module provides comprehensive Python packaging metadata parsing and validation capabilities for both low-level raw metadata processing and high-level structured metadata representation.

**Primary Purpose**: Parse, validate, and represent Python package distribution metadata in various formats (email headers, METADATA files) across all metadata specification versions (1.0 through 2.3).

## Core Classes

**ExceptionGroup (L24-46)**: Compatibility shim providing Python 3.11's ExceptionGroup for older Python versions. Contains `message` and `exceptions` fields for grouping multiple validation errors.

**InvalidMetadata (L49-58)**: Exception raised for invalid metadata fields. Contains `field` attribute identifying the problematic field name.

**RawMetadata (L64-131)**: TypedDict defining the complete raw metadata schema across all metadata versions (PEP 241, 314, 345, 566, 643, 685). Maps email-style field names to Python-native types with proper pluralization for multi-value fields.

**_Validator[T] (L462-635)**: Generic descriptor class implementing metadata field validation with lazy evaluation and caching. Key methods:
- `__get__` (L487-512): Lazy validation with caching
- `_process_*` methods (L523-634): Field-specific validation logic
- `_invalid_metadata` (L514-521): Error generation helper

**Metadata (L637-804)**: High-level metadata representation using _Validator descriptors for all fields. Provides:
- `from_raw` (L649-703): Create from RawMetadata with optional validation
- `from_email` (L706-731): Parse from email headers with validation
- All metadata fields as validated descriptors (L733-804)

## Key Functions

**parse_email (L276-449)**: Core parser converting email header format to RawMetadata. Handles encoding issues, multiple values, special field parsing (keywords, project URLs), and payload extraction.

**_parse_keywords (L169-171)**: Converts comma-separated keyword string to list.

**_parse_project_urls (L174-211)**: Parses "label, URL" pairs into dictionary, with duplicate detection.

**_get_payload (L214-228)**: Extracts message body handling both string and bytes sources with UTF-8 validation.

## Important Constants

- `_VALID_METADATA_VERSIONS` (L456): Supported metadata versions
- `_EMAIL_TO_RAW_MAPPING` (L243-272): Email header to RawMetadata field mapping
- `_STRING_FIELDS`, `_LIST_FIELDS`, `_DICT_FIELDS` (L132-166): Field type categorization
- `_REQUIRED_ATTRS` (L459): Required metadata fields

## Architecture Notes

Uses descriptor protocol for lazy validation and caching of metadata fields. Email parsing is lenient, separating parseable from unparseable data. Validation can be disabled for performance. Comprehensive support for all metadata specification versions with proper field availability checking.

## Dependencies

- `email` module: RFC2822 parsing
- Local imports: `requirements`, `specifiers`, `utils`, `version`
- `typing`: Generic types and protocols