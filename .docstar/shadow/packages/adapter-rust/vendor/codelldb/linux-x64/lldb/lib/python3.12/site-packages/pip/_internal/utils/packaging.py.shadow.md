# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/packaging.py
@source-hash: e569baff1ee52ab9
@generated: 2026-02-09T18:01:19Z

## Purpose
Utility module providing packaging-related validation and normalization functions for pip's internal operations. Handles Python version compatibility checking, requirement parsing with caching, and extra name normalization.

## Key Components

### Type Definitions
- `NormalizedExtra` (L9): NewType wrapper for string representing normalized package extra names

### Core Functions

**`check_requires_python(requires_python, version_info)`** (L14-34)
- Validates if current Python version satisfies package's "Requires-Python" specifier
- Accepts optional version specifier string and version tuple (e.g., sys.version_info[:3])
- Returns True if compatible, False otherwise
- Uses packaging.specifiers.SpecifierSet for version comparison
- Handles None specifier as universal compatibility

**`get_requirement(req_string)`** (L37-45)
- Factory function for creating packaging.Requirement objects with LRU caching
- Cache size: 512 entries to optimize repeated requirement string parsing
- Reduces computational overhead for frequently accessed requirement strings
- Returns parsed Requirement object from pip._vendor.packaging

**`safe_extra(extra)`** (L48-57)
- Normalizes arbitrary strings into valid package extra names
- Replaces non-alphanumeric characters (except dots/hyphens) with underscores
- Converts to lowercase for consistency
- Returns NormalizedExtra type for type safety
- Duplicated from pkg_resources for internal use

## Dependencies
- `pip._vendor.packaging`: Core packaging utilities (specifiers, version, requirements)
- Standard library: functools, logging, re, typing

## Architectural Patterns
- Performance optimization through LRU caching for expensive parsing operations
- Type safety via NewType wrapper for domain-specific strings
- Defensive programming with None handling in version checking
- Separation of concerns: distinct functions for different packaging aspects