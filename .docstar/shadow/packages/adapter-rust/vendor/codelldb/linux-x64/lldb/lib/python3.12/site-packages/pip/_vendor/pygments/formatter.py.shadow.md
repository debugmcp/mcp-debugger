# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/formatter.py
@source-hash: 27d38bf615cb24a6
@generated: 2026-02-09T18:01:33Z

## Primary Purpose

Base formatter class for Pygments syntax highlighting library. Provides abstract interface for converting tokenized source code into formatted output (HTML, terminal colors, etc.).

## Key Components

### `_lookup_style` Function (L19-22)
Utility function that resolves style references - converts string style names to Style objects using `get_style_by_name()`, or returns Style objects as-is.

### `Formatter` Class (L25-124)
Abstract base class defining the formatter interface:

**Class Attributes:**
- `name` (L68): Human-readable formatter name (None by default)
- `aliases` (L72): List of short identifiers for formatter lookup
- `filenames` (L77): fnmatch patterns for supported file extensions
- `unicodeoutput` (L81): Boolean indicating Unicode string output capability

**Constructor `__init__` (L83-97):**
- Processes standard options: `style`, `full`, `title`, `encoding`, `outencoding`
- Handles encoding resolution with fallback logic (guess/chardet → utf-8)
- Stores all options in `self.options` for subclass access

**Key Methods:**
- `get_style_defs(arg='')` (L99-112): Abstract method returning style definitions (CSS, etc.)
- `format(tokensource, outfile)` (L114-124): Main formatting method with encoding wrapper

## Dependencies

- `codecs`: Standard library for encoding handling
- `pip._vendor.pygments.util.get_bool_opt`: Boolean option parsing utility
- `pip._vendor.pygments.styles.get_style_by_name`: Style resolution

## Architectural Patterns

**Template Method Pattern:** Base class defines formatting workflow (`format()` → encoding wrapper → `format_unencoded()`)

**Options Pattern:** Flexible constructor accepting arbitrary keyword arguments for extensibility

## Critical Constraints

- Subclasses must implement `format_unencoded()` method (called from `format()`)
- Encoding handling is centralized in base class - subclasses work with wrapped file objects
- Style resolution is standardized across all formatters