# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/tornadoweb.py
@source-hash: a68dbdfc5d4cb7ca
@generated: 2026-02-09T18:01:51Z

## Purpose
Tornado web framework adapter for the Tenacity retry library, enabling asynchronous retry functionality with coroutines and futures.

## Key Classes

### TornadoRetrying (L31-59)
- **Inherits**: BaseRetrying from pip._vendor.tenacity
- **Constructor (L32-34)**: Accepts custom sleep function (defaults to gen.sleep) and forwards kwargs to parent
- **__call__ method (L36-59)**: Core retry logic as Tornado coroutine
  - Takes callable that returns Generator or Future
  - Implements retry loop with state management
  - Handles DoAttempt (L48-54): executes function, captures exceptions/results
  - Handles DoSleep (L55-57): sleeps between attempts using async sleep function
  - Returns final result via gen.Return (L59)

## Dependencies
- **Tenacity core**: BaseRetrying, DoAttempt, DoSleep, RetryCallState (L18-21)
- **Tornado**: gen module for coroutines, Future type (L23, L26)
- **Standard library**: sys, typing modules

## Key Patterns
- **Coroutine-based retry**: Uses @gen.coroutine decorator and yield-based async
- **State management**: Leverages RetryCallState for tracking attempts
- **Exception handling**: Captures BaseException and forwards to retry state (L51-52)
- **Type safety**: Generic return type _RetValT for preserving function return types

## Architecture Notes
- Bridges synchronous Tenacity retry logic with Tornado's async model
- Sleep function is injectable for testing/customization
- Uses older Tornado gen.coroutine style (not async/await)
- Part of pip's vendored dependencies, suggesting legacy compatibility requirements