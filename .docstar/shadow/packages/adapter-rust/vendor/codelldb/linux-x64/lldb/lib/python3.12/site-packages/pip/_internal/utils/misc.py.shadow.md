# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/misc.py
@source-hash: 3cedea55cf7c0ce4
@generated: 2026-02-09T18:01:35Z

## Purpose
General utility module for pip's internal operations, providing filesystem operations, user interaction, URL manipulation, path normalization, and build backend integration.

## Key Functions & Classes

### Version & Environment
- `get_pip_version()` (L74-78): Returns formatted pip version string with location and Python version
- `normalize_version_info()` (L81-97): Normalizes Python version tuples to 3-element format
- `check_externally_managed()` (L603-615): Checks for EXTERNALLY-MANAGED marker in stdlib path
- `warn_if_run_as_root()` (L750-779): Warns Unix users running pip as root outside virtualenv

### Filesystem Operations
- `ensure_dir()` (L100-107): Creates directories, handling EEXIST/ENOTEMPTY gracefully
- `rmtree()` (L124-144): Robust directory removal with retry logic (3s timeout, 0.5s intervals)
- `rmtree_errorhandler()` (L155-193): Error handler for rmtree that attempts chmod for read-only files
- `display_path()` (L196-202): Converts absolute paths to relative display format
- `backup_dir()` (L205-213): Generates backup directory names with .bak, .bak2, etc.
- `normalize_path()` (L327-337): Canonical path normalization with optional symlink resolution
- `splitext()` (L340-346): Enhanced path extension splitting that handles .tar files
- `renames()` (L349-363): Cross-device safe file renaming with directory cleanup

### User Interaction
- `ask()` (L231-243): Interactive prompt with validation against allowed responses
- `ask_input()` (L246-249): Simple interactive input with NO_INPUT check
- `ask_password()` (L252-255): Secure password input using getpass
- `ask_path_exists()` (L216-220): Path conflict resolution using PIP_EXISTS_ACTION env var
- `is_console_interactive()` (L618-620): Checks if console supports interactive input

### URL & Authentication Handling
- `split_auth_from_netloc()` (L439-465): Extracts username/password from netloc
- `remove_auth_from_url()` (L528-532): Strips authentication from URLs
- `redact_auth_from_url()` (L535-537): Replaces passwords with ****
- `redact_netloc()` (L468-485): Redacts sensitive data in netloc strings
- `build_netloc()` (L408-417): Constructs netloc from host/port with IPv6 support
- `parse_netloc()` (L430-436): Extracts host/port from netloc string

### Data Structures
- `HiddenText` (L547-565): Dataclass for storing secrets with redacted display
- `StreamWrapper` (L384-397): StringIO wrapper preserving original stream encoding
- `ConfiguredBuildBackendHookCaller` (L660-747): Build backend wrapper with config injection

### Utilities
- `format_size()` (L274-282): Human-readable byte size formatting (MB/kB/bytes)
- `tabulate()` (L285-296): Table formatting with column size calculation
- `is_installable_dir()` (L299-313): Detects Python packages by pyproject.toml/setup.py
- `strtobool()` (L258-271): String to boolean conversion with standard values
- `hash_file()` (L623-632): SHA256 hash and size calculation for files
- `pairwise()` (L635-643): Iterator that yields consecutive pairs
- `partition()` (L646-657): Splits iterable using predicate into false/true groups

### Helper Functions
- `protect_pip_from_modification_on_windows()` (L577-600): Prevents direct pip.exe modification
- `is_local()` (L366-377): Checks if path is within virtualenv prefix
- `read_chunks()` (L316-324): Generator for reading files in chunks
- `enum()` (L400-405): Creates enum-like types with reverse mapping

## Dependencies
- Standard library: os, sys, shutil, pathlib, urllib.parse, hashlib, getpass
- pip._vendor: packaging.requirements, pyproject_hooks, tenacity
- pip._internal: exceptions, locations, utils.compat, utils.virtualenv

## Architectural Notes
- Extensive use of retry logic with tenacity for filesystem operations
- Cross-platform compatibility with Windows-specific handling
- Security-conscious URL handling with credential redaction
- Build backend abstraction for PEP 517/518 support
- Environment detection for virtualenv vs system installations