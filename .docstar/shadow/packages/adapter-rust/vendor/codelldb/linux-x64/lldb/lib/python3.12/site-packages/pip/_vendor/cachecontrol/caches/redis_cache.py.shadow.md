# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/cachecontrol/caches/redis_cache.py
@source-hash: f6b9aac2d62efe58
@generated: 2026-02-09T17:57:53Z

## Purpose
Redis-backed cache implementation for pip's cachecontrol library, providing HTTP response caching using Redis as the storage backend.

## Key Components

### RedisCache (L16-48)
Concrete implementation of `BaseCache` that uses Redis for persistent caching.

**Constructor (L17-18):**
- Takes a Redis connection object (`Redis[bytes]`)
- Stores connection for all cache operations

**Core Methods:**
- `get(key: str) -> bytes | None` (L20-21): Retrieves cached value by key
- `set(key, value, expires=None)` (L23-35): Stores value with optional expiration handling
- `delete(key: str)` (L37-38): Removes single cache entry
- `clear()` (L40-44): Removes ALL keys from Redis database (destructive operation)
- `close()` (L46-48): No-op due to Redis connection pooling

### Expiration Logic (L26-35)
Supports three expiration modes:
1. **No expiration**: Uses `conn.set()` for permanent storage
2. **Datetime expiration**: Calculates TTL from datetime difference, handles timezone-aware/naive datetime conversion
3. **Integer expiration**: Direct TTL in seconds using `conn.setex()`

## Dependencies
- `BaseCache` from `pip._vendor.cachecontrol.cache` (L10)
- Redis client library (TYPE_CHECKING import, L13)
- Standard datetime utilities for expiration calculations (L7)

## Architecture Notes
- Implements standard cache interface for HTTP response storage
- Leverages Redis's built-in expiration mechanisms (`setex`)
- Connection management delegated to Redis client's connection pooling
- **Warning**: `clear()` method is database-wide destructive operation