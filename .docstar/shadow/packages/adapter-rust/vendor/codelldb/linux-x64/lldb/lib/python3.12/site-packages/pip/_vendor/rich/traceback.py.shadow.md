# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/traceback.py
@source-hash: 094a7160b8d05886
@generated: 2026-02-09T18:02:02Z

**Primary Purpose:** Rich traceback rendering system that enhances Python exception display with syntax highlighting, local variable inspection, and configurable formatting. Part of the Rich library's console rendering ecosystem.

**Core Components:**

**Installation & Hook Management:**
- `install()` (L48-172): Global exception handler installer that replaces `sys.excepthook` with Rich's enhanced traceback renderer. Supports both standard Python and IPython/Jupyter environments with specialized hook handling.

**Data Structures:**
- `Frame` (L176-181): Dataclass representing a single stack frame with filename, line number, function name, source line, and optional locals dictionary
- `_SyntaxError` (L185-190): Specialized dataclass for syntax error details including offset, filename, line content, line number, and message
- `Stack` (L194-199): Container for exception information including type, value, optional syntax error, causality flag, and frame list
- `Trace` (L203-204): Top-level container holding multiple stacks for chained exceptions

**Main Traceback Class:**
- `Traceback` (L211-719): Core renderable class implementing Rich's console protocol
  - `__init__()` (L241-290): Configures display options, theme, locals filtering, suppression paths, and frame limits
  - `from_exception()` classmethod (L292-360): Factory method creating Traceback from standard Python exception info
  - `extract()` classmethod (L362-485): Core extraction logic that walks traceback objects, processes chained exceptions (`__cause__`, `__context__`), and builds structured trace data
  - `__rich_console__()` (L487-563): Main rendering method yielding console renderables with panels, syntax highlighting, and exception chains
  - `_render_stack()` (L604-718): Renders individual stack frames with code context, line highlighting, and local variables using Syntax and Columns
  - `_render_syntax_error()` (L566-586): Specialized renderer for syntax errors with caret positioning
  - `_guess_lexer()` classmethod (L588-602): Determines appropriate Pygments lexer based on file extension or hashbang

**Key Features:**
- **Frame Suppression**: Supports filtering frames by module paths or `_rich_traceback_omit` local variable
- **Guard Mechanism**: `_rich_traceback_guard` local variable clears all previous frames in stack
- **Locals Filtering**: Configurable hiding of dunder (`__`) and sunder (`_`) prefixed variables  
- **Frame Limiting**: Automatic truncation with "...N frames hidden..." message when exceeding `max_frames`
- **Chained Exception Handling**: Full support for `__cause__` and `__context__` exception chaining
- **IPython Integration**: Specialized hook replacement for Jupyter notebook environments

**Dependencies:**
- Rich ecosystem: Console, Syntax, Panel, Text, Theme, Style, Columns
- Pygments for lexer detection and token styling
- Python stdlib: traceback, linecache, sys, os, dataclasses

**Architecture Notes:**
- Uses Rich's group decorator for lazy rendering
- Integrates with Rich's theming system for consistent styling
- Leverages `pretty` module for local variable representation
- File extension to lexer mapping in `LEXERS` dict (L233-239)
- Platform-aware behavior with `WINDOWS` constant (L42)