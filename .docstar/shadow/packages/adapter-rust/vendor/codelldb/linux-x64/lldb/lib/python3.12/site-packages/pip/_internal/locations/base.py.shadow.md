# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/locations/base.py
@source-hash: 45088f8b57781553
@generated: 2026-02-09T18:01:13Z

## Purpose
Core location utilities for pip package management, providing platform-aware path handling and Python environment introspection. Establishes base directories and path manipulation functions used throughout pip's installation process.

## Key Components

### Constants and Variables
- **USER_CACHE_DIR** (L13): User-specific cache directory using appdirs
- **site_packages** (L16): Pure Python library installation path from sysconfig
- **user_site** (L74-76): User site-packages directory with fallback handling

### Core Functions

**get_major_minor_version()** (L19-24): Returns Python version as "X.Y" string format for compatibility checks.

**change_root()** (L27-52): Cross-platform path root manipulation utility. Handles POSIX (L36-40) and Windows (L42-46) path joining with absolute path normalization. Raises InstallationError for unsupported platforms.

**get_src_prefix()** (L55-68): Determines source code installation directory. Uses virtualenv-aware logic:
- Virtual environments: `{sys.prefix}/src` 
- Global environments: `{cwd}/src` with OSError handling for deleted directories

**is_osx_framework()** (L79-81): LRU-cached detection of macOS framework Python installation using sysconfig.

## Dependencies
- **Internal**: pip._internal.exceptions.InstallationError, pip._internal.utils.appdirs, pip._internal.utils.virtualenv
- **Standard**: functools, os, site, sys, sysconfig, typing

## Architectural Notes
- Platform abstraction layer for pip's cross-OS compatibility
- Handles virtualenv vs system Python environment differences
- Uses sysconfig for Python installation introspection
- Caching optimization for expensive framework detection