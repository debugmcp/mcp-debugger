# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/commands/wheel.py
@source-hash: 789461affaa834dc
@generated: 2026-02-09T18:01:11Z

## Purpose
Implements pip's `wheel` command for building wheel archives from source distributions and requirements. Transforms source packages into wheel format for faster installation.

## Key Classes & Functions

**WheelCommand (L24-182)**: Main command class inheriting from RequirementCommand
- Handles CLI interface for wheel building operations
- Manages the complete wheel build pipeline from requirement resolution to file output

**add_options() (L44-102)**: Command-line option configuration
- Configures wheel-specific options like `--wheel-dir`, `--no-verify`, `--pre`
- Inherits standard pip options for dependencies, build isolation, PEP 517, etc.

**run() (L104-182)**: Core execution logic with @with_cleanup decorator
- Creates session and package finder for dependency resolution
- Sets up build tracker, temporary directory, and wheel cache
- Resolves requirements and filters for buildable packages (L147-154)
- Executes wheel building via `build()` function (L159-165)
- Copies successful builds to target directory (L166-178)

## Key Dependencies
- `pip._internal.wheel_builder`: Provides `build()` and `should_build_for_wheel_command()`
- `pip._internal.cache.WheelCache`: Manages wheel caching mechanism
- `pip._internal.cli.req_command.RequirementCommand`: Base class providing requirement processing
- `pip._internal.operations.build.build_tracker`: Tracks concurrent builds

## Architecture & Flow
1. **Setup Phase**: Initialize session, finder, directories, and cache
2. **Resolution Phase**: Resolve requirements and separate wheels from buildable sources
3. **Build Phase**: Build wheels for source requirements using wheel_builder module
4. **Copy Phase**: Copy successful builds from cache to target directory
5. **Error Handling**: Aggregate failures and raise CommandError if any builds fail

## Critical Constraints
- Pre-existing wheels are saved directly without rebuilding (L151-152)
- Only requirements passing `should_build_for_wheel_command()` are built (L153-154)
- Build verification can be disabled via `--no-verify` option (L162)
- Failures during copy operations are logged but added to build_failures (L172-178)
- Command fails if any wheel builds fail (L179-180)

## Notable Patterns
- Uses context managers for resource cleanup (`@with_cleanup`, `enter_context`)
- Separates wheel handling from source building in requirement processing loop
- Employs two-phase error collection: build failures and copy failures