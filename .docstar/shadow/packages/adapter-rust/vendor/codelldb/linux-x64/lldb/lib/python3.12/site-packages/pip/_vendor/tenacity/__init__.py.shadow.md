# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/__init__.py
@source-hash: 643e19bd969b7d95
@generated: 2026-02-09T18:02:01Z

**Primary Purpose:** Core implementation of the Tenacity retry library, providing flexible retry functionality with configurable strategies for stopping, waiting, and retry conditions.

**Architecture Pattern:** Strategy-based retry system with pluggable components for retry logic, wait strategies, stop conditions, and callbacks.

## Key Classes and Components

### Exception Classes
- **TryAgain (L101-102):** Exception that forces retry when raised
- **RetryError (L151-165):** Exception raised when all retry attempts are exhausted, encapsulates last attempt

### Action Classes  
- **BaseAction (L116-134):** Abstract base for retry actions with repr/str support
- **RetryAction (L136-142):** Concrete action representing a retry with sleep duration

### State Management
- **RetryCallState (L425-495):** Tracks state of a single retry call including attempt number, outcomes, timing, and statistics
- **Future (L402-423):** Custom future implementation wrapping attempt results/exceptions with attempt metadata
- **AttemptManager (L167-189):** Context manager for individual retry attempts, handles exception swallowing

### Core Retry Engine
- **BaseRetrying (L191-366):** Abstract base class defining retry behavior with configurable strategies:
  - Constructor (L192-215) accepts sleep, stop, wait, retry, before/after callbacks
  - `copy()` (L217-242) creates modified instances
  - `wraps()` (L283-299) decorates functions with retry behavior
  - `iter()` (L307-342) core retry logic determining next action (DoAttempt/DoSleep/result)
  - Thread-local statistics tracking (L255-281)

- **Retrying (L368-394):** Concrete synchronous implementation of BaseRetrying
  - `__call__()` (L371-393) executes retry loop for synchronous functions

### Utility Components
- **DoAttempt (L108-109):** Marker class indicating attempt should be made
- **DoSleep (L112-113):** Float subclass indicating sleep duration before next attempt  
- **NO_RESULT (L105):** Sentinel object for missing results

## Key Functions
- **retry() (L518-545):** Main decorator factory supporting both `@retry` and `@retry()` syntax
  - Automatically selects AsyncRetrying for coroutines, Retrying for sync functions
  - Handles tornado detection (disabled via line 87)

## Important Dependencies
- **Strategy Imports (L31-80):** Comprehensive imports of retry, stop, wait, before/after strategies from submodules
- **AsyncRetrying (L548):** Imported for async retry support
- **Tornado Integration:** Explicitly disabled (L87) to prevent pip compatibility issues

## Critical Design Decisions
- **Thread Safety:** Uses threading.local for per-thread statistics (L213)
- **Tornado Disabled:** Hardcoded to None (L87) to prevent version conflicts in pip environment
- **Strategy Pattern:** All retry behaviors implemented as pluggable strategy objects
- **Exception Handling:** Custom Future class tracks both results and exceptions with attempt metadata

## Key Invariants
- RetryCallState tracks monotonic time for accurate timing
- Future objects are immutable once set
- Statistics are thread-local and reset on each retry operation
- Retry strategies must implement callable interface returning boolean