# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/setuptools_build.py
@source-hash: a2e5e9b9dfa3792f
@generated: 2026-02-09T18:01:26Z

## Purpose
Utilities for invoking setuptools via a Python subprocess wrapper. Provides command-line argument generation for common setuptools operations with proper environment isolation.

## Core Components

### `_SETUPTOOLS_SHIM` (L8-46)
String template containing Python code that wraps setup.py execution. Key behaviors:
- Imports setuptools before running setup.py to enable compatibility with projects using `distutils.core`
- Handles missing setuptools gracefully with clear error message
- Correctly sets `sys.argv[0]` to avoid setuptools warnings about `-c` scripts
- Auto-generates minimal setup.py for setup.cfg-only projects
- Uses string formatting placeholder `%r` for setup.py path injection

### `make_setuptools_shim_args()` (L49-72)
Base function for creating Python subprocess arguments. Returns command list starting with Python executable, followed by `-c` flag and the formatted shim code. Supports:
- Optional unbuffered output (`-u` flag)
- Global setuptools options
- User config disabling (`--no-user-cfg`)

### `make_setuptools_bdist_wheel_args()` (L75-90)
Builds wheel distribution command arguments. Uses base shim with unbuffered output, adds `bdist_wheel -d <dest_dir>` and build options.

### `make_setuptools_clean_args()` (L93-101) 
Generates cleanup command arguments using `clean --all`.

### `make_setuptools_develop_args()` (L104-131)
Creates development installation arguments with complex installation target logic:
- Enforces mutual exclusion between `use_user_site` and `prefix` (assertion L113)
- Supports prefix-based, home directory, or user site installation modes
- Always includes `--no-deps` flag

### `make_setuptools_egg_info_args()` (L134-146)
Generates metadata extraction command arguments for `egg_info` command with optional custom egg-base directory.

## Dependencies
- `sys`: Python executable path and stderr access
- `textwrap`: Multi-line string formatting
- `typing`: Type annotations

## Architecture Notes
- All functions follow consistent pattern: base args from `make_setuptools_shim_args()` + command-specific additions
- Shim approach enables setuptools compatibility without direct imports in calling process
- String templating with `%r` formatting ensures proper path escaping on Windows