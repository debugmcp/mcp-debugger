# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/distro/
@generated: 2026-02-09T18:16:09Z

## Overall Purpose and Responsibility

The `distro` directory contains a vendored Linux distribution detection library within pip's dependencies. This module provides reliable, machine-readable operating system distribution information, serving as a modern replacement for Python's deprecated `platform.linux_distribution()` function. It aggregates data from multiple system sources to provide comprehensive distribution metadata including ID, name, version, and codename.

## Key Components and Architecture

### Module Organization
- **`__init__.py`**: Public API facade that re-exports all functionality from the main implementation, providing a clean package interface with controlled exports via `__all__`
- **`distro.py`**: Core implementation containing the `LinuxDistribution` class and all detection logic
- **`__main__.py`**: Minimal entry point enabling command-line execution via `python -m distro`

### Core Implementation (`distro.py`)
- **LinuxDistribution class**: Main detection engine with cached properties and configurable data sources
- **Normalization tables**: Maps distribution identifiers to canonical values across different source formats
- **Multi-source parsers**: Handles os-release files, lsb_release command, distribution-specific files, and uname output
- **Version selection logic**: Implements "best" vs "first" strategies for choosing most appropriate version information

## Public API Surface

### Primary Entry Points
- **Module-level functions**: `id()`, `name()`, `version()`, `codename()`, `info()`, `like()`, `version_parts()`
- **Legacy compatibility**: `linux_distribution()` for backward compatibility
- **Source-specific accessors**: `os_release_info()`, `lsb_release_info()`, `distro_release_info()`, `uname_info()`
- **Command-line interface**: JSON output and custom root directory support

### Type Definitions
- **VersionDict**: Structured version components (major, minor, build_number)
- **InfoDict**: Complete distribution information dictionary

## Internal Data Flow

### Detection Hierarchy
1. **os-release files** (`/etc/os-release`, `/usr/lib/os-release`) - highest priority
2. **lsb_release command** - secondary source
3. **Distribution-specific release files** - tertiary fallback
4. **uname output** - final fallback
5. **Platform-specific sources** (AIX oslevel, Debian version file)

### Processing Pipeline
1. File discovery scans `/etc` for release files using pattern matching
2. Content parsing uses appropriate parser for each source type (shell-like, colon-separated, regex-based)
3. Normalization applies canonical mappings to raw identifiers
4. Version selection chooses best available version based on precision or priority
5. Caching prevents redundant file system operations

## Important Patterns and Conventions

### Design Patterns
- **Facade Pattern**: `__init__.py` provides simplified public interface hiding internal complexity
- **Singleton Pattern**: Global `_distro` instance serves all module-level function calls
- **Cached Properties**: Expensive file system operations are memoized per instance

### Security Considerations
- Subprocess execution disabled when using custom root directories to prevent false information
- File access restricted to standard system locations

### Compatibility Features
- Python 3.7+ support with compatibility shims for TypedDict and cached_property
- Backward compatibility with deprecated `platform.linux_distribution()` interface
- Cross-platform awareness with AIX-specific handling

This module serves as pip's reliable foundation for distribution-aware package management decisions, providing consistent distribution metadata across diverse Linux environments.