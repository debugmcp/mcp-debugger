# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/idna/
@generated: 2026-02-09T18:16:13Z

## Overall Purpose & Responsibility

This directory contains a complete implementation of IDNA (Internationalized Domain Names in Applications) according to RFC 5891 and UTS46 standards. It provides encoding, decoding, and validation of Unicode domain names to/from ASCII-Compatible Encoding (ACE) format using Punycode, enabling web browsers and applications to handle international domain names safely.

## Key Components & Architecture

### Core Processing Engine
- **`core.py`**: Primary implementation containing all IDNA processing logic, validation rules, and exception definitions
- **`idnadata.py`**: Auto-generated Unicode data tables (version 15.1.0) with script mappings, joining types, and codepoint classifications
- **`uts46data.py`**: UTS46 character mapping tables for Unicode normalization (82 segments of mapping data)
- **`intranges.py`**: Optimized integer range utilities for efficient codepoint membership testing

### API Interfaces
- **`__init__.py`**: Main package entry point exposing 18 public functions and exceptions through explicit `__all__` declaration
- **`codec.py`**: Python codec system integration providing 'idna2008' codec with incremental encoding/decoding support
- **`compat.py`**: Legacy API compatibility layer with ToASCII/ToUnicode functions

### Metadata & Utilities
- **`package_data.py`**: Version metadata (v3.7) for package introspection

## Public API Surface

### Primary Functions (via `__init__.py`)
- **Domain Processing**: `encode()`, `decode()` - full domain conversion
- **Label Processing**: `alabel()`, `ulabel()` - individual label conversion  
- **Validation Suite**: `check_bidi()`, `check_hyphen_ok()`, `check_initial_combiner()`, `check_label()`, `check_nfc()`
- **Context Validation**: `valid_contextj()`, `valid_contexto()` - script-aware codepoint validation
- **Length Validation**: `valid_label_length()`, `valid_string_length()`
- **UTS46 Processing**: `uts46_remap()` - character normalization
- **Exceptions**: `IDNAError`, `IDNABidiError`, `InvalidCodepoint`, `InvalidCodepointContext`

### Codec Integration
- Python's codec system registration as 'idna2008'
- Streaming and incremental processing support
- Compatible with standard Python string encoding/decoding patterns

## Internal Organization & Data Flow

1. **Input Processing**: Unicode domain names enter through `encode()` or codec interface
2. **UTS46 Normalization**: Optional character mapping via `uts46_remap()` using `uts46data.py`
3. **Label Splitting**: Domains split on Unicode dot variants for individual processing
4. **Label Validation**: Each label validated through comprehensive rule checks using `idnadata.py`:
   - Script detection and bidirectional text rules
   - Codepoint classification (PVALID/CONTEXTJ/CONTEXTO)
   - Context-dependent validation for joiners and special characters
5. **Punycode Conversion**: Valid Unicode labels encoded to ASCII using xn-- prefix
6. **Length Validation**: Final output checked against RFC length limits

## Important Patterns & Conventions

### Character Processing
- All text normalized to NFC (Normalization Form C) before processing  
- Unicode dots (U+002E, U+3002, U+FF0E, U+FF61) handled uniformly
- Context-dependent characters validated against surrounding script environment

### Error Handling
- Hierarchical exception system with specific error types for different validation failures
- Fail-fast approach with detailed error context
- Only 'strict' error handling mode supported across all interfaces

### Performance Optimizations
- Compressed range representation for efficient Unicode set membership
- Binary search algorithms for O(log n) codepoint lookups
- Lazy loading of UTS46 data to reduce initialization overhead
- Segmented data structures to work within Python's compilation limits

### Standards Compliance
- RFC 5891 IDNA2008 implementation with bidirectional text rules
- UTS46 compatibility mode for transitional processing
- Support for both strict ASCII-only and permissive Unicode dot modes

This module serves as pip's vendored IDNA implementation, providing essential functionality for handling internationalized domain names without requiring external dependencies during package installation and resolution.