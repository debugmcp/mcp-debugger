# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/style.py
@source-hash: 211d9f954977d487
@generated: 2026-02-09T18:01:37Z

**Primary Purpose**: Core style system for Pygments syntax highlighting, providing a metaclass-based framework for defining and managing token styling with ANSI color support and style inheritance.

**Key Components**:

- **_ansimap (L14-33)**: Dictionary mapping ANSI color names to RGB hex values for both dark and bright variants
- **_deprecated_ansicolors (L35-54)**: Migration mapping from deprecated #ansixxx color syntax to current ansicolor names  
- **ansicolors (L55)**: Set of valid ANSI color names derived from _ansimap

**Core Classes**:

- **StyleMeta (L58-168)**: Metaclass that processes style definitions when Style classes are created
  - `__new__ (L60-124)`: Initializes styles dictionary with STANDARD_TYPES tokens, processes style definitions into internal format using 9-element arrays [color, bold, italic, underline, bgcolor, border, roman, sans, mono]
  - `colorformat (L66-79)`: Internal function validating and normalizing color formats (ANSI names, hex codes, CSS functions)
  - `style_for_token (L126-154)`: Returns formatted style dictionary for a given token, handling ANSI color mapping and deprecated color conversion
  - `list_styles (L156-157)`: Returns list of all styled tokens
  - `styles_token (L159-160)`: Checks if token has explicit styling
  - Iterator methods (L162-167): Enable iteration over token-style pairs

- **Style (L170-203)**: Base class using StyleMeta, defines default styling properties
  - Background colors for overall, highlight, line numbers (L173-188)
  - `styles (L191)`: Empty dict for subclasses to override with token-specific styles
  - Metadata: `name (L195)`, `aliases (L197)`, `web_style_gallery_exclude (L203)`

**Architecture Patterns**:
- Metaclass-driven style compilation at class creation time
- Token inheritance system where child tokens inherit parent styles unless 'noinherit' specified
- Internal style representation as 9-element arrays for performance
- ANSI color abstraction with RGB fallbacks
- Deprecation handling for legacy color syntax

**Dependencies**: 
- `pygments.token.Token, STANDARD_TYPES` for token definitions

**Critical Invariants**:
- All STANDARD_TYPES tokens must have entries in styles dict (enforced in L62-64)
- Style arrays maintain fixed 9-element structure
- Color validation ensures only valid formats accepted
- Parent-child token relationship preserved in style inheritance