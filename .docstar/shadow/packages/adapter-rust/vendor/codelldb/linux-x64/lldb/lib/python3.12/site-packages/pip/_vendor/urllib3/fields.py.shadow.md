# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/fields.py
@source-hash: 92f2c30a0fc9987d
@generated: 2026-02-09T18:02:00Z

## Purpose
HTTP multipart form field utilities for urllib3, handling field formatting, encoding, and header generation according to RFC 2231 and HTML5 standards.

## Key Functions

### Content Type Detection
- `guess_content_type(filename, default)` (L10-21): MIME type detection using Python's mimetypes module, fallback to "application/octet-stream"

### Header Parameter Formatting
- `format_header_param_rfc2231(name, value)` (L24-63): RFC 2231 compliant header parameter encoding with UTF-8 support and Python 2/3 compatibility
- `format_header_param_html5(name, value)` (L95-119): HTML5-compliant parameter formatting with character escaping via `_HTML5_REPLACEMENTS` mapping
- `format_header_param` (L123): Backwards-compatibility alias for HTML5 formatter
- `_replace_multiple(value, needles_and_replacements)` (L82-92): Regex-based multi-character replacement utility

### Character Encoding Constants
- `_HTML5_REPLACEMENTS` (L66-79): Unicode escape mapping for HTML5 compliance, includes control characters (0x00-0x1F except 0x1B) and special characters

## Core Class

### RequestField (L126-274)
Multipart form field container with header management and rendering capabilities.

**Constructor** (L143-157):
- Stores name, filename, data, headers dict, and header_formatter function
- Default formatter: `format_header_param_html5`

**Factory Method** (L159-193):
- `from_tuples(cls, fieldname, value, header_formatter)`: Creates RequestField from tuple formats
- Supports: simple strings, (filename, data) tuples, (filename, data, content_type) tuples
- Auto-detects content types for file tuples

**Rendering Methods**:
- `_render_part(name, value)` (L195-206): Single parameter formatting via header_formatter
- `_render_parts(header_parts)` (L208-228): Multi-parameter header assembly with semicolon separation
- `render_headers()` (L230-247): Complete header block rendering with prioritized order (Content-Disposition, Content-Type, Content-Location first)

**Multipart Configuration**:
- `make_multipart(content_disposition, content_type, content_location)` (L249-274): Configures headers for multipart/form-data, sets Content-Disposition with name/filename parameters

## Dependencies
- `email.utils`: RFC 2231 encoding support
- `mimetypes`: Content-type detection
- `packages.six`: Python 2/3 compatibility layer
- `re`: Pattern matching for character replacement

## Architecture Notes
- Dual formatting strategy: RFC 2231 vs HTML5 approaches for different compatibility needs
- Python 2/3 string handling abstracted via six library
- Header ordering prioritizes standard multipart headers for compatibility
- Flexible parameter formatting via pluggable header_formatter functions