# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/deprecation.py
@source-hash: 93b420fd404069a4
@generated: 2026-02-09T18:01:18Z

## Primary Purpose
Implements pip's deprecation warning system that integrates Python's warnings framework with logging to provide structured deprecation messages for pip functionality.

## Key Components

### Custom Warning Class
- `PipDeprecationWarning(Warning)` (L16-17): Custom warning category specifically for pip deprecation messages

### Warning System Integration  
- `_original_showwarning` (L20): Global variable storing original warnings.showwarning function
- `_showwarning()` (L24-41): Custom warning handler that routes PipDeprecationWarning messages through pip's logger ("pip._internal.deprecations") while preserving standard warning behavior for other categories
- `install_warning_logger()` (L44-52): Sets up the custom warning system by replacing warnings.showwarning with the custom handler and enabling PipDeprecationWarning filtering

### Deprecation API
- `deprecated()` (L55-124): Main deprecation function that generates formatted deprecation messages and either warns or raises exceptions based on version comparison
  - Supports reason, replacement suggestion, removal version, feature flags, and issue tracking
  - Uses `parse(current_version) >= parse(gone_in)` to determine if feature should raise exception (L84)
  - Constructs multi-part messages with conditional formatting (L86-112)
  - Raises `PipDeprecationWarning` exception if feature is already deprecated, otherwise issues warning (L121-124)

## Dependencies
- Standard library: `logging`, `warnings`, `typing`
- `pip._vendor.packaging.version.parse`: Version comparison utilities
- `pip.__version__`: Current pip version for deprecation timeline checks

## Key Patterns
- Global state management for warning system override
- Conditional message formatting based on deprecation status
- Integration between warnings and logging systems
- Version-based behavioral switching (warn vs. raise)

## Constants
- `DEPRECATION_MSG_PREFIX = "DEPRECATION: "` (L13): Standard prefix for all deprecation messages