# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/models.py
@source-hash: c782b80a61fe942d
@generated: 2026-02-09T18:01:48Z

## Core Request/Response Model Classes for HTTP Library

Primary purpose: Defines the fundamental request and response objects that power the Requests HTTP library. Contains the complete request preparation pipeline and response handling logic.

### Key Classes and Components

**RequestEncodingMixin (L84-204)**
- Provides URL path building and parameter encoding capabilities
- `path_url` property (L86-104): Constructs path portion of URL from full URL
- `_encode_params` static method (L106-134): URL-encodes form parameters, handles multiple value types
- `_encode_files` static method (L136-203): Creates multipart/form-data bodies for file uploads

**RequestHooksMixin (L206-228)** 
- Manages callback hooks for request lifecycle events
- `register_hook` (L207-216): Adds callable hooks for specific events
- `deregister_hook` (L218-227): Removes previously registered hooks

**Request (L230-311)**
- User-facing request object for defining HTTP requests
- Constructor (L258-290): Accepts method, url, headers, files, data, json, params, auth, cookies, hooks
- `prepare()` method (L295-310): Converts to PreparedRequest for actual transmission

**PreparedRequest (L313-638)**
- Immutable request object containing exact bytes to send to server
- Inherits from RequestEncodingMixin and RequestHooksMixin
- `prepare()` method (L351-377): Main preparation pipeline calling individual prepare_* methods
- `prepare_method()` (L393-397): Normalizes HTTP method to uppercase
- `prepare_url()` (L409-481): Complex URL validation, IDNA encoding, parameter merging
- `prepare_headers()` (L483-492): Validates and normalizes headers into CaseInsensitiveDict
- `prepare_body()` (L494-570): Handles JSON, form data, file uploads, streaming bodies
- `prepare_auth()` (L588-608): Processes authentication, extracts from URL if needed
- `prepare_cookies()` (L610-628): Converts cookies to Cookie header
- `copy()` method (L382-391): Deep copy for request reuse

**Response (L640-1037)**
- Server response object with comprehensive content handling
- Key attributes: status_code, headers, url, history, encoding, reason, cookies, elapsed, request
- Content access properties:
  - `content` (L890-907): Raw bytes content with lazy loading
  - `text` (L909-945): Unicode text with encoding detection fallback
  - `json()` (L947-978): JSON parsing with UTF encoding detection
- Iterator methods:
  - `iter_content()` (L799-855): Streams response data in chunks
  - `iter_lines()` (L857-888): Line-by-line iteration with delimiter support
- Status checking:
  - `ok` property (L754-767): True if status < 400
  - `raise_for_status()` (L997-1024): Raises HTTPError for 4xx/5xx status codes
- Redirect handling:
  - `is_redirect` property (L769-774): Checks for redirect status + Location header
  - `is_permanent_redirect` property (L776-782): Identifies 301/308 redirects

### Important Constants and Dependencies

- **REDIRECT_STATI (L71-77)**: HTTP status codes for automatic redirects (301, 302, 303, 307, 308)
- **DEFAULT_REDIRECT_LIMIT (L79)**: Maximum redirects (30)
- **CONTENT_CHUNK_SIZE (L80)**: Default chunk size for content reading (10KB)
- **ITER_CHUNK_SIZE (L81)**: Default chunk size for line iteration (512 bytes)

### Key Dependencies
- urllib3: Low-level HTTP handling, multipart encoding, URL parsing
- Internal modules: authentication, cookies, exceptions, utilities
- Standard library: datetime, encodings, json

### Critical Patterns
- **Preparation Pipeline**: Request → PreparedRequest through sequential prepare_* method calls
- **Lazy Content Loading**: Response content loaded on first access, cached thereafter  
- **Stream Handling**: Special logic for file-like objects with tell()/read() methods
- **Encoding Chain**: Multiple fallbacks for text encoding detection (explicit → apparent → utf-8)
- **Error Translation**: urllib3 exceptions converted to requests-specific exceptions