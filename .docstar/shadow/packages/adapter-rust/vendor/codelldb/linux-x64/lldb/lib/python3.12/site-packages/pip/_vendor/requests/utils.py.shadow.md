# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/utils.py
@source-hash: 2fbf6f9c56f32774
@generated: 2026-02-09T18:01:59Z

## Primary Purpose
Comprehensive utility module providing HTTP-related helper functions for the Requests library. Core responsibilities include URL parsing/manipulation, proxy handling, authentication extraction, content encoding detection, header validation, and various data format conversions.

## Key Constants & Global State
- `NETRC_FILES` (L61): Netrc file locations for authentication
- `DEFAULT_CA_BUNDLE_PATH` (L63): SSL certificate bundle path 
- `DEFAULT_PORTS` (L65): Standard HTTP/HTTPS port mappings
- `DEFAULT_ACCEPT_ENCODING` (L68-70): Compression encoding header
- `UNRESERVED_SET` (L631-633): RFC 3986 unreserved URI characters

## Core Function Groups

### Proxy & Network Functions
- `proxy_bypass_registry()` (L76-112): Windows-specific proxy bypass using registry
- `proxy_bypass()` (L114-123): Cross-platform proxy bypass logic
- `should_bypass_proxies()` (L765-823): Main proxy bypass decision logic with environment variable support
- `get_environ_proxies()` (L826-835): Extract proxy configuration from environment
- `select_proxy()` (L838-861): Choose appropriate proxy for URL
- `resolve_proxies()` (L864-888): Resolve final proxy configuration for requests
- `address_in_network()` (L682-694): Check if IP belongs to subnet
- `is_ipv4_address()` (L708-716): Validate IPv4 address format
- `is_valid_cidr()` (L719-740): Validate CIDR notation

### URL & Authentication Processing  
- `get_netrc_auth()` (L204-258): Extract credentials from .netrc files
- `get_auth_from_url()` (L1018-1031): Extract username/password from URL
- `prepend_scheme_if_needed()` (L989-1015): Add scheme to schemeless URLs
- `urldefragauth()` (L1064-1078): Remove fragment and auth from URLs
- `unquote_unreserved()` (L636-657): Un-escape unreserved URI characters
- `requote_uri()` (L660-679): Normalize URI quoting

### Content Processing & Encoding
- `super_len()` (L135-201): Determine content length from various object types with file position handling
- `get_encodings_from_content()` (L489-511): Extract encoding from HTML content (deprecated)
- `get_encoding_from_headers()` (L539-562): Extract encoding from HTTP headers
- `get_unicode_from_response()` (L591-627): Convert response to unicode (deprecated)
- `stream_decode_response_unicode()` (L564-578): Stream decode response iterator
- `guess_json_utf()` (L957-986): Detect JSON encoding from BOM/null patterns

### Data Structure Utilities
- `dict_to_sequence()` (L126-132): Convert dict-like objects to sequences
- `from_key_val_list()` (L318-342): Convert sequences to OrderedDict
- `to_key_val_list()` (L345-371): Convert dict-like to list of tuples
- `dict_from_cookiejar()` (L467-475): Extract cookies as dictionary
- `add_dict_to_cookiejar()` (L478-486): Add cookies from dictionary

### Header Processing
- `parse_list_header()` (L375-403): Parse RFC 2068 comma-separated lists
- `parse_dict_header()` (L407-438): Parse key-value header pairs
- `unquote_header_value()` (L442-464): Remove quotes from header values
- `parse_header_links()` (L914-948): Parse Link header format
- `check_header_validity()` (L1034-1042): Validate header format
- `_validate_header_part()` (L1045-1061): Internal header validation

### File & Archive Operations
- `guess_filename()` (L261-265): Extract filename from file objects
- `extract_zipped_paths()` (L268-302): Extract files from zip archives to temp locations
- `atomic_open()` (L305-315): Context manager for atomic file writing
- `rewind_body()` (L1081-1096): Reset file pointer for request body

### User Agent & Defaults
- `default_user_agent()` (L891-897): Generate default user agent string
- `default_headers()` (L900-911): Create default request headers

### Utility Functions
- `iter_slices()` (L581-588): Iterate string in fixed-size chunks
- `set_environ()` (L743-762): Temporary environment variable context manager
- `_parse_content_type_header()` (L514-536): Parse Content-Type header components
- `dotted_netmask()` (L697-705): Convert CIDR mask to dotted notation

## Key Dependencies
- External: `pip._vendor.urllib3.util`, `netrc`, `winreg` (Windows)
- Internal: `.compat`, `.certs`, `.cookies`, `.structures`, `.exceptions`, `._internal_utils`

## Architecture Patterns
- Heavy use of duck typing and hasattr() checks for object introspection
- Platform-specific code paths (Windows registry proxy handling)
- Defensive programming with extensive try/catch blocks
- Context managers for resource management and temporary state
- RFC compliance for HTTP/URI standards
- Backwards compatibility preservation through deprecated function warnings

## Critical Constraints
- Thread-safe operations for environment variable manipulation
- Memory-efficient streaming for large content processing  
- Atomic file operations to prevent corruption
- Proper encoding detection and handling for international content
- Security considerations for authentication and proxy bypass