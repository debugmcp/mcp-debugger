# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_loop.py
@source-hash: 855ffa08b7683e6d
@generated: 2026-02-09T18:01:40Z

## Purpose
Utility module providing iterator helpers that identify first/last elements during iteration. Part of Rich library's internal utilities for formatting and display logic.

## Key Functions

### `loop_first` (L6-15)
- **Purpose**: Marks the first element in an iteration
- **Signature**: `Iterable[T] -> Iterable[Tuple[bool, T]]`
- **Behavior**: Yields `(True, value)` for first element, `(False, value)` for all others
- **Edge case**: Returns immediately for empty iterables (L11-12)

### `loop_last` (L18-28)  
- **Purpose**: Marks the last element in an iteration
- **Signature**: `Iterable[T] -> Iterable[Tuple[bool, T]]`
- **Behavior**: Uses look-ahead strategy - yields `(False, value)` until final element, then `(True, final_value)`
- **Implementation**: Maintains `previous_value` buffer to detect when current item is last (L22-27)

### `loop_first_last` (L31-43)
- **Purpose**: Marks both first and last elements simultaneously  
- **Signature**: `Iterable[T] -> Iterable[Tuple[bool, bool, T]]`
- **Behavior**: Yields `(is_first, is_last, value)` tuples
- **Logic**: Combines both strategies - tracks `first` flag (L38-41) and uses look-ahead for last detection

## Type System
- Generic type `T` (L3) allows these functions to work with any iterable type
- All functions preserve the original element type while adding positional metadata

## Common Patterns
- All functions handle empty iterables gracefully with early returns
- Iterator exhaustion detection via `StopIteration` exception handling
- Look-ahead buffering pattern used in `loop_last` and `loop_first_last` to identify final elements

## Usage Context
These utilities are typically used in rendering/formatting scenarios where different styling or behavior is needed for boundary elements (first/last items in lists, tables, etc.).