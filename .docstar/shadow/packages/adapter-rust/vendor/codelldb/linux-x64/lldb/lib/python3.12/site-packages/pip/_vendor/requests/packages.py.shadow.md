# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/requests/packages.py
@source-hash: fd94030894c9f123
@generated: 2026-02-09T18:01:36Z

## Purpose and Responsibility

This file provides backward compatibility for the `requests` library by creating module aliases that expose vendored packages (`urllib3`, `idna`, `chardet`) under the `requests.packages` namespace. It allows legacy code to import these packages via `requests.packages.urllib3` etc. instead of their actual vendored locations.

## Key Components

### Package Aliasing Loop (L8-16)
- Iterates through `urllib3` and `idna` packages
- Creates local references to their vendored versions (`pip._vendor.{package}`)
- Performs sys.modules traversal to preserve module identities
- Ensures `requests.packages.urllib3.*` maps to actual `urllib3.*` modules

### Chardet Compatibility (L18-25)
- Conditionally handles `chardet` package if available (imported from `.compat`)
- Creates dual aliases: preserves original module name and creates normalized `chardet` alias
- Maps both `requests.packages.{original_name}` and `requests.packages.chardet.*` to the same modules

## Dependencies

- `sys.modules`: Core module registry manipulation
- `.compat.chardet`: Conditionally imported character detection library
- Vendored packages: `pip._vendor.urllib3`, `pip._vendor.idna`

## Architectural Decisions

- **Module Identity Preservation**: Ensures that `requests.packages.urllib3.HTTPSConnectionPool` is the exact same class as `urllib3.HTTPSConnectionPool`
- **Backward Compatibility**: Maintains legacy import paths while packages are vendored elsewhere
- **Dynamic Module Registration**: Uses runtime `sys.modules` manipulation rather than static imports
- **Conditional Chardet Handling**: Gracefully handles optional chardet dependency

## Critical Constraints

- Must preserve object identities across different import paths
- Depends on specific vendoring structure (`pip._vendor.{package}`)
- Chardet aliasing requires the package to be available via `.compat`
- Module traversal assumes consistent naming conventions for submodules