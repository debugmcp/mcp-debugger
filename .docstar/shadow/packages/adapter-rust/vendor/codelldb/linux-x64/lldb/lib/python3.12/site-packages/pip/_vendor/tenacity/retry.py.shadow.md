# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/tenacity/retry.py
@source-hash: 8ebcc3fe6c40e664
@generated: 2026-02-09T18:01:58Z

This module defines retry strategy classes for the Tenacity library, providing configurable conditions for when failed operations should be retried.

## Core Architecture

**Abstract Base**: `retry_base` (L25-37) defines the retry strategy interface with `__call__(retry_state) -> bool` method and logical operators (`__and__`, `__or__`) for composing strategies.

**Type Definition**: `RetryBaseT` (L39) union type allowing either `retry_base` instances or callable functions matching the signature.

## Built-in Strategies

**Basic Policies**:
- `retry_never` (L42-49): Always returns `False`, never retries
- `retry_always` (L52-59): Always returns `True`, retries indefinitely

## Exception-Based Strategies

**Core Exception Strategy**: `retry_if_exception` (L62-78) retries when a predicate function returns `True` for caught exceptions. Validates outcome state and extracts exceptions safely.

**Type-Based Exception Strategies**:
- `retry_if_exception_type` (L81-92): Retries on specific exception types using `isinstance()` check
- `retry_if_not_exception_type` (L95-106): Retries on all exceptions except specified types
- `retry_unless_exception_type` (L109-133): Retries until specific exception types occur, with special logic to always retry on success
- `retry_if_exception_cause_type` (L136-163): Recursively checks exception cause chain for matching types

**Message-Based Exception Strategies**:
- `retry_if_exception_message` (L198-226): Retries based on exact message match or regex pattern, with mutual exclusion validation
- `retry_if_not_exception_message` (L229-252): Inverted message matching with predicate negation

## Result-Based Strategies

**Result Value Strategies**:
- `retry_if_result` (L166-179): Retries when result value satisfies predicate
- `retry_if_not_result` (L182-195): Retries when result value fails predicate

## Composition Strategies

**Logical Combinators**:
- `retry_any` (L255-262): OR logic - retries if any constituent strategy returns `True`
- `retry_all` (L265-271): AND logic - retries only if all constituent strategies return `True`

## Key Dependencies

- `RetryCallState` from parent tenacity module (imported conditionally for type checking)
- Standard library: `abc`, `re`, `typing`

## Critical Invariants

1. All strategies expect `retry_state.outcome` to be set before calling, raising `RuntimeError` if `None`
2. Exception strategies validate that failed outcomes actually contain exceptions
3. Message-based strategies require either `message` OR `match` parameter, not both
4. Cause-type checking walks the entire exception cause chain until `None`