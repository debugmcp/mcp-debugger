# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/platformdirs/macos.py
@source-hash: c1fb6c6ecbeaea76
@generated: 2026-02-09T18:01:34Z

**Primary Purpose**: Implements macOS-specific directory path resolution following Apple's official filesystem guidelines. Part of the platformdirs library's cross-platform directory abstraction.

**Architecture**: Single concrete implementation class that extends the abstract base class API with macOS-specific path logic.

## Key Class

**MacOS (L11-126)**: Concrete implementation of `PlatformDirsABC` providing macOS directory paths according to Apple's filesystem programming guide.

## Directory Categories & Properties

**Data Directories**:
- `user_data_dir` (L24-26): `~/Library/Application Support/$appname/$version`
- `site_data_dir` (L29-43): System-wide data with Homebrew detection logic

**Config Directories**:
- `user_config_dir` (L46-48): Aliases to `user_data_dir` (macOS convention)
- `site_config_dir` (L51-53): Aliases to `site_data_dir`

**Cache Directories**:
- `user_cache_dir` (L56-58): `~/Library/Caches/$appname/$version`
- `site_cache_dir` (L61-75): System cache with Homebrew support

**State Directory**:
- `user_state_dir` (L78-80): Aliases to `user_data_dir`

**Log Directory**:
- `user_log_dir` (L83-85): `~/Library/Logs/$appname/$version`

**User Directories**:
- `user_documents_dir` (L88-90): `~/Documents`
- `user_downloads_dir` (L93-95): `~/Downloads`
- `user_pictures_dir` (L98-100): `~/Pictures`
- `user_videos_dir` (L103-105): `~/Movies`
- `user_music_dir` (L108-110): `~/Music`
- `user_desktop_dir` (L113-115): `~/Desktop`

**Runtime Directories**:
- `user_runtime_dir` (L118-120): `~/Library/Caches/TemporaryItems/$appname/$version`
- `site_runtime_dir` (L123-125): Aliases to `user_runtime_dir`

## Key Patterns

**Homebrew Detection**: Both `site_data_dir` and `site_cache_dir` detect Homebrew installations via `sys.prefix.startswith("/opt/homebrew")` and provide alternative paths under `/opt/homebrew/`.

**Multipath Support**: When `self.multipath` is enabled, site directories return colon-separated path lists combining Homebrew and standard system paths.

**Path Construction**: Uses inherited `_append_app_name_and_version()` method to append application-specific subdirectories to base paths.

## Dependencies

- `os.path`: Standard path operations and `expanduser()`
- `sys`: Python installation prefix detection for Homebrew
- `.api.PlatformDirsABC`: Abstract base class defining the interface

## Critical Invariants

- All user directories use `os.path.expanduser()` for tilde expansion
- Homebrew paths are only included when Python prefix matches `/opt/homebrew`
- Config and data directories share the same paths on macOS (following Apple conventions)
- State directory aliases to data directory (macOS has no separate state location)