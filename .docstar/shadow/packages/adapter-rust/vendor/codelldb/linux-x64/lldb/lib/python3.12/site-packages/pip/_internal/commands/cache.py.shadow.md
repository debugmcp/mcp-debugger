# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/commands/cache.py
@source-hash: c60efafd9144042e
@generated: 2026-02-09T18:01:09Z

## Purpose & Responsibility

This file implements the `pip cache` command functionality for inspecting and managing pip's wheel cache. It provides subcommands to view cache information, list cached packages, and remove cache items.

## Key Classes & Functions

### CacheCommand (L15-225)
Main command class inheriting from `pip._internal.cli.base_command.Command`. Implements cache management operations with 5 subcommands:

- **add_options()** (L39-49): Configures `--format` option for list output (human/abspath)
- **run()** (L51-81): Main entry point that dispatches to appropriate handler based on first argument
- **get_cache_dir()** (L83-87): Shows cache directory path
- **get_cache_info()** (L89-129): Displays comprehensive cache statistics including sizes and file counts
- **list_cache_items()** (L131-144): Lists cached wheels with optional glob pattern filtering
- **format_for_human()** (L146-157): Formats wheel list with sizes in human-readable format
- **format_for_abspath()** (L159-161): Outputs absolute paths only
- **remove_cache_items()** (L163-186): Removes wheels/HTTP files matching pattern
- **purge_cache()** (L188-192): Removes all cache items (delegates to remove with "*" pattern)

### Private Helper Methods

- **_cache_dir()** (L194-195): Constructs cache subdirectory paths
- **_find_http_files()** (L197-202): Locates HTTP cache files in both old and new locations
- **_find_wheels()** (L204-225): Finds wheel files with PEP 427-compliant pattern matching logic

## Dependencies & Architecture

- Extends `Command` base class from pip's CLI framework
- Uses `filesystem` utilities for file operations and size calculations
- Leverages `optparse.Values` for option handling
- Error handling via `CommandError` and `PipError` exceptions
- Logging through pip's internal logger system

## Key Patterns

**Command Dispatch Pattern**: Uses handler dictionary (L52-58) to map subcommand strings to methods
**Pattern Matching Logic**: Implements PEP 427 wheel filename parsing with intelligent hyphen detection (L215-223)
**Cache Structure**: Manages multiple cache types:
- `http-v2/` and `http/` for package index pages
- `wheels/` for locally built wheels

## Critical Invariants

- Requires `options.cache_dir` to be set (L60-62)
- Wheel pattern matching follows PEP 427 specification exactly
- HTTP cache includes both legacy (`http`) and current (`http-v2`) locations
- All operations validate argument counts before execution