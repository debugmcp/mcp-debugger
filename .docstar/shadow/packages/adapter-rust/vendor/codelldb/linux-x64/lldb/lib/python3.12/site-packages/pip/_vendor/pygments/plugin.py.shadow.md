# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/plugin.py
@source-hash: 8f5161df5d116d5d
@generated: 2026-02-09T18:01:33Z

## Purpose
Plugin discovery system for Pygments syntax highlighting library. Provides a unified interface to discover and load lexers, formatters, styles, and filters from installed packages using Python's entry point mechanism.

## Architecture
Implements a fallback strategy for entry point discovery across different Python versions and packaging systems:
1. `importlib.metadata` (Python 3.8+)
2. `importlib_metadata` backport (older Python versions)
3. `pkg_resources` (legacy fallback)
4. Empty list if all fail

## Constants (L41-44)
- `LEXER_ENTRY_POINT` = 'pygments.lexers'
- `FORMATTER_ENTRY_POINT` = 'pygments.formatters' 
- `STYLE_ENTRY_POINT` = 'pygments.styles'
- `FILTER_ENTRY_POINT` = 'pygments.filters'

## Core Functions

### `iter_entry_points(group_name)` (L47-68)
Central entry point discovery function with nested import fallbacks. Handles API differences between `importlib.metadata` versions:
- Uses `.select(group=group_name)` for Python 3.10+ (L64)
- Falls back to `.get(group_name, [])` for Python 3.8-3.9 (L68)

### Plugin Discovery Functions (L71-88)
- `find_plugin_lexers()` (L71-73): Returns lexer classes
- `find_plugin_formatters()` (L76-78): Returns (name, formatter_class) tuples
- `find_plugin_styles()` (L81-83): Returns (name, style_class) tuples  
- `find_plugin_filters()` (L86-88): Returns (name, filter_class) tuples

## Entry Point Configuration
Supports setuptools entry point configuration in `setup.py` or `pyproject.toml`:
- Lexers: `[pygments.lexers] name = module:Class`
- Formatters: `[pygments.formatters] name = module:Class` (supports `/ext` syntax for file extensions)
- Styles: `[pygments.styles] name = module:Class`
- Filters: `[pygments.filters] name = module:Class`

## Key Dependencies
- `importlib.metadata` / `importlib_metadata` for modern entry point discovery
- `pip._vendor.pkg_resources` as legacy fallback (note: vendored version)

## Error Handling
Graceful degradation - returns empty list if no plugin system is available, allowing Pygments to function with built-in components only.