# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/msgpack/__init__.py
@source-hash: 82c30fec94c40993
@generated: 2026-02-09T18:01:28Z

**Primary Purpose:** Main entry point and public API for the msgpack serialization library, providing high-level pack/unpack functions and automatic fallback between C extension and pure Python implementations.

**Key Components:**

- **Version Information (L7-8):** Defines version tuple `(1, 0, 8)` and string `__version__ = "1.0.8"`

- **Dynamic Implementation Selection (L11-17):** 
  - Checks `MSGPACK_PUREPYTHON` environment variable to force pure Python implementation
  - Attempts to import C extension `_cmsgpack` for `Packer`, `unpackb`, `Unpacker`
  - Falls back to pure Python `fallback` module on ImportError

- **High-Level Packing Functions:**
  - `pack(o, stream, **kwargs)` (L20-27): Packs object to stream using temporary Packer instance
  - `packb(o, **kwargs)` (L30-36): Packs object to bytes using temporary Packer instance

- **High-Level Unpacking Functions:**
  - `unpack(stream, **kwargs)` (L39-47): Reads entire stream and unpacks using `unpackb`
  - Note: Raises `ExtraData` exception for streams with trailing bytes

- **Compatibility Aliases (L50-55):** Provides JSON/pickle-style aliases:
  - `load = unpack`, `loads = unpackb` 
  - `dump = pack`, `dumps = packb`

**Dependencies:**
- `.exceptions` module (wildcard import for exception classes)
- `.ext` module for `ExtType` and `Timestamp` classes
- Conditional imports from `._cmsgpack` (C extension) or `.fallback` (pure Python)

**Architectural Pattern:** 
- Transparent C/Python fallback mechanism for performance optimization
- Thin wrapper layer over core Packer/Unpacker classes
- Standard serialization library interface compatible with JSON/pickle conventions

**Key Design Decisions:**
- Environment variable override for testing/debugging pure Python code
- Single-use Packer instances in convenience functions (trade memory for simplicity)
- Complete stream reading in `unpack()` rather than streaming approach