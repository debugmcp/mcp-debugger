# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/vcs/git.py
@source-hash: deda5cf4b400fc9e
@generated: 2026-02-09T18:01:32Z

## Git Version Control Adapter for pip

**Primary Purpose**: Implements Git VCS support for pip package installation from Git repositories. This module provides the `Git` class that inherits from `VersionControl` and handles cloning, updating, revision resolution, and URL parsing for Git-based dependencies.

### Key Components

**Git Class (L60-527)**: Main VCS adapter implementation
- `name = "git"` - VCS identifier
- `schemes` (L64-70) - Supported URL schemes: git+http, git+https, git+ssh, git+git, git+file
- `unset_environ` (L73) - Environment variables to clear for security

**Critical Methods**:

**Version & Revision Management**:
- `get_git_version()` (L94-105) - Parses Git version using `GIT_VERSION_REGEX`
- `get_revision()` (L427-436) - Gets commit SHA for given revision (defaults to HEAD)
- `get_revision_sha()` (L133-176) - Returns (sha, is_branch) tuple for branch/tag resolution
- `resolve_revision()` (L202-245) - Resolves revision to SHA, handles fetching if needed

**Repository Operations**:
- `fetch_new()` (L262-323) - Clones repository with optional partial clone for Git â‰¥2.17
- `update()` (L335-347) - Fetches and resets to target revision
- `switch()` (L325-333) - Changes remote URL and checks out revision
- `update_submodules()` (L488-494) - Updates Git submodules recursively

**Branch & Commit Analysis**:
- `get_current_branch()` (L108-130) - Returns current branch name or None for detached HEAD
- `is_commit_id_equal()` (L248-260) - Compares current commit with given name
- `has_commit()` (L411-424) - Checks if revision exists locally
- `is_immutable_rev_checkout()` (L80-92) - Determines if checkout is immutable (commit hash, not branch/tag)

**URL Processing**:
- `get_remote_url()` (L350-377) - Extracts remote URL, prefers 'origin'
- `_git_remote_to_pip_url()` (L380-408) - Converts Git URLs to pip-compatible format
- `get_url_rev_and_auth()` (L457-485) - Handles SSH shorthand and file:// schemes

**Utility Functions**:
- `get_subdirectory()` (L439-454) - Finds Python project root relative to repo root
- `get_repository_root()` (L497-519) - Gets Git repository root directory

### Regular Expressions

**GIT_VERSION_REGEX** (L30-36): Parses `git version X.Y.Z` output with optional patch version
**HASH_REGEX** (L38): Matches 40-character hex commit hashes  
**SCP_REGEX** (L41-53): Matches SSH shorthand syntax `user@host:path`

### Key Dependencies

- `pip._internal.vcs.versioncontrol.VersionControl` - Base VCS class
- `pip._internal.utils.subprocess.make_command` - Command construction
- `urllib.parse` - URL manipulation

### Architecture Notes

- Inherits VCS interface from `VersionControl` base class
- Registers itself via `vcs.register(Git)` (L527)
- Uses `run_command()` inherited method for all Git operations
- Implements pip's caching strategy by checking revision immutability
- Handles three URL formats: fully qualified, local paths, and SSH shorthand
- Environment isolation prevents user Git configuration interference