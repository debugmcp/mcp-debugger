# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/pygments/lexers/__init__.py
@source-hash: 583d6e224d849883
@generated: 2026-02-09T17:58:04Z

## Primary Purpose
Central module for Pygments lexer discovery, loading, and instantiation. Provides dynamic lexer registry with lazy loading, file type detection, and text analysis capabilities for syntax highlighting.

## Key Components

### Module-Level Constants and Caches
- **COMPAT** (L22-26): Backward compatibility mapping for renamed lexers
- **_lexer_cache** (L31): Runtime cache for loaded lexer classes  
- **_pattern_cache** (L32): Compiled regex pattern cache for filename matching

### Core Lexer Discovery Functions
- **find_lexer_class** (L65-81): Finds lexer class by exact name, with lazy loading from LEXERS mapping
- **find_lexer_class_by_name** (L83-107): Finds lexer by alias, searches built-in and plugin lexers
- **get_lexer_by_name** (L110-132): Returns instantiated lexer by alias with options

### File-Based Lexer Detection
- **find_lexer_class_for_filename** (L170-210): Multi-lexer filename pattern matching with text analysis scoring
- **get_lexer_for_filename** (L213-229): Returns instantiated lexer for filename
- **guess_lexer_for_filename** (L262-302): Sophisticated filename-based guessing with priority sorting

### Text Analysis and Guessing
- **guess_lexer** (L305-341): Primary text analysis function, tries vim modeline detection first, then iterates all lexers using analyse_text() scoring
- **get_lexer_for_mimetype** (L232-248): MIME type-based lexer discovery

### Utility Functions  
- **_fn_matches** (L35-40): Cached filename pattern matching using fnmatch
- **_load_lexers** (L43-48): Dynamic module loading and lexer class registration
- **get_all_lexers** (L51-62): Generator yielding all available lexer metadata
- **load_lexer_from_file** (L135-167): Custom lexer loading from arbitrary Python files (uses exec)

### Module System Integration
- **_automodule** class (L344-356): Custom module type enabling dynamic lexer imports via __getattr__
- **Module replacement** (L359-363): Replaces current module instance to enable lazy loading

## Key Dependencies
- **LEXERS mapping**: Central registry from _mapping module
- **find_plugin_lexers**: Plugin system integration  
- **get_filetype_from_buffer**: Vim modeline detection
- **guess_decode**: Text encoding detection

## Architecture Patterns
- **Lazy Loading**: Lexers loaded on-demand via _load_lexers()
- **Multi-tier Discovery**: Built-in lexers checked before plugins
- **Scoring System**: Text analysis returns confidence scores for lexer selection
- **Caching Strategy**: Both lexer classes and regex patterns cached for performance
- **Dynamic Module**: Module replacement enables attribute-based lexer access

## Critical Behaviors  
- Text analysis scoring: 1.0 = perfect match, triggers immediate return
- Filename patterns: Explicit patterns get 0.5 bonus over wildcards  
- Plugin lexers: Always checked after built-in lexers
- Error handling: Raises ClassNotFound for lookup failures