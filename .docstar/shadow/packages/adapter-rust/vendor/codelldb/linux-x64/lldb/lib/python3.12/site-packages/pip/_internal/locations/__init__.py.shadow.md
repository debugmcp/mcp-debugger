# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/locations/__init__.py
@source-hash: 51a031799fdff771
@generated: 2026-02-09T18:01:17Z

**Primary Purpose**: Cross-platform Python package installation path resolution with compatibility layer between distutils and sysconfig. Detects distribution-specific Python patching and handles edge cases for consistent package installation locations across different Python environments.

**Core Architecture**:
- **Configuration System**: `_should_use_sysconfig()` (L46-57) determines whether to use sysconfig (Python 3.10+) or distutils fallback based on `sysconfig._PIP_USE_SYSCONFIG` override
- **Dual Backend Pattern**: All public functions query both `_sysconfig` and `_distutils` modules, compare results, and handle mismatches with appropriate warnings/fallbacks

**Key Distribution Detection Functions**:
- `_looks_like_red_hat_lib()` (L101-112): Detects Red Hat's lib64 platlib patching via LRU cache
- `_looks_like_debian_scheme()` (L116-120): Identifies Debian's additional "deb_system"/"unix_local" schemes  
- `_looks_like_slackware_scheme()` (L144-156): Catches Slackware's inconsistent lib64 sysconfig vs site module patching
- `_looks_like_msys2_mingw_scheme()` (L160-174): Handles MSYS2's lowercase "lib" and missing "site-packages" paths

**Primary Public Interface**:
- `get_scheme()` (L230-394): Master function returning `Scheme` object with comprehensive fallback logic and platform-specific exception handling
- `get_bin_prefix()` (L397-405), `get_bin_user()` (L408-409): Binary installation directory resolution
- `get_purelib()` (L429-440), `get_platlib()` (L443-456): Pure Python vs platform-specific library paths

**Critical Path Resolution Logic** (L230-394):
- Compares sysconfig vs distutils paths for each scheme key
- Implements 8+ special case handlers for known distribution bugs:
  - PyPy site-packages naming (L270-279)
  - macOS framework headers (L284-292) 
  - Red Hat lib64 patches (L296-297)
  - BPO-44860 platlib bug (L303-312)
  - Linux system path variations (L328-337)

**Mismatch Handling**:
- `_warn_if_mismatch()` (L204-208): Logs path discrepancies at configurable severity
- `_log_context()` (L212-227): Provides diagnostic context for debugging
- Deprecation warnings for distutils config file usage (L377-386)

**Dependencies**: 
- Internal: `pip._internal.models.scheme.Scheme`, `_sysconfig`/`_distutils` modules
- External: `sysconfig`, `distutils`, `pathlib` for cross-platform path handling
- Platform detection via `pip._internal.utils.compat.WINDOWS`

**Key Constants**:
- `_PLATLIBDIR` (L41): Platform library directory from `sys.platlibdir`
- `_USE_SYSCONFIG_DEFAULT` (L43): Version-based sysconfig preference
- `_MISMATCH_LEVEL` (L71-73): Logging severity for path mismatches