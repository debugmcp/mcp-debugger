# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/color.py
@source-hash: 6c24404d57517b92
@generated: 2026-02-09T18:01:55Z

## Color System and Terminal Color Management

Core module for handling terminal color definitions, parsing, and system compatibility in Rich's color architecture.

### Key Enums

**ColorSystem (L21-34)**: Defines 4 terminal color systems with increasing capability:
- STANDARD (1): Basic 16 ANSI colors
- EIGHT_BIT (2): 256-color palette  
- TRUECOLOR (3): 24-bit RGB colors
- WINDOWS (4): Windows-specific color handling

**ColorType (L36-47)**: Mirrors ColorSystem but for internal color classification (DEFAULT=0 added).

### Core Data Structures

**ANSI_COLOR_NAMES (L49-285)**: Comprehensive mapping of named colors to ANSI color numbers (0-255). Includes standard colors ("red"→1), bright variants ("bright_red"→9), and extended 256-color palette names ("deep_sky_blue4"→25). Both "grey" and "gray" spellings supported.

**Color (L303-568)**: Primary color representation as NamedTuple with:
- `name`: Original input string
- `type`: ColorType classification  
- `number`: ANSI color number (0-255) or None
- `triplet`: RGB values for truecolor or None

### Key Methods

**Color.parse() (L432-482)**: Main color parsing entry point with LRU cache. Handles:
- Named colors via ANSI_COLOR_NAMES lookup
- Hex format: "#rrggbb" 
- Color numbers: "color(n)" where n=0-255
- RGB tuples: "rgb(r,g,b)" where components ≤255
- Special "default" color
- Raises ColorParseError for invalid input

**Color.get_truecolor() (L349-378)**: Converts any color to RGB triplet using terminal theme. Handles DEFAULT colors by returning theme foreground/background.

**Color.downgrade() (L513-568)**: Reduces color to simpler system:
- TRUECOLOR→EIGHT_BIT: Uses HLS color space conversion, special grayscale handling (L521-531)
- Any→STANDARD: Maps to closest 16 basic colors via palette matching
- Maintains color name but changes type/number

**Color.get_ansi_codes() (L484-510)**: Generates ANSI escape sequences for terminal output, handling foreground/background and all color systems.

### Utility Functions

**parse_rgb_hex() (L571-577)**: Converts 6-character hex string to ColorTriplet
**blend_rgb() (L580-591)**: Linear interpolation between two RGB colors

### Dependencies

Imports color palettes from `._palettes`, ColorTriplet from `.color_triplet`, terminal theme system from `.terminal_theme`. Uses colorsys.rgb_to_hls for color space conversion in downgrade operations.

### Color Regex Pattern

**RE_COLOR (L292-299)**: Matches three formats:
1. Hex: `#[0-9a-f]{6}`
2. Color number: `color([0-9]{1,3})`  
3. RGB tuple: `rgb([\d\s,]+)`

### Demo Section (L594-621)

Includes standalone demo that displays color table with names, numbers, hex values, and RGB for all ANSI colors (excludes "grey" variants to avoid duplication).