# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/_wrap.py
@source-hash: 1654aca26e445f42
@generated: 2026-02-09T18:01:42Z

## Text Wrapping Utility Module

**Primary Purpose**: Provides text wrapping and line breaking functionality for terminal/console applications, handling Unicode and complex text layouts with cell-based width calculations.

**Core Components**:

- **re_word regex (L9)**: Compiled pattern `r"\s*\S+\s*"` for matching words with optional surrounding whitespace
- **words() function (L12-23)**: Generator yielding tuples of (start_index, end_index, word) for each word in text, including trailing whitespace
- **divide_line() function (L26-78)**: Core algorithm that determines optimal break positions for wrapping text within specified cell width

**Key Algorithm (divide_line)**:
- Takes text string, target width in cells, and optional fold parameter
- Returns list of character indices where line breaks should be inserted
- Handles three scenarios:
  1. Word fits in remaining space: continue on current line
  2. Word too long for any line: either fold across multiple lines or crop
  3. Word fits on next line: break at word boundary

**Dependencies**:
- `._loop.loop_last`: Iterator utility for detecting last iteration
- `.cells.cell_len`: Measures text width in terminal cells (handles Unicode)
- `.cells.chop_cells`: Splits text to fit within cell width constraints

**Notable Patterns**:
- Cell-based width measurement (not character count) for proper Unicode/CJK support
- Folding vs cropping strategies for oversized words controlled by fold parameter
- Optimized local variable caching (`_cell_len = cell_len`, L42)
- Word boundary preservation for readable text wrapping

**Test/Demo Code (L81-93)**: Contains example usage with Japanese text demonstrating Unicode handling capabilities