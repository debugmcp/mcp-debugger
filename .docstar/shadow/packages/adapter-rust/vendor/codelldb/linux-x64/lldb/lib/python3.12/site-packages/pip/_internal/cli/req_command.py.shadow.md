# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/req_command.py
@source-hash: 0ea78586650cb3aa
@generated: 2026-02-09T18:01:08Z

## RequirementCommand Base Class

This module provides the `RequirementCommand` base class for pip commands that handle package requirements. It's separated to avoid unnecessary imports of `PackageFinder` machinery for commands that don't need it.

### Key Components

**RequirementCommand (L78-329)** - Abstract base class extending `IndexGroupCommand` that provides core functionality for commands dealing with package requirements:
- Adds `--no-clean` option to preserve temporary directories
- Factory methods for creating resolvers and preparers
- Requirement parsing from various sources (args, files, editables)
- Package finder creation with appropriate configuration

**with_cleanup decorator (L50-75)** - Manages temporary directory cleanup behavior:
- Configures temp directory registry based on `--no-clean` option
- Handles `PreviousBuildDirError` exceptions by preserving directories
- Controls deletion of build environments, wheel caches, and requirement builds

### Core Methods

**determine_resolver_variant (L84-90)** - Static method that selects between "legacy" and "resolvelib" resolvers based on deprecated features configuration.

**make_requirement_preparer (L92-145)** - Class method factory for `RequirementPreparer` instances:
- Configures lazy wheel downloading for "fast-deps" feature
- Sets up build isolation, hash checking, and progress reporting
- Handles resolver-specific configuration

**make_resolver (L147-204)** - Class method factory for `BaseResolver` instances:
- Creates appropriate resolver based on variant ("resolvelib" vs "legacy")
- Configures dependency handling, upgrade strategies, and Python version constraints
- Uses dynamic imports to avoid circular dependencies

**get_requirements (L206-290)** - Parses command-line arguments into `InstallRequirement` objects:
- Processes constraint files, direct arguments, editable requirements, and requirement files
- Enables hash checking when any requirement has hash options
- Validates that at least one requirement is provided

**trace_basic_info (L292-301)** - Static utility for logging package finder search locations.

**_build_package_finder (L303-329)** - Creates configured `PackageFinder` instances with:
- Link collection from session and options
- Selection preferences for yanked packages, format control, prereleases
- Target Python version compatibility

### Constants

**KEEPABLE_TEMPDIR_TYPES (L43-47)** - Defines which temporary directory types should be preserved when `--no-clean` is used.

### Dependencies

Critical imports include resolver components, requirement constructors, package finder machinery, and temporary directory management. The design uses lazy imports for resolver variants to avoid loading unused code paths.