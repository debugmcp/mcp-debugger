# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/version.py
@source-hash: f695e476e721bdef
@generated: 2026-02-09T18:01:42Z

## Primary Purpose
Python package version parsing and comparison library implementing multiple versioning schemes: PEP-440 (normalized), legacy (setuptools-compatible), and semantic versioning. Provides version classes for parsing and matcher classes for constraint evaluation.

## Core Architecture

### Base Classes
- **Version (L30-77)**: Abstract base class for all version implementations
  - `parse()` method must be implemented by subclasses
  - Provides comparison operators (`__eq__`, `__lt__`, etc.)
  - `is_prerelease` property (abstract)
- **Matcher (L79-177)**: Abstract base for version constraint matching
  - `version_class` attribute links to corresponding Version class
  - `_operators` dict maps constraint operators to functions/methods
  - `match()` method evaluates version against constraints

### PEP-440 Implementation (Normalized)
- **NormalizedVersion (L256-290)**: PEP-440 compliant version parsing
  - Uses `_pep_440_key()` (L184-250) for normalization
  - Stores `_release_clause` for prefix matching
  - `PREREL_TAGS` set defines prerelease identifiers
- **NormalizedMatcher (L303-388)**: Sophisticated constraint matching
  - Custom operator methods (`_match_*`) handle complex PEP-440 semantics
  - `_adjust_local()` (L318-330) manages local version components
  - `_match_compatible()` (L375-387) implements `~=` operator

### Legacy Implementation (Distribute-compatible)
- **LegacyVersion (L614-627)**: Uses `_legacy_key()` (L588-611)
- **LegacyMatcher (L629-648)**: Basic constraint matching with compatible operator

### Semantic Versioning Implementation
- **SemanticVersion (L685-692)**: Uses `_semantic_key()` (L664-682)
- **SemanticMatcher (L694-696)**: Inherits base Matcher functionality

## Key Utilities

### Version Normalization/Suggestion
- **`_suggest_normalized_version()` (L461-569)**: Complex regex-based normalization for non-standard version strings
- **`_suggest_semantic_version()` (L415-458)**: Converts arbitrary strings to semantic version format
- **`_match_prefix()` (L292-300)**: Utility for prefix-based version matching

### Regex Patterns
- **`PEP440_VERSION_RE` (L179-181)**: Comprehensive PEP-440 version regex
- **`_SEMVER_RE` (L655-657)**: Semantic version regex
- **`_REPLACEMENTS` (L390-402)** and **`_SUFFIX_REPLACEMENTS` (L404-410)**: Normalization patterns

### Scheme Management
- **VersionScheme (L698-734)**: Wrapper class linking version/matcher/suggester
- **`_SCHEMES` (L737-743)**: Registry of available schemes
- **`get_scheme()` (L748-751)**: Factory function for scheme retrieval

## Dependencies
- `logging`: For warning messages
- `re`: Extensive regex usage for version parsing
- `.compat.string_types`: Python 2/3 compatibility
- `.util.parse_requirement`: Requirement string parsing

## Critical Patterns
1. **Tuple-based comparison**: All versions converted to tuples for consistent ordering
2. **Operator dispatch**: Matchers use operator strings to lookup comparison functions
3. **Local version handling**: Special logic in NormalizedMatcher for local version components
4. **Prefix matching**: Used for wildcard constraints (e.g., "1.2.*")
5. **Normalization fallback**: Suggestion functions attempt to salvage malformed versions

## Invariants
- Version parsing must produce comparable tuples
- Matcher operators must handle both Version instances and string inputs
- All schemes must provide validation methods
- Prerelease detection must be consistent within each scheme