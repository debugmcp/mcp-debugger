# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/importlib/_dists.py
@source-hash: b01d9e87076acac8
@generated: 2026-02-09T17:57:55Z

## Primary Purpose
Distribution metadata abstraction layer for pip's importlib-based metadata backend. Provides concrete implementations for reading package metadata from wheels, directories, and metadata files.

## Key Classes

### WheelDistribution (L36-93)
Custom `importlib.metadata.Distribution` implementation for wheel files. Eagerly loads all metadata into memory instead of keeping ZipFile handles open, addressing performance constraints of the standard lazy implementation.

Key methods:
- `from_zipfile()` (L55-73): Class method that extracts metadata from wheel ZipFile
- `read_text()` (L81-92): Reads metadata file content with UTF-8 decoding and error handling
- `iterdir()` (L75-79): Lists metadata directory contents

### Distribution (L95-228)
Main distribution wrapper implementing `BaseDistribution` interface. Wraps `importlib.metadata.Distribution` with additional pip-specific functionality.

Construction methods:
- `from_directory()` (L106-110): Creates from filesystem directory
- `from_metadata_file_contents()` (L112-127): Creates from raw metadata bytes using temp directory
- `from_wheel()` (L129-136): Creates from wheel file using WheelDistribution

Core properties:
- `canonical_name` (L168-171): Normalized package name using fast directory parsing or metadata fallback
- `version` (L174-175): Parsed version object
- `location` (L138-142): Package installation location
- `info_location` (L144-148): Metadata directory location

Metadata access methods:
- `read_text()` (L193-197): Reads metadata file content
- `iter_entry_points()` (L199-201): Yields package entry points
- `iter_dependencies()` (L217-228): Yields requirements with extras support
- `iter_provided_extras()` (L211-215): Yields available extras
- `iter_distutils_script_names()` (L184-191): Yields distutils script names

## Key Dependencies
- `importlib.metadata`: Standard library metadata interface
- `pip._vendor.packaging`: Package name/version parsing and normalization
- `pip._internal.metadata.base`: Base distribution interfaces
- `pip._internal.utils.wheel`: Wheel parsing utilities

## Notable Patterns
- Performance optimization: WheelDistribution eagerly loads metadata to avoid keeping file handles open
- Fast path optimization: `_get_dist_name_from_location()` (L156-166) extracts name from directory structure before reading metadata
- Error handling: Proper exception chaining for invalid wheels and encoding errors
- Temp directory management: Uses globally managed temp directories for metadata file processing

## Critical Constraints
- WheelDistribution requires all metadata to fit in memory
- Distribution objects expect specific metadata directory naming conventions (.dist-info/.egg-info)
- UTF-8 encoding assumed for all metadata text content
- Distutils scripts only accessible from filesystem-based distributions (not zip-based)