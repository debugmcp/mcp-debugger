# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/packaging/_manylinux.py
@source-hash: 5e8e15d0f673f2c6
@generated: 2026-02-09T18:01:37Z

## Purpose

Generates manylinux compatibility tags for Python package distribution by analyzing system architecture, ELF binaries, and glibc versions. Part of pip's packaging infrastructure for determining which Linux wheel files are compatible with the current system.

## Key Components

### ELF Binary Analysis (L14-70)

**Constants (L14-16)**: ARM ABI detection flags for hard-float detection
- `EF_ARM_ABIMASK`, `EF_ARM_ABI_VER5`, `EF_ARM_ABI_FLOAT_HARD`

**`_parse_elf(path)` (L21-27)**: Context manager that safely parses ELF files, yielding `ELFFile` or `None` on failure

**Architecture Detection Functions**:
- `_is_linux_armhf(executable)` (L30-42): Detects ARM hard-float ABI by examining ELF flags
- `_is_linux_i686(executable)` (L45-52): Detects i686 architecture from ELF machine type
- `_have_compatible_abi(executable, archs)` (L55-69): Main ABI compatibility checker supporting armv7l, i686, and standard 64-bit architectures (x86_64, aarch64, ppc64, ppc64le, s390x, loongarch64, riscv64)

### glibc Version Detection (L72-178)

**`_LAST_GLIBC_MINOR` (L77)**: Default dictionary assuming max minor version of 50 for future glibc major versions

**`_GLibCVersion` (L80-82)**: NamedTuple for structured glibc version representation

**Version String Retrieval**:
- `_glibc_version_string_confstr()` (L85-101): Primary method using `os.confstr("CS_GNU_LIBC_VERSION")`
- `_glibc_version_string_ctypes()` (L104-145): Fallback using ctypes to call `gnu_get_libc_version`
- `_glibc_version_string()` (L148-150): Orchestrates both methods

**`_parse_glibc_version(version_str)` (L153-169)**: Regex-based parser handling non-standard version suffixes, warns on parse failures

**`_get_glibc_version()` (L172-177)**: Cached entry point returning parsed glibc version tuple

### Manylinux Compatibility (L180-262)

**`_is_compatible(arch, version)` (L181-204)**: Core compatibility logic checking:
1. System glibc version against required version
2. Optional `_manylinux` module hooks for custom compatibility
3. Legacy compatibility functions for specific versions (manylinux1/2010/2014)

**`_LEGACY_MANYLINUX_MAP` (L207-214)**: Maps glibc versions to legacy manylinux tag names

**`platform_tags(archs)` (L217-262)**: Main public function generating compatible manylinux tags:
- Validates ABI compatibility first
- Sets architecture-specific minimum glibc versions
- Generates comprehensive tag list from current glibc down to minimum supported
- Yields both modern `manylinux_X_Y_arch` and legacy tag formats

## Dependencies

- `_elffile`: ELF binary parsing (EIClass, EIData, ELFFile, EMachine)
- Standard library: collections, contextlib, functools, os, re, sys, warnings, typing

## Architecture Notes

- Uses fallback pattern for glibc detection (confstr â†’ ctypes)
- Implements comprehensive backward compatibility through version enumeration
- Handles architecture-specific minimum glibc requirements
- Supports both modern versioned tags and legacy named tags