# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/operations/install/wheel.py
@source-hash: c2c8435009f1b8f5
@generated: 2026-02-09T17:58:01Z

**Purpose**: Core wheel package installation functionality for pip, handling the complete process of unpacking, installing, and recording wheel files.

## Key Functions

### File Installation & Management
- `install_wheel()` (L714-735): Main entry point for wheel installation with error context handling
- `_install_wheel()` (L424-703): Core installation logic handling file extraction, script generation, and record keeping
- `rehash()` (L80-84): Generates SHA256 hash and file size for RECORD entries
- `fix_script()` (L94-111): Replaces generic `#!python` shebangs with actual Python executable path

### Entry Points & Scripts
- `get_entrypoints()` (L118-126): Extracts console_scripts and gui_scripts from distribution metadata
- `get_console_script_specs()` (L273-345): Handles special pip/setuptools versioning logic with ENSUREPIP_OPTIONS support
- `message_about_scripts_not_on_PATH()` (L129-198): Generates PATH warnings for installed scripts

### File System Operations
- `ZipBackedFile` (L348-386): Handles extraction of files from wheel zip to filesystem with executable bit preservation
- `ScriptFile` (L388-398): Wrapper for script files that applies shebang fixes during installation
- Path conversion utilities: `_record_to_fs_path()` (L227-228), `_fs_to_record_path()` (L231-238)

### RECORD Management
- `get_csv_rows_for_installed()` (L241-270): Updates RECORD file entries for installed/changed/generated files
- `_normalized_outrows()` (L201-224): Normalizes and sorts RECORD entries for deterministic output
- `csv_io_kwargs()` (L87-91): Provides consistent CSV file handling parameters

### Custom Classes
- `PipScriptMaker` (L416-421): Extends distlib.ScriptMaker with entry point validation
- `MissingCallableSuffix` (L400-407): Exception for invalid script entry points
- `req_error_context()` (L705-711): Context manager for wrapping installation errors

## Installation Flow
1. Parse wheel metadata and determine library directory (purelib vs platlib)
2. Process files into categories: root scheme, data scheme, script scheme
3. Handle entry point detection and script wrapper filtering
4. Extract all files with path traversal protection
5. Generate console/GUI scripts using distlib
6. Compile Python files to bytecode if enabled
7. Create installation metadata files (INSTALLER, DIRECT_URL, REQUESTED)
8. Update and write RECORD file with all changes

## Key Dependencies
- Uses `distlib` for script generation and entry point parsing
- Integrates with pip's metadata system (`FilesystemWheel`, `get_wheel_distribution`)
- Relies on pip's filesystem utilities for safe operations

## Security Features
- Path traversal protection via `assert_no_path_traversal()` (L476-484)
- Safe file replacement using temporary files and atomic operations
- Proper file permissions handling including umask consideration