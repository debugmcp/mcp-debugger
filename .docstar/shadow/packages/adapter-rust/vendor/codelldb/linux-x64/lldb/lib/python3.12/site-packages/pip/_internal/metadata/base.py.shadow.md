# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/metadata/base.py
@source-hash: 7edd0ae573602381
@generated: 2026-02-09T18:01:25Z

## Purpose
Base abstraction layer for Python package distribution metadata handling. Defines protocols and base classes for introspecting installed packages, reading their metadata, and managing their files. Core component of pip's internal metadata system.

## Key Classes & Protocols

**BaseEntryPoint (L49-61)** - Protocol defining entry point interface with name, value, and group properties.

**BaseDistribution (L99-580)** - Core protocol for distribution objects with extensive metadata access:
- Factory methods: `from_directory()` (L100), `from_metadata_file_contents()` (L109), `from_wheel()` (L127)
- Location properties: `location` (L147), `installed_location` (L183), `info_location` (L196), `editable_project_location` (L161)
- Installation type detection: `installed_by_distutils` (L212), `installed_as_egg` (L225), `installed_with_setuptools_egg_info` (L237), `installed_with_dist_info` (L255)
- Metadata access: `metadata` (L386), `metadata_dict` (L399), `direct_url` (L291), `requires_python` (L422)
- Dependencies: `iter_dependencies()` (L440), `iter_raw_dependencies()` (L448), `iter_provided_extras()` (L452)
- File listing: `iter_declared_entries()` (L493), with RECORD (L464) and legacy installed-files.txt (L472) support
- Egg-info support: `_iter_requires_txt_entries()` (L509), `_iter_egg_info_dependencies()` (L544)

**BaseEnvironment (L582-665)** - Abstract environment for distribution discovery:
- Factory methods: `default()` (L586), `from_paths()` (L590)
- Distribution access: `get_distribution()` (L593), `iter_all_distributions()` (L610), `iter_installed_distributions()` (L631)
- Filtering capabilities for local-only, editable, user-site installations

**Wheel Protocols:**
- **Wheel (L667-672)** - Base protocol with `as_zipfile()` method
- **FilesystemWheel (L674-680)** - File-based wheel implementation
- **MemoryWheel (L682-688)** - In-memory wheel implementation

## Key Functions

**_convert_installed_files_path() (L63-90)** - Converts legacy installed-files.txt paths to modern RECORD format using path part manipulation to handle relative paths and symlinks correctly.

## Data Structures

**RequiresEntry (L93-97)** - NamedTuple for parsed requirements with requirement string, extra name, and marker.

**InfoPath (L44)** - Type alias for string or PurePath representing info directory paths.

## Dependencies
- `pip._vendor.packaging.*` for requirement/version parsing
- `pip._internal.exceptions.NoneMetadataError` for metadata errors
- `pip._internal.models.direct_url` for PEP 610 direct URL metadata
- `pip._internal.utils.*` for path normalization and compatibility

## Architectural Patterns
- Protocol-based design enabling multiple backend implementations
- Cached properties for expensive metadata operations (L385)
- Fallback chains for reading different metadata formats (RECORD vs installed-files.txt)
- Legacy format compatibility with modern standardized approaches
- Extensive validation and error handling for malformed distributions (L617-629)