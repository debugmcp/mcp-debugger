# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/progress_bar.py
@source-hash: 2f88f0f04e906ffc
@generated: 2026-02-09T18:01:54Z

## Purpose
Visual progress bar component for Rich console library, rendering customizable progress bars with support for pulse animations, completion tracking, and various styling options.

## Core Class

**ProgressBar (L18-208)**: Main progress bar implementation extending `JupyterMixin`
- Renders both determinate progress bars (with total) and indeterminate pulse animations
- Supports customizable styling, width, and animation timing
- Handles both ASCII and Unicode character rendering

## Key Methods

**`__init__` (L33-56)**: Constructor accepting total, completed, width, pulse mode, and style configurations
- Default total of 100.0, supports None for indeterminate progress
- Style parameters for background, complete, finished, and pulse states
- Optional animation timing override

**`percentage_completed` property (L60-67)**: Calculates completion percentage
- Returns None for indeterminate bars (total=None)
- Clamps result between 0-100%

**`_get_pulse_segments` (L69-114)**: LRU-cached pulse animation segment generator
- Creates 20-character pulse pattern with color blending
- Handles different color systems and ASCII fallback
- Uses cosine wave for smooth color transitions

**`update` (L116-124)**: Updates progress values
- Modifies completed value and optionally total

**`_render_pulse` (L126-154)**: Renders animated pulse effect
- Uses monotonic time for smooth animation
- Applies 15x speed multiplier and segment cycling
- Handles width scaling and segment repetition

**`__rich_console__` (L156-198)**: Main Rich rendering method
- Switches between pulse and determinate rendering
- Handles half-character precision using Unicode box-drawing characters
- Applies appropriate styling based on completion state

**`__rich_measure__` (L200-207)**: Measurement method for Rich layout system
- Returns fixed width if specified, otherwise 4 to max_width range

## Dependencies
- Rich framework components: Console, Segment, Style, Color system
- Math utilities for cosine calculations and color blending
- Time utilities for animation timing

## Key Constants
- `PULSE_SIZE = 20` (L15): Number of characters in pulse animation cycle

## Architecture Patterns
- Rich protocol implementation (`__rich_console__`, `__rich_measure__`)
- LRU caching for expensive pulse segment generation
- Style inheritance from console theme system
- Unicode/ASCII rendering compatibility

## Critical Invariants
- Completed value clamped to [0, total] range in rendering
- Pulse mode automatically enabled when total=None
- Half-character rendering precision using box-drawing characters
- Animation timing based on monotonic clock unless overridden