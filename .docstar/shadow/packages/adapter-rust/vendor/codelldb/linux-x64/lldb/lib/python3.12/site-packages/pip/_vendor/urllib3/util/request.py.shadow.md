# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/request.py
@source-hash: 0b4394b76b5c53a2
@generated: 2026-02-09T17:58:02Z

## Purpose
HTTP request utility module providing header generation and file-like body positioning for urllib3. Handles common HTTP header creation patterns and manages request body rewinding for redirects/retries.

## Key Functions

### `make_headers()` (L20-89)
Convenience function for generating common HTTP request headers. Supports:
- Connection keep-alive headers
- Accept-encoding with flexible input (boolean, list, or string)
- User-agent strings
- Basic authentication (Authorization header with base64 encoding)
- Proxy basic authentication (Proxy-Authorization header)
- Cache control no-cache headers

Returns dictionary with lowercase header names as keys.

### `set_file_position()` (L92-107)
Manages file-like object positioning for request bodies. If position provided, calls `rewind_body()`. Otherwise attempts to record current position via `tell()` for future use. Returns position or `_FAILEDTELL` sentinel on tell() failure.

### `rewind_body()` (L110-137)
Rewinds file-like request body to specified position using `seek()`. Critical for handling redirects and retries where request body needs to be replayed. Raises `UnrewindableBodyError` on seek failure or if position was previously failed to be recorded.

## Constants

- `SKIP_HEADER` (L12): Sentinel value "@@@SKIP_HEADER@@@" for skipping automatic header emission
- `SKIPPABLE_HEADERS` (L13): Frozenset of headers that can be skipped: accept-encoding, host, user-agent
- `ACCEPT_ENCODING` (L15): Default "gzip,deflate" encoding preference
- `_FAILEDTELL` (L17): Sentinel object indicating failed tell() operation

## Dependencies

- `base64.b64encode`: For basic auth header encoding
- `..exceptions.UnrewindableBodyError`: Custom exception for body rewind failures  
- `..packages.six`: Compatibility layer providing `b()` and `integer_types`

## Key Patterns

- Defensive programming with hasattr/getattr checks for file-like operations
- Sentinel objects for distinguishing failed operations from None values
- Lowercase header names for consistency
- Base64 encoding for HTTP basic authentication following RFC standards