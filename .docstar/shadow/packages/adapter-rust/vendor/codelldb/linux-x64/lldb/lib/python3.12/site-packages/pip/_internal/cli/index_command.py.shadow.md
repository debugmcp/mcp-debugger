# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/index_command.py
@source-hash: 1a658bf36ce9cd2e
@generated: 2026-02-09T18:01:06Z

## Purpose
Base classes and utilities for pip CLI commands that interact with package indexes and network resources. Implements lazy imports to avoid loading heavy networking dependencies for commands that don't always require network access.

## Key Components

### `_create_truststore_ssl_context()` (L27-42)
- Creates SSL context using truststore for Python 3.10+
- Raises `CommandError` for unsupported Python versions
- Returns `None` if ssl or truststore modules unavailable
- Uses `truststore.SSLContext(ssl.PROTOCOL_TLS_CLIENT)`

### `SessionCommandMixin` (L45-132)
- Mixin providing session management for network-enabled commands
- Inherits from `CommandContextMixIn`
- Key methods:
  - `_get_index_urls()` (L54-66): Extracts index URLs from options, returns None for empty lists
  - `get_default_session()` (L68-76): Lazy session creation with context management
  - `_build_session()` (L78-132): Constructs configured `PipSession` with SSL, proxies, auth, timeouts

### Session Configuration (L78-132)
- Cache directory validation (must be absolute path)
- Conditional truststore SSL context creation with certifi fallback
- Proxy configuration (sets both http/https, disables trust_env)
- Authentication setup (prompting control, keyring provider)
- Timeout and retry configuration from options

### `_pip_self_version_check()` (L135-138)
- Wrapper function for pip version checking functionality
- Imports check function lazily to avoid loading overhead

### `IndexGroupCommand` (L141-172)
- Abstract base combining `Command` and `SessionCommandMixin`
- Represents commands with index_group options that support version checking
- `handle_pip_version_check()` (L148-172): Performs version check with network timeouts and truststore fallback

## Dependencies
- `pip._internal.cli.base_command.Command`
- `pip._internal.cli.command_context.CommandContextMixIn`
- `pip._internal.network.session.PipSession` (lazy import)
- `pip._vendor.truststore` (optional, lazy import)

## Architectural Patterns
- Lazy imports to minimize startup time for non-network commands
- Mixin pattern for composable session management
- Context manager pattern for resource cleanup
- Fallback mechanisms for SSL context creation
- Type checking imports isolated with TYPE_CHECKING guard