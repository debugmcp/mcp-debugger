# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/urllib3/util/proxy.py
@source-hash: cd4bcf3c226ba7a7
@generated: 2026-02-09T17:57:59Z

**Purpose**: Provides proxy connection utilities for urllib3, specifically handling HTTP tunnel requirements and SSL context creation for proxy connections.

**Key Functions**:

- `connection_requires_http_tunnel()` (L4-34): Determines whether a proxy connection requires an HTTP CONNECT tunnel based on proxy configuration and destination scheme
  - Returns `False` for no proxy (L18-19), HTTP destinations (L22-23), or HTTPS proxies with forwarding enabled (L26-31)
  - Returns `True` for all other cases requiring tunneling (L34)
  - Parameters: proxy_url (URL object), proxy_config (ProxyConfig from poolmanager), destination_scheme (string)

- `create_proxy_ssl_context()` (L37-56): Creates SSL context for proxy connections with certificate validation
  - Wraps `create_urllib3_context()` from ssl_ module with resolved SSL version and certificate requirements
  - Auto-loads default certificates when no custom CA configuration provided (L49-55)
  - Parameters: ssl_version, cert_reqs, optional CA certificate sources

**Dependencies**:
- Imports SSL utilities from `.ssl_` module: `create_urllib3_context`, `resolve_cert_reqs`, `resolve_ssl_version` (L1)

**Key Logic Patterns**:
- Tunneling decision logic follows priority: no proxy → HTTP destination → HTTPS forwarding → default tunnel
- SSL context creation uses defensive programming with hasattr check for `load_default_certs` compatibility (L53)
- Function signatures use default None values for optional proxy/SSL parameters