# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/commands/list.py
@source-hash: 46068857890df9e3
@generated: 2026-02-09T18:01:11Z

**Primary Purpose**
Implements `pip list` command functionality for listing installed packages with various filtering and formatting options.

**Key Classes & Functions**

- `_DistWithLatestInfo` (L22-32): TYPE_CHECKING-only class extending `BaseDistribution` with `latest_version` and `latest_filetype` attributes for outdated package tracking
- `ListCommand` (L38-311): Main command class inheriting from `IndexGroupCommand`
  - `add_options()` (L49-135): Configures CLI options including `--outdated`, `--uptodate`, `--editable`, `--format`, etc.
  - `run()` (L164-203): Main execution logic with option validation and package filtering pipeline
  - `get_outdated()` (L205-212): Filters packages with newer versions available
  - `get_uptodate()` (L214-221): Filters packages at latest version
  - `get_not_required()` (L223-235): Filters packages that aren't dependencies of other installed packages
  - `iter_packages_latest_infos()` (L237-273): Fetches latest version info from PyPI for each package
  - `output_package_listing()` (L275-294): Dispatches to format-specific output methods
  - `output_package_listing_columns()` (L296-310): Renders tabular output with headers and separators

**Standalone Functions**
- `format_for_columns()` (L313-355): Transforms package data into tabular format with dynamic columns
- `format_for_json()` (L358-375): Serializes package data to JSON format

**Key Dependencies**
- `pip._internal.metadata.get_environment()`: Package discovery interface
- `pip._internal.index.package_finder.PackageFinder`: PyPI version lookup
- `pip._internal.utils.misc.tabulate()`: Table formatting utility
- `pip._vendor.packaging.utils.canonicalize_name()`: Package name normalization

**Architecture Patterns**
- Command pattern with option-driven execution flow
- Lazy imports for heavy index modules (L148-149) to optimize startup time
- Functional filtering pipeline: base packages → not_required → outdated/uptodate → output
- Type casting pattern using `_DistWithLatestInfo` to add runtime attributes to distribution objects

**Critical Constraints**
- `--outdated` and `--uptodate` are mutually exclusive (L165-166)
- `freeze` format incompatible with `--outdated` option (L168-171)
- `get_not_required()` must execute before other filters to maintain dependency graph accuracy (L190-195)
- Package name canonicalization required for dependency matching (L227, L177)