# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/cli/cmdoptions.py
@source-hash: d17c87635090f6d1
@generated: 2026-02-09T18:01:17Z

## pip CLI Command Options

This module defines shared command-line options and option groups for pip's CLI interface. It follows a design pattern where options are defined once but not instantiated globally to avoid state persistence between multiple parsing operations.

### Core Architecture

**Option Definition Pattern**: Uses `functools.partial` to create option factory functions that can be called to create fresh Option instances, preventing state leakage between CLI parsings (L4-7).

**Custom Option Types**: 
- `PipOption` class (L110-115) extends `optparse.Option` with custom types:
  - `path` type: expands user paths via `_path_option_check` (L102-103)  
  - `package_name` type: canonicalizes names via `_package_name_option_check` (L106-107)

### Key Utility Functions

- `raise_option_error` (L36-47): Standardized error reporting for option parsing failures
- `make_option_group` (L50-59): Creates OptionGroup from dict specifications
- `check_dist_restriction` (L62-100): Validates platform/interpreter constraint combinations
- `make_target_python` (L653-661): Creates TargetPython objects from parsed options

### Major Option Categories

**General Options** (L121-297):
- Core flags: `help_`, `debug_mode`, `isolated_mode`, `verbose`, `quiet`  
- Network: `proxy`, `retries`, `timeout`, `cert`, `client_cert`
- Caching: `cache_dir`, `no_cache` with custom handler `_handle_no_cache_dir` (L688-715)

**Index/Repository Options** (L339-403):
- `index_url`, `extra_index_url`, `no_index`, `find_links`, `trusted_host`

**Installation Control** (L405-674):
- Requirements: `constraints`, `requirements`, `editable`
- Format control: `no_binary`/`only_binary` with mutual exclusion logic (L474-529)
- Platform targeting: `platforms`, `python_version`, `implementation`, `abis`

**Build System Options** (L800-879):
- PEP 517 support: `use_pep517`/`no_use_pep517` with validation (L765-798)
- Build configuration: `config_settings`, `build_options`, `global_options`

### Complex Option Handlers

**Python Version Processing** (L548-609):
- `_convert_python_version` parses version strings like "3", "37", "3.7.3"
- `_handle_python_version` validates and stores parsed versions

**Hash Verification** (L910-957):
- `_handle_merge_hash` parses "algo:digest" format and validates against `STRONG_HASHES`
- Supports cryptographic verification of package integrity

**Config Settings** (L821-852):
- `_handle_config_settings` parses KEY=VALUE pairs for PEP 517 backends
- Handles multiple values per key as lists

### Option Groups

**Predefined Groups** (L1035-1074):
- `general_group`: Common options for all commands
- `index_group`: Package index configuration options

### Feature Flags

**Experimental Features** (L1002-1015): `use_new_feature` with choices like "fast-deps", "truststore"
**Deprecated Features** (L1017-1028): `use_deprecated_feature` for backward compatibility
**Always Enabled Features** (L998-1000): Tracks features that are now permanently enabled

### Dependencies

- Uses `pip._vendor.packaging.utils` for name canonicalization
- Integrates with pip's internal models: `FormatControl`, `TargetPython`, `PyPI`
- Leverages pip's exception system via `CommandError`
- Hash validation via `pip._internal.utils.hashes.STRONG_HASHES`