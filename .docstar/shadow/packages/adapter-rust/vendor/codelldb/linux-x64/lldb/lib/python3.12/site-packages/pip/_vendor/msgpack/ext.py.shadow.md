# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/msgpack/ext.py
@source-hash: 7caa74d01a832e35
@generated: 2026-02-09T18:01:29Z

## Purpose
MessagePack extension type support module providing ExtType and Timestamp classes for handling msgpack's extension data types and timestamp encoding/decoding.

## Key Classes

### ExtType (L6-16)
Immutable namedtuple representing msgpack extension types with code-data pairs.
- Inherits from `namedtuple("ExtType", "code data")`
- Constructor validates: `code` must be int 0-127, `data` must be bytes
- Used to represent arbitrary extension data in msgpack format

### Timestamp (L19-168)
Immutable timestamp class representing msgpack timestamp extension type (-1).
- **Slots**: `seconds`, `nanoseconds` (L29) - memory optimization
- **Constructor** (L31-51): Validates int types, nanoseconds < 10^9
- **Equality/Hash** (L57-68): Standard value object pattern

## Core Serialization Methods

### Binary Format Conversion
- `from_bytes()` (L70-95): Deserializes 32/64/96-bit msgpack timestamp formats
  - 4 bytes: timestamp32 (seconds only)
  - 8 bytes: timestamp64 (packed seconds + nanoseconds)
  - 12 bytes: timestamp96 (separate nanoseconds + seconds)
- `to_bytes()` (L97-116): Serializes to minimal msgpack format based on value ranges

### Unix Timestamp Conversion
- `from_unix()` (L118-127): Creates from float/int unix timestamp
- `to_unix()` (L129-135): Returns float unix timestamp
- `from_unix_nano()` (L137-144): Creates from nanosecond precision int
- `to_unix_nano()` (L146-152): Returns nanosecond precision int

### DateTime Integration
- `from_datetime()` (L162-168): Creates from Python datetime object
- `to_datetime()` (L154-160): Returns UTC datetime object

## Dependencies
- `collections.namedtuple`: Base for ExtType
- `struct`: Binary pack/unpack for timestamp serialization
- `datetime`: DateTime conversion utilities

## Architecture Notes
- Designed for dual use: pure Python and Cython implementations
- Immutable value objects with proper equality semantics
- Optimized binary encoding with three timestamp formats
- Follows msgpack timestamp specification with extension type code -1