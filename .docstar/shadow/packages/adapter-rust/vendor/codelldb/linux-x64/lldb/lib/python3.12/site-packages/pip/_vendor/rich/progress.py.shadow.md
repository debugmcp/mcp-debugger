# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/rich/progress.py
@source-hash: 3f4db18bb4f651ad
@generated: 2026-02-09T18:02:02Z

## Primary Purpose

Rich's progress display module providing customizable progress bars, task tracking, and file I/O wrappers with progress monitoring. Core functionality includes real-time progress visualization, multi-task management, and progress-aware file operations.

## Key Classes and Functions

### Progress Class (L1049-1635)
Main progress display controller managing multiple tasks and rendering progress bars.

**Key methods:**
- `__init__()` (L1065): Configure columns, refresh rate, console, threading options
- `add_task()` (L1583): Create new progress task, returns TaskID for updates
- `update()` (L1400): Modify task state (completed, total, description, visibility)
- `advance()` (L1500): Increment task progress by specified amount
- `track()` (L1179): Generator wrapping iterables with automatic progress tracking
- `wrap_file()` (L1220): Create progress-aware file reader wrapper
- `open()` (L1294): Open files with progress tracking (supports text/binary modes)
- `start()/stop()` (L1156/1161): Control progress display lifecycle

### Task Class (L923-1047)  
Dataclass representing individual progress task state and calculations.

**Key properties:**
- `completed/total` (L940/937): Current and target progress values
- `percentage` (L1002): Calculated completion percentage  
- `speed` (L1011): Steps per second based on progress samples
- `time_remaining` (L1029): ETA calculation using current speed
- `elapsed` (L988): Time since task start
- `finished` (L997): Completion status flag

### Progress Columns (L495-912)
Abstract base `ProgressColumn` (L495) with concrete implementations:
- `TextColumn` (L604): Formatted text display using task data
- `BarColumn` (L634): Visual progress bar with customizable styles
- `SpinnerColumn` (L554): Animated spinner for indeterminate progress
- `TaskProgressColumn` (L688): Percentage display with speed option
- `TimeRemainingColumn` (L760): ETA display with compact option
- `DownloadColumn` (L853): File size progress (bytes transferred/total)
- `TransferSpeedColumn` (L902): Data transfer speed display

### File I/O Wrappers
- `_Reader` (L173-271): BinaryIO wrapper tracking read operations for progress
- `_TrackThread` (L63-101): Background thread for periodic progress updates
- `_ReadContext` (L273-292): Context manager coordinating progress and file operations

### Utility Functions
- `track()` (L103): Standalone function creating temporary progress display for sequences
- `wrap_file()` (L294): Standalone file wrapper with progress
- `open()` (L409): Standalone file opener with progress tracking

## Dependencies and Architecture

**Core dependencies:**
- Rich console system (`Console`, `Live`, `Table`, `Text`) for rendering
- Threading (`Thread`, `RLock`, `Event`) for concurrent progress updates  
- Standard I/O (`BinaryIO`, `TextIO`, file operations) for progress-aware reading
- Time tracking via configurable callable (defaults to `Console.get_time`)

**Key architectural patterns:**
- Column-based rendering system allowing custom progress display components
- Thread-safe task management with RLock protection
- Sample-based speed calculation using rolling window (1000 samples, configurable period)
- Context manager protocol for automatic cleanup
- Generic typing support for type-safe iteration tracking

## Critical Invariants

- TaskID uniqueness enforced by atomic increment (L1622)
- Thread safety via `_lock` (RLock) on all task state modifications
- Progress samples automatically pruned by time window (speed_estimate_period)
- Task completion automatically detected when `completed >= total` (L1452, L1523)
- File readers maintain original I/O interface while injecting progress updates