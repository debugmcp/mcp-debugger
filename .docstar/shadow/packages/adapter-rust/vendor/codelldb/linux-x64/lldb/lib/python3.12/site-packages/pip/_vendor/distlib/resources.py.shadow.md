# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_vendor/distlib/resources.py
@source-hash: 2f06cf92c7340352
@generated: 2026-02-09T18:01:36Z

## Purpose
Package resource management system for distlib, providing unified access to files within Python packages regardless of whether they're stored in the filesystem or zip archives.

## Core Components

### ResourceCache (L27-69)
Caching layer that stores extracted resources on disk for faster access. Key methods:
- `is_stale()` (L34-43): Always returns True (cache invalidation disabled)
- `get()` (L45-68): Extracts resource to cache directory and returns file path

### Resource Classes
**Resource (L77-108)**: Represents individual files within packages
- `as_stream()` (L85-92): Returns new stream each call
- `bytes` (L101-103): Cached property returning file content
- `size` (L105-107): Cached property returning file size  
- `file_path` (L94-99): Cached property providing local file path via ResourceCache

**ResourceContainer (L110-116)**: Represents directories/packages
- `resources` (L113-115): Cached property listing contained resources

### Resource Finders
**ResourceFinder (L118-206)**: Base finder for filesystem-based resources
- `find()` (L154-164): Locates and returns Resource/ResourceContainer instances
- `iterator()` (L187-205): Recursively yields all resources in package tree
- `skipped_extensions` (L123-126): Platform-specific files to ignore (.pyc, .pyo, .class on Jython)

**ZipResourceFinder (L208-284)**: Specialized finder for zip-based packages  
- Uses `bisect` module for efficient zip directory searching
- Overrides path handling and resource extraction methods
- `_files` (L217-220): Accesses zip directory cache with PyPy compatibility

## Registry System
- `_finder_registry` (L286-303): Maps loader types to finder classes
- `register_finder()` (L306-307): Allows registration of custom finders
- `finder()` (L313-335): Factory function returning appropriate finder for package
- `finder_for_path()` (L341-357): Creates finder for arbitrary filesystem paths

## Key Dependencies
- `bisect`: Binary search for zip file entries
- `pkgutil`: Import system integration
- `zipimport`: Zip file loader access
- Local: `DistlibException`, `cached_property`, `get_cache_base`, `Cache`

## Architecture Notes
- Factory pattern for finder selection based on loader type
- Lazy initialization of global cache (L24, L96-98)
- Caching at multiple levels: finder cache, resource properties, file cache
- Cross-Python version compatibility (2.x/3.x path handling)
- Platform-specific file filtering (Jython vs CPython)

## Critical Invariants
- Cache always reports stale (L42-43) - forces resource refresh
- Resource paths are always normalized via `_adjust_path()`
- Zip resources use prefix-stripped paths for internal operations
- Package-only operation (modules without `__path__` rejected)