# packages/adapter-rust/vendor/codelldb/linux-x64/lldb/lib/python3.12/site-packages/pip/_internal/utils/urls.py
@source-hash: a9c7923996f995b3
@generated: 2026-02-09T18:01:22Z

## Purpose
URL/path conversion utility for pip's internal operations. Handles bidirectional conversion between file system paths and file: URLs with cross-platform compatibility.

## Key Functions

### path_to_url(path: str) -> str (L9-16)
Converts filesystem path to file: URL format. Normalizes and makes path absolute before URL encoding. Uses `urllib.parse.urljoin` with "file:" scheme and `urllib.request.pathname2url` for proper URL quoting.

### url_to_path(url: str) -> str (L19-55)
Converts file: URL back to filesystem path. Includes comprehensive platform-specific handling:
- **Validation**: Asserts URL starts with "file:" scheme (L23-25)
- **Authority handling**: Supports localhost and empty netloc (L29-31)
- **Windows UNC support**: Prepends "\\\\" for network paths (L32-34)
- **Non-local rejection**: Raises ValueError for remote file URIs on non-Windows (L36-38)
- **Windows drive letter fix**: Strips leading slash from parsed Windows paths like "/C:/Users/foo" (L45-53)

## Dependencies
- `os`: Path normalization and manipulation
- `string`: ASCII letter detection for Windows drive letters
- `urllib.parse`: URL parsing and joining
- `urllib.request`: URL/pathname conversion utilities
- `.compat.WINDOWS`: Platform detection flag

## Platform Considerations
Windows-specific logic handles:
1. UNC path notation for network shares
2. Drive letter parsing quirks where urlsplit adds unwanted leading slashes
3. Distinction between UNC paths (with netloc) and local drive paths

## Architectural Notes
- Pure utility functions with no state
- Defensive programming with assertions and explicit error messages
- RFC 8089 compliance for file URI handling
- Cross-platform compatibility as core design principle